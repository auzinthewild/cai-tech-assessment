const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pe-wasm-Co3DzcyP.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/ElevationLayer-tg13fuWy.js","assets/ArcGISCachedService-DFdn3gk2.js","assets/TileInfoTilemapCache-BjgsXL_k.js","assets/TilemapCache-B2MwOBiN.js","assets/ByteSizeUnit-BsxeN7wM.js","assets/memoryEstimations-DNZZYa0W.js","assets/WorkerHandle-DYFweDLE.js","assets/layersCreator-g6TyJUcC.js","assets/loadUtils-DZMaEDKY.js","assets/fetchService-DKXZ-wvj.js","assets/associatedFeatureServiceUtils-_skB2vFf.js","assets/lazyLayerLoader-CJrVS4Zz.js","assets/portalLayers-B1Bs-j34.js","assets/arcgisLayers-BL8Hwe5a.js","assets/statsWorker-CcP9e-k7.js","assets/utils-WRhWRUeQ.js","assets/quantizationUtils-lBCeXHgz.js","assets/utils-D8unkgY2.js","assets/ClassBreaksDefinition-CuF3B11a.js","assets/geometryEngineWorker-CA-tZxOm.js","assets/geometryEngineJSON-Bvf5zUh7.js","assets/geometryEngineBase-B0ZyeKAX.js","assets/json-Wa8cmqdu.js","assets/CSVSourceWorker-Bq9aZDLf.js","assets/date-Ctp1FiBW.js","assets/OptimizedFeature-Wdzvz_RS.js","assets/OptimizedGeometry-D1c4VXq1.js","assets/executeQueryForSnapping-BfVjDcTT.js","assets/queryUtils-YabzyT1H.js","assets/QueryEngine-BNSYkjyE.js","assets/featureConversionUtils-BKIFVv7M.js","assets/OptimizedFeatureSet-Blu9Ckm7.js","assets/WhereClauseCache-C6U5AiEK.js","assets/WhereClause-DXZifWBB.js","assets/TimeOnly-7j8pbXTD.js","assets/timeSupport-DRCFb0zT.js","assets/QueryEngineCapabilities-B_pTbIiR.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-CZ8FxDMO.js","assets/FeatureStore-B-4kfkZZ.js","assets/BoundsStore-BXRIQL-D.js","assets/PooledRBush-BBDe-4Ln.js","assets/optimizedFeatureQueryEngineAdapter-N5ZrzqZi.js","assets/number-C8cbfZY8.js","assets/clientSideDefaults-JY9QME8M.js","assets/EdgeProcessingWorker-CnznGfFs.js","assets/workerHelper-Dw0Lyjeg.js","assets/InterleavedLayout-CywznV5L.js","assets/BufferView-BAKm8lM6.js","assets/types-D0PSWh4d.js","assets/edgeProcessing-CDfcfuHA.js","assets/deduplicate-9-c3DjF1.js","assets/Indices-WzUbROAI.js","assets/VertexAttribute-Cq4MnHjR.js","assets/glUtil-D7tECgUe.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/Normals-DxED4XxU.js","assets/ElevationSamplerWorker-QJug6tce.js","assets/MeshLocalVertexSpace-DpsGpulq.js","assets/vertexSpaceConversion-BhakcGKf.js","assets/mat3f64-q3fE-ZOt.js","assets/mat4f64-Dk4dwAN8.js","assets/spatialReferenceEllipsoidUtils-CtcklnpT.js","assets/computeTranslationToOriginAndRotation-Jzpu1684.js","assets/projectPointToVector-CtQBWbqi.js","assets/meshVertexSpaceUtils-Bh3E5IUh.js","assets/vec3-EGlxm7fl.js","assets/vec4-DFWJXbn2.js","assets/FeatureServiceSnappingSourceWorker-BRJ8PPa4.js","assets/symbologySnappingCandidates-0GXGRrCI.js","assets/pbfQueryUtils-BuQgB9la.js","assets/pbf-uzxG4kCt.js","assets/query-C2z9ljLE.js","assets/GeoJSONSourceWorker-DknN0wzV.js","assets/geojson-CpSOdQRu.js","assets/sourceUtils-sdxp5qcU.js","assets/MemorySourceWorker-BPzqFUv8.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-DDy7cuvn.js","assets/dehydratedFeatures-CbPTJL93.js","assets/FeaturePipelineWorker-CtgJ3k_C.js","assets/AttributeStore-Bsax3nDN.js","assets/Utils-BfpGjSIo.js","assets/BoundingBox-uWwExSKL.js","assets/UpdateTracking2D-CxNqU3Vp.js","assets/CIMSymbolHelper-KQUTW_Dc.js","assets/BidiEngine-QXap_35O.js","assets/fontUtils-BcsZUgy2.js","assets/GeometryUtils-C3qVu2bB.js","assets/rasterizingUtils-DOJQ0Cbl.js","assets/floatRGBA-Dp2ynPz3.js","assets/Rect-CUzevAry.js","assets/streamLayerUtils-CKwt2uXH.js","assets/MeshWriterRegistry-CeQiPMjM.js","assets/TechniqueType-uMFRS8dR.js","assets/PieChartMeshWriter-CuHA67R-.js","assets/TurboLine-DA3hpequ.js","assets/utils-lmjbw4fa.js","assets/earcut-D9gy186-.js","assets/grouping-ddHCDWeF.js","assets/QueueProcessor-Bw5QgC_m.js","assets/operatorGeodeticDensify-CKue5zeG.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-Cx5cjE6F.js","assets/ogcFeatureUtils-4cLeSK83.js","assets/parquet-XHBwCcMq.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-Ch9kkohz.js","assets/PointCloudWorker-Y4fFKtbw.js","assets/quat-B21gfu5u.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-nZdmKIgz.js","assets/PointCloudUniqueValueRenderer-EgbpWaES.js","assets/I3SBinaryReader-4J13YVT0.js","assets/orientedBoundingBox-Dg68T2Bd.js","assets/plane-DurDNCN7.js","assets/RasterWorker-2pc68pD2.js","assets/dataUtils-BMoSgxXL.js","assets/RasterSymbolizer-nJ2i1lrA.js","assets/rasterFunctionHelper--e4RqSbo.js","assets/rasterProjectionHelper-CsuehLkV.js","assets/PolynomialTransform-C80IqcyU.js","assets/SceneLayerSnappingSourceWorker-Cq51MJj5.js","assets/lineSegment-BTrMNegg.js","assets/sphere-DapQrIES.js","assets/Octree-C6Dp4MpA.js","assets/SceneLayerWorker-CwzDOrLw.js","assets/projectVectorToVector-DQu5kVj_.js","assets/I3SUtil-gPPWVH5k.js","assets/edgeUtils-CHYqya80.js","assets/NormalAttribute.glsl-POeisI_N.js","assets/glsl-BH37Aalp.js","assets/ShaderOutput-DnYY5J1_.js","assets/BindType-BBwFZqyN.js","assets/WFSSourceWorker-Cn7ywko_.js","assets/wfsUtils-D_VeDBqq.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-CGWVjhdB.js","assets/enums-BRzLM11V.js","assets/config-BOD8--da.js","assets/StyleDefinition-Dzwnqd5g.js","assets/SourceLayerData-8lp5k4RK.js","assets/StyleRepository-zcF-JB3X.js","assets/Feature3DPipelineWorker-CW9XvpSS.js","assets/HUDMaterial.glsl-JyJxYimt.js","assets/Geometry-Db3jsefs.js","assets/renderState-DlM8zIQ_.js","assets/basicInterfaces-CZwQPxTp.js","assets/boundedPlane-bxeINP7p.js","assets/requestImageUtils-B1qn2PBp.js","assets/TextureFormat-1mYWTFa-.js","assets/triangle-B6JbHCjD.js","assets/HUDMaterial-CbyYANpN.js","assets/VertexArrayObject-9PSwqtji.js","assets/dehydratedFeatureUtils-vo3Z4Kc3.js","assets/doublePrecisionUtils-B0owpBza.js","assets/hydratedFeatures-Dp-4FhLm.js","assets/ShaderBuilder-BX9e9tCB.js","assets/IntersectorInterfaces-CmNINbyF.js","assets/DefaultMaterial-D8pH8rma.js","assets/LodResources-DhleajQ2.js","assets/TextureCompressionWorker-C2BsO9gR.js","assets/Popup-DgLO9ALE.js","assets/unitFormatUtils-3lNMzSLK.js","assets/quantityUtils-DCHwvUmu.js","assets/AttachmentInfo-DjLsVxS7.js","assets/featureUtils-CtJcvo4a.js","assets/executeQueryJSON-BBBiaAR5.js","assets/shared-qFsoCfOA.js","assets/NetworkElement-DEyL1qWM.js","assets/ReactiveSet-EQpzntz7.js","assets/layerViewUtils-CpsnNMAH.js","assets/arcadeUtils-D3dVBoA3.js","assets/arcade-B6OSxXLK.js","assets/unitConversion-DUPmsKf5.js","assets/ImmutableArray-BPVd6ESQ.js","assets/geometryServiceUtils-g1q3noXf.js","assets/project-CuLNB0Ib.js","assets/webglDeps-NIshmyIl.js","assets/FramebufferObject-8ji-MKc7.js","assets/ProgramTemplate-tEGshxb0.js","assets/NestedMap-GuqgquCN.js","assets/mapViewDeps-BgTWW0Dx.js","assets/FeatureCommandQueue-Bu2soHLA.js","assets/GraphShaderModule-B8GIXRGP.js","assets/WGLContainer-CmfkVdS6.js","assets/Container-D-OW-45n.js","assets/SDFHelper-gT-9OvRb.js","assets/OverrideHelper-DJFotDXO.js","assets/GridShader-BpXjXU4N.js","assets/testSVGPremultipliedAlpha-BCVGYUuc.js","assets/RenderingContext-BBzAI5BM.js","assets/CIMResourceManager-Bpac41Y6.js","assets/utils-CH2iWqsu.js","assets/VertexStream-CTiM3bfY.js","assets/utils-ehcGqGxa.js","assets/GraphicsView2D-IKKNEYCM.js","assets/GraphicContainer-BuO8alPW.js","assets/AGraphicContainer-PiNbwmvG.js","assets/TechniqueInstance-_8oLlSvm.js","assets/TileContainer-C49UXGe2.js","assets/gridUtils-d-Fsi9I2.js","assets/geodesicUtils-DcpvdE7c.js","assets/TileLayerView2D-C6-uilRT.js","assets/imageUtils-B99uHP6F.js","assets/BitmapTechnique-DJHDKZtO.js","assets/LayerView-BudDYdCY.js","assets/HighlightGraphicContainer-CESnk_L1.js","assets/RefreshableLayerView-7SC6lbNF.js","assets/MapServiceLayerViewHelper-D42nBbS0.js","assets/drapedUtils-B9HTIPID.js","assets/popupUtils-FdwCOtIC.js","assets/FeatureLayerView2D-BjRroi5m.js","assets/timeSupport-8mESspTz.js","assets/AttributeBinsFeatureSet-BpQ5x7N3.js","assets/AttributeBinsQuery-BE5_jElD.js","assets/constants-B4mRqufT.js","assets/BaseDynamicLayerView2D-CCsV96Wm.js","assets/BitmapContainer-IsC5f1MG.js","assets/ExportStrategy-BinN1g5-.js","assets/CatalogLayerView2D-D4raCNfR.js","assets/CatalogDynamicGroupLayerView2D-BiTdc1bd.js","assets/CatalogFootprintLayerView2D-BGoxViOC.js","assets/GeoRSSLayerView2D-BFSnII-n.js","assets/GraphicsLayerView2D-DUIcrXzW.js","assets/GroupLayerView2D-CZ3kBI6m.js","assets/ImageryLayerView2D-rRV4UNJ7.js","assets/RasterVFDisplayObject-rQhG9b87.js","assets/ImageryTileLayerView2D-DN6DVyeA.js","assets/rasterFieldUtils-C4OMmmX_.js","assets/rasterUtils-D74kMs-G.js","assets/RawBlockCache-C__lvWu2.js","assets/KMLLayerView2D-BEEuUVVp.js","assets/kmlUtils-BKI5jFLq.js","assets/KnowledgeGraphLayerView2D-CXL_0NGf.js","assets/MapImageLayerView2D-B06Ww192.js","assets/MapNotesLayerView2D-O6YRqaBS.js","assets/MediaLayerView2D-C1EU5o2I.js","assets/mediaLayerUtils-BUz7Xi84.js","assets/OverlayContainer-kmtR9url.js","assets/OGCFeatureLayerView2D-DLfqkI1V.js","assets/RouteLayerView2D-BIdDHVQH.js","assets/Stop-B-xMXj1t.js","assets/networkEnums-DnGXTVVz.js","assets/StreamLayerView2D-BRc7ps9A.js","assets/SubtypeGroupLayerView2D-C-udo2cf.js","assets/VectorTileLayerView2D-BwE8QlbJ.js","assets/VideoLayerView2D-DYpyqkJ0.js","assets/GraphicsLayer-WExKZDXT.js","assets/TelemetryDisplay-BNPS0FZi.js","assets/WMSLayerView2D-C5i_7CJq.js","assets/ExportWMSImageParameters-CGOrpeuq.js","assets/WMTSLayerView2D-CrPEMbhf.js","assets/apng-BmJvEp3D.js","assets/index-BnkLrfPs.js","assets/index-BIJM5S-Y.js","assets/guid-BDWAkmkV.js","assets/useT9n-B8lS-eZw.js","assets/index-DZcWOJe1.js","assets/dom-y9dN0d7n.js","assets/observers-DLnVK6Kv.js","assets/logger-BzltBYts.js","assets/customElement-Cqv8nDNZ.js","assets/ref-C7uSBrn1.js","assets/static-CNeI8Pbd.js","assets/form-Bbgza4lR.js","assets/interactive-BY-7k7lC.js","assets/label-CnycTmSn.js","assets/component-DnSoz04r.js","assets/layersLoader-Bt9qThag.js","assets/jsonContext-MeFKsc2Z.js","assets/featureLayerUtils-CbHtLCtx.js","assets/originUtils-D69mHv66.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw.js","assets/utils-Brb4YKjQ.js","assets/saveUtils-BKMKzvae.js","assets/FeatureLayerSource-DYI_jrr4.js","assets/External-pHQLQ9Qq.js","assets/MeshTransform-DhbF1sKn.js","assets/axisAngleDegrees-CexSbNj_.js","assets/editingSupport-CnffEq4u.js","assets/QueryTask-qb8lux9l.js","assets/executeForIds-5-YMIbFJ.js","assets/customElement-DcdL8QWj.js","assets/customElement-D96ja0dD.js","assets/keyed-CxUuWKZE.js","assets/customElement-DbYIqRpr.js","assets/customElement-B1o7I8Ko.js","assets/ExpandToggle-CJNZLYGc.js","assets/resources7-BlIPMGGt.js","assets/resources2-C0GO_l0j.js","assets/debounce-DbkufipY.js","assets/customElement-Ds7zrC14.js","assets/customElement-B535Z37d.js","assets/array-CItZ4bXf.js","assets/key-ak3_eHKH.js","assets/customElement-28ISmfpP.js","assets/customElement-DTMSaIDo.js","assets/locale-s9NCZ3Zl.js","assets/openCloseComponent-DMa3ieup.js","assets/resources4-CS_NtZ-4.js","assets/customElement-BaW-DdxG.js","assets/repeat-BtoTDcta.js","assets/floating-ui-B5GlgjiN.js","assets/floating-ui.utils.dom-BUW1h90u.js","assets/Validation-DDmfS1rY.js","assets/escapeRegExp-CdLjXKbf.js","assets/customElement-DSHNdRZl.js","assets/text-sHvX1eoe.js","assets/customElement-b7sr0cPZ.js","assets/utils4-BPuihCty.js","assets/global-BPDJypNs.js","assets/customElement-C76G5vBg.js","assets/Heading-vwIN5B3W.js","assets/customElement-Cr076y8U.js","assets/sortableComponent-DcctxQH5.js","assets/customElement-BvnVRsEJ.js","assets/customElement-CjKyL2R8.js","assets/customElement-B2caN8nB.js","assets/customElement-CFqduKVm.js","assets/responsive-BwNbrFTK.js","assets/index-CaCkR99s.js","assets/customElement-C4dSFRJ5.js","assets/customElement-aCrlYhJ1.js","assets/customElement-CLzvbaDq.js","assets/customElement-BChYFJI3.js","assets/math-xemqatnM.js","assets/throttle-CQXZGPS6.js","assets/customElement-DRu_jKdQ.js","assets/customElement-B1oYDGYC.js","assets/customElement-CWmunMYz.js","assets/live-DeMO0f4J.js","assets/core-Cxbbqyjy.js","assets/filter-l9EctlAf.js","assets/utils3-C-zFebpm.js","assets/customElement-DbjulYVa.js","assets/customElement-_eQiAyQ4.js","assets/customElement-D8I7lj7z.js","assets/date-vPLQ79tU.js","assets/utils2-BhfyBDnE.js","assets/customElement-BxL3hRSL.js","assets/customElement-CexKHU4y.js","assets/customElement-BF4Vs_-c.js","assets/customElement-3z2nPzUK.js","assets/interact.min-iNRM8XgC.js","assets/dynamicClasses-Dlk4kLaw.js","assets/resources3-DRKYpY8O.js","assets/useFocusTrap-BixAgXnA.js","assets/index-MBQN_6jT.js","assets/index-CVDvUcnY.js","assets/resources6-C-XXGpuo.js","assets/customElement-Hld3HwJf.js","assets/customElement-CZixkNAd.js","assets/customElement-BVipwgcT.js","assets/index-6-Oq11xS.js","assets/customElement-UtXu6HOx.js","assets/customElement-Bpf6Y2ZG.js","assets/customElement-Jp2EiZT7.js","assets/customElement-CDfqB3ah.js","assets/customElement-iVlqJoC9.js","assets/input-Ceuqybnm.js","assets/customElement-DhmKilvU.js","assets/customElement-pS-p-hJS.js","assets/customElement-C0ehXVYl.js","assets/customElement-B6YSuS20.js","assets/customElement-BTH_0I4p.js","assets/time-DBz8t9a5.js","assets/customElement-CNlyQwoH.js","assets/index-Nv0GAkVJ.js","assets/customElement-DVU0e-Ed.js","assets/customElement-CK0MFlSc.js","assets/utils-DsMbI4f3.js","assets/resources-DodJkxAw.js","assets/customElement-CrvpFj0_.js","assets/resources5-B_fF8ZZV.js","assets/index-D2Zh7x6i.js","assets/customElement-Bykk7IOh.js","assets/customElement-BicITEYs.js","assets/customElement-DIiZwY48.js","assets/customElement-DaXDDNIg.js","assets/customElement-Cizma_Ls.js","assets/customElement-D6MJpT66.js","assets/customElement-b_srAt8O.js","assets/customElement-CS5gRLhJ.js","assets/customElement-DaF_0l1J.js","assets/customElement-Dfz9SDqJ.js","assets/customElement-B5pKWK5x.js","assets/customElement-Dg0rxFuI.js","assets/FloatingArrow-BPj3A6BE.js","assets/customElement-CUBVyw3X.js","assets/customElement-b0_twxfO.js","assets/customElement-C-fsEs7i.js","assets/customElement-BZTot_Lz.js","assets/customElement-BHf1F1s8.js","assets/customElement-DdlGzyRk.js","assets/customElement-a5ljXZmr.js","assets/customElement-aEX9LMNF.js","assets/customElement-CZh3tF1s.js","assets/customElement-Cutfp1wg.js","assets/customElement-5zr1yB_Z.js","assets/customElement-SQ4tMBq5.js","assets/customElement-W_HwP8SZ.js","assets/customElement-DDFjHG9p.js","assets/customElement-BBxFAgyW.js","assets/customElement-BH_RCJNV.js","assets/customElement-BMIa6Szj.js","assets/customElement-BeaGs4Qi.js","assets/customElement-Baw9aLQV.js","assets/customElement-CmThWR8Q.js","assets/customElement-INuw2C-h.js","assets/customElement-DRikWu2T.js","assets/customElement-Btzi6M7E.js","assets/customElement-C9oG2amG.js","assets/customElement-DVpTfmjF.js","assets/customElement-BhQmoCVl.js","assets/customElement-uhtw8oXs.js","assets/customElement-Csv4vcbj.js","assets/customElement-c9FwM7Zq.js","assets/customElement-Ym8QHMTU.js","assets/customElement-DICKRJdb.js","assets/customElement-DudaM45S.js","assets/customElement-TBNSDlg7.js","assets/customElement-2_6ycHTB.js","assets/customElement-BvDl-gKS.js","assets/customElement-BMcb4Ler.js","assets/customElement-BxHigHF-.js","assets/index-B2dhARfn.js","assets/customElement-X7sYxCXU.js","assets/customElement-CAz4rPtk.js","assets/index-OlQ67UD5.js","assets/index-CUtGz3Gy.js","assets/index-DjmsQtCq.js","assets/index-B9CyziuY.js","assets/index-0HSJtORh.js","assets/index-CkbimEBj.js","assets/index-B7tkvGDB.js","assets/previewSymbol2D-CrKDlqT6.js","assets/previewCIMSymbol-Je3be1rZ.js","assets/CIMSymbolRasterizer-3gt09IC2.js","assets/index-B78cHmlO.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();var a3={exports:{}},c0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z6;function Ese(){if(Z6)return c0;Z6=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,s,n){var o=null;if(n!==void 0&&(o=""+n),s.key!==void 0&&(o=""+s.key),"key"in s){n={};for(var l in s)l!=="key"&&(n[l]=s[l])}else n=s;return s=n.ref,{$$typeof:e,type:r,key:o,ref:s!==void 0?s:null,props:n}}return c0.Fragment=t,c0.jsx=i,c0.jsxs=i,c0}var Y6;function Tse(){return Y6||(Y6=1,a3.exports=Ese()),a3.exports}var li=Tse(),l3={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J6;function $se(){if(J6)return nt;J6=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),n=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function b(z){return z===null||typeof z!="object"?null:(z=v&&z[v]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,T={};function $(z,de,Ae){this.props=z,this.context=de,this.refs=T,this.updater=Ae||w}$.prototype.isReactComponent={},$.prototype.setState=function(z,de){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,de,"setState")},$.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function A(){}A.prototype=$.prototype;function O(z,de,Ae){this.props=z,this.context=de,this.refs=T,this.updater=Ae||w}var L=O.prototype=new A;L.constructor=O,E(L,$.prototype),L.isPureReactComponent=!0;var R=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function V(z,de,Ae,Se,ze,dt){return Ae=dt.ref,{$$typeof:e,type:z,key:de,ref:Ae!==void 0?Ae:null,props:dt}}function Z(z,de){return V(z.type,de,void 0,void 0,void 0,z.props)}function ie(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function oe(z){var de={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Ae){return de[Ae]})}var ue=/\/+/g;function me(z,de){return typeof z=="object"&&z!==null&&z.key!=null?oe(""+z.key):de.toString(36)}function Te(){}function Ee(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(Te,Te):(z.status="pending",z.then(function(de){z.status==="pending"&&(z.status="fulfilled",z.value=de)},function(de){z.status==="pending"&&(z.status="rejected",z.reason=de)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Ye(z,de,Ae,Se,ze){var dt=typeof z;(dt==="undefined"||dt==="boolean")&&(z=null);var We=!1;if(z===null)We=!0;else switch(dt){case"bigint":case"string":case"number":We=!0;break;case"object":switch(z.$$typeof){case e:case t:We=!0;break;case y:return We=z._init,Ye(We(z._payload),de,Ae,Se,ze)}}if(We)return ze=ze(z),We=Se===""?"."+me(z,0):Se,R(ze)?(Ae="",We!=null&&(Ae=We.replace(ue,"$&/")+"/"),Ye(ze,de,Ae,"",function(Hs){return Hs})):ze!=null&&(ie(ze)&&(ze=Z(ze,Ae+(ze.key==null||z&&z.key===ze.key?"":(""+ze.key).replace(ue,"$&/")+"/")+We)),de.push(ze)),1;We=0;var Xi=Se===""?".":Se+":";if(R(z))for(var _t=0;_t<z.length;_t++)Se=z[_t],dt=Xi+me(Se,_t),We+=Ye(Se,de,Ae,dt,ze);else if(_t=b(z),typeof _t=="function")for(z=_t.call(z),_t=0;!(Se=z.next()).done;)Se=Se.value,dt=Xi+me(Se,_t++),We+=Ye(Se,de,Ae,dt,ze);else if(dt==="object"){if(typeof z.then=="function")return Ye(Ee(z),de,Ae,Se,ze);throw de=String(z),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return We}function te(z,de,Ae){if(z==null)return z;var Se=[],ze=0;return Ye(z,Se,"","",function(dt){return de.call(Ae,dt,ze++)}),Se}function fe(z){if(z._status===-1){var de=z._result;de=de(),de.then(function(Ae){(z._status===0||z._status===-1)&&(z._status=1,z._result=Ae)},function(Ae){(z._status===0||z._status===-1)&&(z._status=2,z._result=Ae)}),z._status===-1&&(z._status=0,z._result=de)}if(z._status===1)return z._result.default;throw z._result}var we=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function Je(){}return nt.Children={map:te,forEach:function(z,de,Ae){te(z,function(){de.apply(this,arguments)},Ae)},count:function(z){var de=0;return te(z,function(){de++}),de},toArray:function(z){return te(z,function(de){return de})||[]},only:function(z){if(!ie(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},nt.Component=$,nt.Fragment=i,nt.Profiler=s,nt.PureComponent=O,nt.StrictMode=r,nt.Suspense=d,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,nt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return N.H.useMemoCache(z)}},nt.cache=function(z){return function(){return z.apply(null,arguments)}},nt.cloneElement=function(z,de,Ae){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Se=E({},z.props),ze=z.key,dt=void 0;if(de!=null)for(We in de.ref!==void 0&&(dt=void 0),de.key!==void 0&&(ze=""+de.key),de)!j.call(de,We)||We==="key"||We==="__self"||We==="__source"||We==="ref"&&de.ref===void 0||(Se[We]=de[We]);var We=arguments.length-2;if(We===1)Se.children=Ae;else if(1<We){for(var Xi=Array(We),_t=0;_t<We;_t++)Xi[_t]=arguments[_t+2];Se.children=Xi}return V(z.type,ze,void 0,void 0,dt,Se)},nt.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:n,_context:z},z},nt.createElement=function(z,de,Ae){var Se,ze={},dt=null;if(de!=null)for(Se in de.key!==void 0&&(dt=""+de.key),de)j.call(de,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(ze[Se]=de[Se]);var We=arguments.length-2;if(We===1)ze.children=Ae;else if(1<We){for(var Xi=Array(We),_t=0;_t<We;_t++)Xi[_t]=arguments[_t+2];ze.children=Xi}if(z&&z.defaultProps)for(Se in We=z.defaultProps,We)ze[Se]===void 0&&(ze[Se]=We[Se]);return V(z,dt,void 0,void 0,null,ze)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(z){return{$$typeof:l,render:z}},nt.isValidElement=ie,nt.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:fe}},nt.memo=function(z,de){return{$$typeof:h,type:z,compare:de===void 0?null:de}},nt.startTransition=function(z){var de=N.T,Ae={};N.T=Ae;try{var Se=z(),ze=N.S;ze!==null&&ze(Ae,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(Je,we)}catch(dt){we(dt)}finally{N.T=de}},nt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},nt.use=function(z){return N.H.use(z)},nt.useActionState=function(z,de,Ae){return N.H.useActionState(z,de,Ae)},nt.useCallback=function(z,de){return N.H.useCallback(z,de)},nt.useContext=function(z){return N.H.useContext(z)},nt.useDebugValue=function(){},nt.useDeferredValue=function(z,de){return N.H.useDeferredValue(z,de)},nt.useEffect=function(z,de,Ae){var Se=N.H;if(typeof Ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Se.useEffect(z,de)},nt.useId=function(){return N.H.useId()},nt.useImperativeHandle=function(z,de,Ae){return N.H.useImperativeHandle(z,de,Ae)},nt.useInsertionEffect=function(z,de){return N.H.useInsertionEffect(z,de)},nt.useLayoutEffect=function(z,de){return N.H.useLayoutEffect(z,de)},nt.useMemo=function(z,de){return N.H.useMemo(z,de)},nt.useOptimistic=function(z,de){return N.H.useOptimistic(z,de)},nt.useReducer=function(z,de,Ae){return N.H.useReducer(z,de,Ae)},nt.useRef=function(z){return N.H.useRef(z)},nt.useState=function(z){return N.H.useState(z)},nt.useSyncExternalStore=function(z,de,Ae){return N.H.useSyncExternalStore(z,de,Ae)},nt.useTransition=function(){return N.H.useTransition()},nt.version="19.1.0",nt}var X6;function oP(){return X6||(X6=1,l3.exports=$se()),l3.exports}var Qr=oP(),u3={exports:{}},d0={},c3={exports:{}},d3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q6;function xse(){return Q6||(Q6=1,function(e){function t(te,fe){var we=te.length;te.push(fe);e:for(;0<we;){var Je=we-1>>>1,z=te[Je];if(0<s(z,fe))te[Je]=fe,te[we]=z,we=Je;else break e}}function i(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var fe=te[0],we=te.pop();if(we!==fe){te[0]=we;e:for(var Je=0,z=te.length,de=z>>>1;Je<de;){var Ae=2*(Je+1)-1,Se=te[Ae],ze=Ae+1,dt=te[ze];if(0>s(Se,we))ze<z&&0>s(dt,Se)?(te[Je]=dt,te[ze]=we,Je=ze):(te[Je]=Se,te[Ae]=we,Je=Ae);else if(ze<z&&0>s(dt,we))te[Je]=dt,te[ze]=we,Je=ze;else break e}}return fe}function s(te,fe){var we=te.sortIndex-fe.sortIndex;return we!==0?we:te.id-fe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var n=performance;e.unstable_now=function(){return n.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],h=[],y=1,v=null,b=3,w=!1,E=!1,T=!1,$=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function R(te){for(var fe=i(h);fe!==null;){if(fe.callback===null)r(h);else if(fe.startTime<=te)r(h),fe.sortIndex=fe.expirationTime,t(d,fe);else break;fe=i(h)}}function N(te){if(T=!1,R(te),!E)if(i(d)!==null)E=!0,j||(j=!0,me());else{var fe=i(h);fe!==null&&Ye(N,fe.startTime-te)}}var j=!1,V=-1,Z=5,ie=-1;function oe(){return $?!0:!(e.unstable_now()-ie<Z)}function ue(){if($=!1,j){var te=e.unstable_now();ie=te;var fe=!0;try{e:{E=!1,T&&(T=!1,O(V),V=-1),w=!0;var we=b;try{t:{for(R(te),v=i(d);v!==null&&!(v.expirationTime>te&&oe());){var Je=v.callback;if(typeof Je=="function"){v.callback=null,b=v.priorityLevel;var z=Je(v.expirationTime<=te);if(te=e.unstable_now(),typeof z=="function"){v.callback=z,R(te),fe=!0;break t}v===i(d)&&r(d),R(te)}else r(d);v=i(d)}if(v!==null)fe=!0;else{var de=i(h);de!==null&&Ye(N,de.startTime-te),fe=!1}}break e}finally{v=null,b=we,w=!1}fe=void 0}}finally{fe?me():j=!1}}}var me;if(typeof L=="function")me=function(){L(ue)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Ee=Te.port2;Te.port1.onmessage=ue,me=function(){Ee.postMessage(null)}}else me=function(){A(ue,0)};function Ye(te,fe){V=A(function(){te(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(te){switch(b){case 1:case 2:case 3:var fe=3;break;default:fe=b}var we=b;b=fe;try{return te()}finally{b=we}},e.unstable_requestPaint=function(){$=!0},e.unstable_runWithPriority=function(te,fe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var we=b;b=te;try{return fe()}finally{b=we}},e.unstable_scheduleCallback=function(te,fe,we){var Je=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Je+we:Je):we=Je,te){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=we+z,te={id:y++,callback:fe,priorityLevel:te,startTime:we,expirationTime:z,sortIndex:-1},we>Je?(te.sortIndex=we,t(h,te),i(d)===null&&te===i(h)&&(T?(O(V),V=-1):T=!0,Ye(N,we-Je))):(te.sortIndex=z,t(d,te),E||w||(E=!0,j||(j=!0,me()))),te},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(te){var fe=b;return function(){var we=b;b=fe;try{return te.apply(this,arguments)}finally{b=we}}}}(d3)),d3}var K6;function Mse(){return K6||(K6=1,c3.exports=xse()),c3.exports}var h3={exports:{}},Fr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eF;function Ase(){if(eF)return Fr;eF=1;var e=oP();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function n(d,h,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:h,implementation:y}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Fr.createPortal=function(d,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return n(d,h,null,y)},Fr.flushSync=function(d){var h=o.T,y=r.p;try{if(o.T=null,r.p=2,d)return d()}finally{o.T=h,r.p=y,r.d.f()}},Fr.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Fr.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Fr.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var y=h.as,v=l(y,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:w}):y==="script"&&r.d.X(d,{crossOrigin:v,integrity:b,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Fr.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=l(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Fr.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,v=l(y,h.crossOrigin);r.d.L(d,y,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Fr.preloadModule=function(d,h){if(typeof d=="string")if(h){var y=l(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Fr.requestFormReset=function(d){r.d.r(d)},Fr.unstable_batchedUpdates=function(d,h){return d(h)},Fr.useFormState=function(d,h,y){return o.H.useFormState(d,h,y)},Fr.useFormStatus=function(){return o.H.useHostTransitionStatus()},Fr.version="19.1.0",Fr}var tF;function Ise(){if(tF)return h3.exports;tF=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),h3.exports=Ase(),h3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iF;function Cse(){if(iF)return d0;iF=1;var e=Mse(),t=oP(),i=Ise();function r(a){var u="https://react.dev/errors/"+a;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function n(a){var u=a,f=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(f=u.return),a=u.return;while(a)}return u.tag===3?f:null}function o(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function l(a){if(n(a)!==a)throw Error(r(188))}function d(a){var u=a.alternate;if(!u){if(u=n(a),u===null)throw Error(r(188));return u!==a?null:a}for(var f=a,g=u;;){var _=f.return;if(_===null)break;var S=_.alternate;if(S===null){if(g=_.return,g!==null){f=g;continue}break}if(_.child===S.child){for(S=_.child;S;){if(S===f)return l(_),a;if(S===g)return l(_),u;S=S.sibling}throw Error(r(188))}if(f.return!==g.return)f=_,g=S;else{for(var x=!1,C=_.child;C;){if(C===f){x=!0,f=_,g=S;break}if(C===g){x=!0,g=_,f=S;break}C=C.sibling}if(!x){for(C=S.child;C;){if(C===f){x=!0,f=S,g=_;break}if(C===g){x=!0,g=S,f=_;break}C=C.sibling}if(!x)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?a:u}function h(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a;for(a=a.child;a!==null;){if(u=h(a),u!==null)return u;a=a.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),L=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function me(a){return a===null||typeof a!="object"?null:(a=ue&&a[ue]||a["@@iterator"],typeof a=="function"?a:null)}var Te=Symbol.for("react.client.reference");function Ee(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Te?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case E:return"Fragment";case $:return"Profiler";case T:return"StrictMode";case N:return"Suspense";case j:return"SuspenseList";case ie:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case L:return(a.displayName||"Context")+".Provider";case O:return(a._context.displayName||"Context")+".Consumer";case R:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case V:return u=a.displayName||null,u!==null?u:Ee(a.type)||"Memo";case Z:u=a._payload,a=a._init;try{return Ee(a(u))}catch{}}return null}var Ye=Array.isArray,te=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Je=[],z=-1;function de(a){return{current:a}}function Ae(a){0>z||(a.current=Je[z],Je[z]=null,z--)}function Se(a,u){z++,Je[z]=a.current,a.current=u}var ze=de(null),dt=de(null),We=de(null),Xi=de(null);function _t(a,u){switch(Se(We,u),Se(dt,a),Se(ze,null),u.nodeType){case 9:case 11:a=(a=u.documentElement)&&(a=a.namespaceURI)?S6(a):0;break;default:if(a=u.tagName,u=u.namespaceURI)u=S6(u),a=E6(u,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Ae(ze),Se(ze,a)}function Hs(){Ae(ze),Ae(dt),Ae(We)}function cu(a){a.memoizedState!==null&&Se(Xi,a);var u=ze.current,f=E6(u,a.type);u!==f&&(Se(dt,a),Se(ze,f))}function Ha(a){dt.current===a&&(Ae(ze),Ae(dt)),Xi.current===a&&(Ae(Xi),n0._currentValue=we)}var ro=Object.prototype.hasOwnProperty,Qo=e.unstable_scheduleCallback,cg=e.unstable_cancelCallback,Z$=e.unstable_shouldYield,Y$=e.unstable_requestPaint,wn=e.unstable_now,J$=e.unstable_getCurrentPriorityLevel,e1=e.unstable_ImmediatePriority,t1=e.unstable_UserBlockingPriority,md=e.unstable_NormalPriority,i1=e.unstable_LowPriority,so=e.unstable_IdlePriority,X$=e.log,Q$=e.unstable_setDisableYieldValue,yd=null,ss=null;function Ko(a){if(typeof X$=="function"&&Q$(a),ss&&typeof ss.setStrictMode=="function")try{ss.setStrictMode(yd,a)}catch{}}var ns=Math.clz32?Math.clz32:tx,K$=Math.log,ex=Math.LN2;function tx(a){return a>>>=0,a===0?32:31-(K$(a)/ex|0)|0}var jp=256,Up=4194304;function Wa(a){var u=a&42;if(u!==0)return u;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Gp(a,u,f){var g=a.pendingLanes;if(g===0)return 0;var _=0,S=a.suspendedLanes,x=a.pingedLanes;a=a.warmLanes;var C=g&134217727;return C!==0?(g=C&~S,g!==0?_=Wa(g):(x&=C,x!==0?_=Wa(x):f||(f=C&~a,f!==0&&(_=Wa(f))))):(C=g&~S,C!==0?_=Wa(C):x!==0?_=Wa(x):f||(f=g&~a,f!==0&&(_=Wa(f)))),_===0?0:u!==0&&u!==_&&(u&S)===0&&(S=_&-_,f=u&-u,S>=f||S===32&&(f&4194048)!==0)?u:_}function gd(a,u){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&u)===0}function ix(a,u){switch(a){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r1(){var a=jp;return jp<<=1,(jp&4194048)===0&&(jp=256),a}function s1(){var a=Up;return Up<<=1,(Up&62914560)===0&&(Up=4194304),a}function dg(a){for(var u=[],f=0;31>f;f++)u.push(a);return u}function vd(a,u){a.pendingLanes|=u,u!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function rx(a,u,f,g,_,S){var x=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var C=a.entanglements,F=a.expirationTimes,X=a.hiddenUpdates;for(f=x&~f;0<f;){var ne=31-ns(f),ce=1<<ne;C[ne]=0,F[ne]=-1;var Q=X[ne];if(Q!==null)for(X[ne]=null,ne=0;ne<Q.length;ne++){var K=Q[ne];K!==null&&(K.lane&=-536870913)}f&=~ce}g!==0&&n1(a,g,0),S!==0&&_===0&&a.tag!==0&&(a.suspendedLanes|=S&~(x&~u))}function n1(a,u,f){a.pendingLanes|=u,a.suspendedLanes&=~u;var g=31-ns(u);a.entangledLanes|=u,a.entanglements[g]=a.entanglements[g]|1073741824|f&4194090}function o1(a,u){var f=a.entangledLanes|=u;for(a=a.entanglements;f;){var g=31-ns(f),_=1<<g;_&u|a[g]&u&&(a[g]|=u),f&=~_}}function hg(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function pg(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function a1(){var a=fe.p;return a!==0?a:(a=window.event,a===void 0?32:U6(a.type))}function ee(a,u){var f=fe.p;try{return fe.p=a,u()}finally{fe.p=f}}var wt=Math.random().toString(36).slice(2),gi="__reactFiber$"+wt,Xt="__reactProps$"+wt,no="__reactContainer$"+wt,Oe="__reactEvents$"+wt,qp="__reactListeners$"+wt,Fi="__reactHandles$"+wt,du="__reactResources$"+wt,bd="__reactMarker$"+wt;function Ws(a){delete a[gi],delete a[Xt],delete a[Oe],delete a[qp],delete a[Fi]}function Za(a){var u=a[gi];if(u)return u;for(var f=a.parentNode;f;){if(u=f[no]||f[gi]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(a=M6(a);a!==null;){if(f=a[gi])return f;a=M6(a)}return u}a=f,f=a.parentNode}return null}function Ya(a){if(a=a[gi]||a[no]){var u=a.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return a}return null}function Ge(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a.stateNode;throw Error(r(33))}function hu(a){var u=a[du];return u||(u=a[du]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Li(a){a[bd]=!0}var l1=new Set,u1={};function oo(a,u){pu(a,u),pu(a+"Capture",u)}function pu(a,u){for(u1[a]=u,a=0;a<u.length;a++)l1.add(u[a])}var fg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ri={},c1={};function d1(a){return ro.call(c1,a)?!0:ro.call(Ri,a)?!1:fg.test(a)?c1[a]=!0:(Ri[a]=!0,!1)}function Bp(a,u,f){if(d1(u))if(f===null)a.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(u);return}}a.setAttribute(u,""+f)}}function Hp(a,u,f){if(f===null)a.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttribute(u,""+f)}}function ao(a,u,f,g){if(g===null)a.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(u,f,""+g)}}var mg,h1;function Qi(a){if(mg===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);mg=u&&u[1]||"",h1=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mg+a+h1}var yg=!1;function gg(a,u){if(!a||yg)return"";yg=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(K){var Q=K}Reflect.construct(a,[],ce)}else{try{ce.call()}catch(K){Q=K}a.call(ce.prototype)}}else{try{throw Error()}catch(K){Q=K}(ce=a())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=g.DetermineComponentFrameRoot(),x=S[0],C=S[1];if(x&&C){var F=x.split(`
`),X=C.split(`
`);for(_=g=0;g<F.length&&!F[g].includes("DetermineComponentFrameRoot");)g++;for(;_<X.length&&!X[_].includes("DetermineComponentFrameRoot");)_++;if(g===F.length||_===X.length)for(g=F.length-1,_=X.length-1;1<=g&&0<=_&&F[g]!==X[_];)_--;for(;1<=g&&0<=_;g--,_--)if(F[g]!==X[_]){if(g!==1||_!==1)do if(g--,_--,0>_||F[g]!==X[_]){var ne=`
`+F[g].replace(" at new "," at ");return a.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",a.displayName)),ne}while(1<=g&&0<=_);break}}}finally{yg=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?Qi(f):""}function P(a){switch(a.tag){case 26:case 27:case 5:return Qi(a.type);case 16:return Qi("Lazy");case 13:return Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 15:return gg(a.type,!1);case 11:return gg(a.type.render,!1);case 1:return gg(a.type,!0);case 31:return Qi("Activity");default:return""}}function re(a){try{var u="";do u+=P(a),a=a.return;while(a);return u}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function he(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ue(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Nt(a){var u=Ue(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),g=""+a[u];if(!a.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var _=f.get,S=f.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return _.call(this)},set:function(x){g=""+x,S.call(this,x)}}),Object.defineProperty(a,u,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(x){g=""+x},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function Bt(a){a._valueTracker||(a._valueTracker=Nt(a))}function Ei(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return a&&(g=Ue(a)?a.checked?"true":"false":a.value),a=g,a!==f?(u.setValue(a),!0):!1}function Ki(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var bie=/[\n"\\]/g;function Sn(a){return a.replace(bie,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function sx(a,u,f,g,_,S,x,C){a.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?a.type=x:a.removeAttribute("type"),u!=null?x==="number"?(u===0&&a.value===""||a.value!=u)&&(a.value=""+he(u)):a.value!==""+he(u)&&(a.value=""+he(u)):x!=="submit"&&x!=="reset"||a.removeAttribute("value"),u!=null?nx(a,x,he(u)):f!=null?nx(a,x,he(f)):g!=null&&a.removeAttribute("value"),_==null&&S!=null&&(a.defaultChecked=!!S),_!=null&&(a.checked=_&&typeof _!="function"&&typeof _!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.name=""+he(C):a.removeAttribute("name")}function bN(a,u,f,g,_,S,x,C){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(a.type=S),u!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||u!=null))return;f=f!=null?""+he(f):"",u=u!=null?""+he(u):f,C||u===a.value||(a.value=u),a.defaultValue=u}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=C?a.checked:!!g,a.defaultChecked=!!g,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.name=x)}function nx(a,u,f){u==="number"&&Ki(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function Wp(a,u,f,g){if(a=a.options,u){u={};for(var _=0;_<f.length;_++)u["$"+f[_]]=!0;for(f=0;f<a.length;f++)_=u.hasOwnProperty("$"+a[f].value),a[f].selected!==_&&(a[f].selected=_),_&&g&&(a[f].defaultSelected=!0)}else{for(f=""+he(f),u=null,_=0;_<a.length;_++){if(a[_].value===f){a[_].selected=!0,g&&(a[_].defaultSelected=!0);return}u!==null||a[_].disabled||(u=a[_])}u!==null&&(u.selected=!0)}}function _N(a,u,f){if(u!=null&&(u=""+he(u),u!==a.value&&(a.value=u),f==null)){a.defaultValue!==u&&(a.defaultValue=u);return}a.defaultValue=f!=null?""+he(f):""}function wN(a,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(r(92));if(Ye(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=he(u),a.defaultValue=f,g=a.textContent,g===f&&g!==""&&g!==null&&(a.value=g)}function Zp(a,u){if(u){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=u;return}}a.textContent=u}var _ie=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function SN(a,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="":g?a.setProperty(u,f):typeof f!="number"||f===0||_ie.has(u)?u==="float"?a.cssFloat=f:a[u]=(""+f).trim():a[u]=f+"px"}function EN(a,u,f){if(u!=null&&typeof u!="object")throw Error(r(62));if(a=a.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var _ in u)g=u[_],u.hasOwnProperty(_)&&f[_]!==g&&SN(a,_,g)}else for(var S in u)u.hasOwnProperty(S)&&SN(a,S,u[S])}function ox(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wie=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sie=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function p1(a){return Sie.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var ax=null;function lx(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Yp=null,Jp=null;function TN(a){var u=Ya(a);if(u&&(a=u.stateNode)){var f=a[Xt]||null;e:switch(a=u.stateNode,u.type){case"input":if(sx(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Sn(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==a&&g.form===a.form){var _=g[Xt]||null;if(!_)throw Error(r(90));sx(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===a.form&&Ei(g)}break e;case"textarea":_N(a,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&Wp(a,!!f.multiple,u,!1)}}}var ux=!1;function $N(a,u,f){if(ux)return a(u,f);ux=!0;try{var g=a(u);return g}finally{if(ux=!1,(Yp!==null||Jp!==null)&&(Q1(),Yp&&(u=Yp,a=Jp,Jp=Yp=null,TN(u),a)))for(u=0;u<a.length;u++)TN(a[u])}}function vg(a,u){var f=a.stateNode;if(f===null)return null;var g=f[Xt]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(r(231,u,typeof f));return f}var Ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cx=!1;if(Ja)try{var bg={};Object.defineProperty(bg,"passive",{get:function(){cx=!0}}),window.addEventListener("test",bg,bg),window.removeEventListener("test",bg,bg)}catch{cx=!1}var fu=null,dx=null,f1=null;function xN(){if(f1)return f1;var a,u=dx,f=u.length,g,_="value"in fu?fu.value:fu.textContent,S=_.length;for(a=0;a<f&&u[a]===_[a];a++);var x=f-a;for(g=1;g<=x&&u[f-g]===_[S-g];g++);return f1=_.slice(a,1<g?1-g:void 0)}function m1(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function y1(){return!0}function MN(){return!1}function Ss(a){function u(f,g,_,S,x){this._reactName=f,this._targetInst=_,this.type=g,this.nativeEvent=S,this.target=x,this.currentTarget=null;for(var C in a)a.hasOwnProperty(C)&&(f=a[C],this[C]=f?f(S):S[C]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?y1:MN,this.isPropagationStopped=MN,this}return y(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=y1)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=y1)},persist:function(){},isPersistent:y1}),u}var _d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},g1=Ss(_d),_g=y({},_d,{view:0,detail:0}),Eie=Ss(_g),hx,px,wg,v1=y({},_g,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mx,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==wg&&(wg&&a.type==="mousemove"?(hx=a.screenX-wg.screenX,px=a.screenY-wg.screenY):px=hx=0,wg=a),hx)},movementY:function(a){return"movementY"in a?a.movementY:px}}),AN=Ss(v1),Tie=y({},v1,{dataTransfer:0}),$ie=Ss(Tie),xie=y({},_g,{relatedTarget:0}),fx=Ss(xie),Mie=y({},_d,{animationName:0,elapsedTime:0,pseudoElement:0}),Aie=Ss(Mie),Iie=y({},_d,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Cie=Ss(Iie),Oie=y({},_d,{data:0}),IN=Ss(Oie),Lie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kie(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=Pie[a])?!!u[a]:!1}function mx(){return kie}var Die=y({},_g,{key:function(a){if(a.key){var u=Lie[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=m1(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Rie[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mx,charCode:function(a){return a.type==="keypress"?m1(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?m1(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Nie=Ss(Die),Fie=y({},v1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CN=Ss(Fie),Vie=y({},_g,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mx}),zie=Ss(Vie),jie=y({},_d,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uie=Ss(jie),Gie=y({},v1,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),qie=Ss(Gie),Bie=y({},_d,{newState:0,oldState:0}),Hie=Ss(Bie),Wie=[9,13,27,32],yx=Ja&&"CompositionEvent"in window,Sg=null;Ja&&"documentMode"in document&&(Sg=document.documentMode);var Zie=Ja&&"TextEvent"in window&&!Sg,ON=Ja&&(!yx||Sg&&8<Sg&&11>=Sg),LN=" ",RN=!1;function PN(a,u){switch(a){case"keyup":return Wie.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kN(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Xp=!1;function Yie(a,u){switch(a){case"compositionend":return kN(u);case"keypress":return u.which!==32?null:(RN=!0,LN);case"textInput":return a=u.data,a===LN&&RN?null:a;default:return null}}function Jie(a,u){if(Xp)return a==="compositionend"||!yx&&PN(a,u)?(a=xN(),f1=dx=fu=null,Xp=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return ON&&u.locale!=="ko"?null:u.data;default:return null}}var Xie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DN(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!Xie[a.type]:u==="textarea"}function NN(a,u,f,g){Yp?Jp?Jp.push(g):Jp=[g]:Yp=g,u=sw(u,"onChange"),0<u.length&&(f=new g1("onChange","change",null,f,g),a.push({event:f,listeners:u}))}var Eg=null,Tg=null;function Qie(a){g6(a,0)}function b1(a){var u=Ge(a);if(Ei(u))return a}function FN(a,u){if(a==="change")return u}var VN=!1;if(Ja){var gx;if(Ja){var vx="oninput"in document;if(!vx){var zN=document.createElement("div");zN.setAttribute("oninput","return;"),vx=typeof zN.oninput=="function"}gx=vx}else gx=!1;VN=gx&&(!document.documentMode||9<document.documentMode)}function jN(){Eg&&(Eg.detachEvent("onpropertychange",UN),Tg=Eg=null)}function UN(a){if(a.propertyName==="value"&&b1(Tg)){var u=[];NN(u,Tg,a,lx(a)),$N(Qie,u)}}function Kie(a,u,f){a==="focusin"?(jN(),Eg=u,Tg=f,Eg.attachEvent("onpropertychange",UN)):a==="focusout"&&jN()}function ere(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return b1(Tg)}function tre(a,u){if(a==="click")return b1(u)}function ire(a,u){if(a==="input"||a==="change")return b1(u)}function rre(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var Zs=typeof Object.is=="function"?Object.is:rre;function $g(a,u){if(Zs(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var f=Object.keys(a),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var _=f[g];if(!ro.call(u,_)||!Zs(a[_],u[_]))return!1}return!0}function GN(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function qN(a,u){var f=GN(a);a=0;for(var g;f;){if(f.nodeType===3){if(g=a+f.textContent.length,a<=u&&g>=u)return{node:f,offset:u-a};a=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=GN(f)}}function BN(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?BN(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function HN(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var u=Ki(a.document);u instanceof a.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)a=u.contentWindow;else break;u=Ki(a.document)}return u}function bx(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}var sre=Ja&&"documentMode"in document&&11>=document.documentMode,Qp=null,_x=null,xg=null,wx=!1;function WN(a,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;wx||Qp==null||Qp!==Ki(g)||(g=Qp,"selectionStart"in g&&bx(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),xg&&$g(xg,g)||(xg=g,g=sw(_x,"onSelect"),0<g.length&&(u=new g1("onSelect","select",null,u,f),a.push({event:u,listeners:g}),u.target=Qp)))}function wd(a,u){var f={};return f[a.toLowerCase()]=u.toLowerCase(),f["Webkit"+a]="webkit"+u,f["Moz"+a]="moz"+u,f}var Kp={animationend:wd("Animation","AnimationEnd"),animationiteration:wd("Animation","AnimationIteration"),animationstart:wd("Animation","AnimationStart"),transitionrun:wd("Transition","TransitionRun"),transitionstart:wd("Transition","TransitionStart"),transitioncancel:wd("Transition","TransitionCancel"),transitionend:wd("Transition","TransitionEnd")},Sx={},ZN={};Ja&&(ZN=document.createElement("div").style,"AnimationEvent"in window||(delete Kp.animationend.animation,delete Kp.animationiteration.animation,delete Kp.animationstart.animation),"TransitionEvent"in window||delete Kp.transitionend.transition);function Sd(a){if(Sx[a])return Sx[a];if(!Kp[a])return a;var u=Kp[a],f;for(f in u)if(u.hasOwnProperty(f)&&f in ZN)return Sx[a]=u[f];return a}var YN=Sd("animationend"),JN=Sd("animationiteration"),XN=Sd("animationstart"),nre=Sd("transitionrun"),ore=Sd("transitionstart"),are=Sd("transitioncancel"),QN=Sd("transitionend"),KN=new Map,Ex="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ex.push("scrollEnd");function lo(a,u){KN.set(a,u),oo(u,[a])}var e5=new WeakMap;function En(a,u){if(typeof a=="object"&&a!==null){var f=e5.get(a);return f!==void 0?f:(u={value:a,source:u,stack:re(u)},e5.set(a,u),u)}return{value:a,source:u,stack:re(u)}}var Tn=[],ef=0,Tx=0;function _1(){for(var a=ef,u=Tx=ef=0;u<a;){var f=Tn[u];Tn[u++]=null;var g=Tn[u];Tn[u++]=null;var _=Tn[u];Tn[u++]=null;var S=Tn[u];if(Tn[u++]=null,g!==null&&_!==null){var x=g.pending;x===null?_.next=_:(_.next=x.next,x.next=_),g.pending=_}S!==0&&t5(f,_,S)}}function w1(a,u,f,g){Tn[ef++]=a,Tn[ef++]=u,Tn[ef++]=f,Tn[ef++]=g,Tx|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function $x(a,u,f,g){return w1(a,u,f,g),S1(a)}function tf(a,u){return w1(a,null,null,u),S1(a)}function t5(a,u,f){a.lanes|=f;var g=a.alternate;g!==null&&(g.lanes|=f);for(var _=!1,S=a.return;S!==null;)S.childLanes|=f,g=S.alternate,g!==null&&(g.childLanes|=f),S.tag===22&&(a=S.stateNode,a===null||a._visibility&1||(_=!0)),a=S,S=S.return;return a.tag===3?(S=a.stateNode,_&&u!==null&&(_=31-ns(f),a=S.hiddenUpdates,g=a[_],g===null?a[_]=[u]:g.push(u),u.lane=f|536870912),S):null}function S1(a){if(50<Xg)throw Xg=0,OM=null,Error(r(185));for(var u=a.return;u!==null;)a=u,u=a.return;return a.tag===3?a.stateNode:null}var rf={};function lre(a,u,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(a,u,f,g){return new lre(a,u,f,g)}function xx(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Xa(a,u){var f=a.alternate;return f===null?(f=Ys(a.tag,u,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=u,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,u=a.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function i5(a,u){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=u,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,u=f.dependencies,a.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),a}function E1(a,u,f,g,_,S){var x=0;if(g=a,typeof a=="function")xx(a)&&(x=1);else if(typeof a=="string")x=cse(a,f,ze.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case ie:return a=Ys(31,f,u,_),a.elementType=ie,a.lanes=S,a;case E:return Ed(f.children,_,S,u);case T:x=8,_|=24;break;case $:return a=Ys(12,f,u,_|2),a.elementType=$,a.lanes=S,a;case N:return a=Ys(13,f,u,_),a.elementType=N,a.lanes=S,a;case j:return a=Ys(19,f,u,_),a.elementType=j,a.lanes=S,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case A:case L:x=10;break e;case O:x=9;break e;case R:x=11;break e;case V:x=14;break e;case Z:x=16,g=null;break e}x=29,f=Error(r(130,a===null?"null":typeof a,"")),g=null}return u=Ys(x,f,u,_),u.elementType=a,u.type=g,u.lanes=S,u}function Ed(a,u,f,g){return a=Ys(7,a,g,u),a.lanes=f,a}function Mx(a,u,f){return a=Ys(6,a,null,u),a.lanes=f,a}function Ax(a,u,f){return u=Ys(4,a.children!==null?a.children:[],a.key,u),u.lanes=f,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}var sf=[],nf=0,T1=null,$1=0,$n=[],xn=0,Td=null,Qa=1,Ka="";function $d(a,u){sf[nf++]=$1,sf[nf++]=T1,T1=a,$1=u}function r5(a,u,f){$n[xn++]=Qa,$n[xn++]=Ka,$n[xn++]=Td,Td=a;var g=Qa;a=Ka;var _=32-ns(g)-1;g&=~(1<<_),f+=1;var S=32-ns(u)+_;if(30<S){var x=_-_%5;S=(g&(1<<x)-1).toString(32),g>>=x,_-=x,Qa=1<<32-ns(u)+_|f<<_|g,Ka=S+a}else Qa=1<<S|f<<_|g,Ka=a}function Ix(a){a.return!==null&&($d(a,1),r5(a,1,0))}function Cx(a){for(;a===T1;)T1=sf[--nf],sf[nf]=null,$1=sf[--nf],sf[nf]=null;for(;a===Td;)Td=$n[--xn],$n[xn]=null,Ka=$n[--xn],$n[xn]=null,Qa=$n[--xn],$n[xn]=null}var os=null,Ti=null,Ct=!1,xd=null,ea=!1,Ox=Error(r(519));function Md(a){var u=Error(r(418,""));throw Ig(En(u,a)),Ox}function s5(a){var u=a.stateNode,f=a.type,g=a.memoizedProps;switch(u[gi]=a,u[Xt]=g,f){case"dialog":pt("cancel",u),pt("close",u);break;case"iframe":case"object":case"embed":pt("load",u);break;case"video":case"audio":for(f=0;f<Kg.length;f++)pt(Kg[f],u);break;case"source":pt("error",u);break;case"img":case"image":case"link":pt("error",u),pt("load",u);break;case"details":pt("toggle",u);break;case"input":pt("invalid",u),bN(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Bt(u);break;case"select":pt("invalid",u);break;case"textarea":pt("invalid",u),wN(u,g.value,g.defaultValue,g.children),Bt(u)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||w6(u.textContent,f)?(g.popover!=null&&(pt("beforetoggle",u),pt("toggle",u)),g.onScroll!=null&&pt("scroll",u),g.onScrollEnd!=null&&pt("scrollend",u),g.onClick!=null&&(u.onclick=nw),u=!0):u=!1,u||Md(a)}function n5(a){for(os=a.return;os;)switch(os.tag){case 5:case 13:ea=!1;return;case 27:case 3:ea=!0;return;default:os=os.return}}function Mg(a){if(a!==os)return!1;if(!Ct)return n5(a),Ct=!0,!1;var u=a.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||WM(a.type,a.memoizedProps)),f=!f),f&&Ti&&Md(a),n5(a),u===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8)if(f=a.data,f==="/$"){if(u===0){Ti=co(a.nextSibling);break e}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++;a=a.nextSibling}Ti=null}}else u===27?(u=Ti,Cu(a.type)?(a=XM,XM=null,Ti=a):Ti=u):Ti=os?co(a.stateNode.nextSibling):null;return!0}function Ag(){Ti=os=null,Ct=!1}function o5(){var a=xd;return a!==null&&($s===null?$s=a:$s.push.apply($s,a),xd=null),a}function Ig(a){xd===null?xd=[a]:xd.push(a)}var Lx=de(null),Ad=null,el=null;function mu(a,u,f){Se(Lx,u._currentValue),u._currentValue=f}function tl(a){a._currentValue=Lx.current,Ae(Lx)}function Rx(a,u,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),a===f)break;a=a.return}}function Px(a,u,f,g){var _=a.child;for(_!==null&&(_.return=a);_!==null;){var S=_.dependencies;if(S!==null){var x=_.child;S=S.firstContext;e:for(;S!==null;){var C=S;S=_;for(var F=0;F<u.length;F++)if(C.context===u[F]){S.lanes|=f,C=S.alternate,C!==null&&(C.lanes|=f),Rx(S.return,f,a),g||(x=null);break e}S=C.next}}else if(_.tag===18){if(x=_.return,x===null)throw Error(r(341));x.lanes|=f,S=x.alternate,S!==null&&(S.lanes|=f),Rx(x,f,a),x=null}else x=_.child;if(x!==null)x.return=_;else for(x=_;x!==null;){if(x===a){x=null;break}if(_=x.sibling,_!==null){_.return=x.return,x=_;break}x=x.return}_=x}}function Cg(a,u,f,g){a=null;for(var _=u,S=!1;_!==null;){if(!S){if((_.flags&524288)!==0)S=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var x=_.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var C=_.type;Zs(_.pendingProps.value,x.value)||(a!==null?a.push(C):a=[C])}}else if(_===Xi.current){if(x=_.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(a!==null?a.push(n0):a=[n0])}_=_.return}a!==null&&Px(u,a,f,g),u.flags|=262144}function x1(a){for(a=a.firstContext;a!==null;){if(!Zs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Id(a){Ad=a,el=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Nr(a){return a5(Ad,a)}function M1(a,u){return Ad===null&&Id(a),a5(a,u)}function a5(a,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},el===null){if(a===null)throw Error(r(308));el=u,a.dependencies={lanes:0,firstContext:u},a.flags|=524288}else el=el.next=u;return f}var ure=typeof AbortController<"u"?AbortController:function(){var a=[],u=this.signal={aborted:!1,addEventListener:function(f,g){a.push(g)}};this.abort=function(){u.aborted=!0,a.forEach(function(f){return f()})}},cre=e.unstable_scheduleCallback,dre=e.unstable_NormalPriority,er={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kx(){return{controller:new ure,data:new Map,refCount:0}}function Og(a){a.refCount--,a.refCount===0&&cre(dre,function(){a.controller.abort()})}var Lg=null,Dx=0,of=0,af=null;function hre(a,u){if(Lg===null){var f=Lg=[];Dx=0,of=FM(),af={status:"pending",value:void 0,then:function(g){f.push(g)}}}return Dx++,u.then(l5,l5),u}function l5(){if(--Dx===0&&Lg!==null){af!==null&&(af.status="fulfilled");var a=Lg;Lg=null,of=0,af=null;for(var u=0;u<a.length;u++)(0,a[u])()}}function pre(a,u){var f=[],g={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return a.then(function(){g.status="fulfilled",g.value=u;for(var _=0;_<f.length;_++)(0,f[_])(u)},function(_){for(g.status="rejected",g.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),g}var u5=te.S;te.S=function(a,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&hre(a,u),u5!==null&&u5(a,u)};var Cd=de(null);function Nx(){var a=Cd.current;return a!==null?a:Qt.pooledCache}function A1(a,u){u===null?Se(Cd,Cd.current):Se(Cd,u.pool)}function c5(){var a=Nx();return a===null?null:{parent:er._currentValue,pool:a}}var Rg=Error(r(460)),d5=Error(r(474)),I1=Error(r(542)),Fx={then:function(){}};function h5(a){return a=a.status,a==="fulfilled"||a==="rejected"}function C1(){}function p5(a,u,f){switch(f=a[f],f===void 0?a.push(u):f!==u&&(u.then(C1,C1),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,m5(a),a;default:if(typeof u.status=="string")u.then(C1,C1);else{if(a=Qt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=u,a.status="pending",a.then(function(g){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=g}},function(g){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,m5(a),a}throw Pg=u,Rg}}var Pg=null;function f5(){if(Pg===null)throw Error(r(459));var a=Pg;return Pg=null,a}function m5(a){if(a===Rg||a===I1)throw Error(r(483))}var yu=!1;function Vx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zx(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function gu(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function vu(a,u,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(Ft&2)!==0){var _=g.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),g.pending=u,u=S1(a),t5(a,null,f),u}return w1(a,g,u,f),S1(a)}function kg(a,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=a.pendingLanes,f|=g,u.lanes=f,o1(a,f)}}function jx(a,u){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var _=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var x={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?_=S=x:S=S.next=x,f=f.next}while(f!==null);S===null?_=S=u:S=S.next=u}else _=S=u;f={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:S,shared:g.shared,callbacks:g.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=u}var Ux=!1;function Dg(){if(Ux){var a=af;if(a!==null)throw a}}function Ng(a,u,f,g){Ux=!1;var _=a.updateQueue;yu=!1;var S=_.firstBaseUpdate,x=_.lastBaseUpdate,C=_.shared.pending;if(C!==null){_.shared.pending=null;var F=C,X=F.next;F.next=null,x===null?S=X:x.next=X,x=F;var ne=a.alternate;ne!==null&&(ne=ne.updateQueue,C=ne.lastBaseUpdate,C!==x&&(C===null?ne.firstBaseUpdate=X:C.next=X,ne.lastBaseUpdate=F))}if(S!==null){var ce=_.baseState;x=0,ne=X=F=null,C=S;do{var Q=C.lane&-536870913,K=Q!==C.lane;if(K?(gt&Q)===Q:(g&Q)===Q){Q!==0&&Q===of&&(Ux=!0),ne!==null&&(ne=ne.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Xe=a,qe=C;Q=u;var Ut=f;switch(qe.tag){case 1:if(Xe=qe.payload,typeof Xe=="function"){ce=Xe.call(Ut,ce,Q);break e}ce=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=qe.payload,Q=typeof Xe=="function"?Xe.call(Ut,ce,Q):Xe,Q==null)break e;ce=y({},ce,Q);break e;case 2:yu=!0}}Q=C.callback,Q!==null&&(a.flags|=64,K&&(a.flags|=8192),K=_.callbacks,K===null?_.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ne===null?(X=ne=K,F=ce):ne=ne.next=K,x|=Q;if(C=C.next,C===null){if(C=_.shared.pending,C===null)break;K=C,C=K.next,K.next=null,_.lastBaseUpdate=K,_.shared.pending=null}}while(!0);ne===null&&(F=ce),_.baseState=F,_.firstBaseUpdate=X,_.lastBaseUpdate=ne,S===null&&(_.shared.lanes=0),xu|=x,a.lanes=x,a.memoizedState=ce}}function y5(a,u){if(typeof a!="function")throw Error(r(191,a));a.call(u)}function g5(a,u){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)y5(f[a],u)}var lf=de(null),O1=de(0);function v5(a,u){a=ll,Se(O1,a),Se(lf,u),ll=a|u.baseLanes}function Gx(){Se(O1,ll),Se(lf,lf.current)}function qx(){ll=O1.current,Ae(lf),Ae(O1)}var bu=0,at=null,zt=null,Vi=null,L1=!1,uf=!1,Od=!1,R1=0,Fg=0,cf=null,fre=0;function Pi(){throw Error(r(321))}function Bx(a,u){if(u===null)return!1;for(var f=0;f<u.length&&f<a.length;f++)if(!Zs(a[f],u[f]))return!1;return!0}function Hx(a,u,f,g,_,S){return bu=S,at=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,te.H=a===null||a.memoizedState===null?t4:i4,Od=!1,S=f(g,_),Od=!1,uf&&(S=_5(u,f,g,_)),b5(a),S}function b5(a){te.H=V1;var u=zt!==null&&zt.next!==null;if(bu=0,Vi=zt=at=null,L1=!1,Fg=0,cf=null,u)throw Error(r(300));a===null||hr||(a=a.dependencies,a!==null&&x1(a)&&(hr=!0))}function _5(a,u,f,g){at=a;var _=0;do{if(uf&&(cf=null),Fg=0,uf=!1,25<=_)throw Error(r(301));if(_+=1,Vi=zt=null,a.updateQueue!=null){var S=a.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}te.H=wre,S=u(f,g)}while(uf);return S}function mre(){var a=te.H,u=a.useState()[0];return u=typeof u.then=="function"?Vg(u):u,a=a.useState()[0],(zt!==null?zt.memoizedState:null)!==a&&(at.flags|=1024),u}function Wx(){var a=R1!==0;return R1=0,a}function Zx(a,u,f){u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~f}function Yx(a){if(L1){for(a=a.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}L1=!1}bu=0,Vi=zt=at=null,uf=!1,Fg=R1=0,cf=null}function Es(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vi===null?at.memoizedState=Vi=a:Vi=Vi.next=a,Vi}function zi(){if(zt===null){var a=at.alternate;a=a!==null?a.memoizedState:null}else a=zt.next;var u=Vi===null?at.memoizedState:Vi.next;if(u!==null)Vi=u,zt=a;else{if(a===null)throw at.alternate===null?Error(r(467)):Error(r(310));zt=a,a={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Vi===null?at.memoizedState=Vi=a:Vi=Vi.next=a}return Vi}function Jx(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vg(a){var u=Fg;return Fg+=1,cf===null&&(cf=[]),a=p5(cf,a,u),u=at,(Vi===null?u.memoizedState:Vi.next)===null&&(u=u.alternate,te.H=u===null||u.memoizedState===null?t4:i4),a}function P1(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Vg(a);if(a.$$typeof===L)return Nr(a)}throw Error(r(438,String(a)))}function Xx(a){var u=null,f=at.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=at.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=Jx(),at.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(a),g=0;g<a;g++)f[g]=oe;return u.index++,f}function il(a,u){return typeof u=="function"?u(a):u}function k1(a){var u=zi();return Qx(u,zt,a)}function Qx(a,u,f){var g=a.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var _=a.baseQueue,S=g.pending;if(S!==null){if(_!==null){var x=_.next;_.next=S.next,S.next=x}u.baseQueue=_=S,g.pending=null}if(S=a.baseState,_===null)a.memoizedState=S;else{u=_.next;var C=x=null,F=null,X=u,ne=!1;do{var ce=X.lane&-536870913;if(ce!==X.lane?(gt&ce)===ce:(bu&ce)===ce){var Q=X.revertLane;if(Q===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ce===of&&(ne=!0);else if((bu&Q)===Q){X=X.next,Q===of&&(ne=!0);continue}else ce={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(C=F=ce,x=S):F=F.next=ce,at.lanes|=Q,xu|=Q;ce=X.action,Od&&f(S,ce),S=X.hasEagerState?X.eagerState:f(S,ce)}else Q={lane:ce,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(C=F=Q,x=S):F=F.next=Q,at.lanes|=ce,xu|=ce;X=X.next}while(X!==null&&X!==u);if(F===null?x=S:F.next=C,!Zs(S,a.memoizedState)&&(hr=!0,ne&&(f=af,f!==null)))throw f;a.memoizedState=S,a.baseState=x,a.baseQueue=F,g.lastRenderedState=S}return _===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function Kx(a){var u=zi(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=a;var g=f.dispatch,_=f.pending,S=u.memoizedState;if(_!==null){f.pending=null;var x=_=_.next;do S=a(S,x.action),x=x.next;while(x!==_);Zs(S,u.memoizedState)||(hr=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),f.lastRenderedState=S}return[S,g]}function w5(a,u,f){var g=at,_=zi(),S=Ct;if(S){if(f===void 0)throw Error(r(407));f=f()}else f=u();var x=!Zs((zt||_).memoizedState,f);x&&(_.memoizedState=f,hr=!0),_=_.queue;var C=T5.bind(null,g,_,a);if(zg(2048,8,C,[a]),_.getSnapshot!==u||x||Vi!==null&&Vi.memoizedState.tag&1){if(g.flags|=2048,df(9,D1(),E5.bind(null,g,_,f,u),null),Qt===null)throw Error(r(349));S||(bu&124)!==0||S5(g,u,f)}return f}function S5(a,u,f){a.flags|=16384,a={getSnapshot:u,value:f},u=at.updateQueue,u===null?(u=Jx(),at.updateQueue=u,u.stores=[a]):(f=u.stores,f===null?u.stores=[a]:f.push(a))}function E5(a,u,f,g){u.value=f,u.getSnapshot=g,$5(u)&&x5(a)}function T5(a,u,f){return f(function(){$5(u)&&x5(a)})}function $5(a){var u=a.getSnapshot;a=a.value;try{var f=u();return!Zs(a,f)}catch{return!0}}function x5(a){var u=tf(a,2);u!==null&&en(u,a,2)}function eM(a){var u=Es();if(typeof a=="function"){var f=a;if(a=f(),Od){Ko(!0);try{f()}finally{Ko(!1)}}}return u.memoizedState=u.baseState=a,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:a},u}function M5(a,u,f,g){return a.baseState=f,Qx(a,zt,typeof g=="function"?g:il)}function yre(a,u,f,g,_){if(F1(a))throw Error(r(485));if(a=u.action,a!==null){var S={payload:_,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){S.listeners.push(x)}};te.T!==null?f(!0):S.isTransition=!1,g(S),f=u.pending,f===null?(S.next=u.pending=S,A5(u,S)):(S.next=f.next,u.pending=f.next=S)}}function A5(a,u){var f=u.action,g=u.payload,_=a.state;if(u.isTransition){var S=te.T,x={};te.T=x;try{var C=f(_,g),F=te.S;F!==null&&F(x,C),I5(a,u,C)}catch(X){tM(a,u,X)}finally{te.T=S}}else try{S=f(_,g),I5(a,u,S)}catch(X){tM(a,u,X)}}function I5(a,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){C5(a,u,g)},function(g){return tM(a,u,g)}):C5(a,u,f)}function C5(a,u,f){u.status="fulfilled",u.value=f,O5(u),a.state=f,u=a.pending,u!==null&&(f=u.next,f===u?a.pending=null:(f=f.next,u.next=f,A5(a,f)))}function tM(a,u,f){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,O5(u),u=u.next;while(u!==g)}a.action=null}function O5(a){a=a.listeners;for(var u=0;u<a.length;u++)(0,a[u])()}function L5(a,u){return u}function R5(a,u){if(Ct){var f=Qt.formState;if(f!==null){e:{var g=at;if(Ct){if(Ti){t:{for(var _=Ti,S=ea;_.nodeType!==8;){if(!S){_=null;break t}if(_=co(_.nextSibling),_===null){_=null;break t}}S=_.data,_=S==="F!"||S==="F"?_:null}if(_){Ti=co(_.nextSibling),g=_.data==="F!";break e}}Md(g)}g=!1}g&&(u=f[0])}}return f=Es(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:L5,lastRenderedState:u},f.queue=g,f=Q5.bind(null,at,g),g.dispatch=f,g=eM(!1),S=oM.bind(null,at,!1,g.queue),g=Es(),_={state:u,dispatch:null,action:a,pending:null},g.queue=_,f=yre.bind(null,at,_,S,f),_.dispatch=f,g.memoizedState=a,[u,f,!1]}function P5(a){var u=zi();return k5(u,zt,a)}function k5(a,u,f){if(u=Qx(a,u,L5)[0],a=k1(il)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=Vg(u)}catch(x){throw x===Rg?I1:x}else g=u;u=zi();var _=u.queue,S=_.dispatch;return f!==u.memoizedState&&(at.flags|=2048,df(9,D1(),gre.bind(null,_,f),null)),[g,S,a]}function gre(a,u){a.action=u}function D5(a){var u=zi(),f=zt;if(f!==null)return k5(u,f,a);zi(),u=u.memoizedState,f=zi();var g=f.queue.dispatch;return f.memoizedState=a,[u,g,!1]}function df(a,u,f,g){return a={tag:a,create:f,deps:g,inst:u,next:null},u=at.updateQueue,u===null&&(u=Jx(),at.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,u.lastEffect=a),a}function D1(){return{destroy:void 0,resource:void 0}}function N5(){return zi().memoizedState}function N1(a,u,f,g){var _=Es();g=g===void 0?null:g,at.flags|=a,_.memoizedState=df(1|u,D1(),f,g)}function zg(a,u,f,g){var _=zi();g=g===void 0?null:g;var S=_.memoizedState.inst;zt!==null&&g!==null&&Bx(g,zt.memoizedState.deps)?_.memoizedState=df(u,S,f,g):(at.flags|=a,_.memoizedState=df(1|u,S,f,g))}function F5(a,u){N1(8390656,8,a,u)}function V5(a,u){zg(2048,8,a,u)}function z5(a,u){return zg(4,2,a,u)}function j5(a,u){return zg(4,4,a,u)}function U5(a,u){if(typeof u=="function"){a=a();var f=u(a);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function G5(a,u,f){f=f!=null?f.concat([a]):null,zg(4,4,U5.bind(null,u,a),f)}function iM(){}function q5(a,u){var f=zi();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&Bx(u,g[1])?g[0]:(f.memoizedState=[a,u],a)}function B5(a,u){var f=zi();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&Bx(u,g[1]))return g[0];if(g=a(),Od){Ko(!0);try{a()}finally{Ko(!1)}}return f.memoizedState=[g,u],g}function rM(a,u,f){return f===void 0||(bu&1073741824)!==0?a.memoizedState=u:(a.memoizedState=f,a=Z4(),at.lanes|=a,xu|=a,f)}function H5(a,u,f,g){return Zs(f,u)?f:lf.current!==null?(a=rM(a,f,g),Zs(a,u)||(hr=!0),a):(bu&42)===0?(hr=!0,a.memoizedState=f):(a=Z4(),at.lanes|=a,xu|=a,u)}function W5(a,u,f,g,_){var S=fe.p;fe.p=S!==0&&8>S?S:8;var x=te.T,C={};te.T=C,oM(a,!1,u,f);try{var F=_(),X=te.S;if(X!==null&&X(C,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ne=pre(F,g);jg(a,u,ne,Ks(a))}else jg(a,u,g,Ks(a))}catch(ce){jg(a,u,{then:function(){},status:"rejected",reason:ce},Ks())}finally{fe.p=S,te.T=x}}function vre(){}function sM(a,u,f,g){if(a.tag!==5)throw Error(r(476));var _=Z5(a).queue;W5(a,_,u,we,f===null?vre:function(){return Y5(a),f(g)})}function Z5(a){var u=a.memoizedState;if(u!==null)return u;u={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:we},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:f},next:null},a.memoizedState=u,a=a.alternate,a!==null&&(a.memoizedState=u),u}function Y5(a){var u=Z5(a).next.queue;jg(a,u,{},Ks())}function nM(){return Nr(n0)}function J5(){return zi().memoizedState}function X5(){return zi().memoizedState}function bre(a){for(var u=a.return;u!==null;){switch(u.tag){case 24:case 3:var f=Ks();a=gu(f);var g=vu(u,a,f);g!==null&&(en(g,u,f),kg(g,u,f)),u={cache:kx()},a.payload=u;return}u=u.return}}function _re(a,u,f){var g=Ks();f={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},F1(a)?K5(u,f):(f=$x(a,u,f,g),f!==null&&(en(f,a,g),e4(f,u,g)))}function Q5(a,u,f){var g=Ks();jg(a,u,f,g)}function jg(a,u,f,g){var _={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(F1(a))K5(u,_);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var x=u.lastRenderedState,C=S(x,f);if(_.hasEagerState=!0,_.eagerState=C,Zs(C,x))return w1(a,u,_,0),Qt===null&&_1(),!1}catch{}finally{}if(f=$x(a,u,_,g),f!==null)return en(f,a,g),e4(f,u,g),!0}return!1}function oM(a,u,f,g){if(g={lane:2,revertLane:FM(),action:g,hasEagerState:!1,eagerState:null,next:null},F1(a)){if(u)throw Error(r(479))}else u=$x(a,f,g,2),u!==null&&en(u,a,2)}function F1(a){var u=a.alternate;return a===at||u!==null&&u===at}function K5(a,u){uf=L1=!0;var f=a.pending;f===null?u.next=u:(u.next=f.next,f.next=u),a.pending=u}function e4(a,u,f){if((f&4194048)!==0){var g=u.lanes;g&=a.pendingLanes,f|=g,u.lanes=f,o1(a,f)}}var V1={readContext:Nr,use:P1,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useLayoutEffect:Pi,useInsertionEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useSyncExternalStore:Pi,useId:Pi,useHostTransitionStatus:Pi,useFormState:Pi,useActionState:Pi,useOptimistic:Pi,useMemoCache:Pi,useCacheRefresh:Pi},t4={readContext:Nr,use:P1,useCallback:function(a,u){return Es().memoizedState=[a,u===void 0?null:u],a},useContext:Nr,useEffect:F5,useImperativeHandle:function(a,u,f){f=f!=null?f.concat([a]):null,N1(4194308,4,U5.bind(null,u,a),f)},useLayoutEffect:function(a,u){return N1(4194308,4,a,u)},useInsertionEffect:function(a,u){N1(4,2,a,u)},useMemo:function(a,u){var f=Es();u=u===void 0?null:u;var g=a();if(Od){Ko(!0);try{a()}finally{Ko(!1)}}return f.memoizedState=[g,u],g},useReducer:function(a,u,f){var g=Es();if(f!==void 0){var _=f(u);if(Od){Ko(!0);try{f(u)}finally{Ko(!1)}}}else _=u;return g.memoizedState=g.baseState=_,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:_},g.queue=a,a=a.dispatch=_re.bind(null,at,a),[g.memoizedState,a]},useRef:function(a){var u=Es();return a={current:a},u.memoizedState=a},useState:function(a){a=eM(a);var u=a.queue,f=Q5.bind(null,at,u);return u.dispatch=f,[a.memoizedState,f]},useDebugValue:iM,useDeferredValue:function(a,u){var f=Es();return rM(f,a,u)},useTransition:function(){var a=eM(!1);return a=W5.bind(null,at,a.queue,!0,!1),Es().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,u,f){var g=at,_=Es();if(Ct){if(f===void 0)throw Error(r(407));f=f()}else{if(f=u(),Qt===null)throw Error(r(349));(gt&124)!==0||S5(g,u,f)}_.memoizedState=f;var S={value:f,getSnapshot:u};return _.queue=S,F5(T5.bind(null,g,S,a),[a]),g.flags|=2048,df(9,D1(),E5.bind(null,g,S,f,u),null),f},useId:function(){var a=Es(),u=Qt.identifierPrefix;if(Ct){var f=Ka,g=Qa;f=(g&~(1<<32-ns(g)-1)).toString(32)+f,u=""+u+"R"+f,f=R1++,0<f&&(u+="H"+f.toString(32)),u+=""}else f=fre++,u=""+u+"r"+f.toString(32)+"";return a.memoizedState=u},useHostTransitionStatus:nM,useFormState:R5,useActionState:R5,useOptimistic:function(a){var u=Es();u.memoizedState=u.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=oM.bind(null,at,!0,f),f.dispatch=u,[a,u]},useMemoCache:Xx,useCacheRefresh:function(){return Es().memoizedState=bre.bind(null,at)}},i4={readContext:Nr,use:P1,useCallback:q5,useContext:Nr,useEffect:V5,useImperativeHandle:G5,useInsertionEffect:z5,useLayoutEffect:j5,useMemo:B5,useReducer:k1,useRef:N5,useState:function(){return k1(il)},useDebugValue:iM,useDeferredValue:function(a,u){var f=zi();return H5(f,zt.memoizedState,a,u)},useTransition:function(){var a=k1(il)[0],u=zi().memoizedState;return[typeof a=="boolean"?a:Vg(a),u]},useSyncExternalStore:w5,useId:J5,useHostTransitionStatus:nM,useFormState:P5,useActionState:P5,useOptimistic:function(a,u){var f=zi();return M5(f,zt,a,u)},useMemoCache:Xx,useCacheRefresh:X5},wre={readContext:Nr,use:P1,useCallback:q5,useContext:Nr,useEffect:V5,useImperativeHandle:G5,useInsertionEffect:z5,useLayoutEffect:j5,useMemo:B5,useReducer:Kx,useRef:N5,useState:function(){return Kx(il)},useDebugValue:iM,useDeferredValue:function(a,u){var f=zi();return zt===null?rM(f,a,u):H5(f,zt.memoizedState,a,u)},useTransition:function(){var a=Kx(il)[0],u=zi().memoizedState;return[typeof a=="boolean"?a:Vg(a),u]},useSyncExternalStore:w5,useId:J5,useHostTransitionStatus:nM,useFormState:D5,useActionState:D5,useOptimistic:function(a,u){var f=zi();return zt!==null?M5(f,zt,a,u):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:Xx,useCacheRefresh:X5},hf=null,Ug=0;function z1(a){var u=Ug;return Ug+=1,hf===null&&(hf=[]),p5(hf,a,u)}function Gg(a,u){u=u.props.ref,a.ref=u!==void 0?u:null}function j1(a,u){throw u.$$typeof===v?Error(r(525)):(a=Object.prototype.toString.call(u),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a)))}function r4(a){var u=a._init;return u(a._payload)}function s4(a){function u(H,G){if(a){var J=H.deletions;J===null?(H.deletions=[G],H.flags|=16):J.push(G)}}function f(H,G){if(!a)return null;for(;G!==null;)u(H,G),G=G.sibling;return null}function g(H){for(var G=new Map;H!==null;)H.key!==null?G.set(H.key,H):G.set(H.index,H),H=H.sibling;return G}function _(H,G){return H=Xa(H,G),H.index=0,H.sibling=null,H}function S(H,G,J){return H.index=J,a?(J=H.alternate,J!==null?(J=J.index,J<G?(H.flags|=67108866,G):J):(H.flags|=67108866,G)):(H.flags|=1048576,G)}function x(H){return a&&H.alternate===null&&(H.flags|=67108866),H}function C(H,G,J,le){return G===null||G.tag!==6?(G=Mx(J,H.mode,le),G.return=H,G):(G=_(G,J),G.return=H,G)}function F(H,G,J,le){var Re=J.type;return Re===E?ne(H,G,J.props.children,le,J.key):G!==null&&(G.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Z&&r4(Re)===G.type)?(G=_(G,J.props),Gg(G,J),G.return=H,G):(G=E1(J.type,J.key,J.props,null,H.mode,le),Gg(G,J),G.return=H,G)}function X(H,G,J,le){return G===null||G.tag!==4||G.stateNode.containerInfo!==J.containerInfo||G.stateNode.implementation!==J.implementation?(G=Ax(J,H.mode,le),G.return=H,G):(G=_(G,J.children||[]),G.return=H,G)}function ne(H,G,J,le,Re){return G===null||G.tag!==7?(G=Ed(J,H.mode,le,Re),G.return=H,G):(G=_(G,J),G.return=H,G)}function ce(H,G,J){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Mx(""+G,H.mode,J),G.return=H,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case b:return J=E1(G.type,G.key,G.props,null,H.mode,J),Gg(J,G),J.return=H,J;case w:return G=Ax(G,H.mode,J),G.return=H,G;case Z:var le=G._init;return G=le(G._payload),ce(H,G,J)}if(Ye(G)||me(G))return G=Ed(G,H.mode,J,null),G.return=H,G;if(typeof G.then=="function")return ce(H,z1(G),J);if(G.$$typeof===L)return ce(H,M1(H,G),J);j1(H,G)}return null}function Q(H,G,J,le){var Re=G!==null?G.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Re!==null?null:C(H,G,""+J,le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return J.key===Re?F(H,G,J,le):null;case w:return J.key===Re?X(H,G,J,le):null;case Z:return Re=J._init,J=Re(J._payload),Q(H,G,J,le)}if(Ye(J)||me(J))return Re!==null?null:ne(H,G,J,le,null);if(typeof J.then=="function")return Q(H,G,z1(J),le);if(J.$$typeof===L)return Q(H,G,M1(H,J),le);j1(H,J)}return null}function K(H,G,J,le,Re){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return H=H.get(J)||null,C(G,H,""+le,Re);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case b:return H=H.get(le.key===null?J:le.key)||null,F(G,H,le,Re);case w:return H=H.get(le.key===null?J:le.key)||null,X(G,H,le,Re);case Z:var ct=le._init;return le=ct(le._payload),K(H,G,J,le,Re)}if(Ye(le)||me(le))return H=H.get(J)||null,ne(G,H,le,Re,null);if(typeof le.then=="function")return K(H,G,J,z1(le),Re);if(le.$$typeof===L)return K(H,G,J,M1(G,le),Re);j1(G,le)}return null}function Xe(H,G,J,le){for(var Re=null,ct=null,Ve=G,Ze=G=0,fr=null;Ve!==null&&Ze<J.length;Ze++){Ve.index>Ze?(fr=Ve,Ve=null):fr=Ve.sibling;var Tt=Q(H,Ve,J[Ze],le);if(Tt===null){Ve===null&&(Ve=fr);break}a&&Ve&&Tt.alternate===null&&u(H,Ve),G=S(Tt,G,Ze),ct===null?Re=Tt:ct.sibling=Tt,ct=Tt,Ve=fr}if(Ze===J.length)return f(H,Ve),Ct&&$d(H,Ze),Re;if(Ve===null){for(;Ze<J.length;Ze++)Ve=ce(H,J[Ze],le),Ve!==null&&(G=S(Ve,G,Ze),ct===null?Re=Ve:ct.sibling=Ve,ct=Ve);return Ct&&$d(H,Ze),Re}for(Ve=g(Ve);Ze<J.length;Ze++)fr=K(Ve,H,Ze,J[Ze],le),fr!==null&&(a&&fr.alternate!==null&&Ve.delete(fr.key===null?Ze:fr.key),G=S(fr,G,Ze),ct===null?Re=fr:ct.sibling=fr,ct=fr);return a&&Ve.forEach(function(ku){return u(H,ku)}),Ct&&$d(H,Ze),Re}function qe(H,G,J,le){if(J==null)throw Error(r(151));for(var Re=null,ct=null,Ve=G,Ze=G=0,fr=null,Tt=J.next();Ve!==null&&!Tt.done;Ze++,Tt=J.next()){Ve.index>Ze?(fr=Ve,Ve=null):fr=Ve.sibling;var ku=Q(H,Ve,Tt.value,le);if(ku===null){Ve===null&&(Ve=fr);break}a&&Ve&&ku.alternate===null&&u(H,Ve),G=S(ku,G,Ze),ct===null?Re=ku:ct.sibling=ku,ct=ku,Ve=fr}if(Tt.done)return f(H,Ve),Ct&&$d(H,Ze),Re;if(Ve===null){for(;!Tt.done;Ze++,Tt=J.next())Tt=ce(H,Tt.value,le),Tt!==null&&(G=S(Tt,G,Ze),ct===null?Re=Tt:ct.sibling=Tt,ct=Tt);return Ct&&$d(H,Ze),Re}for(Ve=g(Ve);!Tt.done;Ze++,Tt=J.next())Tt=K(Ve,H,Ze,Tt.value,le),Tt!==null&&(a&&Tt.alternate!==null&&Ve.delete(Tt.key===null?Ze:Tt.key),G=S(Tt,G,Ze),ct===null?Re=Tt:ct.sibling=Tt,ct=Tt);return a&&Ve.forEach(function(Sse){return u(H,Sse)}),Ct&&$d(H,Ze),Re}function Ut(H,G,J,le){if(typeof J=="object"&&J!==null&&J.type===E&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case b:e:{for(var Re=J.key;G!==null;){if(G.key===Re){if(Re=J.type,Re===E){if(G.tag===7){f(H,G.sibling),le=_(G,J.props.children),le.return=H,H=le;break e}}else if(G.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Z&&r4(Re)===G.type){f(H,G.sibling),le=_(G,J.props),Gg(le,J),le.return=H,H=le;break e}f(H,G);break}else u(H,G);G=G.sibling}J.type===E?(le=Ed(J.props.children,H.mode,le,J.key),le.return=H,H=le):(le=E1(J.type,J.key,J.props,null,H.mode,le),Gg(le,J),le.return=H,H=le)}return x(H);case w:e:{for(Re=J.key;G!==null;){if(G.key===Re)if(G.tag===4&&G.stateNode.containerInfo===J.containerInfo&&G.stateNode.implementation===J.implementation){f(H,G.sibling),le=_(G,J.children||[]),le.return=H,H=le;break e}else{f(H,G);break}else u(H,G);G=G.sibling}le=Ax(J,H.mode,le),le.return=H,H=le}return x(H);case Z:return Re=J._init,J=Re(J._payload),Ut(H,G,J,le)}if(Ye(J))return Xe(H,G,J,le);if(me(J)){if(Re=me(J),typeof Re!="function")throw Error(r(150));return J=Re.call(J),qe(H,G,J,le)}if(typeof J.then=="function")return Ut(H,G,z1(J),le);if(J.$$typeof===L)return Ut(H,G,M1(H,J),le);j1(H,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,G!==null&&G.tag===6?(f(H,G.sibling),le=_(G,J),le.return=H,H=le):(f(H,G),le=Mx(J,H.mode,le),le.return=H,H=le),x(H)):f(H,G)}return function(H,G,J,le){try{Ug=0;var Re=Ut(H,G,J,le);return hf=null,Re}catch(Ve){if(Ve===Rg||Ve===I1)throw Ve;var ct=Ys(29,Ve,null,H.mode);return ct.lanes=le,ct.return=H,ct}finally{}}}var pf=s4(!0),n4=s4(!1),Mn=de(null),ta=null;function _u(a){var u=a.alternate;Se(tr,tr.current&1),Se(Mn,a),ta===null&&(u===null||lf.current!==null||u.memoizedState!==null)&&(ta=a)}function o4(a){if(a.tag===22){if(Se(tr,tr.current),Se(Mn,a),ta===null){var u=a.alternate;u!==null&&u.memoizedState!==null&&(ta=a)}}else wu()}function wu(){Se(tr,tr.current),Se(Mn,Mn.current)}function rl(a){Ae(Mn),ta===a&&(ta=null),Ae(tr)}var tr=de(0);function U1(a){for(var u=a;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||JM(f)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function aM(a,u,f,g){u=a.memoizedState,f=f(g,u),f=f==null?u:y({},u,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var lM={enqueueSetState:function(a,u,f){a=a._reactInternals;var g=Ks(),_=gu(g);_.payload=u,f!=null&&(_.callback=f),u=vu(a,_,g),u!==null&&(en(u,a,g),kg(u,a,g))},enqueueReplaceState:function(a,u,f){a=a._reactInternals;var g=Ks(),_=gu(g);_.tag=1,_.payload=u,f!=null&&(_.callback=f),u=vu(a,_,g),u!==null&&(en(u,a,g),kg(u,a,g))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var f=Ks(),g=gu(f);g.tag=2,u!=null&&(g.callback=u),u=vu(a,g,f),u!==null&&(en(u,a,f),kg(u,a,f))}};function a4(a,u,f,g,_,S,x){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,S,x):u.prototype&&u.prototype.isPureReactComponent?!$g(f,g)||!$g(_,S):!0}function l4(a,u,f,g){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==a&&lM.enqueueReplaceState(u,u.state,null)}function Ld(a,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(a=a.defaultProps){f===u&&(f=y({},f));for(var _ in a)f[_]===void 0&&(f[_]=a[_])}return f}var G1=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function u4(a){G1(a)}function c4(a){console.error(a)}function d4(a){G1(a)}function q1(a,u){try{var f=a.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function h4(a,u,f){try{var g=a.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function uM(a,u,f){return f=gu(f),f.tag=3,f.payload={element:null},f.callback=function(){q1(a,u)},f}function p4(a){return a=gu(a),a.tag=3,a}function f4(a,u,f,g){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var S=g.value;a.payload=function(){return _(S)},a.callback=function(){h4(u,f,g)}}var x=f.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(a.callback=function(){h4(u,f,g),typeof _!="function"&&(Mu===null?Mu=new Set([this]):Mu.add(this));var C=g.stack;this.componentDidCatch(g.value,{componentStack:C!==null?C:""})})}function Sre(a,u,f,g,_){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&Cg(u,f,_,!0),f=Mn.current,f!==null){switch(f.tag){case 13:return ta===null?RM():f.alternate===null&&$i===0&&($i=3),f.flags&=-257,f.flags|=65536,f.lanes=_,g===Fx?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),kM(a,g,_)),!1;case 22:return f.flags|=65536,g===Fx?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),kM(a,g,_)),!1}throw Error(r(435,f.tag))}return kM(a,g,_),RM(),!1}if(Ct)return u=Mn.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,g!==Ox&&(a=Error(r(422),{cause:g}),Ig(En(a,f)))):(g!==Ox&&(u=Error(r(423),{cause:g}),Ig(En(u,f))),a=a.current.alternate,a.flags|=65536,_&=-_,a.lanes|=_,g=En(g,f),_=uM(a.stateNode,g,_),jx(a,_),$i!==4&&($i=2)),!1;var S=Error(r(520),{cause:g});if(S=En(S,f),Jg===null?Jg=[S]:Jg.push(S),$i!==4&&($i=2),u===null)return!0;g=En(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,a=_&-_,f.lanes|=a,a=uM(f.stateNode,g,a),jx(f,a),!1;case 1:if(u=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Mu===null||!Mu.has(S))))return f.flags|=65536,_&=-_,f.lanes|=_,_=p4(_),f4(_,a,f,g),jx(f,_),!1}f=f.return}while(f!==null);return!1}var m4=Error(r(461)),hr=!1;function Mr(a,u,f,g){u.child=a===null?n4(u,null,f,g):pf(u,a.child,f,g)}function y4(a,u,f,g,_){f=f.render;var S=u.ref;if("ref"in g){var x={};for(var C in g)C!=="ref"&&(x[C]=g[C])}else x=g;return Id(u),g=Hx(a,u,f,x,S,_),C=Wx(),a!==null&&!hr?(Zx(a,u,_),sl(a,u,_)):(Ct&&C&&Ix(u),u.flags|=1,Mr(a,u,g,_),u.child)}function g4(a,u,f,g,_){if(a===null){var S=f.type;return typeof S=="function"&&!xx(S)&&S.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=S,v4(a,u,S,g,_)):(a=E1(f.type,null,g,u,u.mode,_),a.ref=u.ref,a.return=u,u.child=a)}if(S=a.child,!gM(a,_)){var x=S.memoizedProps;if(f=f.compare,f=f!==null?f:$g,f(x,g)&&a.ref===u.ref)return sl(a,u,_)}return u.flags|=1,a=Xa(S,g),a.ref=u.ref,a.return=u,u.child=a}function v4(a,u,f,g,_){if(a!==null){var S=a.memoizedProps;if($g(S,g)&&a.ref===u.ref)if(hr=!1,u.pendingProps=g=S,gM(a,_))(a.flags&131072)!==0&&(hr=!0);else return u.lanes=a.lanes,sl(a,u,_)}return cM(a,u,f,g,_)}function b4(a,u,f){var g=u.pendingProps,_=g.children,S=a!==null?a.memoizedState:null;if(g.mode==="hidden"){if((u.flags&128)!==0){if(g=S!==null?S.baseLanes|f:f,a!==null){for(_=u.child=a.child,S=0;_!==null;)S=S|_.lanes|_.childLanes,_=_.sibling;u.childLanes=S&~g}else u.childLanes=0,u.child=null;return _4(a,u,g,f)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},a!==null&&A1(u,S!==null?S.cachePool:null),S!==null?v5(u,S):Gx(),o4(u);else return u.lanes=u.childLanes=536870912,_4(a,u,S!==null?S.baseLanes|f:f,f)}else S!==null?(A1(u,S.cachePool),v5(u,S),wu(),u.memoizedState=null):(a!==null&&A1(u,null),Gx(),wu());return Mr(a,u,_,f),u.child}function _4(a,u,f,g){var _=Nx();return _=_===null?null:{parent:er._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},a!==null&&A1(u,null),Gx(),o4(u),a!==null&&Cg(a,u,g,!0),null}function B1(a,u){var f=u.ref;if(f===null)a!==null&&a.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(a===null||a.ref!==f)&&(u.flags|=4194816)}}function cM(a,u,f,g,_){return Id(u),f=Hx(a,u,f,g,void 0,_),g=Wx(),a!==null&&!hr?(Zx(a,u,_),sl(a,u,_)):(Ct&&g&&Ix(u),u.flags|=1,Mr(a,u,f,_),u.child)}function w4(a,u,f,g,_,S){return Id(u),u.updateQueue=null,f=_5(u,g,f,_),b5(a),g=Wx(),a!==null&&!hr?(Zx(a,u,S),sl(a,u,S)):(Ct&&g&&Ix(u),u.flags|=1,Mr(a,u,f,S),u.child)}function S4(a,u,f,g,_){if(Id(u),u.stateNode===null){var S=rf,x=f.contextType;typeof x=="object"&&x!==null&&(S=Nr(x)),S=new f(g,S),u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=lM,u.stateNode=S,S._reactInternals=u,S=u.stateNode,S.props=g,S.state=u.memoizedState,S.refs={},Vx(u),x=f.contextType,S.context=typeof x=="object"&&x!==null?Nr(x):rf,S.state=u.memoizedState,x=f.getDerivedStateFromProps,typeof x=="function"&&(aM(u,f,x,g),S.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(x=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),x!==S.state&&lM.enqueueReplaceState(S,S.state,null),Ng(u,g,S,_),Dg(),S.state=u.memoizedState),typeof S.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(a===null){S=u.stateNode;var C=u.memoizedProps,F=Ld(f,C);S.props=F;var X=S.context,ne=f.contextType;x=rf,typeof ne=="object"&&ne!==null&&(x=Nr(ne));var ce=f.getDerivedStateFromProps;ne=typeof ce=="function"||typeof S.getSnapshotBeforeUpdate=="function",C=u.pendingProps!==C,ne||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(C||X!==x)&&l4(u,S,g,x),yu=!1;var Q=u.memoizedState;S.state=Q,Ng(u,g,S,_),Dg(),X=u.memoizedState,C||Q!==X||yu?(typeof ce=="function"&&(aM(u,f,ce,g),X=u.memoizedState),(F=yu||a4(u,f,F,g,Q,X,x))?(ne||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(u.flags|=4194308)):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=X),S.props=g,S.state=X,S.context=x,g=F):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{S=u.stateNode,zx(a,u),x=u.memoizedProps,ne=Ld(f,x),S.props=ne,ce=u.pendingProps,Q=S.context,X=f.contextType,F=rf,typeof X=="object"&&X!==null&&(F=Nr(X)),C=f.getDerivedStateFromProps,(X=typeof C=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(x!==ce||Q!==F)&&l4(u,S,g,F),yu=!1,Q=u.memoizedState,S.state=Q,Ng(u,g,S,_),Dg();var K=u.memoizedState;x!==ce||Q!==K||yu||a!==null&&a.dependencies!==null&&x1(a.dependencies)?(typeof C=="function"&&(aM(u,f,C,g),K=u.memoizedState),(ne=yu||a4(u,f,ne,g,Q,K,F)||a!==null&&a.dependencies!==null&&x1(a.dependencies))?(X||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,K,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,K,F)),typeof S.componentDidUpdate=="function"&&(u.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof S.componentDidUpdate!="function"||x===a.memoizedProps&&Q===a.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===a.memoizedProps&&Q===a.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=K),S.props=g,S.state=K,S.context=F,g=ne):(typeof S.componentDidUpdate!="function"||x===a.memoizedProps&&Q===a.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||x===a.memoizedProps&&Q===a.memoizedState||(u.flags|=1024),g=!1)}return S=g,B1(a,u),g=(u.flags&128)!==0,S||g?(S=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:S.render(),u.flags|=1,a!==null&&g?(u.child=pf(u,a.child,null,_),u.child=pf(u,null,f,_)):Mr(a,u,f,_),u.memoizedState=S.state,a=u.child):a=sl(a,u,_),a}function E4(a,u,f,g){return Ag(),u.flags|=256,Mr(a,u,f,g),u.child}var dM={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hM(a){return{baseLanes:a,cachePool:c5()}}function pM(a,u,f){return a=a!==null?a.childLanes&~f:0,u&&(a|=An),a}function T4(a,u,f){var g=u.pendingProps,_=!1,S=(u.flags&128)!==0,x;if((x=S)||(x=a!==null&&a.memoizedState===null?!1:(tr.current&2)!==0),x&&(_=!0,u.flags&=-129),x=(u.flags&32)!==0,u.flags&=-33,a===null){if(Ct){if(_?_u(u):wu(),Ct){var C=Ti,F;if(F=C){e:{for(F=C,C=ea;F.nodeType!==8;){if(!C){C=null;break e}if(F=co(F.nextSibling),F===null){C=null;break e}}C=F}C!==null?(u.memoizedState={dehydrated:C,treeContext:Td!==null?{id:Qa,overflow:Ka}:null,retryLane:536870912,hydrationErrors:null},F=Ys(18,null,null,0),F.stateNode=C,F.return=u,u.child=F,os=u,Ti=null,F=!0):F=!1}F||Md(u)}if(C=u.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return JM(C)?u.lanes=32:u.lanes=536870912,null;rl(u)}return C=g.children,g=g.fallback,_?(wu(),_=u.mode,C=H1({mode:"hidden",children:C},_),g=Ed(g,_,f,null),C.return=u,g.return=u,C.sibling=g,u.child=C,_=u.child,_.memoizedState=hM(f),_.childLanes=pM(a,x,f),u.memoizedState=dM,g):(_u(u),fM(u,C))}if(F=a.memoizedState,F!==null&&(C=F.dehydrated,C!==null)){if(S)u.flags&256?(_u(u),u.flags&=-257,u=mM(a,u,f)):u.memoizedState!==null?(wu(),u.child=a.child,u.flags|=128,u=null):(wu(),_=g.fallback,C=u.mode,g=H1({mode:"visible",children:g.children},C),_=Ed(_,C,f,null),_.flags|=2,g.return=u,_.return=u,g.sibling=_,u.child=g,pf(u,a.child,null,f),g=u.child,g.memoizedState=hM(f),g.childLanes=pM(a,x,f),u.memoizedState=dM,u=_);else if(_u(u),JM(C)){if(x=C.nextSibling&&C.nextSibling.dataset,x)var X=x.dgst;x=X,g=Error(r(419)),g.stack="",g.digest=x,Ig({value:g,source:null,stack:null}),u=mM(a,u,f)}else if(hr||Cg(a,u,f,!1),x=(f&a.childLanes)!==0,hr||x){if(x=Qt,x!==null&&(g=f&-f,g=(g&42)!==0?1:hg(g),g=(g&(x.suspendedLanes|f))!==0?0:g,g!==0&&g!==F.retryLane))throw F.retryLane=g,tf(a,g),en(x,a,g),m4;C.data==="$?"||RM(),u=mM(a,u,f)}else C.data==="$?"?(u.flags|=192,u.child=a.child,u=null):(a=F.treeContext,Ti=co(C.nextSibling),os=u,Ct=!0,xd=null,ea=!1,a!==null&&($n[xn++]=Qa,$n[xn++]=Ka,$n[xn++]=Td,Qa=a.id,Ka=a.overflow,Td=u),u=fM(u,g.children),u.flags|=4096);return u}return _?(wu(),_=g.fallback,C=u.mode,F=a.child,X=F.sibling,g=Xa(F,{mode:"hidden",children:g.children}),g.subtreeFlags=F.subtreeFlags&65011712,X!==null?_=Xa(X,_):(_=Ed(_,C,f,null),_.flags|=2),_.return=u,g.return=u,g.sibling=_,u.child=g,g=_,_=u.child,C=a.child.memoizedState,C===null?C=hM(f):(F=C.cachePool,F!==null?(X=er._currentValue,F=F.parent!==X?{parent:X,pool:X}:F):F=c5(),C={baseLanes:C.baseLanes|f,cachePool:F}),_.memoizedState=C,_.childLanes=pM(a,x,f),u.memoizedState=dM,g):(_u(u),f=a.child,a=f.sibling,f=Xa(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,a!==null&&(x=u.deletions,x===null?(u.deletions=[a],u.flags|=16):x.push(a)),u.child=f,u.memoizedState=null,f)}function fM(a,u){return u=H1({mode:"visible",children:u},a.mode),u.return=a,a.child=u}function H1(a,u){return a=Ys(22,a,null,u),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function mM(a,u,f){return pf(u,a.child,null,f),a=fM(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function $4(a,u,f){a.lanes|=u;var g=a.alternate;g!==null&&(g.lanes|=u),Rx(a.return,u,f)}function yM(a,u,f,g,_){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:_}:(S.isBackwards=u,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=f,S.tailMode=_)}function x4(a,u,f){var g=u.pendingProps,_=g.revealOrder,S=g.tail;if(Mr(a,u,g.children,f),g=tr.current,(g&2)!==0)g=g&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&$4(a,f,u);else if(a.tag===19)$4(a,f,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}switch(Se(tr,g),_){case"forwards":for(f=u.child,_=null;f!==null;)a=f.alternate,a!==null&&U1(a)===null&&(_=f),f=f.sibling;f=_,f===null?(_=u.child,u.child=null):(_=f.sibling,f.sibling=null),yM(u,!1,_,f,S);break;case"backwards":for(f=null,_=u.child,u.child=null;_!==null;){if(a=_.alternate,a!==null&&U1(a)===null){u.child=_;break}a=_.sibling,_.sibling=f,f=_,_=a}yM(u,!0,f,null,S);break;case"together":yM(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function sl(a,u,f){if(a!==null&&(u.dependencies=a.dependencies),xu|=u.lanes,(f&u.childLanes)===0)if(a!==null){if(Cg(a,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(a!==null&&u.child!==a.child)throw Error(r(153));if(u.child!==null){for(a=u.child,f=Xa(a,a.pendingProps),u.child=f,f.return=u;a.sibling!==null;)a=a.sibling,f=f.sibling=Xa(a,a.pendingProps),f.return=u;f.sibling=null}return u.child}function gM(a,u){return(a.lanes&u)!==0?!0:(a=a.dependencies,!!(a!==null&&x1(a)))}function Ere(a,u,f){switch(u.tag){case 3:_t(u,u.stateNode.containerInfo),mu(u,er,a.memoizedState.cache),Ag();break;case 27:case 5:cu(u);break;case 4:_t(u,u.stateNode.containerInfo);break;case 10:mu(u,u.type,u.memoizedProps.value);break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(_u(u),u.flags|=128,null):(f&u.child.childLanes)!==0?T4(a,u,f):(_u(u),a=sl(a,u,f),a!==null?a.sibling:null);_u(u);break;case 19:var _=(a.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(Cg(a,u,f,!1),g=(f&u.childLanes)!==0),_){if(g)return x4(a,u,f);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Se(tr,tr.current),g)break;return null;case 22:case 23:return u.lanes=0,b4(a,u,f);case 24:mu(u,er,a.memoizedState.cache)}return sl(a,u,f)}function M4(a,u,f){if(a!==null)if(a.memoizedProps!==u.pendingProps)hr=!0;else{if(!gM(a,f)&&(u.flags&128)===0)return hr=!1,Ere(a,u,f);hr=(a.flags&131072)!==0}else hr=!1,Ct&&(u.flags&1048576)!==0&&r5(u,$1,u.index);switch(u.lanes=0,u.tag){case 16:e:{a=u.pendingProps;var g=u.elementType,_=g._init;if(g=_(g._payload),u.type=g,typeof g=="function")xx(g)?(a=Ld(g,a),u.tag=1,u=S4(null,u,g,a,f)):(u.tag=0,u=cM(null,u,g,a,f));else{if(g!=null){if(_=g.$$typeof,_===R){u.tag=11,u=y4(null,u,g,a,f);break e}else if(_===V){u.tag=14,u=g4(null,u,g,a,f);break e}}throw u=Ee(g)||g,Error(r(306,u,""))}}return u;case 0:return cM(a,u,u.type,u.pendingProps,f);case 1:return g=u.type,_=Ld(g,u.pendingProps),S4(a,u,g,_,f);case 3:e:{if(_t(u,u.stateNode.containerInfo),a===null)throw Error(r(387));g=u.pendingProps;var S=u.memoizedState;_=S.element,zx(a,u),Ng(u,g,null,f);var x=u.memoizedState;if(g=x.cache,mu(u,er,g),g!==S.cache&&Px(u,[er],f,!0),Dg(),g=x.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:x.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=E4(a,u,g,f);break e}else if(g!==_){_=En(Error(r(424)),u),Ig(_),u=E4(a,u,g,f);break e}else{switch(a=u.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Ti=co(a.firstChild),os=u,Ct=!0,xd=null,ea=!0,f=n4(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Ag(),g===_){u=sl(a,u,f);break e}Mr(a,u,g,f)}u=u.child}return u;case 26:return B1(a,u),a===null?(f=O6(u.type,null,u.pendingProps,null))?u.memoizedState=f:Ct||(f=u.type,a=u.pendingProps,g=ow(We.current).createElement(f),g[gi]=u,g[Xt]=a,Ir(g,f,a),Li(g),u.stateNode=g):u.memoizedState=O6(u.type,a.memoizedProps,u.pendingProps,a.memoizedState),null;case 27:return cu(u),a===null&&Ct&&(g=u.stateNode=A6(u.type,u.pendingProps,We.current),os=u,ea=!0,_=Ti,Cu(u.type)?(XM=_,Ti=co(g.firstChild)):Ti=_),Mr(a,u,u.pendingProps.children,f),B1(a,u),a===null&&(u.flags|=4194304),u.child;case 5:return a===null&&Ct&&((_=g=Ti)&&(g=Xre(g,u.type,u.pendingProps,ea),g!==null?(u.stateNode=g,os=u,Ti=co(g.firstChild),ea=!1,_=!0):_=!1),_||Md(u)),cu(u),_=u.type,S=u.pendingProps,x=a!==null?a.memoizedProps:null,g=S.children,WM(_,S)?g=null:x!==null&&WM(_,x)&&(u.flags|=32),u.memoizedState!==null&&(_=Hx(a,u,mre,null,null,f),n0._currentValue=_),B1(a,u),Mr(a,u,g,f),u.child;case 6:return a===null&&Ct&&((a=f=Ti)&&(f=Qre(f,u.pendingProps,ea),f!==null?(u.stateNode=f,os=u,Ti=null,a=!0):a=!1),a||Md(u)),null;case 13:return T4(a,u,f);case 4:return _t(u,u.stateNode.containerInfo),g=u.pendingProps,a===null?u.child=pf(u,null,g,f):Mr(a,u,g,f),u.child;case 11:return y4(a,u,u.type,u.pendingProps,f);case 7:return Mr(a,u,u.pendingProps,f),u.child;case 8:return Mr(a,u,u.pendingProps.children,f),u.child;case 12:return Mr(a,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,mu(u,u.type,g.value),Mr(a,u,g.children,f),u.child;case 9:return _=u.type._context,g=u.pendingProps.children,Id(u),_=Nr(_),g=g(_),u.flags|=1,Mr(a,u,g,f),u.child;case 14:return g4(a,u,u.type,u.pendingProps,f);case 15:return v4(a,u,u.type,u.pendingProps,f);case 19:return x4(a,u,f);case 31:return g=u.pendingProps,f=u.mode,g={mode:g.mode,children:g.children},a===null?(f=H1(g,f),f.ref=u.ref,u.child=f,f.return=u,u=f):(f=Xa(a.child,g),f.ref=u.ref,u.child=f,f.return=u,u=f),u;case 22:return b4(a,u,f);case 24:return Id(u),g=Nr(er),a===null?(_=Nx(),_===null&&(_=Qt,S=kx(),_.pooledCache=S,S.refCount++,S!==null&&(_.pooledCacheLanes|=f),_=S),u.memoizedState={parent:g,cache:_},Vx(u),mu(u,er,_)):((a.lanes&f)!==0&&(zx(a,u),Ng(u,null,null,f),Dg()),_=a.memoizedState,S=u.memoizedState,_.parent!==g?(_={parent:g,cache:g},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),mu(u,er,g)):(g=S.cache,mu(u,er,g),g!==_.cache&&Px(u,[er],f,!0))),Mr(a,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function nl(a){a.flags|=4}function A4(a,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!D6(u)){if(u=Mn.current,u!==null&&((gt&4194048)===gt?ta!==null:(gt&62914560)!==gt&&(gt&536870912)===0||u!==ta))throw Pg=Fx,d5;a.flags|=8192}}function W1(a,u){u!==null&&(a.flags|=4),a.flags&16384&&(u=a.tag!==22?s1():536870912,a.lanes|=u,gf|=u)}function qg(a,u){if(!Ct)switch(a.tailMode){case"hidden":u=a.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function vi(a){var u=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(u)for(var _=a.child;_!==null;)f|=_.lanes|_.childLanes,g|=_.subtreeFlags&65011712,g|=_.flags&65011712,_.return=a,_=_.sibling;else for(_=a.child;_!==null;)f|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=a,_=_.sibling;return a.subtreeFlags|=g,a.childLanes=f,u}function Tre(a,u,f){var g=u.pendingProps;switch(Cx(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(u),null;case 1:return vi(u),null;case 3:return f=u.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),tl(er),Hs(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(Mg(u)?nl(u):a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,o5())),vi(u),null;case 26:return f=u.memoizedState,a===null?(nl(u),f!==null?(vi(u),A4(u,f)):(vi(u),u.flags&=-16777217)):f?f!==a.memoizedState?(nl(u),vi(u),A4(u,f)):(vi(u),u.flags&=-16777217):(a.memoizedProps!==g&&nl(u),vi(u),u.flags&=-16777217),null;case 27:Ha(u),f=We.current;var _=u.type;if(a!==null&&u.stateNode!=null)a.memoizedProps!==g&&nl(u);else{if(!g){if(u.stateNode===null)throw Error(r(166));return vi(u),null}a=ze.current,Mg(u)?s5(u):(a=A6(_,g,f),u.stateNode=a,nl(u))}return vi(u),null;case 5:if(Ha(u),f=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==g&&nl(u);else{if(!g){if(u.stateNode===null)throw Error(r(166));return vi(u),null}if(a=ze.current,Mg(u))s5(u);else{switch(_=ow(We.current),a){case 1:a=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:a=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":a=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":a=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":a=_.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof g.is=="string"?_.createElement("select",{is:g.is}):_.createElement("select"),g.multiple?a.multiple=!0:g.size&&(a.size=g.size);break;default:a=typeof g.is=="string"?_.createElement(f,{is:g.is}):_.createElement(f)}}a[gi]=u,a[Xt]=g;e:for(_=u.child;_!==null;){if(_.tag===5||_.tag===6)a.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===u)break e;for(;_.sibling===null;){if(_.return===null||_.return===u)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}u.stateNode=a;e:switch(Ir(a,f,g),f){case"button":case"input":case"select":case"textarea":a=!!g.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&nl(u)}}return vi(u),u.flags&=-16777217,null;case 6:if(a&&u.stateNode!=null)a.memoizedProps!==g&&nl(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(r(166));if(a=We.current,Mg(u)){if(a=u.stateNode,f=u.memoizedProps,g=null,_=os,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}a[gi]=u,a=!!(a.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||w6(a.nodeValue,f)),a||Md(u)}else a=ow(a).createTextNode(g),a[gi]=u,u.stateNode=a}return vi(u),null;case 13:if(g=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(_=Mg(u),g!==null&&g.dehydrated!==null){if(a===null){if(!_)throw Error(r(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[gi]=u}else Ag(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;vi(u),_=!1}else _=o5(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(rl(u),u):(rl(u),null)}if(rl(u),(u.flags&128)!==0)return u.lanes=f,u;if(f=g!==null,a=a!==null&&a.memoizedState!==null,f){g=u.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool);var S=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==_&&(g.flags|=2048)}return f!==a&&f&&(u.child.flags|=8192),W1(u,u.updateQueue),vi(u),null;case 4:return Hs(),a===null&&UM(u.stateNode.containerInfo),vi(u),null;case 10:return tl(u.type),vi(u),null;case 19:if(Ae(tr),_=u.memoizedState,_===null)return vi(u),null;if(g=(u.flags&128)!==0,S=_.rendering,S===null)if(g)qg(_,!1);else{if($i!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(S=U1(a),S!==null){for(u.flags|=128,qg(_,!1),a=S.updateQueue,u.updateQueue=a,W1(u,a),u.subtreeFlags=0,a=f,f=u.child;f!==null;)i5(f,a),f=f.sibling;return Se(tr,tr.current&1|2),u.child}a=a.sibling}_.tail!==null&&wn()>J1&&(u.flags|=128,g=!0,qg(_,!1),u.lanes=4194304)}else{if(!g)if(a=U1(S),a!==null){if(u.flags|=128,g=!0,a=a.updateQueue,u.updateQueue=a,W1(u,a),qg(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!Ct)return vi(u),null}else 2*wn()-_.renderingStartTime>J1&&f!==536870912&&(u.flags|=128,g=!0,qg(_,!1),u.lanes=4194304);_.isBackwards?(S.sibling=u.child,u.child=S):(a=_.last,a!==null?a.sibling=S:u.child=S,_.last=S)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=wn(),u.sibling=null,a=tr.current,Se(tr,g?a&1|2:a&1),u):(vi(u),null);case 22:case 23:return rl(u),qx(),g=u.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(vi(u),u.subtreeFlags&6&&(u.flags|=8192)):vi(u),f=u.updateQueue,f!==null&&W1(u,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),a!==null&&Ae(Cd),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),tl(er),vi(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function $re(a,u){switch(Cx(u),u.tag){case 1:return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return tl(er),Hs(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 26:case 27:case 5:return Ha(u),null;case 13:if(rl(u),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Ag()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return Ae(tr),null;case 4:return Hs(),null;case 10:return tl(u.type),null;case 22:case 23:return rl(u),qx(),a!==null&&Ae(Cd),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 24:return tl(er),null;case 25:return null;default:return null}}function I4(a,u){switch(Cx(u),u.tag){case 3:tl(er),Hs();break;case 26:case 27:case 5:Ha(u);break;case 4:Hs();break;case 13:rl(u);break;case 19:Ae(tr);break;case 10:tl(u.type);break;case 22:case 23:rl(u),qx(),a!==null&&Ae(Cd);break;case 24:tl(er)}}function Bg(a,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var _=g.next;f=_;do{if((f.tag&a)===a){g=void 0;var S=f.create,x=f.inst;g=S(),x.destroy=g}f=f.next}while(f!==_)}}catch(C){Ht(u,u.return,C)}}function Su(a,u,f){try{var g=u.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var S=_.next;g=S;do{if((g.tag&a)===a){var x=g.inst,C=x.destroy;if(C!==void 0){x.destroy=void 0,_=u;var F=f,X=C;try{X()}catch(ne){Ht(_,F,ne)}}}g=g.next}while(g!==S)}}catch(ne){Ht(u,u.return,ne)}}function C4(a){var u=a.updateQueue;if(u!==null){var f=a.stateNode;try{g5(u,f)}catch(g){Ht(a,a.return,g)}}}function O4(a,u,f){f.props=Ld(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(g){Ht(a,u,g)}}function Hg(a,u){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof f=="function"?a.refCleanup=f(g):f.current=g}}catch(_){Ht(a,u,_)}}function ia(a,u){var f=a.ref,g=a.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(_){Ht(a,u,_)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){Ht(a,u,_)}else f.current=null}function L4(a){var u=a.type,f=a.memoizedProps,g=a.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(_){Ht(a,a.return,_)}}function vM(a,u,f){try{var g=a.stateNode;Hre(g,a.type,f,u),g[Xt]=u}catch(_){Ht(a,a.return,_)}}function R4(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Cu(a.type)||a.tag===4}function bM(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||R4(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Cu(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function _M(a,u,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(a),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=nw));else if(g!==4&&(g===27&&Cu(a.type)&&(f=a.stateNode,u=null),a=a.child,a!==null))for(_M(a,u,f),a=a.sibling;a!==null;)_M(a,u,f),a=a.sibling}function Z1(a,u,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,u?f.insertBefore(a,u):f.appendChild(a);else if(g!==4&&(g===27&&Cu(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(Z1(a,u,f),a=a.sibling;a!==null;)Z1(a,u,f),a=a.sibling}function P4(a){var u=a.stateNode,f=a.memoizedProps;try{for(var g=a.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);Ir(u,g,f),u[gi]=a,u[Xt]=f}catch(S){Ht(a,a.return,S)}}var ol=!1,ki=!1,wM=!1,k4=typeof WeakSet=="function"?WeakSet:Set,pr=null;function xre(a,u){if(a=a.containerInfo,BM=hw,a=HN(a),bx(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var _=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var x=0,C=-1,F=-1,X=0,ne=0,ce=a,Q=null;t:for(;;){for(var K;ce!==f||_!==0&&ce.nodeType!==3||(C=x+_),ce!==S||g!==0&&ce.nodeType!==3||(F=x+g),ce.nodeType===3&&(x+=ce.nodeValue.length),(K=ce.firstChild)!==null;)Q=ce,ce=K;for(;;){if(ce===a)break t;if(Q===f&&++X===_&&(C=x),Q===S&&++ne===g&&(F=x),(K=ce.nextSibling)!==null)break;ce=Q,Q=ce.parentNode}ce=K}f=C===-1||F===-1?null:{start:C,end:F}}else f=null}f=f||{start:0,end:0}}else f=null;for(HM={focusedElem:a,selectionRange:f},hw=!1,pr=u;pr!==null;)if(u=pr,a=u.child,(u.subtreeFlags&1024)!==0&&a!==null)a.return=u,pr=a;else for(;pr!==null;){switch(u=pr,S=u.alternate,a=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&S!==null){a=void 0,f=u,_=S.memoizedProps,S=S.memoizedState,g=f.stateNode;try{var Xe=Ld(f.type,_,f.elementType===f.type);a=g.getSnapshotBeforeUpdate(Xe,S),g.__reactInternalSnapshotBeforeUpdate=a}catch(qe){Ht(f,f.return,qe)}}break;case 3:if((a&1024)!==0){if(a=u.stateNode.containerInfo,f=a.nodeType,f===9)YM(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":YM(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=u.sibling,a!==null){a.return=u.return,pr=a;break}pr=u.return}}function D4(a,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Eu(a,f),g&4&&Bg(5,f);break;case 1:if(Eu(a,f),g&4)if(a=f.stateNode,u===null)try{a.componentDidMount()}catch(x){Ht(f,f.return,x)}else{var _=Ld(f.type,u.memoizedProps);u=u.memoizedState;try{a.componentDidUpdate(_,u,a.__reactInternalSnapshotBeforeUpdate)}catch(x){Ht(f,f.return,x)}}g&64&&C4(f),g&512&&Hg(f,f.return);break;case 3:if(Eu(a,f),g&64&&(a=f.updateQueue,a!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{g5(a,u)}catch(x){Ht(f,f.return,x)}}break;case 27:u===null&&g&4&&P4(f);case 26:case 5:Eu(a,f),u===null&&g&4&&L4(f),g&512&&Hg(f,f.return);break;case 12:Eu(a,f);break;case 13:Eu(a,f),g&4&&V4(a,f),g&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=kre.bind(null,f),Kre(a,f))));break;case 22:if(g=f.memoizedState!==null||ol,!g){u=u!==null&&u.memoizedState!==null||ki,_=ol;var S=ki;ol=g,(ki=u)&&!S?Tu(a,f,(f.subtreeFlags&8772)!==0):Eu(a,f),ol=_,ki=S}break;case 30:break;default:Eu(a,f)}}function N4(a){var u=a.alternate;u!==null&&(a.alternate=null,N4(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&Ws(u)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var di=null,Ts=!1;function al(a,u,f){for(f=f.child;f!==null;)F4(a,u,f),f=f.sibling}function F4(a,u,f){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(yd,f)}catch{}switch(f.tag){case 26:ki||ia(f,u),al(a,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:ki||ia(f,u);var g=di,_=Ts;Cu(f.type)&&(di=f.stateNode,Ts=!1),al(a,u,f),t0(f.stateNode),di=g,Ts=_;break;case 5:ki||ia(f,u);case 6:if(g=di,_=Ts,di=null,al(a,u,f),di=g,Ts=_,di!==null)if(Ts)try{(di.nodeType===9?di.body:di.nodeName==="HTML"?di.ownerDocument.body:di).removeChild(f.stateNode)}catch(S){Ht(f,u,S)}else try{di.removeChild(f.stateNode)}catch(S){Ht(f,u,S)}break;case 18:di!==null&&(Ts?(a=di,x6(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),u0(a)):x6(di,f.stateNode));break;case 4:g=di,_=Ts,di=f.stateNode.containerInfo,Ts=!0,al(a,u,f),di=g,Ts=_;break;case 0:case 11:case 14:case 15:ki||Su(2,f,u),ki||Su(4,f,u),al(a,u,f);break;case 1:ki||(ia(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&O4(f,u,g)),al(a,u,f);break;case 21:al(a,u,f);break;case 22:ki=(g=ki)||f.memoizedState!==null,al(a,u,f),ki=g;break;default:al(a,u,f)}}function V4(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{u0(a)}catch(f){Ht(u,u.return,f)}}function Mre(a){switch(a.tag){case 13:case 19:var u=a.stateNode;return u===null&&(u=a.stateNode=new k4),u;case 22:return a=a.stateNode,u=a._retryCache,u===null&&(u=a._retryCache=new k4),u;default:throw Error(r(435,a.tag))}}function SM(a,u){var f=Mre(a);u.forEach(function(g){var _=Dre.bind(null,a,g);f.has(g)||(f.add(g),g.then(_,_))})}function Js(a,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var _=f[g],S=a,x=u,C=x;e:for(;C!==null;){switch(C.tag){case 27:if(Cu(C.type)){di=C.stateNode,Ts=!1;break e}break;case 5:di=C.stateNode,Ts=!1;break e;case 3:case 4:di=C.stateNode.containerInfo,Ts=!0;break e}C=C.return}if(di===null)throw Error(r(160));F4(S,x,_),di=null,Ts=!1,S=_.alternate,S!==null&&(S.return=null),_.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)z4(u,a),u=u.sibling}var uo=null;function z4(a,u){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Js(u,a),Xs(a),g&4&&(Su(3,a,a.return),Bg(3,a),Su(5,a,a.return));break;case 1:Js(u,a),Xs(a),g&512&&(ki||f===null||ia(f,f.return)),g&64&&ol&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var _=uo;if(Js(u,a),Xs(a),g&512&&(ki||f===null||ia(f,f.return)),g&4){var S=f!==null?f.memoizedState:null;if(g=a.memoizedState,f===null)if(g===null)if(a.stateNode===null){e:{g=a.type,f=a.memoizedProps,_=_.ownerDocument||_;t:switch(g){case"title":S=_.getElementsByTagName("title")[0],(!S||S[bd]||S[gi]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=_.createElement(g),_.head.insertBefore(S,_.querySelector("head > title"))),Ir(S,g,f),S[gi]=a,Li(S),g=S;break e;case"link":var x=P6("link","href",_).get(g+(f.href||""));if(x){for(var C=0;C<x.length;C++)if(S=x[C],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){x.splice(C,1);break t}}S=_.createElement(g),Ir(S,g,f),_.head.appendChild(S);break;case"meta":if(x=P6("meta","content",_).get(g+(f.content||""))){for(C=0;C<x.length;C++)if(S=x[C],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){x.splice(C,1);break t}}S=_.createElement(g),Ir(S,g,f),_.head.appendChild(S);break;default:throw Error(r(468,g))}S[gi]=a,Li(S),g=S}a.stateNode=g}else k6(_,a.type,a.stateNode);else a.stateNode=R6(_,g,a.memoizedProps);else S!==g?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,g===null?k6(_,a.type,a.stateNode):R6(_,g,a.memoizedProps)):g===null&&a.stateNode!==null&&vM(a,a.memoizedProps,f.memoizedProps)}break;case 27:Js(u,a),Xs(a),g&512&&(ki||f===null||ia(f,f.return)),f!==null&&g&4&&vM(a,a.memoizedProps,f.memoizedProps);break;case 5:if(Js(u,a),Xs(a),g&512&&(ki||f===null||ia(f,f.return)),a.flags&32){_=a.stateNode;try{Zp(_,"")}catch(K){Ht(a,a.return,K)}}g&4&&a.stateNode!=null&&(_=a.memoizedProps,vM(a,_,f!==null?f.memoizedProps:_)),g&1024&&(wM=!0);break;case 6:if(Js(u,a),Xs(a),g&4){if(a.stateNode===null)throw Error(r(162));g=a.memoizedProps,f=a.stateNode;try{f.nodeValue=g}catch(K){Ht(a,a.return,K)}}break;case 3:if(uw=null,_=uo,uo=aw(u.containerInfo),Js(u,a),uo=_,Xs(a),g&4&&f!==null&&f.memoizedState.isDehydrated)try{u0(u.containerInfo)}catch(K){Ht(a,a.return,K)}wM&&(wM=!1,j4(a));break;case 4:g=uo,uo=aw(a.stateNode.containerInfo),Js(u,a),Xs(a),uo=g;break;case 12:Js(u,a),Xs(a);break;case 13:Js(u,a),Xs(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(AM=wn()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,SM(a,g)));break;case 22:_=a.memoizedState!==null;var F=f!==null&&f.memoizedState!==null,X=ol,ne=ki;if(ol=X||_,ki=ne||F,Js(u,a),ki=ne,ol=X,Xs(a),g&8192)e:for(u=a.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(f===null||F||ol||ki||Rd(a)),f=null,u=a;;){if(u.tag===5||u.tag===26){if(f===null){F=f=u;try{if(S=F.stateNode,_)x=S.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{C=F.stateNode;var ce=F.memoizedProps.style,Q=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;C.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(K){Ht(F,F.return,K)}}}else if(u.tag===6){if(f===null){F=u;try{F.stateNode.nodeValue=_?"":F.memoizedProps}catch(K){Ht(F,F.return,K)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===a)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break e;for(;u.sibling===null;){if(u.return===null||u.return===a)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=a.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,SM(a,f))));break;case 19:Js(u,a),Xs(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,SM(a,g)));break;case 30:break;case 21:break;default:Js(u,a),Xs(a)}}function Xs(a){var u=a.flags;if(u&2){try{for(var f,g=a.return;g!==null;){if(R4(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var _=f.stateNode,S=bM(a);Z1(a,S,_);break;case 5:var x=f.stateNode;f.flags&32&&(Zp(x,""),f.flags&=-33);var C=bM(a);Z1(a,C,x);break;case 3:case 4:var F=f.stateNode.containerInfo,X=bM(a);_M(a,X,F);break;default:throw Error(r(161))}}catch(ne){Ht(a,a.return,ne)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function j4(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var u=a;j4(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),a=a.sibling}}function Eu(a,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)D4(a,u.alternate,u),u=u.sibling}function Rd(a){for(a=a.child;a!==null;){var u=a;switch(u.tag){case 0:case 11:case 14:case 15:Su(4,u,u.return),Rd(u);break;case 1:ia(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&O4(u,u.return,f),Rd(u);break;case 27:t0(u.stateNode);case 26:case 5:ia(u,u.return),Rd(u);break;case 22:u.memoizedState===null&&Rd(u);break;case 30:Rd(u);break;default:Rd(u)}a=a.sibling}}function Tu(a,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,_=a,S=u,x=S.flags;switch(S.tag){case 0:case 11:case 15:Tu(_,S,f),Bg(4,S);break;case 1:if(Tu(_,S,f),g=S,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(X){Ht(g,g.return,X)}if(g=S,_=g.updateQueue,_!==null){var C=g.stateNode;try{var F=_.shared.hiddenCallbacks;if(F!==null)for(_.shared.hiddenCallbacks=null,_=0;_<F.length;_++)y5(F[_],C)}catch(X){Ht(g,g.return,X)}}f&&x&64&&C4(S),Hg(S,S.return);break;case 27:P4(S);case 26:case 5:Tu(_,S,f),f&&g===null&&x&4&&L4(S),Hg(S,S.return);break;case 12:Tu(_,S,f);break;case 13:Tu(_,S,f),f&&x&4&&V4(_,S);break;case 22:S.memoizedState===null&&Tu(_,S,f),Hg(S,S.return);break;case 30:break;default:Tu(_,S,f)}u=u.sibling}}function EM(a,u){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(a=u.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&Og(f))}function TM(a,u){a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&Og(a))}function ra(a,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)U4(a,u,f,g),u=u.sibling}function U4(a,u,f,g){var _=u.flags;switch(u.tag){case 0:case 11:case 15:ra(a,u,f,g),_&2048&&Bg(9,u);break;case 1:ra(a,u,f,g);break;case 3:ra(a,u,f,g),_&2048&&(a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&Og(a)));break;case 12:if(_&2048){ra(a,u,f,g),a=u.stateNode;try{var S=u.memoizedProps,x=S.id,C=S.onPostCommit;typeof C=="function"&&C(x,u.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(F){Ht(u,u.return,F)}}else ra(a,u,f,g);break;case 13:ra(a,u,f,g);break;case 23:break;case 22:S=u.stateNode,x=u.alternate,u.memoizedState!==null?S._visibility&2?ra(a,u,f,g):Wg(a,u):S._visibility&2?ra(a,u,f,g):(S._visibility|=2,ff(a,u,f,g,(u.subtreeFlags&10256)!==0)),_&2048&&EM(x,u);break;case 24:ra(a,u,f,g),_&2048&&TM(u.alternate,u);break;default:ra(a,u,f,g)}}function ff(a,u,f,g,_){for(_=_&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var S=a,x=u,C=f,F=g,X=x.flags;switch(x.tag){case 0:case 11:case 15:ff(S,x,C,F,_),Bg(8,x);break;case 23:break;case 22:var ne=x.stateNode;x.memoizedState!==null?ne._visibility&2?ff(S,x,C,F,_):Wg(S,x):(ne._visibility|=2,ff(S,x,C,F,_)),_&&X&2048&&EM(x.alternate,x);break;case 24:ff(S,x,C,F,_),_&&X&2048&&TM(x.alternate,x);break;default:ff(S,x,C,F,_)}u=u.sibling}}function Wg(a,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=a,g=u,_=g.flags;switch(g.tag){case 22:Wg(f,g),_&2048&&EM(g.alternate,g);break;case 24:Wg(f,g),_&2048&&TM(g.alternate,g);break;default:Wg(f,g)}u=u.sibling}}var Zg=8192;function mf(a){if(a.subtreeFlags&Zg)for(a=a.child;a!==null;)G4(a),a=a.sibling}function G4(a){switch(a.tag){case 26:mf(a),a.flags&Zg&&a.memoizedState!==null&&hse(uo,a.memoizedState,a.memoizedProps);break;case 5:mf(a);break;case 3:case 4:var u=uo;uo=aw(a.stateNode.containerInfo),mf(a),uo=u;break;case 22:a.memoizedState===null&&(u=a.alternate,u!==null&&u.memoizedState!==null?(u=Zg,Zg=16777216,mf(a),Zg=u):mf(a));break;default:mf(a)}}function q4(a){var u=a.alternate;if(u!==null&&(a=u.child,a!==null)){u.child=null;do u=a.sibling,a.sibling=null,a=u;while(a!==null)}}function Yg(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];pr=g,H4(g,a)}q4(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)B4(a),a=a.sibling}function B4(a){switch(a.tag){case 0:case 11:case 15:Yg(a),a.flags&2048&&Su(9,a,a.return);break;case 3:Yg(a);break;case 12:Yg(a);break;case 22:var u=a.stateNode;a.memoizedState!==null&&u._visibility&2&&(a.return===null||a.return.tag!==13)?(u._visibility&=-3,Y1(a)):Yg(a);break;default:Yg(a)}}function Y1(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];pr=g,H4(g,a)}q4(a)}for(a=a.child;a!==null;){switch(u=a,u.tag){case 0:case 11:case 15:Su(8,u,u.return),Y1(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,Y1(u));break;default:Y1(u)}a=a.sibling}}function H4(a,u){for(;pr!==null;){var f=pr;switch(f.tag){case 0:case 11:case 15:Su(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Og(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,pr=g;else e:for(f=a;pr!==null;){g=pr;var _=g.sibling,S=g.return;if(N4(g),g===f){pr=null;break e}if(_!==null){_.return=S,pr=_;break e}pr=S}}}var Are={getCacheForType:function(a){var u=Nr(er),f=u.data.get(a);return f===void 0&&(f=a(),u.data.set(a,f)),f}},Ire=typeof WeakMap=="function"?WeakMap:Map,Ft=0,Qt=null,ht=null,gt=0,Vt=0,Qs=null,$u=!1,yf=!1,$M=!1,ll=0,$i=0,xu=0,Pd=0,xM=0,An=0,gf=0,Jg=null,$s=null,MM=!1,AM=0,J1=1/0,X1=null,Mu=null,Ar=0,Au=null,vf=null,bf=0,IM=0,CM=null,W4=null,Xg=0,OM=null;function Ks(){if((Ft&2)!==0&&gt!==0)return gt&-gt;if(te.T!==null){var a=of;return a!==0?a:FM()}return a1()}function Z4(){An===0&&(An=(gt&536870912)===0||Ct?r1():536870912);var a=Mn.current;return a!==null&&(a.flags|=32),An}function en(a,u,f){(a===Qt&&(Vt===2||Vt===9)||a.cancelPendingCommit!==null)&&(_f(a,0),Iu(a,gt,An,!1)),vd(a,f),((Ft&2)===0||a!==Qt)&&(a===Qt&&((Ft&2)===0&&(Pd|=f),$i===4&&Iu(a,gt,An,!1)),sa(a))}function Y4(a,u,f){if((Ft&6)!==0)throw Error(r(327));var g=!f&&(u&124)===0&&(u&a.expiredLanes)===0||gd(a,u),_=g?Lre(a,u):PM(a,u,!0),S=g;do{if(_===0){yf&&!g&&Iu(a,u,0,!1);break}else{if(f=a.current.alternate,S&&!Cre(f)){_=PM(a,u,!1),S=!1;continue}if(_===2){if(S=u,a.errorRecoveryDisabledLanes&S)var x=0;else x=a.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){u=x;e:{var C=a;_=Jg;var F=C.current.memoizedState.isDehydrated;if(F&&(_f(C,x).flags|=256),x=PM(C,x,!1),x!==2){if($M&&!F){C.errorRecoveryDisabledLanes|=S,Pd|=S,_=4;break e}S=$s,$s=_,S!==null&&($s===null?$s=S:$s.push.apply($s,S))}_=x}if(S=!1,_!==2)continue}}if(_===1){_f(a,0),Iu(a,u,0,!0);break}e:{switch(g=a,S=_,S){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Iu(g,u,An,!$u);break e;case 2:$s=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(_=AM+300-wn(),10<_)){if(Iu(g,u,An,!$u),Gp(g,0,!0)!==0)break e;g.timeoutHandle=T6(J4.bind(null,g,f,$s,X1,MM,u,An,Pd,gf,$u,S,2,-0,0),_);break e}J4(g,f,$s,X1,MM,u,An,Pd,gf,$u,S,0,-0,0)}}break}while(!0);sa(a)}function J4(a,u,f,g,_,S,x,C,F,X,ne,ce,Q,K){if(a.timeoutHandle=-1,ce=u.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(s0={stylesheets:null,count:0,unsuspend:dse},G4(u),ce=pse(),ce!==null)){a.cancelPendingCommit=ce(r6.bind(null,a,u,S,f,g,_,x,C,F,ne,1,Q,K)),Iu(a,S,x,!X);return}r6(a,u,S,f,g,_,x,C,F)}function Cre(a){for(var u=a;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var _=f[g],S=_.getSnapshot;_=_.value;try{if(!Zs(S(),_))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Iu(a,u,f,g){u&=~xM,u&=~Pd,a.suspendedLanes|=u,a.pingedLanes&=~u,g&&(a.warmLanes|=u),g=a.expirationTimes;for(var _=u;0<_;){var S=31-ns(_),x=1<<S;g[S]=-1,_&=~x}f!==0&&n1(a,f,u)}function Q1(){return(Ft&6)===0?(Qg(0),!1):!0}function LM(){if(ht!==null){if(Vt===0)var a=ht.return;else a=ht,el=Ad=null,Yx(a),hf=null,Ug=0,a=ht;for(;a!==null;)I4(a.alternate,a),a=a.return;ht=null}}function _f(a,u){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,Zre(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),LM(),Qt=a,ht=f=Xa(a.current,null),gt=u,Vt=0,Qs=null,$u=!1,yf=gd(a,u),$M=!1,gf=An=xM=Pd=xu=$i=0,$s=Jg=null,MM=!1,(u&8)!==0&&(u|=u&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=u;0<g;){var _=31-ns(g),S=1<<_;u|=a[_],g&=~S}return ll=u,_1(),f}function X4(a,u){at=null,te.H=V1,u===Rg||u===I1?(u=f5(),Vt=3):u===d5?(u=f5(),Vt=4):Vt=u===m4?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Qs=u,ht===null&&($i=1,q1(a,En(u,a.current)))}function Q4(){var a=te.H;return te.H=V1,a===null?V1:a}function K4(){var a=te.A;return te.A=Are,a}function RM(){$i=4,$u||(gt&4194048)!==gt&&Mn.current!==null||(yf=!0),(xu&134217727)===0&&(Pd&134217727)===0||Qt===null||Iu(Qt,gt,An,!1)}function PM(a,u,f){var g=Ft;Ft|=2;var _=Q4(),S=K4();(Qt!==a||gt!==u)&&(X1=null,_f(a,u)),u=!1;var x=$i;e:do try{if(Vt!==0&&ht!==null){var C=ht,F=Qs;switch(Vt){case 8:LM(),x=6;break e;case 3:case 2:case 9:case 6:Mn.current===null&&(u=!0);var X=Vt;if(Vt=0,Qs=null,wf(a,C,F,X),f&&yf){x=0;break e}break;default:X=Vt,Vt=0,Qs=null,wf(a,C,F,X)}}Ore(),x=$i;break}catch(ne){X4(a,ne)}while(!0);return u&&a.shellSuspendCounter++,el=Ad=null,Ft=g,te.H=_,te.A=S,ht===null&&(Qt=null,gt=0,_1()),x}function Ore(){for(;ht!==null;)e6(ht)}function Lre(a,u){var f=Ft;Ft|=2;var g=Q4(),_=K4();Qt!==a||gt!==u?(X1=null,J1=wn()+500,_f(a,u)):yf=gd(a,u);e:do try{if(Vt!==0&&ht!==null){u=ht;var S=Qs;t:switch(Vt){case 1:Vt=0,Qs=null,wf(a,u,S,1);break;case 2:case 9:if(h5(S)){Vt=0,Qs=null,t6(u);break}u=function(){Vt!==2&&Vt!==9||Qt!==a||(Vt=7),sa(a)},S.then(u,u);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:h5(S)?(Vt=0,Qs=null,t6(u)):(Vt=0,Qs=null,wf(a,u,S,7));break;case 5:var x=null;switch(ht.tag){case 26:x=ht.memoizedState;case 5:case 27:var C=ht;if(!x||D6(x)){Vt=0,Qs=null;var F=C.sibling;if(F!==null)ht=F;else{var X=C.return;X!==null?(ht=X,K1(X)):ht=null}break t}}Vt=0,Qs=null,wf(a,u,S,5);break;case 6:Vt=0,Qs=null,wf(a,u,S,6);break;case 8:LM(),$i=6;break e;default:throw Error(r(462))}}Rre();break}catch(ne){X4(a,ne)}while(!0);return el=Ad=null,te.H=g,te.A=_,Ft=f,ht!==null?0:(Qt=null,gt=0,_1(),$i)}function Rre(){for(;ht!==null&&!Z$();)e6(ht)}function e6(a){var u=M4(a.alternate,a,ll);a.memoizedProps=a.pendingProps,u===null?K1(a):ht=u}function t6(a){var u=a,f=u.alternate;switch(u.tag){case 15:case 0:u=w4(f,u,u.pendingProps,u.type,void 0,gt);break;case 11:u=w4(f,u,u.pendingProps,u.type.render,u.ref,gt);break;case 5:Yx(u);default:I4(f,u),u=ht=i5(u,ll),u=M4(f,u,ll)}a.memoizedProps=a.pendingProps,u===null?K1(a):ht=u}function wf(a,u,f,g){el=Ad=null,Yx(u),hf=null,Ug=0;var _=u.return;try{if(Sre(a,_,u,f,gt)){$i=1,q1(a,En(f,a.current)),ht=null;return}}catch(S){if(_!==null)throw ht=_,S;$i=1,q1(a,En(f,a.current)),ht=null;return}u.flags&32768?(Ct||g===1?a=!0:yf||(gt&536870912)!==0?a=!1:($u=a=!0,(g===2||g===9||g===3||g===6)&&(g=Mn.current,g!==null&&g.tag===13&&(g.flags|=16384))),i6(u,a)):K1(u)}function K1(a){var u=a;do{if((u.flags&32768)!==0){i6(u,$u);return}a=u.return;var f=Tre(u.alternate,u,ll);if(f!==null){ht=f;return}if(u=u.sibling,u!==null){ht=u;return}ht=u=a}while(u!==null);$i===0&&($i=5)}function i6(a,u){do{var f=$re(a.alternate,a);if(f!==null){f.flags&=32767,ht=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(a=a.sibling,a!==null)){ht=a;return}ht=a=f}while(a!==null);$i=6,ht=null}function r6(a,u,f,g,_,S,x,C,F){a.cancelPendingCommit=null;do ew();while(Ar!==0);if((Ft&6)!==0)throw Error(r(327));if(u!==null){if(u===a.current)throw Error(r(177));if(S=u.lanes|u.childLanes,S|=Tx,rx(a,f,S,x,C,F),a===Qt&&(ht=Qt=null,gt=0),vf=u,Au=a,bf=f,IM=S,CM=_,W4=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Nre(md,function(){return l6(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=te.T,te.T=null,_=fe.p,fe.p=2,x=Ft,Ft|=4;try{xre(a,u,f)}finally{Ft=x,fe.p=_,te.T=g}}Ar=1,s6(),n6(),o6()}}function s6(){if(Ar===1){Ar=0;var a=Au,u=vf,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=te.T,te.T=null;var g=fe.p;fe.p=2;var _=Ft;Ft|=4;try{z4(u,a);var S=HM,x=HN(a.containerInfo),C=S.focusedElem,F=S.selectionRange;if(x!==C&&C&&C.ownerDocument&&BN(C.ownerDocument.documentElement,C)){if(F!==null&&bx(C)){var X=F.start,ne=F.end;if(ne===void 0&&(ne=X),"selectionStart"in C)C.selectionStart=X,C.selectionEnd=Math.min(ne,C.value.length);else{var ce=C.ownerDocument||document,Q=ce&&ce.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),Xe=C.textContent.length,qe=Math.min(F.start,Xe),Ut=F.end===void 0?qe:Math.min(F.end,Xe);!K.extend&&qe>Ut&&(x=Ut,Ut=qe,qe=x);var H=qN(C,qe),G=qN(C,Ut);if(H&&G&&(K.rangeCount!==1||K.anchorNode!==H.node||K.anchorOffset!==H.offset||K.focusNode!==G.node||K.focusOffset!==G.offset)){var J=ce.createRange();J.setStart(H.node,H.offset),K.removeAllRanges(),qe>Ut?(K.addRange(J),K.extend(G.node,G.offset)):(J.setEnd(G.node,G.offset),K.addRange(J))}}}}for(ce=[],K=C;K=K.parentNode;)K.nodeType===1&&ce.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ce.length;C++){var le=ce[C];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}hw=!!BM,HM=BM=null}finally{Ft=_,fe.p=g,te.T=f}}a.current=u,Ar=2}}function n6(){if(Ar===2){Ar=0;var a=Au,u=vf,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=te.T,te.T=null;var g=fe.p;fe.p=2;var _=Ft;Ft|=4;try{D4(a,u.alternate,u)}finally{Ft=_,fe.p=g,te.T=f}}Ar=3}}function o6(){if(Ar===4||Ar===3){Ar=0,Y$();var a=Au,u=vf,f=bf,g=W4;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ar=5:(Ar=0,vf=Au=null,a6(a,a.pendingLanes));var _=a.pendingLanes;if(_===0&&(Mu=null),pg(f),u=u.stateNode,ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(yd,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=te.T,_=fe.p,fe.p=2,te.T=null;try{for(var S=a.onRecoverableError,x=0;x<g.length;x++){var C=g[x];S(C.value,{componentStack:C.stack})}}finally{te.T=u,fe.p=_}}(bf&3)!==0&&ew(),sa(a),_=a.pendingLanes,(f&4194090)!==0&&(_&42)!==0?a===OM?Xg++:(Xg=0,OM=a):Xg=0,Qg(0)}}function a6(a,u){(a.pooledCacheLanes&=u)===0&&(u=a.pooledCache,u!=null&&(a.pooledCache=null,Og(u)))}function ew(a){return s6(),n6(),o6(),l6()}function l6(){if(Ar!==5)return!1;var a=Au,u=IM;IM=0;var f=pg(bf),g=te.T,_=fe.p;try{fe.p=32>f?32:f,te.T=null,f=CM,CM=null;var S=Au,x=bf;if(Ar=0,vf=Au=null,bf=0,(Ft&6)!==0)throw Error(r(331));var C=Ft;if(Ft|=4,B4(S.current),U4(S,S.current,x,f),Ft=C,Qg(0,!1),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(yd,S)}catch{}return!0}finally{fe.p=_,te.T=g,a6(a,u)}}function u6(a,u,f){u=En(f,u),u=uM(a.stateNode,u,2),a=vu(a,u,2),a!==null&&(vd(a,2),sa(a))}function Ht(a,u,f){if(a.tag===3)u6(a,a,f);else for(;u!==null;){if(u.tag===3){u6(u,a,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Mu===null||!Mu.has(g))){a=En(f,a),f=p4(2),g=vu(u,f,2),g!==null&&(f4(f,g,u,a),vd(g,2),sa(g));break}}u=u.return}}function kM(a,u,f){var g=a.pingCache;if(g===null){g=a.pingCache=new Ire;var _=new Set;g.set(u,_)}else _=g.get(u),_===void 0&&(_=new Set,g.set(u,_));_.has(f)||($M=!0,_.add(f),a=Pre.bind(null,a,u,f),u.then(a,a))}function Pre(a,u,f){var g=a.pingCache;g!==null&&g.delete(u),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,Qt===a&&(gt&f)===f&&($i===4||$i===3&&(gt&62914560)===gt&&300>wn()-AM?(Ft&2)===0&&_f(a,0):xM|=f,gf===gt&&(gf=0)),sa(a)}function c6(a,u){u===0&&(u=s1()),a=tf(a,u),a!==null&&(vd(a,u),sa(a))}function kre(a){var u=a.memoizedState,f=0;u!==null&&(f=u.retryLane),c6(a,f)}function Dre(a,u){var f=0;switch(a.tag){case 13:var g=a.stateNode,_=a.memoizedState;_!==null&&(f=_.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(u),c6(a,f)}function Nre(a,u){return Qo(a,u)}var tw=null,Sf=null,DM=!1,iw=!1,NM=!1,kd=0;function sa(a){a!==Sf&&a.next===null&&(Sf===null?tw=Sf=a:Sf=Sf.next=a),iw=!0,DM||(DM=!0,Vre())}function Qg(a,u){if(!NM&&iw){NM=!0;do for(var f=!1,g=tw;g!==null;){if(a!==0){var _=g.pendingLanes;if(_===0)var S=0;else{var x=g.suspendedLanes,C=g.pingedLanes;S=(1<<31-ns(42|a)+1)-1,S&=_&~(x&~C),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,f6(g,S))}else S=gt,S=Gp(g,g===Qt?S:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(S&3)===0||gd(g,S)||(f=!0,f6(g,S));g=g.next}while(f);NM=!1}}function Fre(){d6()}function d6(){iw=DM=!1;var a=0;kd!==0&&(Wre()&&(a=kd),kd=0);for(var u=wn(),f=null,g=tw;g!==null;){var _=g.next,S=h6(g,u);S===0?(g.next=null,f===null?tw=_:f.next=_,_===null&&(Sf=f)):(f=g,(a!==0||(S&3)!==0)&&(iw=!0)),g=_}Qg(a)}function h6(a,u){for(var f=a.suspendedLanes,g=a.pingedLanes,_=a.expirationTimes,S=a.pendingLanes&-62914561;0<S;){var x=31-ns(S),C=1<<x,F=_[x];F===-1?((C&f)===0||(C&g)!==0)&&(_[x]=ix(C,u)):F<=u&&(a.expiredLanes|=C),S&=~C}if(u=Qt,f=gt,f=Gp(a,a===u?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,f===0||a===u&&(Vt===2||Vt===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&cg(g),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||gd(a,f)){if(u=f&-f,u===a.callbackPriority)return u;switch(g!==null&&cg(g),pg(f)){case 2:case 8:f=t1;break;case 32:f=md;break;case 268435456:f=so;break;default:f=md}return g=p6.bind(null,a),f=Qo(f,g),a.callbackPriority=u,a.callbackNode=f,u}return g!==null&&g!==null&&cg(g),a.callbackPriority=2,a.callbackNode=null,2}function p6(a,u){if(Ar!==0&&Ar!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(ew()&&a.callbackNode!==f)return null;var g=gt;return g=Gp(a,a===Qt?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(Y4(a,g,u),h6(a,wn()),a.callbackNode!=null&&a.callbackNode===f?p6.bind(null,a):null)}function f6(a,u){if(ew())return null;Y4(a,u,!0)}function Vre(){Yre(function(){(Ft&6)!==0?Qo(e1,Fre):d6()})}function FM(){return kd===0&&(kd=r1()),kd}function m6(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:p1(""+a)}function y6(a,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,a.id&&f.setAttribute("form",a.id),u.parentNode.insertBefore(f,u),a=new FormData(a),f.parentNode.removeChild(f),a}function zre(a,u,f,g,_){if(u==="submit"&&f&&f.stateNode===_){var S=m6((_[Xt]||null).action),x=g.submitter;x&&(u=(u=x[Xt]||null)?m6(u.formAction):x.getAttribute("formAction"),u!==null&&(S=u,x=null));var C=new g1("action","action",null,g,_);a.push({event:C,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(kd!==0){var F=x?y6(_,x):new FormData(_);sM(f,{pending:!0,data:F,method:_.method,action:S},null,F)}}else typeof S=="function"&&(C.preventDefault(),F=x?y6(_,x):new FormData(_),sM(f,{pending:!0,data:F,method:_.method,action:S},S,F))},currentTarget:_}]})}}for(var VM=0;VM<Ex.length;VM++){var zM=Ex[VM],jre=zM.toLowerCase(),Ure=zM[0].toUpperCase()+zM.slice(1);lo(jre,"on"+Ure)}lo(YN,"onAnimationEnd"),lo(JN,"onAnimationIteration"),lo(XN,"onAnimationStart"),lo("dblclick","onDoubleClick"),lo("focusin","onFocus"),lo("focusout","onBlur"),lo(nre,"onTransitionRun"),lo(ore,"onTransitionStart"),lo(are,"onTransitionCancel"),lo(QN,"onTransitionEnd"),pu("onMouseEnter",["mouseout","mouseover"]),pu("onMouseLeave",["mouseout","mouseover"]),pu("onPointerEnter",["pointerout","pointerover"]),pu("onPointerLeave",["pointerout","pointerover"]),oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oo("onBeforeInput",["compositionend","keypress","textInput","paste"]),oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gre=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kg));function g6(a,u){u=(u&4)!==0;for(var f=0;f<a.length;f++){var g=a[f],_=g.event;g=g.listeners;e:{var S=void 0;if(u)for(var x=g.length-1;0<=x;x--){var C=g[x],F=C.instance,X=C.currentTarget;if(C=C.listener,F!==S&&_.isPropagationStopped())break e;S=C,_.currentTarget=X;try{S(_)}catch(ne){G1(ne)}_.currentTarget=null,S=F}else for(x=0;x<g.length;x++){if(C=g[x],F=C.instance,X=C.currentTarget,C=C.listener,F!==S&&_.isPropagationStopped())break e;S=C,_.currentTarget=X;try{S(_)}catch(ne){G1(ne)}_.currentTarget=null,S=F}}}}function pt(a,u){var f=u[Oe];f===void 0&&(f=u[Oe]=new Set);var g=a+"__bubble";f.has(g)||(v6(u,a,2,!1),f.add(g))}function jM(a,u,f){var g=0;u&&(g|=4),v6(f,a,g,u)}var rw="_reactListening"+Math.random().toString(36).slice(2);function UM(a){if(!a[rw]){a[rw]=!0,l1.forEach(function(f){f!=="selectionchange"&&(Gre.has(f)||jM(f,!1,a),jM(f,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[rw]||(u[rw]=!0,jM("selectionchange",!1,u))}}function v6(a,u,f,g){switch(U6(u)){case 2:var _=yse;break;case 8:_=gse;break;default:_=i3}f=_.bind(null,u,f,a),_=void 0,!cx||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),g?_!==void 0?a.addEventListener(u,f,{capture:!0,passive:_}):a.addEventListener(u,f,!0):_!==void 0?a.addEventListener(u,f,{passive:_}):a.addEventListener(u,f,!1)}function GM(a,u,f,g,_){var S=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var x=g.tag;if(x===3||x===4){var C=g.stateNode.containerInfo;if(C===_)break;if(x===4)for(x=g.return;x!==null;){var F=x.tag;if((F===3||F===4)&&x.stateNode.containerInfo===_)return;x=x.return}for(;C!==null;){if(x=Za(C),x===null)return;if(F=x.tag,F===5||F===6||F===26||F===27){g=S=x;continue e}C=C.parentNode}}g=g.return}$N(function(){var X=S,ne=lx(f),ce=[];e:{var Q=KN.get(a);if(Q!==void 0){var K=g1,Xe=a;switch(a){case"keypress":if(m1(f)===0)break e;case"keydown":case"keyup":K=Nie;break;case"focusin":Xe="focus",K=fx;break;case"focusout":Xe="blur",K=fx;break;case"beforeblur":case"afterblur":K=fx;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=AN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=$ie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=zie;break;case YN:case JN:case XN:K=Aie;break;case QN:K=Uie;break;case"scroll":case"scrollend":K=Eie;break;case"wheel":K=qie;break;case"copy":case"cut":case"paste":K=Cie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=CN;break;case"toggle":case"beforetoggle":K=Hie}var qe=(u&4)!==0,Ut=!qe&&(a==="scroll"||a==="scrollend"),H=qe?Q!==null?Q+"Capture":null:Q;qe=[];for(var G=X,J;G!==null;){var le=G;if(J=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||J===null||H===null||(le=vg(G,H),le!=null&&qe.push(e0(G,le,J))),Ut)break;G=G.return}0<qe.length&&(Q=new K(Q,Xe,null,f,ne),ce.push({event:Q,listeners:qe}))}}if((u&7)===0){e:{if(Q=a==="mouseover"||a==="pointerover",K=a==="mouseout"||a==="pointerout",Q&&f!==ax&&(Xe=f.relatedTarget||f.fromElement)&&(Za(Xe)||Xe[no]))break e;if((K||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(Xe=f.relatedTarget||f.toElement,K=X,Xe=Xe?Za(Xe):null,Xe!==null&&(Ut=n(Xe),qe=Xe.tag,Xe!==Ut||qe!==5&&qe!==27&&qe!==6)&&(Xe=null)):(K=null,Xe=X),K!==Xe)){if(qe=AN,le="onMouseLeave",H="onMouseEnter",G="mouse",(a==="pointerout"||a==="pointerover")&&(qe=CN,le="onPointerLeave",H="onPointerEnter",G="pointer"),Ut=K==null?Q:Ge(K),J=Xe==null?Q:Ge(Xe),Q=new qe(le,G+"leave",K,f,ne),Q.target=Ut,Q.relatedTarget=J,le=null,Za(ne)===X&&(qe=new qe(H,G+"enter",Xe,f,ne),qe.target=J,qe.relatedTarget=Ut,le=qe),Ut=le,K&&Xe)t:{for(qe=K,H=Xe,G=0,J=qe;J;J=Ef(J))G++;for(J=0,le=H;le;le=Ef(le))J++;for(;0<G-J;)qe=Ef(qe),G--;for(;0<J-G;)H=Ef(H),J--;for(;G--;){if(qe===H||H!==null&&qe===H.alternate)break t;qe=Ef(qe),H=Ef(H)}qe=null}else qe=null;K!==null&&b6(ce,Q,K,qe,!1),Xe!==null&&Ut!==null&&b6(ce,Ut,Xe,qe,!0)}}e:{if(Q=X?Ge(X):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var Re=FN;else if(DN(Q))if(VN)Re=ire;else{Re=ere;var ct=Kie}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?X&&ox(X.elementType)&&(Re=FN):Re=tre;if(Re&&(Re=Re(a,X))){NN(ce,Re,f,ne);break e}ct&&ct(a,Q,X),a==="focusout"&&X&&Q.type==="number"&&X.memoizedProps.value!=null&&nx(Q,"number",Q.value)}switch(ct=X?Ge(X):window,a){case"focusin":(DN(ct)||ct.contentEditable==="true")&&(Qp=ct,_x=X,xg=null);break;case"focusout":xg=_x=Qp=null;break;case"mousedown":wx=!0;break;case"contextmenu":case"mouseup":case"dragend":wx=!1,WN(ce,f,ne);break;case"selectionchange":if(sre)break;case"keydown":case"keyup":WN(ce,f,ne)}var Ve;if(yx)e:{switch(a){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Xp?PN(a,f)&&(Ze="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Ze="onCompositionStart");Ze&&(ON&&f.locale!=="ko"&&(Xp||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Xp&&(Ve=xN()):(fu=ne,dx="value"in fu?fu.value:fu.textContent,Xp=!0)),ct=sw(X,Ze),0<ct.length&&(Ze=new IN(Ze,a,null,f,ne),ce.push({event:Ze,listeners:ct}),Ve?Ze.data=Ve:(Ve=kN(f),Ve!==null&&(Ze.data=Ve)))),(Ve=Zie?Yie(a,f):Jie(a,f))&&(Ze=sw(X,"onBeforeInput"),0<Ze.length&&(ct=new IN("onBeforeInput","beforeinput",null,f,ne),ce.push({event:ct,listeners:Ze}),ct.data=Ve)),zre(ce,a,X,f,ne)}g6(ce,u)})}function e0(a,u,f){return{instance:a,listener:u,currentTarget:f}}function sw(a,u){for(var f=u+"Capture",g=[];a!==null;){var _=a,S=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||S===null||(_=vg(a,f),_!=null&&g.unshift(e0(a,_,S)),_=vg(a,u),_!=null&&g.push(e0(a,_,S))),a.tag===3)return g;a=a.return}return[]}function Ef(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function b6(a,u,f,g,_){for(var S=u._reactName,x=[];f!==null&&f!==g;){var C=f,F=C.alternate,X=C.stateNode;if(C=C.tag,F!==null&&F===g)break;C!==5&&C!==26&&C!==27||X===null||(F=X,_?(X=vg(f,S),X!=null&&x.unshift(e0(f,X,F))):_||(X=vg(f,S),X!=null&&x.push(e0(f,X,F)))),f=f.return}x.length!==0&&a.push({event:u,listeners:x})}var qre=/\r\n?/g,Bre=/\u0000|\uFFFD/g;function _6(a){return(typeof a=="string"?a:""+a).replace(qre,`
`).replace(Bre,"")}function w6(a,u){return u=_6(u),_6(a)===u}function nw(){}function jt(a,u,f,g,_,S){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Zp(a,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Zp(a,""+g);break;case"className":Hp(a,"class",g);break;case"tabIndex":Hp(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Hp(a,f,g);break;case"style":EN(a,g,S);break;case"data":if(u!=="object"){Hp(a,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){a.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=p1(""+g),a.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(u!=="input"&&jt(a,u,"name",_.name,_,null),jt(a,u,"formEncType",_.formEncType,_,null),jt(a,u,"formMethod",_.formMethod,_,null),jt(a,u,"formTarget",_.formTarget,_,null)):(jt(a,u,"encType",_.encType,_,null),jt(a,u,"method",_.method,_,null),jt(a,u,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=p1(""+g),a.setAttribute(f,g);break;case"onClick":g!=null&&(a.onclick=nw);break;case"onScroll":g!=null&&pt("scroll",a);break;case"onScrollEnd":g!=null&&pt("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(_.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}f=p1(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""+g):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":g===!0?a.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,g):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(f,g):a.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(f):a.setAttribute(f,g);break;case"popover":pt("beforetoggle",a),pt("toggle",a),Bp(a,"popover",g);break;case"xlinkActuate":ao(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":ao(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":ao(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":ao(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":ao(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":ao(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":ao(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":ao(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":ao(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Bp(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=wie.get(f)||f,Bp(a,f,g))}}function qM(a,u,f,g,_,S){switch(f){case"style":EN(a,g,S);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(_.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"children":typeof g=="string"?Zp(a,g):(typeof g=="number"||typeof g=="bigint")&&Zp(a,""+g);break;case"onScroll":g!=null&&pt("scroll",a);break;case"onScrollEnd":g!=null&&pt("scrollend",a);break;case"onClick":g!=null&&(a.onclick=nw);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!u1.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(_=f.endsWith("Capture"),u=f.slice(2,_?f.length-7:void 0),S=a[Xt]||null,S=S!=null?S[f]:null,typeof S=="function"&&a.removeEventListener(u,S,_),typeof g=="function")){typeof S!="function"&&S!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(u,g,_);break e}f in a?a[f]=g:g===!0?a.setAttribute(f,""):Bp(a,f,g)}}}function Ir(a,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",a),pt("load",a);var g=!1,_=!1,S;for(S in f)if(f.hasOwnProperty(S)){var x=f[S];if(x!=null)switch(S){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:jt(a,u,S,x,f,null)}}_&&jt(a,u,"srcSet",f.srcSet,f,null),g&&jt(a,u,"src",f.src,f,null);return;case"input":pt("invalid",a);var C=S=x=_=null,F=null,X=null;for(g in f)if(f.hasOwnProperty(g)){var ne=f[g];if(ne!=null)switch(g){case"name":_=ne;break;case"type":x=ne;break;case"checked":F=ne;break;case"defaultChecked":X=ne;break;case"value":S=ne;break;case"defaultValue":C=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,u));break;default:jt(a,u,g,ne,f,null)}}bN(a,S,C,F,X,x,_,!1),Bt(a);return;case"select":pt("invalid",a),g=x=S=null;for(_ in f)if(f.hasOwnProperty(_)&&(C=f[_],C!=null))switch(_){case"value":S=C;break;case"defaultValue":x=C;break;case"multiple":g=C;default:jt(a,u,_,C,f,null)}u=S,f=x,a.multiple=!!g,u!=null?Wp(a,!!g,u,!1):f!=null&&Wp(a,!!g,f,!0);return;case"textarea":pt("invalid",a),S=_=g=null;for(x in f)if(f.hasOwnProperty(x)&&(C=f[x],C!=null))switch(x){case"value":g=C;break;case"defaultValue":_=C;break;case"children":S=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:jt(a,u,x,C,f,null)}wN(a,g,_,S),Bt(a);return;case"option":for(F in f)if(f.hasOwnProperty(F)&&(g=f[F],g!=null))switch(F){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:jt(a,u,F,g,f,null)}return;case"dialog":pt("beforetoggle",a),pt("toggle",a),pt("cancel",a),pt("close",a);break;case"iframe":case"object":pt("load",a);break;case"video":case"audio":for(g=0;g<Kg.length;g++)pt(Kg[g],a);break;case"image":pt("error",a),pt("load",a);break;case"details":pt("toggle",a);break;case"embed":case"source":case"link":pt("error",a),pt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in f)if(f.hasOwnProperty(X)&&(g=f[X],g!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:jt(a,u,X,g,f,null)}return;default:if(ox(u)){for(ne in f)f.hasOwnProperty(ne)&&(g=f[ne],g!==void 0&&qM(a,u,ne,g,f,void 0));return}}for(C in f)f.hasOwnProperty(C)&&(g=f[C],g!=null&&jt(a,u,C,g,f,null))}function Hre(a,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,S=null,x=null,C=null,F=null,X=null,ne=null;for(K in f){var ce=f[K];if(f.hasOwnProperty(K)&&ce!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":F=ce;default:g.hasOwnProperty(K)||jt(a,u,K,null,g,ce)}}for(var Q in g){var K=g[Q];if(ce=f[Q],g.hasOwnProperty(Q)&&(K!=null||ce!=null))switch(Q){case"type":S=K;break;case"name":_=K;break;case"checked":X=K;break;case"defaultChecked":ne=K;break;case"value":x=K;break;case"defaultValue":C=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,u));break;default:K!==ce&&jt(a,u,Q,K,g,ce)}}sx(a,x,C,F,X,ne,S,_);return;case"select":K=x=C=Q=null;for(S in f)if(F=f[S],f.hasOwnProperty(S)&&F!=null)switch(S){case"value":break;case"multiple":K=F;default:g.hasOwnProperty(S)||jt(a,u,S,null,g,F)}for(_ in g)if(S=g[_],F=f[_],g.hasOwnProperty(_)&&(S!=null||F!=null))switch(_){case"value":Q=S;break;case"defaultValue":C=S;break;case"multiple":x=S;default:S!==F&&jt(a,u,_,S,g,F)}u=C,f=x,g=K,Q!=null?Wp(a,!!f,Q,!1):!!g!=!!f&&(u!=null?Wp(a,!!f,u,!0):Wp(a,!!f,f?[]:"",!1));return;case"textarea":K=Q=null;for(C in f)if(_=f[C],f.hasOwnProperty(C)&&_!=null&&!g.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:jt(a,u,C,null,g,_)}for(x in g)if(_=g[x],S=f[x],g.hasOwnProperty(x)&&(_!=null||S!=null))switch(x){case"value":Q=_;break;case"defaultValue":K=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==S&&jt(a,u,x,_,g,S)}_N(a,Q,K);return;case"option":for(var Xe in f)if(Q=f[Xe],f.hasOwnProperty(Xe)&&Q!=null&&!g.hasOwnProperty(Xe))switch(Xe){case"selected":a.selected=!1;break;default:jt(a,u,Xe,null,g,Q)}for(F in g)if(Q=g[F],K=f[F],g.hasOwnProperty(F)&&Q!==K&&(Q!=null||K!=null))switch(F){case"selected":a.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:jt(a,u,F,Q,g,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in f)Q=f[qe],f.hasOwnProperty(qe)&&Q!=null&&!g.hasOwnProperty(qe)&&jt(a,u,qe,null,g,Q);for(X in g)if(Q=g[X],K=f[X],g.hasOwnProperty(X)&&Q!==K&&(Q!=null||K!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,u));break;default:jt(a,u,X,Q,g,K)}return;default:if(ox(u)){for(var Ut in f)Q=f[Ut],f.hasOwnProperty(Ut)&&Q!==void 0&&!g.hasOwnProperty(Ut)&&qM(a,u,Ut,void 0,g,Q);for(ne in g)Q=g[ne],K=f[ne],!g.hasOwnProperty(ne)||Q===K||Q===void 0&&K===void 0||qM(a,u,ne,Q,g,K);return}}for(var H in f)Q=f[H],f.hasOwnProperty(H)&&Q!=null&&!g.hasOwnProperty(H)&&jt(a,u,H,null,g,Q);for(ce in g)Q=g[ce],K=f[ce],!g.hasOwnProperty(ce)||Q===K||Q==null&&K==null||jt(a,u,ce,Q,g,K)}var BM=null,HM=null;function ow(a){return a.nodeType===9?a:a.ownerDocument}function S6(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function E6(a,u){if(a===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&u==="foreignObject"?0:a}function WM(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var ZM=null;function Wre(){var a=window.event;return a&&a.type==="popstate"?a===ZM?!1:(ZM=a,!0):(ZM=null,!1)}var T6=typeof setTimeout=="function"?setTimeout:void 0,Zre=typeof clearTimeout=="function"?clearTimeout:void 0,$6=typeof Promise=="function"?Promise:void 0,Yre=typeof queueMicrotask=="function"?queueMicrotask:typeof $6<"u"?function(a){return $6.resolve(null).then(a).catch(Jre)}:T6;function Jre(a){setTimeout(function(){throw a})}function Cu(a){return a==="head"}function x6(a,u){var f=u,g=0,_=0;do{var S=f.nextSibling;if(a.removeChild(f),S&&S.nodeType===8)if(f=S.data,f==="/$"){if(0<g&&8>g){f=g;var x=a.ownerDocument;if(f&1&&t0(x.documentElement),f&2&&t0(x.body),f&4)for(f=x.head,t0(f),x=f.firstChild;x;){var C=x.nextSibling,F=x.nodeName;x[bd]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&x.rel.toLowerCase()==="stylesheet"||f.removeChild(x),x=C}}if(_===0){a.removeChild(S),u0(u);return}_--}else f==="$"||f==="$?"||f==="$!"?_++:g=f.charCodeAt(0)-48;else g=0;f=S}while(f);u0(u)}function YM(a){var u=a.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":YM(f),Ws(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function Xre(a,u,f,g){for(;a.nodeType===1;){var _=f;if(a.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[bd])switch(u){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(S=a.getAttribute("rel"),S==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(S!==_.rel||a.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||a.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||a.getAttribute("title")!==(_.title==null?null:_.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(S=a.getAttribute("src"),(S!==(_.src==null?null:_.src)||a.getAttribute("type")!==(_.type==null?null:_.type)||a.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&S&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(u==="input"&&a.type==="hidden"){var S=_.name==null?null:""+_.name;if(_.type==="hidden"&&a.getAttribute("name")===S)return a}else return a;if(a=co(a.nextSibling),a===null)break}return null}function Qre(a,u,f){if(u==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=co(a.nextSibling),a===null))return null;return a}function JM(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function Kre(a,u){var f=a.ownerDocument;if(a.data!=="$?"||f.readyState==="complete")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function co(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return a}var XM=null;function M6(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return a;u--}else f==="/$"&&u++}a=a.previousSibling}return null}function A6(a,u,f){switch(u=ow(f),a){case"html":if(a=u.documentElement,!a)throw Error(r(452));return a;case"head":if(a=u.head,!a)throw Error(r(453));return a;case"body":if(a=u.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function t0(a){for(var u=a.attributes;u.length;)a.removeAttributeNode(u[0]);Ws(a)}var In=new Map,I6=new Set;function aw(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ul=fe.d;fe.d={f:ese,r:tse,D:ise,C:rse,L:sse,m:nse,X:ase,S:ose,M:lse};function ese(){var a=ul.f(),u=Q1();return a||u}function tse(a){var u=Ya(a);u!==null&&u.tag===5&&u.type==="form"?Y5(u):ul.r(a)}var Tf=typeof document>"u"?null:document;function C6(a,u,f){var g=Tf;if(g&&typeof u=="string"&&u){var _=Sn(u);_='link[rel="'+a+'"][href="'+_+'"]',typeof f=="string"&&(_+='[crossorigin="'+f+'"]'),I6.has(_)||(I6.add(_),a={rel:a,crossOrigin:f,href:u},g.querySelector(_)===null&&(u=g.createElement("link"),Ir(u,"link",a),Li(u),g.head.appendChild(u)))}}function ise(a){ul.D(a),C6("dns-prefetch",a,null)}function rse(a,u){ul.C(a,u),C6("preconnect",a,u)}function sse(a,u,f){ul.L(a,u,f);var g=Tf;if(g&&a&&u){var _='link[rel="preload"][as="'+Sn(u)+'"]';u==="image"&&f&&f.imageSrcSet?(_+='[imagesrcset="'+Sn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(_+='[imagesizes="'+Sn(f.imageSizes)+'"]')):_+='[href="'+Sn(a)+'"]';var S=_;switch(u){case"style":S=$f(a);break;case"script":S=xf(a)}In.has(S)||(a=y({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:a,as:u},f),In.set(S,a),g.querySelector(_)!==null||u==="style"&&g.querySelector(i0(S))||u==="script"&&g.querySelector(r0(S))||(u=g.createElement("link"),Ir(u,"link",a),Li(u),g.head.appendChild(u)))}}function nse(a,u){ul.m(a,u);var f=Tf;if(f&&a){var g=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+Sn(g)+'"][href="'+Sn(a)+'"]',S=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=xf(a)}if(!In.has(S)&&(a=y({rel:"modulepreload",href:a},u),In.set(S,a),f.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(r0(S)))return}g=f.createElement("link"),Ir(g,"link",a),Li(g),f.head.appendChild(g)}}}function ose(a,u,f){ul.S(a,u,f);var g=Tf;if(g&&a){var _=hu(g).hoistableStyles,S=$f(a);u=u||"default";var x=_.get(S);if(!x){var C={loading:0,preload:null};if(x=g.querySelector(i0(S)))C.loading=5;else{a=y({rel:"stylesheet",href:a,"data-precedence":u},f),(f=In.get(S))&&QM(a,f);var F=x=g.createElement("link");Li(F),Ir(F,"link",a),F._p=new Promise(function(X,ne){F.onload=X,F.onerror=ne}),F.addEventListener("load",function(){C.loading|=1}),F.addEventListener("error",function(){C.loading|=2}),C.loading|=4,lw(x,u,g)}x={type:"stylesheet",instance:x,count:1,state:C},_.set(S,x)}}}function ase(a,u){ul.X(a,u);var f=Tf;if(f&&a){var g=hu(f).hoistableScripts,_=xf(a),S=g.get(_);S||(S=f.querySelector(r0(_)),S||(a=y({src:a,async:!0},u),(u=In.get(_))&&KM(a,u),S=f.createElement("script"),Li(S),Ir(S,"link",a),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(_,S))}}function lse(a,u){ul.M(a,u);var f=Tf;if(f&&a){var g=hu(f).hoistableScripts,_=xf(a),S=g.get(_);S||(S=f.querySelector(r0(_)),S||(a=y({src:a,async:!0,type:"module"},u),(u=In.get(_))&&KM(a,u),S=f.createElement("script"),Li(S),Ir(S,"link",a),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(_,S))}}function O6(a,u,f,g){var _=(_=We.current)?aw(_):null;if(!_)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=$f(f.href),f=hu(_).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=$f(f.href);var S=hu(_).hoistableStyles,x=S.get(a);if(x||(_=_.ownerDocument||_,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(a,x),(S=_.querySelector(i0(a)))&&!S._p&&(x.instance=S,x.state.loading=5),In.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},In.set(a,f),S||use(_,a,f,x.state))),u&&g===null)throw Error(r(528,""));return x}if(u&&g!==null)throw Error(r(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=xf(f),f=hu(_).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function $f(a){return'href="'+Sn(a)+'"'}function i0(a){return'link[rel="stylesheet"]['+a+"]"}function L6(a){return y({},a,{"data-precedence":a.precedence,precedence:null})}function use(a,u,f,g){a.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=a.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),Ir(u,"link",f),Li(u),a.head.appendChild(u))}function xf(a){return'[src="'+Sn(a)+'"]'}function r0(a){return"script[async]"+a}function R6(a,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=a.querySelector('style[data-href~="'+Sn(f.href)+'"]');if(g)return u.instance=g,Li(g),g;var _=y({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),Li(g),Ir(g,"style",_),lw(g,f.precedence,a),u.instance=g;case"stylesheet":_=$f(f.href);var S=a.querySelector(i0(_));if(S)return u.state.loading|=4,u.instance=S,Li(S),S;g=L6(f),(_=In.get(_))&&QM(g,_),S=(a.ownerDocument||a).createElement("link"),Li(S);var x=S;return x._p=new Promise(function(C,F){x.onload=C,x.onerror=F}),Ir(S,"link",g),u.state.loading|=4,lw(S,f.precedence,a),u.instance=S;case"script":return S=xf(f.src),(_=a.querySelector(r0(S)))?(u.instance=_,Li(_),_):(g=f,(_=In.get(S))&&(g=y({},f),KM(g,_)),a=a.ownerDocument||a,_=a.createElement("script"),Li(_),Ir(_,"link",g),a.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,lw(g,f.precedence,a));return u.instance}function lw(a,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,S=_,x=0;x<g.length;x++){var C=g[x];if(C.dataset.precedence===u)S=C;else if(S!==_)break}S?S.parentNode.insertBefore(a,S.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(a,u.firstChild))}function QM(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.title==null&&(a.title=u.title)}function KM(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.integrity==null&&(a.integrity=u.integrity)}var uw=null;function P6(a,u,f){if(uw===null){var g=new Map,_=uw=new Map;_.set(f,g)}else _=uw,g=_.get(f),g||(g=new Map,_.set(f,g));if(g.has(a))return g;for(g.set(a,null),f=f.getElementsByTagName(a),_=0;_<f.length;_++){var S=f[_];if(!(S[bd]||S[gi]||a==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var x=S.getAttribute(u)||"";x=a+x;var C=g.get(x);C?C.push(S):g.set(x,[S])}}return g}function k6(a,u,f){a=a.ownerDocument||a,a.head.insertBefore(f,u==="title"?a.querySelector("head > title"):null)}function cse(a,u,f){if(f===1||u.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return a=u.disabled,typeof u.precedence=="string"&&a==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function D6(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var s0=null;function dse(){}function hse(a,u,f){if(s0===null)throw Error(r(475));var g=s0;if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=$f(f.href),S=a.querySelector(i0(_));if(S){a=S._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(g.count++,g=cw.bind(g),a.then(g,g)),u.state.loading|=4,u.instance=S,Li(S);return}S=a.ownerDocument||a,f=L6(f),(_=In.get(_))&&QM(f,_),S=S.createElement("link"),Li(S);var x=S;x._p=new Promise(function(C,F){x.onload=C,x.onerror=F}),Ir(S,"link",f),u.instance=S}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(g.count++,u=cw.bind(g),a.addEventListener("load",u),a.addEventListener("error",u))}}function pse(){if(s0===null)throw Error(r(475));var a=s0;return a.stylesheets&&a.count===0&&e3(a,a.stylesheets),0<a.count?function(u){var f=setTimeout(function(){if(a.stylesheets&&e3(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(f)}}:null}function cw(){if(this.count--,this.count===0){if(this.stylesheets)e3(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var dw=null;function e3(a,u){a.stylesheets=null,a.unsuspend!==null&&(a.count++,dw=new Map,u.forEach(fse,a),dw=null,cw.call(a))}function fse(a,u){if(!(u.state.loading&4)){var f=dw.get(a);if(f)var g=f.get(null);else{f=new Map,dw.set(a,f);for(var _=a.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<_.length;S++){var x=_[S];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(f.set(x.dataset.precedence,x),g=x)}g&&f.set(null,g)}_=u.instance,x=_.getAttribute("data-precedence"),S=f.get(x)||g,S===g&&f.set(null,_),f.set(x,_),this.count++,g=cw.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),S?S.parentNode.insertBefore(_,S.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(_,a.firstChild)),u.state.loading|=4}}var n0={$$typeof:L,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function mse(a,u,f,g,_,S,x,C){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dg(0),this.hiddenUpdates=dg(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=S,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function N6(a,u,f,g,_,S,x,C,F,X,ne,ce){return a=new mse(a,u,f,x,C,F,X,ce),u=1,S===!0&&(u|=24),S=Ys(3,null,null,u),a.current=S,S.stateNode=a,u=kx(),u.refCount++,a.pooledCache=u,u.refCount++,S.memoizedState={element:g,isDehydrated:f,cache:u},Vx(S),a}function F6(a){return a?(a=rf,a):rf}function V6(a,u,f,g,_,S){_=F6(_),g.context===null?g.context=_:g.pendingContext=_,g=gu(u),g.payload={element:f},S=S===void 0?null:S,S!==null&&(g.callback=S),f=vu(a,g,u),f!==null&&(en(f,a,u),kg(f,a,u))}function z6(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<u?f:u}}function t3(a,u){z6(a,u),(a=a.alternate)&&z6(a,u)}function j6(a){if(a.tag===13){var u=tf(a,67108864);u!==null&&en(u,a,67108864),t3(a,67108864)}}var hw=!0;function yse(a,u,f,g){var _=te.T;te.T=null;var S=fe.p;try{fe.p=2,i3(a,u,f,g)}finally{fe.p=S,te.T=_}}function gse(a,u,f,g){var _=te.T;te.T=null;var S=fe.p;try{fe.p=8,i3(a,u,f,g)}finally{fe.p=S,te.T=_}}function i3(a,u,f,g){if(hw){var _=r3(g);if(_===null)GM(a,u,g,pw,f),G6(a,g);else if(bse(_,a,u,f,g))g.stopPropagation();else if(G6(a,g),u&4&&-1<vse.indexOf(a)){for(;_!==null;){var S=Ya(_);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var x=Wa(S.pendingLanes);if(x!==0){var C=S;for(C.pendingLanes|=2,C.entangledLanes|=2;x;){var F=1<<31-ns(x);C.entanglements[1]|=F,x&=~F}sa(S),(Ft&6)===0&&(J1=wn()+500,Qg(0))}}break;case 13:C=tf(S,2),C!==null&&en(C,S,2),Q1(),t3(S,2)}if(S=r3(g),S===null&&GM(a,u,g,pw,f),S===_)break;_=S}_!==null&&g.stopPropagation()}else GM(a,u,g,null,f)}}function r3(a){return a=lx(a),s3(a)}var pw=null;function s3(a){if(pw=null,a=Za(a),a!==null){var u=n(a);if(u===null)a=null;else{var f=u.tag;if(f===13){if(a=o(u),a!==null)return a;a=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null)}}return pw=a,null}function U6(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(J$()){case e1:return 2;case t1:return 8;case md:case i1:return 32;case so:return 268435456;default:return 32}default:return 32}}var n3=!1,Ou=null,Lu=null,Ru=null,o0=new Map,a0=new Map,Pu=[],vse="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function G6(a,u){switch(a){case"focusin":case"focusout":Ou=null;break;case"dragenter":case"dragleave":Lu=null;break;case"mouseover":case"mouseout":Ru=null;break;case"pointerover":case"pointerout":o0.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":a0.delete(u.pointerId)}}function l0(a,u,f,g,_,S){return a===null||a.nativeEvent!==S?(a={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:S,targetContainers:[_]},u!==null&&(u=Ya(u),u!==null&&j6(u)),a):(a.eventSystemFlags|=g,u=a.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),a)}function bse(a,u,f,g,_){switch(u){case"focusin":return Ou=l0(Ou,a,u,f,g,_),!0;case"dragenter":return Lu=l0(Lu,a,u,f,g,_),!0;case"mouseover":return Ru=l0(Ru,a,u,f,g,_),!0;case"pointerover":var S=_.pointerId;return o0.set(S,l0(o0.get(S)||null,a,u,f,g,_)),!0;case"gotpointercapture":return S=_.pointerId,a0.set(S,l0(a0.get(S)||null,a,u,f,g,_)),!0}return!1}function q6(a){var u=Za(a.target);if(u!==null){var f=n(u);if(f!==null){if(u=f.tag,u===13){if(u=o(f),u!==null){a.blockedOn=u,ee(a.priority,function(){if(f.tag===13){var g=Ks();g=hg(g);var _=tf(f,g);_!==null&&en(_,f,g),t3(f,g)}});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function fw(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var f=r3(a.nativeEvent);if(f===null){f=a.nativeEvent;var g=new f.constructor(f.type,f);ax=g,f.target.dispatchEvent(g),ax=null}else return u=Ya(f),u!==null&&j6(u),a.blockedOn=f,!1;u.shift()}return!0}function B6(a,u,f){fw(a)&&f.delete(u)}function _se(){n3=!1,Ou!==null&&fw(Ou)&&(Ou=null),Lu!==null&&fw(Lu)&&(Lu=null),Ru!==null&&fw(Ru)&&(Ru=null),o0.forEach(B6),a0.forEach(B6)}function mw(a,u){a.blockedOn===u&&(a.blockedOn=null,n3||(n3=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_se)))}var yw=null;function H6(a){yw!==a&&(yw=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){yw===a&&(yw=null);for(var u=0;u<a.length;u+=3){var f=a[u],g=a[u+1],_=a[u+2];if(typeof g!="function"){if(s3(g||f)===null)continue;break}var S=Ya(f);S!==null&&(a.splice(u,3),u-=3,sM(S,{pending:!0,data:_,method:f.method,action:g},g,_))}}))}function u0(a){function u(F){return mw(F,a)}Ou!==null&&mw(Ou,a),Lu!==null&&mw(Lu,a),Ru!==null&&mw(Ru,a),o0.forEach(u),a0.forEach(u);for(var f=0;f<Pu.length;f++){var g=Pu[f];g.blockedOn===a&&(g.blockedOn=null)}for(;0<Pu.length&&(f=Pu[0],f.blockedOn===null);)q6(f),f.blockedOn===null&&Pu.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var _=f[g],S=f[g+1],x=_[Xt]||null;if(typeof S=="function")x||H6(f);else if(x){var C=null;if(S&&S.hasAttribute("formAction")){if(_=S,x=S[Xt]||null)C=x.formAction;else if(s3(_)!==null)continue}else C=x.action;typeof C=="function"?f[g+1]=C:(f.splice(g,3),g-=3),H6(f)}}}function o3(a){this._internalRoot=a}gw.prototype.render=o3.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(r(409));var f=u.current,g=Ks();V6(f,g,a,u,null,null)},gw.prototype.unmount=o3.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;V6(a.current,2,null,a,null,null),Q1(),u[no]=null}};function gw(a){this._internalRoot=a}gw.prototype.unstable_scheduleHydration=function(a){if(a){var u=a1();a={blockedOn:null,target:a,priority:u};for(var f=0;f<Pu.length&&u!==0&&u<Pu[f].priority;f++);Pu.splice(f,0,a),f===0&&q6(a)}};var W6=t.version;if(W6!=="19.1.0")throw Error(r(527,W6,"19.1.0"));fe.findDOMNode=function(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=d(u),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var wse={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vw.isDisabled&&vw.supportsFiber)try{yd=vw.inject(wse),ss=vw}catch{}}return d0.createRoot=function(a,u){if(!s(a))throw Error(r(299));var f=!1,g="",_=u4,S=c4,x=d4,C=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(x=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(C=u.unstable_transitionCallbacks)),u=N6(a,1,!1,null,null,f,g,_,S,x,C,null),a[no]=u.current,UM(a),new o3(u)},d0.hydrateRoot=function(a,u,f){if(!s(a))throw Error(r(299));var g=!1,_="",S=u4,x=c4,C=d4,F=null,X=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(x=f.onCaughtError),f.onRecoverableError!==void 0&&(C=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(F=f.unstable_transitionCallbacks),f.formState!==void 0&&(X=f.formState)),u=N6(a,1,!0,u,f??null,g,_,S,x,C,F,X),u.context=F6(null),f=u.current,g=Ks(),g=hg(g),_=gu(g),_.callback=null,vu(f,_,g),f=g,u.current.lanes=f,vd(u,f),sa(u),a[no]=u.current,UM(a),new gw(u)},d0.version="19.1.0",d0}var rF;function Ose(){if(rF)return u3.exports;rF=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),u3.exports=Cse(),u3.exports}var Lse=Ose();function c(e,t,i,r){var s,n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}function FDe(e,t){return function(i,r){t(i,r,e)}}function VDe(e,t,i,r){function s(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function l(y){try{h(r.next(y))}catch(v){o(v)}}function d(y){try{h(r.throw(y))}catch(v){o(v)}}function h(y){y.done?n(y.value):s(y.value).then(l,d)}h((r=r.apply(e,[])).next())})}function zDe(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:r,async:i})}return t}var Rse=typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function jDe(e){function t(n){e.error=e.hasError?new Rse(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}var i,r=0;function s(){for(;i=e.stack.pop();)try{if(!i.async&&r===1)return r=0,e.stack.push(i),Promise.resolve().then(s);if(i.dispose){var n=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(n).then(s,function(o){return t(o),s()})}else r|=1}catch(o){t(o)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}const Pse="modulepreload",kse=function(e){return"/"+e},sF={},D=function(t,i,r){let s=Promise.resolve();if(i&&i.length>0){let o=function(h){return Promise.all(h.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=o(i.map(h=>{if(h=kse(h),h in sF)return;sF[h]=!0;const y=h.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Pse,y||(b.as="script"),b.crossOrigin="",b.href=h,d&&b.setAttribute("nonce",d),document.head.appendChild(b),y)return new Promise((w,E)=>{b.addEventListener("load",w),b.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function n(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&n(l.reason);return t().catch(n)})};let Lc;function Y(e){return typeof Lc[e]=="function"?Lc[e]=Lc[e](globalThis):Lc[e]}var nG,oG,aG,lG;Lc=(nG=globalThis.dojoConfig)!=null&&nG.has||(oG=globalThis.esriConfig)!=null&&oG.has?{...(aG=globalThis.dojoConfig)==null?void 0:aG.has,...(lG=globalThis.esriConfig)==null?void 0:lG.has}:{},Y.add=(e,t,i,r)=>{(r||Lc[e]===void 0)&&(Lc[e]=t),i&&Y(e)},Y.cache=Lc,Y.add("big-integer-warning-enabled",!0),Y.add("esri-deprecation-warnings",!0),Y.add("esri-tests-disable-screenshots",!1),Y.add("esri-tests-use-full-window",!1),Y.add("esri-tests-post-to-influx",!0),Y.add("esri-cim-animations-enable-status","enabled"),Y.add("esri-cim-animations-spotlight",!1),Y.add("esri-cim-animations-freeze-time",!1),Y.add("enable-feature:multiple-highlights",!0),(()=>{var t;Y.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(Y.add("host-browser",e),Y.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),Y.add("dom",e),Y("host-browser")){const i=navigator,r=i.userAgent,s=i.appVersion,n=parseFloat(s);if(Y.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),Y.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),Y.add("khtml",s.includes("Konqueror")?n:void 0),Y.add("edge",parseFloat(r.split("Edge/")[1])||void 0),Y.add("opr",parseFloat(r.split("OPR/")[1])||void 0),Y.add("webkit",!Y("wp")&&!Y("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),Y.add("chrome",!Y("edge")&&!Y("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),Y.add("android",!Y("wp")&&parseFloat(r.split("Android ")[1])||void 0),Y.add("safari",!s.includes("Safari")||Y("wp")||Y("chrome")||Y("android")||Y("edge")||Y("opr")?void 0:parseFloat(s.split("Version/")[1])),Y.add("mac",s.includes("Macintosh")),!Y("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),l=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",d=parseFloat(l.replace(/_/,".").replaceAll("_",""));Y.add(o,d),Y.add("ios",d)}Y("webkit")||(!r.includes("Gecko")||Y("wp")||Y("khtml")||Y("edge")||Y.add("mozilla",n),Y("mozilla")&&Y.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&Y.add("esri-mobile",t),i&&Y.add("esri-iPhone",i),Y.add("esri-geolocation",!!navigator.geolocation)}Y.add("esri-wasm","WebAssembly"in globalThis),Y.add("esri-performance-mode-frames-between-render",20),Y.add("esri-force-performance-mode",!1),Y.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),Y.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),Y.add("esri-atomics","Atomics"in globalThis),Y.add("esri-workers","Worker"in globalThis),Y.add("web-feat:cache","caches"in globalThis),Y.add("esri-workers-arraybuffer-transfer",!Y("safari")||Number(Y("safari"))>=12),Y.add("workers-pool-size",8),Y.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),Y.add("featurelayer-simplify-payload-size-factors",[1,1,4]),Y.add("featurelayer-fast-triangulation-enabled",!0),Y.add("featurelayer-animation-enabled",!0),Y.add("featurelayer-snapshot-enabled",!0),Y.add("featurelayer-snapshot-point-min-threshold",8e4),Y.add("featurelayer-snapshot-point-max-threshold",4e5),Y.add("featurelayer-snapshot-point-coverage",.1),Y.add("featurelayer-query-max-depth",4),Y.add("featurelayer-query-pausing-enabled",!1),Y.add("featurelayer-advanced-symbols",!1),Y.add("featurelayer-pbf",!0),Y.add("featurelayer-pbf-statistics",!1),Y.add("feature-layers-workers",!0),Y.add("feature-polyline-generalization-factor",1),Y.add("mapview-transitions-duration",200),Y.add("mapview-essential-goto-duration",200),Y.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),Y.add("mapserver-pbf-version-support",10.81),Y.add("mapservice-popup-identify-max-tolerance",20),Y.add("request-queue-concurrency-hosted",16),Y.add("request-queue-concurrency-non-hosted",4),Y.add("curve-densification-coarse-segments",128),Y.add("curve-densification-max-segments",2e3),Y.add("curve-densification-min-segments",3),Y.add("curve-densification-pixels-per-segment",16),Y.add("view-readyState-waiting-delay",1e3),Y.add("gradient-depth-bias",.01),Y.add("gradient-depth-epsilon",1e-8),Y("host-webworker")||Y("host-browser")&&(Y.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),Y.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{Y.add("esri-image-decode",!0,!0,!0)}).catch(()=>{Y.add("esri-image-decode",!1,!0,!0)})}return!1}),Y.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function UDe(e){}function Dse(e){return()=>e}function GDe(e){return e}let AS=class Zd{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Zd._m}getInt(){return this._seed=(Zd._a*this._seed+Zd._c)%Zd._m,this._seed}getFloat(){return this.getInt()/(Zd._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/Zd._m*r}};AS._m=2147483647,AS._a=48271,AS._c=0;const Nse=1.5,qDe=1/Nse,BDe=.5;function HDe(e,t){return t?e.filter((i,r,s)=>s.findIndex(t.bind(null,i))===r):Array.from(new Set(e))}function ET(e,t,i){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function nF(e,t,i){let r,s;return i?(r=t.filter(n=>!e.some(o=>i(o,n))),s=e.filter(n=>!t.some(o=>i(o,n)))):(r=t.filter(n=>!e.includes(n)),s=e.filter(n=>!t.includes(n))),{added:r,removed:s}}function WDe(e){return e&&typeof e.length=="number"}let mG=class{constructor(){this.last=0}};const yG=new mG;function uI(e,t,i,r){r=r||yG;const s=Math.max(0,r.last-10);for(let o=s;o<i;++o)if(e[o]===t)return r.last=o,o;const n=Math.min(s,i);for(let o=0;o<n;++o)if(e[o]===t)return r.last=o,o;return-1}function Fse(e,t,i,r){const s=e.length,n=uI(e,t,s,r);if(n!==-1)return e[n]=e[s-1],e.pop(),t}const ho=new Set;function Vse(e,t,i=e.length,r=t.length,s,n){if(r===0||i===0)return i;ho.clear();for(let l=0;l<r;++l)ho.add(t[l]);s=s||yG;const o=Math.max(0,s.last-10);for(let l=o;l<i;++l)if(ho.has(e[l])&&(n==null||n.push(e[l]),ho.delete(e[l]),e[l]=e[i-1],--i,--l,ho.size===0||i===0))return ho.clear(),i;for(let l=0;l<o;++l)if(ho.has(e[l])&&(n==null||n.push(e[l]),ho.delete(e[l]),e[l]=e[i-1],--i,--l,ho.size===0||i===0))return ho.clear(),i;return ho.clear(),i}function YDe(e,t,i){const r=e.length;if(t>=r)return e.slice();const s=aP(i),n=new Set,o=[];for(;o.length<t;){const l=Math.floor(s()*r);n.has(l)||(n.add(l),o.push(e[l]))}return o}function aP(e){return e?(oF.seed=e,()=>oF.getFloat()):Math.random}const oF=new AS;function gG(e,t){const i=aP(t);for(let r=e.length-1;r>0;r--){const s=Math.floor(i()*(r+1)),n=e[r];e[r]=e[s],e[s]=n}return e}function vG(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function Yr(e,t){return e!=null}const JDe=[];function XDe(e){return e instanceof ArrayBuffer}function lP(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function bG(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function _G(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function uP(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function wG(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function cP(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function SG(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function TT(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function $T(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function zse(e){return"buffer"in e}const EG=1024;function QDe(e){return $T(e)||TT(e)||cP(e)||uP(e)||lP(e)}function KDe(e){return $T(e)||TT(e)}function eNe(e){return $T(e)?179769e303:TT(e)?3402823e32:SG(e)?4294967295:wG(e)?65535:bG(e)||_G(e)?255:cP(e)?2147483647:uP(e)?32767:lP(e)?127:256}function jse(e,t){let i;for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function q(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=xG(e);if(t!=null)return t;if(Q2(e))return e.clone();if(TG(e))return e.map(q);if($G(e))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=q(e[r]);return i}function cI(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=xG(e);if(t!=null)return t;if(TG(e)){let r=!0;const s=e.map(n=>{const o=cI(n);return n!=null&&o==null&&(r=!1),o});return r?s:null}if(Q2(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if($G(e))return null;const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const s=e[r],n=cI(s);if(s!=null&&n==null)return null;i[r]=n}return i}function Q2(e){return typeof e.clone=="function"}function TG(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function $G(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function aF(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function xG(e){if(lP(e)||bG(e)||_G(e)||uP(e)||wG(e)||cP(e)||SG(e)||TT(e)||$T(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,r]of e)t.set(i,q(r));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(q(i));return t}return null}function dP(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function MG(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&ET(e,t):e instanceof Set?t instanceof Set&&Gse(e,t):e instanceof Map?t instanceof Map&&qse(e,t):!!aF(e)&&aF(t)&&Use(e,t))}function Use(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function Gse(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function qse(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const s=t.get(i);if(s!==r||s===void 0&&!t.has(i))return!1}return!0}function hP(e,t,i=!1){return IG(e,t,i)}function p_(e,t){if(t!=null)return t[e]||AG(e.split("."),!1,t)}function $r(e,t,i){const r=e.split("."),s=r.pop(),n=AG(r,!0,i);n&&s&&(n[s]=t)}function lF(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const i=t;if(e.length!==i.length)return!0;for(let r=0;r<e.length;r++)if(lF(e[r],i[r]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const i in e)if(lF(e[i],t[i]))return!0;return!1}return e!==t}function AG(e,t,i){let r=i;for(const s of e){if(r==null)return;if(!(s in r)){if(!t)return;r[s]={}}r=r[s]}return r}function IG(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let n=r[s],o=t[s];return n===o?r:n===void 0?(r[s]=q(o),r):(Array.isArray(o)||Array.isArray(r)?(n=n?Array.isArray(n)?r[s]=n.slice():r[s]=[n]:r[s]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(l=>{n.includes(l)||n.push(l)}):r[s]=o.slice())):o&&typeof o=="object"?r[s]=IG(n,o,i):r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=o),r)},e||{}):e}var uG;const It={apiKey:void 0,applicationName:"",applicationUrl:(uG=globalThis.location)==null?void 0:uG.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(hP(It,globalThis.esriConfig,!0),delete It.has),!It.assetsPath){{const e="4.32";It.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}It.defaultAssetsPath=It.assetsPath}const Bse=/\{([^}]+)\}/g;function uF(e){return e??""}function f_(e,t){return t?e.replaceAll(Bse,typeof t=="object"?(i,r)=>uF(p_(r,t)):(i,r)=>uF(t(r))):e}function tNe(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>t!=null&&t.includes(i)?i:`\\${i}`)}function CG(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}let cF;function Hse(e){return cF??(cF=new DOMParser),cF.parseFromString(e||"","text/html").body.innerText||""}function iNe(e,t){return new RegExp(`{${t}}`,"ig").test(e)}function rNe(e,...t){let i=e[0];for(let r=0;r<t.length;++r)i+=t[r]+e[r+1];return i}const dF={info:0,warn:1,error:2,none:3};let ae=class rn{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,rn._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=rn.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,rn._loggers.get(t)||new rn({module:t})}_log(t,i,...r){if(this._matchLevel(t)){if(i!=="always"&&!rn._throttlingDisabled){const s=Zse(r),n=this._loggedMessages[t].get(s);if(i==="once"&&n!=null||i==="oncePerTick"&&n&&n>=rn._tickCounter)return;this._loggedMessages[t].set(s,rn._tickCounter),rn._scheduleTickCounterIncrement()}for(const s of It.log.interceptors)if(s(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;r!=null;){const s=r[t];if(s!=null)return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",Wse)}_matchLevel(t){const i=It.log.level||"warn";return dF[this._parentWithMember("level",i)]<=dF[t]}static _scheduleTickCounterIncrement(){rn._tickCounterScheduled||(rn._tickCounterScheduled=!0,Promise.resolve().then(()=>{rn._tickCounter++,rn._tickCounterScheduled=!1}))}};function Wse(e,t,...i){console[e](`[${t}]`,...i)}function Zse(...e){return CG(JSON.stringify(e,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}ae._loggers=new Map,ae._tickCounter=0,ae._tickCounterScheduled=!1,ae._throttlingDisabled=!1;function Yse(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(p_(r,t)??"").toString())}let OG=class{constructor(t,i,r=void 0){this.name=t,this.details=r,this.message=(i&&Yse(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},B=class LG extends OG{constructor(t,i,r){super(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return q(i)}catch{return"[object]"}}))}}catch(t){throw ae.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new LG(t.name,t.message,t.details)}};B.prototype.type="error";const hF=new WeakMap;function Jse(e,t,i=!1){const r=` DEPRECATED - ${t}`;if(!i)return void e.warn(r);let s=hF.get(e);s||(s=new Set,hF.set(e,s)),s.has(t)||(s.add(t),e.warn(r))}function Xse(e,t,i={}){if(Y("esri-deprecation-warnings")){const{moduleName:r}=i;Lb(e,`Function: ${(r?r+"::":"")+t+"()"}`,i)}}function Qse(e,t,i={}){if(Y("esri-deprecation-warnings")){const{moduleName:r}=i;Lb(e,`Property: ${(r?r+"::":"")+t}`,i)}}function Kse(e,t,i={}){Y("esri-deprecation-warnings")&&Lb(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...i})}function Lb(e,t,i={}){if(Y("esri-deprecation-warnings")){const{replacement:r,version:s,see:n,warnOnce:o}=i;let l=t;if(r&&(l+=`
	 Replacement: ${r}`),s&&(l+=`
	 Version: ${s}`),n)if(Array.isArray(n)){l+=`
	 See for more details:`;for(const d of n)l+=`
		${d}`}else l+=`
	 See ${n} for more details.`;Jse(e,l,o)}}function nNe(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function ene(e,t){for(const i of e)if(i!=null&&t(i))return i}function K2(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let Gy=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if(K2(t)){const r=this._getOrCreateGroup(i);for(const s of t)fF(s)&&r.push(s)}else fF(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&i&&r.forEach(i)}}has(t){return this._groups.has(bw(t))}remove(t){if(typeof t!="string"&&K2(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(pF(this._getGroup(t)),this._groups.delete(bw(t)),this):this}removeAll(){return this._groups.forEach(pF),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(bw(t),i),i}_getGroup(t){return this._groups.get(bw(t))}};function bw(e){return e||"_default_"}function pF(e){for(const t of e)t instanceof Gy?t.removeAll():t.remove()}function fF(e){return e!=null&&(!!e.remove||e instanceof Gy)}function m_(e,t){if(e==null)throw new Error(t??"value is None")}function Zt(e){return e==null||e.destroy(),null}function aNe(e){return e==null||e.dispose(),null}function ui(e){return e==null||e.remove(),null}function by(e){return e==null||e.abort(),null}function lNe(e){return e==null||e.release(),null}function tne(e,t,i){return e!=null&&t!=null?i!=null?i(e,t):e.equals(t):e===t}function ine(e,t){let i;return e.some((r,s)=>(i=t(r,s),i!=null)),i??void 0}const RG=Symbol("Accessor-beforeDestroy"),rne={remove:()=>{}};function bt(e){return e?{remove(){e&&(e(),e=void 0)}}:rne}function PG(e){e.forEach(t=>t==null?void 0:t.remove())}function uNe(e){PG(e),e.length=0}function y_(e){return bt(()=>PG(e))}function cNe(e){return bt(()=>{var t;return(t=e())==null?void 0:t.remove()})}function dNe(e){return bt(()=>e==null?void 0:e.abort())}function sne(e){return bt(e!=null?()=>e.destroy():void 0)}function Us(e){return e.__accessor__??null}function nne(e,t){var i;return((i=e==null?void 0:e.metadata)==null?void 0:i[t])!=null}function IS(e,t,i){return i?eE(e,t,{policy:i,path:""}):eE(e,t,null)}function eE(e,t,i){return t?Object.keys(t).reduce((r,s)=>{const n=s;let o=null,l="merge";if(i&&(o=i.path?`${i.path}.${s}`:s,l=i.policy(o)),l==="replace"||l==="replace-arrays"&&Array.isArray(r[n]))return r[n]=t[n],r;if(r[n]===void 0)return r[n]=q(t[n]),r;let d=r[n],h=t[n];if(d===h)return r;if(Array.isArray(h)||Array.isArray(r))d=d?Array.isArray(d)?r[n]=d.slice():r[n]=[d]:r[n]=[],h&&(Array.isArray(h)||(h=[h]),h.forEach(y=>{d.includes(y)||d.push(y)}));else if(h&&typeof h=="object")if(i){const y=i.path;i.path=o,r[n]=eE(d,h,i),i.path=y}else r[n]=eE(d,h,null);else r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[n]=h);return r},e||{}):e}function kG(e){return Array.isArray(e)?e:e.split(".")}function mF(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function one(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...mF(i));return t}return mF(e)}function DG(e,t,i,r){const s=one(t);if(s.length!==1){const n=s.map(o=>r(e,o,i));return y_(n)}return r(e,s[0],i)}function NG(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const r=Us(t);return nne(r,i)?r.get(i):t[i]}function FG(e,t,i){if(e==null)return e;const r=NG(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:FG(r,t,i+1)}function g_(e,t,i=0){return typeof t!="string"||t.includes(".")?FG(e,kG(t),i):NG(t,e)}function ys(e,t){return g_(e,t)}function yF(e,t){return g_(t,e)!==void 0}var Ns;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(Ns||(Ns={}));function v_(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){t=Object.create(t);for(const r in t)t[r]=q(t[r]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function xT(e,t){const i=v_(e);let r=i[t];return r||(r=i[t]={}),r}function ane(e,t){return IS(e,t,une)}const lne=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function une(e){return lne.test(e)?"replace":"merge"}function cne(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function dne(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let Cp=class dI{constructor(t,i,r,s=1,n=0){this._ctor=t,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n;for(let o=0;o<n;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let i;if(dI.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):dne(i)&&i.acquire(...t),i}release(t){t&&!dI.test.disabled&&(this._releaseFunction?this._releaseFunction(t):cne(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Cp.test={disabled:!1};let hne=class{constructor(t,i){this._observers=t,this._observer=i}remove(){vG(this._observers,this._observer)}},VG=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return pne;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,s=!1;const n=i.length;for(let o=0;o<n;++o){const l=i[o];if(l.destroyed)s=!0;else if(l===t){r=!0;break}}return r||(i.push(t),s&&this._removeDestroyedObservers()),new hne(i,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const i=t.length;let r=0;for(let s=0;s<i;++s){for(;s+r<i&&t[s+r].destroyed;)++r;if(r>0){if(!(s+r<i))break;t[s]=t[s+r]}}t.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const i of t)i.onCommitted();this._observers=null}}};const pne=bt();var He;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(He||(He={}));const hI=He.USER+1;function Rc(e){switch(e){case"defaults":return He.DEFAULTS;case"service":return He.SERVICE;case"portal-item":return He.PORTAL_ITEM;case"web-scene":return He.WEB_SCENE;case"web-map":return He.WEB_MAP;case"link-chart":return He.LINK_CHART;case"user":return He.USER;default:return null}}function tE(e){switch(e){case He.DEFAULTS:return"defaults";case He.SERVICE:return"service";case He.PORTAL_ITEM:return"portal-item";case He.WEB_SCENE:return"web-scene";case He.WEB_MAP:return"web-map";case He.LINK_CHART:return"link-chart";case He.USER:return"user"}}function fne(e){return tE(e)}var Lt;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Lt||(Lt={}));let MT=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const iE=new MT,U0=[];let tb=iE;function Fe(e){tb.onAccessed(e)}let CS=!1,OS=!1;function eu(e,t,i){if(CS)return pP(e,t,i);let r=null;return zG(e),r=t.call(i),jG(),r}function mne(e,t){return eu(iE,e,t)}function pP(e,t,i){const r=CS;CS=!0,zG(e);let s=null;try{s=t.call(i)}catch(n){OS&&ae.getLogger("esri.core.accessorSupport.tracking").error(n)}return jG(),CS=r,s}function zG(e){tb=e,U0.push(e)}function jG(){const e=U0.length;if(e>1){const t=U0.pop();tb=U0[e-2],t.onTrackingEnd()}else if(e===1){const t=U0.pop();tb=iE,t.onTrackingEnd()}else tb=iE}function UG(e,t){if(t.flags&Lt.DepTrackingInitialized)return;t.flags|=Lt.DepTrackingInitialized;const i=OS;OS=!1,t.flags&Lt.AutoTracked?pP(t.trackingTarget,t.metadata.get,e):GG(e,t),OS=i}const yne=[];function GG(e,t){t.flags&Lt.ExplicitlyTracking||(t.flags|=Lt.ExplicitlyTracking,pP(t.trackingTarget,()=>{const i=t.metadata.dependsOn||yne;for(const r of i)if(typeof r!="string"||r.includes(".")){const s=kG(r);for(let n=0,o=e;n<s.length&&o!=null&&typeof o=="object";++n)o=gF(o,s[n],n!==s.length-1)}else gF(e,r,!1)}),t.flags&=~Lt.ExplicitlyTracking)}function gF(e,t,i){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const s=Us(e);if(s){const n=s.propertiesByName.get(r);n&&(Fe(n),UG(e,n))}return i?e[r]:void 0}let vF=class extends VG{constructor(t,i){super(),this.propertyName=t,this.metadata=i,this.trackingTarget=new MT(this),this.flags=0,this.flags=Lt.Dirty|(i.nonNullable?Lt.NonNullable:0)|(i.hasOwnProperty("value")?Lt.HasDefaultValue:0)|(i.get===void 0?Lt.DepTrackingInitialized:0)|(i.dependsOn===void 0?Lt.AutoTracked:0)}destroy(){this.flags&Lt.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&Fe(this);const i=t.store,r=this.propertyName,s=this.flags,n=i.get(r);if(s&Lt.Computing||~s&Lt.Dirty&&i.has(r))return n;this.flags|=Lt.Computing;const o=t.host;let l;s&Lt.AutoTracked?l=eu(this.trackingTarget,this.metadata.get,o):(GG(o,this),l=this.metadata.get.call(o)),this.flags|=Lt.DepTrackingInitialized,i.set(r,l,He.COMPUTED);const d=i.get(r);return d===n?this.flags&=~Lt.Dirty:mne(this.commit,this),this.flags&=~Lt.Computing,d}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Lt.Dirty,this.onCommitted()}onInvalidated(){~this.flags&Lt.Overridden&&(this.flags|=Lt.Dirty);const t=this._observers;if(t&&t.length>0)for(const i of t)i.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onCommitted()}}},gne=class qG{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new qG;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,q(r))}),i}get(t){return this._values.get(t)}originOf(){return He.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function _w(e,t,i){return e!==void 0}function bF(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&Lt.NonNullable)||(r.lifecycle,Ns.INITIALIZING,!1))}let vne=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Ns.INITIALIZING,this.store=new gne,this.mutable=!0,this._origin=He.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const s=new vF(r,i[r]);this.propertiesByName.set(r,s)}this.metadata=i}initialize(){this.lifecycle=Ns.CONSTRUCTING}constructed(){this.lifecycle=Ns.CONSTRUCTED}destroy(){this.lifecycle=Ns.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==Ns.INITIALIZING}get(t){const i=this.propertiesByName.get(t);if(i.metadata.get)return i.getComputed(this);this.mutable&&Fe(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.propertiesByName.get(t);if(r!==void 0&&r.flags&Lt.HasDefaultValue)return"defaults"}return tE(i)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const i=this.propertiesByName.get(t);if(_w(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.propertiesByName.get(t);_w(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const s=this.propertiesByName.get(i);if(!_w(s))return"";const n=new MT,o=eu(n,()=>{var h;return(h=s.metadata.get)==null?void 0:h.call(t)});let l=`${r}${t.declaredClass.split(".").pop()}.${i}: ${o}
`;const d=n.accessed??new Set;if(d.size===0)return l;r+="  ";for(const h of d)h instanceof vF&&(l+=`${r}${h.propertyName}: undefined
`);return l}setAtOrigin(t,i,r){const s=this.propertiesByName.get(t);if(_w(s))return this._setAtOrigin(s,i,r)}isOverridden(t){const i=this.propertiesByName.get(t);return i!==void 0&&!!(i.flags&Lt.Overridden)}clearOverride(t){const i=this.propertiesByName.get(t);i&&i.flags&Lt.Overridden&&(i.flags&=~Lt.Overridden,i.notifyChange())}override(t,i){const r=this.propertiesByName.get(t);if(!bF(r,t,i,this))return;const s=r.metadata.cast;if(s){const n=this._cast(s,i),{valid:o,value:l}=n;if(p3.release(n),!o)return;i=l}r.flags|=Lt.Overridden,this._internalSet(r,i)}set(t,i){const r=this.propertiesByName.get(t);if(!bF(r,t,i,this))return;const s=r.metadata.cast;if(s){const o=this._cast(s,i),{valid:l,value:d}=o;if(p3.release(o),!l)return;i=d}const n=r.metadata.set;n?n.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=Rc(t)}getDefaultOrigin(){return tE(this._origin)}notifyChange(t){const i=this.propertiesByName.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.propertiesByName.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.propertiesByName.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==Ns.INITIALIZING?this._origin:He.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const s=this.store,n=t.propertyName;s.has(n,r)&&dP(i,s.get(n))&&~t.flags&Lt.Overridden&&r===s.originOf(n)||(t.invalidate(),s.set(n,i,r),t.commit(),UG(this.host,t))}_cast(t,i){const r=p3.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}},bne=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const p3=new Cp(bne);function rE(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))rE(e,r,t[r]);else{if(t.includes(".")){const s=t.split("."),n=s.splice(-1,1)[0];return void rE(ys(e,s),n,i)}const r=e.__accessor__;r!=null&&_ne(t,r),e[t]=i}}function _ne(e,t){if(Y("esri-unknown-property-errors")&&!wne(e,t))throw new B("set:unknown-property",Sne(e,t))}function wne(e,t){return t.metadata[e]!=null}function Sne(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let Ene;function Tne(){return Ene}var _F;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(_F||(_F={}));function $ne(e){e.length=0}let fs=class{constructor(t=50,i=50){this._pool=new Cp(Array,void 0,$ne,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return f3.acquire()}static release(t){return f3.release(t)}static prune(){f3.prune()}};const f3=new fs(100);let BG=class extends Cp{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const ww=[];function sE(e){ww.push(e),ww.length===1&&queueMicrotask(()=>{const t=ww.slice();ww.length=0;for(const i of t)i()})}let ib=class{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var pI;(function(e){const t=(n,o,l,d)=>{let h=o,y=o;const v=l>>>1,b=n[h-1];for(;y<=v;){y=h<<1,y<l&&d(n[y-1],n[y])<0&&++y;const w=n[y-1];if(d(w,b)<=0)break;n[h-1]=w,h=y}n[h-1]=b},i=(n,o)=>n<o?-1:n>o?1:0;function r(n,o,l,d){o===void 0&&(o=0),l===void 0&&(l=n.length),d===void 0&&(d=i);for(let y=l>>>1;y>o;y--)t(n,y,l,d);const h=o+1;for(let y=l-1;y>o;y--){const v=n[o];n[o]=n[y],n[y]=v,t(n,h,y,d)}}function*s(n,o,l,d){o===void 0&&(o=0),l===void 0&&(l=n.length),d===void 0&&(d=i);for(let y=l>>>1;y>o;y--)t(n,y,l,d),yield;const h=o+1;for(let y=l-1;y>o;y--){const v=n[o];n[o]=n[y],n[y]=v,t(n,h,y,d),yield}}e.sort=r,e.iterableSort=s})(pI||(pI={}));const wF=pI,xne=1.5,Mne=1.1;let np=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new mG,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>SF(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];t(s)&&i.push(s)}return i}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,SF(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=uI(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(uI(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=Vse(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const r=this.data[t];this.data[t]=this.data[i],this.data[i]=r}sort(t){wF.sort(this.data,0,this.length,t)}iterableSort(t){return wF.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}find(t,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)if(t.call(i,r[n]))return r[n]}filterInPlace(t,i){let r=0;for(let s=0;s<this._length;++s){const n=this.data[s];t.call(i,n,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=n,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(t,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)t.call(i,r[n],n,r)}forEach(t,i){this.data.slice(0,this.length).forEach(t,i)}map(t,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=t.call(i,this.data[s],s,this.data);return r}reduce(t,i){let r=i;for(let s=0;s<this.length;++s)r=t(r,this.data[s],s,this.data);return r}has(t){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function SF(e){e.data.length>xne*e.length&&(e.data.length=Math.floor(e.length*Mne))}function Ane(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return bt(()=>e.clearTimeout(r))}}}const qy=Ane(globalThis);function AT(e){return Ine(e)||HG(e)}function Ine(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function HG(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function b_(e,t,i){if(!AT(e))throw new TypeError("target is not a Evented or EventTarget object");return HG(e)?Cne(e,t,i):e.on(t,i)}function Cne(e,t,i,r){if(Array.isArray(t)){const s=t.slice();for(const n of s)e.addEventListener(n,i,r);return bt(()=>{for(const n of s)e.removeEventListener(n,i,r)})}return e.addEventListener(t,i,r),bt(()=>e.removeEventListener(t,i,r))}function WG(e,t,i){if(!AT(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=b_(e,t,s=>{r.remove(),i.call(e,s)});return r}function Yt(e="Aborted"){return new B("AbortError",e)}function yi(e,t="Aborted"){if(vn(e))throw Yt(t)}function __(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function vn(e){const t=__(e);return t!=null&&t.aborted}function Ia(e){if(rs(e))throw e}function EF(e){if(!rs(e))throw e}function Jn(e,t){const i=__(e);if(i!=null){if(!i.aborted)return WG(i,"abort",()=>t());t()}}function fP(e,t){const i=__(e);if(i!=null)return yi(i),WG(i,"abort",()=>t(Yt()))}function ZG(e,t){return __(t)==null?e:new Promise((i,r)=>{let s=Jn(t,()=>r(Yt()));const n=()=>{s=ui(s)};e.then(n,n),e.then(i,r)})}function rs(e){return(e==null?void 0:e.name)==="AbortError"}async function Rb(e){try{return await e}catch(t){if(!rs(t))throw t;return}}async function mP(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(o=>e[o]),s=await mP(r),n={};return i.map((o,l)=>n[o]=s[l]),n}const t=e;return Promise.allSettled(t).then(i=>Array.from(t,(r,s)=>{const n=i[s];return n.status==="fulfilled"?{promise:r,value:n.value}:{promise:r,error:n.reason}}))}async function One(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function SNe(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function YG(e,t=void 0,i){const r=new AbortController;return Jn(i,()=>r.abort()),new Promise((s,n)=>{let o=setTimeout(()=>{o=0,s(t)},e);Jn(r,()=>{o&&(clearTimeout(o),n(Yt()))})})}function ENe(e,t,i,r){const s=i&&"abort"in i?i:null;r!=null||s||(r=i);let n=setTimeout(()=>{n=0,s==null||s.abort()},t);const o=()=>r||new B("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return e.then(l=>{if(n===0)throw o();return clearTimeout(n),l},l=>{throw clearTimeout(n),n===0?o():l})}function Lne(e,t){const i=new AbortController,r=setTimeout(()=>i.abort(),t);return Jn(e,()=>{i.abort(),clearTimeout(r)}),{...e,signal:i.signal}}function Ua(e){return e&&typeof e.then=="function"}function fI(e){return Ua(e)?e:Promise.resolve(e)}function IT(e,t=-1){let i,r,s,n,o=null;const l=(...d)=>{if(i){r=d,n&&n.reject(Yt()),n=bn();const b=n.promise;if(o){const w=o;o=null,w.abort()}return b}if(s=n||bn(),n=null,t>0){const b=new AbortController;i=fI(e(...d,b.signal));const w=i;YG(t).then(()=>{i===w&&(n?b.abort():o=b)})}else i=1,i=fI(e(...d));const h=()=>{const b=r;r=s=i=o=null,b!=null&&l(...b)},y=i,v=s;return y.then(h,h),y.then(v.resolve,v.reject),v.promise};return l}function bn(){let e,t;const i=new Promise((s,n)=>{e=s,t=n}),r=s=>{e(s)};return r.resolve=s=>e(s),r.reject=s=>t(s),r.timeout=(s,n)=>qy.setTimeout(()=>r.reject(n),s),r.promise=i,r}async function TF(e){await Promise.resolve(),yi(e)}function TNe(e){return e}function Rne(e){return 1e3*e}function $Ne(e){return e}function xNe(e){return .001*e}let Pne=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},kne=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},mI=0;const h0={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},yI=["prepare","preRender","render","postRender","update","finish"],gI=[],mp=new np;let Dne=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,JG()}};function Nne(){op!=null&&(cancelAnimationFrame(op),op=requestAnimationFrame(yP))}function JG(){op==null&&(mI=performance.now(),op=requestAnimationFrame(yP))}const nE={frameTasks:mp,willDispatch:!1,clearFrameTasks:Fne,dispatch:QG,executeFrameTasks:Vne,reschedule:Nne};function w_(e){const t=new kne(e);return gI.push(t),nE.willDispatch||(nE.willDispatch=!0,sE(QG)),t}function _y(e){const t=new Pne(e);return mp.push(t),JG(),new Dne(t)}let op=null;function Fne(e=!1){mp.forAll(t=>{t.removed=!0}),e&&XG()}function yP(){const e=performance.now();op=null,op=mp.some(i=>!i.paused&&!i.removed)?requestAnimationFrame(yP):null,nE.executeFrameTasks(e)}function Vne(e){const t=e-mI;mI=e;const i=1e3/60,r=Math.max(0,t-i);h0.time=e,h0.frameDuration=i-r;for(let s=0;s<yI.length;s++){const n=performance.now(),o=yI[s];mp.forAll(l=>{var d;l.paused||l.removed||(s===0&&l.ticks++,l.phases[o]&&(h0.elapsedFrameTime=performance.now()-e,h0.deltaTime=l.ticks===0?0:t,(d=l.phases[o])==null||d.call(l,h0)))}),Gne[s].push(performance.now()-n)}XG(),qne.push(performance.now()-e)}const Sw=new np;function XG(){mp.forAll(e=>{e.removed&&Sw.push(e)}),mp.removeUnorderedMany(Sw.data,Sw.length),Sw.clear()}function QG(){for(;gI.length;){const e=gI.shift();e.isActive&&e.callback()}nE.willDispatch=!1}function zne(e=1,t){const i=bn(),r=()=>{vn(t)?i.reject(Yt()):e===0?i():(--e,sE(()=>r()))};return r(),i.promise}function jne(e){return zne(1,e)}async function Une(e){await jne(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const Gne=yI.map(e=>new ib(e)),qne=new ib("total");function KG(e,t){for(const i of e.values())if(t(i))return!0;return!1}function oE(e,t){if(!t)return e;for(const i of t)i!=null&&e.add(i);return e}function $F(e,t){return t!=null&&e.add(t),e}function gP(e,t){const i=new Set;return oE(i,e),oE(i,t),i}function Bne(e,t){const i=new Set;for(const r of t)e.has(r)&&i.add(r);return i}function CNe(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const i of e)if(!t.has(i))return!1;return!0}function ONe(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function Hne(e,t){const i=new Set(e);for(const r of t)i.delete(r);return i}function Wne(e,t){return Hne(gP(e,t),Bne(e,t))}let Zne=0;function LS(){return++Zne}let CT=class extends MT{constructor(t){super(new Yne(t)),this._observer&&xF.register(this,new WeakRef(this._observer),this)}destroy(){var t,i;this._observer&&xF.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},Yne=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=Jne}};const xF=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function Jne(){}let Km=!1;const aE=[];function eq(e,t){let i=new CT(n),r=null,s=!1;function n(){if(!i||s)return;if(Km)return void rq(n);const l=r;i.clear(),Km=!0,s=!0,r=eu(i,e),s=!1,Km=!1,t(r,l),sq()}function o(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=eu(i,e),s=!1,bt(o)}function tq(e,t){let i=new CT(s),r=null;function s(){t(r,o)}function n(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=eu(i,e),r):null}return o(),bt(n)}function iq(e,t){let i=!1,r=!1;const s=!!(t!=null&&t.sync);let n=new CT(()=>{i||r||(r=!0,s?o():queueMicrotask(o))});function o(){r=!1,n&&!i&&(Km?rq(o):(n.clear(),Km=!0,i=!0,eu(n,e),i=!1,Km=!1,sq()))}function l(){n&&(n.destroy(),n=null)}return i=!0,eu(n,e),i=!1,bt(l)}function rq(e){aE.includes(e)||aE.unshift(e)}function sq(){for(;aE.length;)aE.pop()()}var rb;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(rb||(rb={}));let Pb=class{constructor(){this.uid=LS(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,s,n){return this.pool.acquire(rb.Untracked,t,i,r,s,n,dP)}static acquireTracked(t,i,r,s){return this.pool.acquire(rb.Tracked,t,i,r,null,null,s)}notify(t,i){this.type===rb.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i,void 0,void 0)}acquire(t,i,r,s,n,o,l){this.uid=LS(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=s,this.target=n,this.path=o,this.equals=l}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=LS(),this.removed=!0}};Pb.pool=new BG(Pb);const RS=new fs,Jl=new Set;let lE;function uE(e){Jl.delete(e),Jl.add(e),lE||(lE=w_(Kne))}function Xne(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function Qne(e){for(const t of Jl.values())t.target===e&&(t.removed=!0)}function Kne(){let e=10;for(;lE&&e--;){lE=null;const t=eoe(),i=RS.acquire();for(const r of t){const s=r.uid;Xne(r),s===r.uid&&r.removed&&i.push(r)}for(const r of Jl)r.removed&&(i.push(r),Jl.delete(r));for(const r of i)Pb.pool.release(r);RS.release(i),RS.release(t),vI.forEach(r=>r())}}function eoe(){const e=RS.acquire();e.length=Jl.size;let t=0;for(const i of Jl)e[t]=i,++t;return Jl.clear(),e}const vI=new Set;function toe(e){return vI.add(e),bt(()=>vI.delete(e))}function ioe(e,t,i){let r=DG(e,t,i,(s,n,o)=>{let l,d,h=tq(()=>g_(s,n),(y,v)=>{var b;((b=s.__accessor__)==null?void 0:b.lifecycle)===Ns.DESTROYED||l&&l.uid!==d?r.remove():(l||(l=Pb.acquireUntracked(y,o,v,s,n),d=l.uid),uE(l))});return bt(()=>{h.remove(),l&&(l.uid!==d||l.removed||(l.removed=!0,uE(l)),l=null),r=h=null})});return r}function roe(e,t,i){const r=DG(e,t,i,(s,n,o)=>{let l=!1;return eq(()=>g_(s,n),(d,h)=>{s.__accessor__.lifecycle!==Ns.DESTROYED?l||(l=!0,dP(h,d)||o.call(s,d,h,n,s),l=!1):r.remove()})});return r}function soe(e,t,i,r=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Ns.DESTROYED?r?roe(e,t,i):ioe(e,t,i):bt()}function noe(e,t,i){let r,s,n=tq(e,(o,l)=>{r&&r.uid!==s?n.remove():(r||(r=Pb.acquireTracked(o,t,l,i),s=r.uid),uE(r))});return bt(()=>{n.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,uE(r)),r=null),n=null})}function ooe(e,t,i){let r=!1;return eq(e,(s,n)=>{r||(r=!0,i(n,s)||t(s,n),r=!1)})}function aoe(e,t,i=!1,r=MG){return i?ooe(e,t,r):noe(e,t,r)}function MF(e){return KG(Jl,t=>t.oldValue===e)}function loe(e,t){for(const i of e.values())if(t(i))return!0;return!1}function kNe(e,t){for(const i of e.values())if(t(i))return i;return null}function S_(e,t,i){const r=e.get(t);if(r!==void 0)return r;const s=i();return e.set(t,s),s}function DNe(e){const t=new Map;return i=>(t.has(i)||t.set(i,e(i)),t.get(i))}const ey=()=>ae.getLogger("esri.core.accessorSupport.ensureTypes");function uoe(e){return e==null?e:new Date(e)}function coe(e){return e==null?e:!!e}function E_(e){return e==null?e:e.toString()}function ms(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function vP(e){return e==null?e:Math.round(parseFloat(e))}function doe(e){return null}function hoe(e,t){return i=>{let r=e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function nq(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function cE(e,t){return t!=null&&e&&!(t instanceof e)}function oq(e){return e&&"isCollection"in e}function AF(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function poe(e,t){if(!(t!=null&&t.constructor)||!oq(t.constructor))return bI(e,t)?t:new e(t);const i=AF(e.prototype.itemType),r=AF(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(bI(e,t),t):new e(t):t}function bI(e,t){return!!nq(t)&&(ey().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+OT(e)+"'"),!0)}function T_(e,t){return t==null?t:oq(e)?poe(e,t):cE(e,t)?bI(e,t)?t:new e(t):t}function OT(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const foe=new WeakMap;function moe(e){switch(e){case Number:return t=>ms(t);case vt:return vP;case Boolean:return coe;case String:return E_;case Date:return uoe;case LT:return doe;default:return S_(foe,e,()=>T_.bind(null,e))}}function Zi(e,t){const i=moe(e);return arguments.length===1?i:i(t)}function kb(e,t,i){return arguments.length===1?kb.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function yoe(e,t){return arguments.length===1?kb(i=>Zi(e,i)):kb(i=>Zi(e,i),t)}function aq(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>aq(e,t-1,r)):e(i)}function dE(e,t,i){if(arguments.length===2)return n=>dE(e,t,n);if(!i)return i;i=aq(e,t,i);let r=t,s=i;for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let n=0;n<r;n++)i=[i];return i}function goe(e,t,i){return arguments.length===2?dE(r=>Zi(e,r),t):dE(r=>Zi(e,r),t,i)}function lq(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function _I(e,t){if(arguments.length===2)return _I(e).call(null,t);const i=new Set,r=e.filter(l=>typeof l!="function"),s=e.filter(l=>typeof l=="function");for(const l of e)typeof l!="string"&&typeof l!="number"||i.add(l);let n=null,o=null;return(l,d)=>{if(l==null)return l;const h=typeof l,y=h==="string"||h==="number";return y&&(i.has(l)||s.some(v=>h==="string"&&v===String||h==="number"&&v===Number))||h==="object"&&s.some(v=>!cE(l,v))?l:(y&&r.length?(n||(n=r.map(v=>typeof v=="string"?`'${v}'`:`${v}`).join(", ")),ey().error("Accessor#set",`'${l}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof l=="object"&&s.length?(o||(o=s.map(v=>OT(v)).join(", ")),ey().error("Accessor#set",`'${l}' is not a valid value for this property, value must be one of ${o}`)):ey().error("Accessor#set",`'${l}' is not a valid value for this property`),d&&(d.valid=!1),null)}}function Yo(e,t){if(arguments.length===2)return Yo(e).call(null,t);const i={},r=[],s=[];for(const d in e.typeMap){const h=e.typeMap[d];i[d]=Zi(h),r.push(OT(h)),s.push(d)}const n=()=>`'${r.join("', '")}'`,o=()=>`'${s.join("', '")}'`,l=typeof e.key=="string"?d=>d[e.key]:e.key;return d=>{if(e.base&&!cE(e.base,d)||d==null)return d;const h=l(d)||e.defaultKeyValue,y=i[h];if(!y)return ey().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!cE(e.typeMap[h],d))return d;if(typeof e.key=="string"&&!nq(d)){const v={};for(const b in d)b!==e.key&&(v[b]=d[b]);return y(v)}return y(d)}}let vt=class{},LT=class{};const VNe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function voe(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function uq(e){switch(e.type){case"native":return Zi(e.value);case"array":return kb(uq(e.value));case"one-of":return boe(e);default:return null}}function boe(e){let t=null;return(i,r)=>SI(i,e)?i:(t==null&&(t=wI(e)),ey().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function wI(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case vt:return"integer";case Date:return"date";case LT:return"null";default:return OT(e.value)}case"array":return`array of ${wI(e.value)}`;case"one-of":{const t=e.values.map(i=>wI(i));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function SI(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case vt:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case LT:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!SI(i,t.value));case"one-of":return t.values.some(i=>SI(e,i))}}function p(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),s=xT(t,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in e&&ae.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=r.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const n=e.aliasOf;if(n){const d=typeof n=="string"?n:n.source,h=typeof n=="string"?null:n.overridable===!0;let y;s.dependsOn=[d],s.get=function(){let v=ys(this,d);if(typeof v=="function"){y||(y=d.split(".").slice(0,-1).join("."));const b=ys(this,y);b&&(v=v.bind(b))}return v},s.readOnly||(s.set=h?function(v){this._override(i,v)}:function(v){rE(this,d,v)})}const o=e.type,l=e.types;if(!s.cast){let d;o?d=_oe(o):l&&(d=Array.isArray(l)?kb(Yo(l[0])):Yo(l)),e.cast=woe(e.cast,d)}ane(s,e),e.range&&(s.cast=hoe(s.cast,e.range))}}function cq(e,t,i){const r=xT(e,i);r.json||(r.json={});let s=r.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function _oe(e){let t=0,i=e;if(voe(e))return uq(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(lq(r))return t===0?_I(r):dE(_I(r),t);if(t===1)return yoe(r);if(t>1)return goe(r,t);const s=e;return s.from?s.from:Zi(s)}function woe(e,t){if(e||t)return e?t?(i,r)=>t(e(i,r),r):e:t}function Soe(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const s=t[r];i[r].forEach(n=>{t[n]=s}),delete t[r]}}}let Qn=class extends OG{constructor(t,i,r){super(t,i,r)}};Qn.prototype.type="warning";function dq(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const EI=()=>ae.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function IF(e,t,i){var r,s;e&&(!i&&!t.read||(r=t.read)!=null&&r.reader||((s=t.read)==null?void 0:s.enabled)===!1||$oe(e)&&$r("read.reader",By(e),t))}function By(e){var i,r;const t=e.ndimArray??0;if(t>1)return Toe(e);if(t===1)return CF(e);if("type"in e&&pq(e.type)){const s=(r=(i=e.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,n=CF(typeof s=="function"?{type:s}:{types:s});return(o,l,d)=>{const h=n(o,l,d);return h&&new e.type(h)}}return bP(e)}function bP(e){return"type"in e?Eoe(e.type):xoe(e.types)}function Eoe(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void EI().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const n=new e;return n.read(t,r),n}:e.fromJSON}function hq(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(s=>hq(e,s,i,r-1)):e(t,void 0,i)}function Toe(e){const t=bP(e),i=hq.bind(null,t),r=e.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=i(s,o,r);let l=r,d=s;for(;l>0&&Array.isArray(d);)l--,d=d[0];if(d!==void 0)for(let h=0;h<l;h++)s=[s];return s}}function CF(e){const t=bP(e);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const l of i){const d=t(l,void 0,s);d!==void 0&&o.push(d)}return o}const n=t(i,void 0,s);return n!==void 0?[n]:void 0}}function pq(e){if(!dq(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?_P(t.Type):fq(t.Type))}function $oe(e){return"types"in e?fq(e.types):_P(e.type)}function _P(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||pq(e))}function fq(e){for(const t in e.typeMap)if(!_P(e.typeMap[t]))return!1;return!0}function xoe(e){let t=null;const i=e.errorContext??"type",r=e.validate;return(s,n,o)=>{if(s==null)return s;const l=typeof s;if(l!=="object")return void EI().error(`Expected JSON value of type 'object' to deserialize, but got '${l}'`);t||(t=Moe(e));const d=e.key;if(typeof d!="string")return;const h=s[d],y=h?t[h]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!y){const b=`Type '${h||"unknown"}' is not supported`;return o!=null&&o.messages&&s&&o.messages.push(new Qn(`${i}:unsupported`,b,{definition:s,context:o})),void EI().error(b)}const v=new y;return v.read(s,o),r?r(v):v}}function Moe(e){var i,r;const t={};for(const s in e.typeMap){const n=e.typeMap[s],o=v_(n.prototype);if(typeof e.key=="function")continue;const l=o[e.key];if(!l)continue;if((i=l.json)!=null&&i.type&&Array.isArray(l.json.type)&&l.json.type.length===1&&typeof l.json.type[0]=="string"){t[l.json.type[0]]=n;continue}const d=(r=l.json)==null?void 0:r.write;if(!(d!=null&&d.writer)){t[s]=n;continue}const h=d.target,y=typeof h=="string"?h:e.key,v={};d.writer(s,v,y),v[y]&&(t[v[y]]=n)}return t}function Aoe(e){if(e.json||(e.json={}),LF(e.json),RF(e.json),OF(e.json),e.json.origins)for(const t in e.json.origins)LF(e.json.origins[t]),RF(e.json.origins[t]),OF(e.json.origins[t]);return!0}function OF(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function LF(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function RF(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function PF(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(e==null?void 0:e.ndimArray)??0;e&&(i===1||"type"in e&&dq(e.type))?t.write.writer=Ooe:i>1?t.write.writer=Loe(i):t.types?Array.isArray(t.types)?t.write.writer=Coe(t.types[0]):t.write.writer=Ioe(t.types):t.write.writer=Db}function Ioe(e){return(t,i,r,s)=>t?mq(t,e,s)?Db(t,i,r,s):void 0:Db(t,i,r,s)}function mq(e,t,i){for(const r in t.typeMap)if(e instanceof t.typeMap[r])return!0;if(i!=null&&i.messages){const r=t.errorContext??"type",s=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new B(`${r}:unsupported`,s,{definition:e,context:i})),ae.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function Coe(e){return(t,i,r,s)=>!t||!Array.isArray(t)?Db(t,i,r,s):Db(t.filter(n=>mq(n,e,s)),i,r,s)}function Db(e,t,i,r){$r(i,hE(e,r),t)}function hE(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?pE(e):e}function pE(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function Ooe(e,t,i,r){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(n=>hE(n,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[hE(e,r)],$r(i,s,t)}function yq(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>yq(r,t,i-1)):hE(e,t)}function Loe(e){return(t,i,r,s)=>{let n;if(t===null)n=null;else{n=yq(t,s,e);let o=e,l=n;for(;o>0&&Array.isArray(l);)o--,l=l[0];if(l!==void 0)for(let d=0;d<o;d++)n=[n]}$r(r,n,i)}}function Roe(e,t){return wP(e,"any",t==null?void 0:t.origin)}function TI(e,t){return wP(e,"read",t==null?void 0:t.origin)}function gq(e,t){return wP(e,"write",t==null?void 0:t.origin)}function wP(e,t,i){let r=e==null?void 0:e.json;if(r!=null&&r.origins&&i){let s;s=i==="link-chart"?r.origins[i]&&(t==="any"||t in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],s&&(t==="any"||t in s)&&(r=s)}return r}function Poe(e){var i;const t=koe(e);if(e.json.origins)for(const r in e.json.origins){const s=e.json.origins[r],n=s.types?Doe(s):t;IF(n,s,!1),s.types&&!s.write&&((i=e.json.write)!=null&&i.enabled)&&(s.write={...e.json.write}),PF(n,s)}IF(t,e.json,!0),PF(t,e.json)}function koe(e){return e.json.types?$I(e.json):e.type?vq(e):$I(e)}function Doe(e){return e.type?vq(e):$I(e)}function vq(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!lq(i);)i=i[0],t++;return{type:i,ndimArray:t}}function $I(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function Noe(e){Aoe(e)&&(Soe(e),Poe(e))}const m3=new Set,y3=new Set;function I(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,Voe(t);const i=[],r=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!m3.has(s.initialize)&&(m3.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!y3.has(s.destroy)&&(y3.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);m3.clear(),y3.clear();const n=class extends t{constructor(...l){if(super(...l),this.constructor===n&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let d=i.length-1;d>=0;d--)i[d].call(this)}}),r.length){let d=!1;const h=this[RG];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!d){d=!0,h.call(this);for(let y=0;y<r.length;y++)r[y].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=v_(t.prototype),n.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:o,configurable:!0}),n}}function Foe(e,t){return t.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r===void 0)return;i.mutable&&Fe(r);const s=i.store;return s.has(e)?s.get(e):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r!==void 0)return r.getComputed(i)}}function Voe(e){const t=e.prototype,i=v_(t),r={};for(const s of Object.getOwnPropertyNames(i)){const n=i[s];Noe(n),r[s]={enumerable:!0,configurable:!0,get:Foe(s,n),set(o){const l=this.__accessor__;if(l!==void 0){if(l.mutable)return l.initialized&&n.readOnly?kF("read-only",s):l.lifecycle===Ns.CONSTRUCTED&&n.constructOnly?kF("construct-only",s):void l.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,r)}const kF=(e,t)=>{ae.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var bq,_q;function zoe(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const oa=Symbol("Accessor-Handles"),xI=Symbol("Accessor-Initialized");let Me=class PS{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class o extends n{constructor(...d){super(...d),this.inherited=null,s&&s.apply(this,d)}}v_(o.prototype);for(const l in t){const d=t[l];o.prototype[l]=typeof d=="function"?function(...h){const y=this.inherited;let v;this.inherited=function(...b){if(n.prototype[l])return n.prototype[l].apply(this,b)};try{v=d.apply(this,h)}catch(b){throw this.inherited=y,b}return this.inherited=y,v}:t[l]}for(const l in i){const d=zoe(i[l]);p(d)(o.prototype,l)}return I(r)(o)}static freeze(t){return t instanceof PS?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof PS?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var r;if(this[bq]=null,this[_q]=!1,this.constructor===PS)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new vne(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),t.length>0&&(i.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,i=t.ctorArgs;t.initialize(),i&&(this.set(i),t.ctorArgs=null),t.constructed(),this.initialize(),this[xI]=!0}initialize(){}[RG](){this[oa]=Zt(this[oa])}destroy(){var t;this.destroyed||(Qne(this),this.__accessor__.destroy(),(t=Tne())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[xI]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Ns.DESTROYED||!1}commitProperty(t){ys(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return rE(this,t,i),this}watch(t,i,r){return Xse(ae.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-core-reactiveUtils.html#watch",warnOnce:!0}),soe(this,t,i,r)}addHandles(t,i){if(this.destroyed){const r=Array.isArray(t)?t:[t];for(const s of r)s.remove();return}(this[oa]??(this[oa]=new Gy)).add(t,i)}removeHandles(t){var i;(i=this[oa])==null||i.remove(t)}removeAllHandles(){var t;(t=this[oa])==null||t.removeAll()}removeHandlesReference(t){var i;(i=this[oa])==null||i.removeReference(t)}hasHandles(t){var i;return((i=this[oa])==null?void 0:i.has(t))===!0}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}};bq=oa,_q=xI;let joe=class wq{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new wq;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,q(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i;return((i=this._values.get(t))==null?void 0:i.origin)??He.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var s;return((s=this._values.get(r))==null?void 0:s.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===He.DEFAULTS){const s=this._values.get(t);if((s==null?void 0:s.origin)!=null&&s.origin>r)return}this._values.set(t,new Uoe(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===He.DEFAULTS?t:He.USER}},Uoe=class{constructor(t,i){this.value=t,this.origin=i}};function Sq(e,t,i){t.keys().forEach(s=>{i.set(s,t.get(s),He.DEFAULTS)});const r=e.metadata;Object.keys(r).forEach(s=>{e.internalGet(s)&&i.set(s,e.internalGet(s),He.DEFAULTS)})}function Goe(e,t,i){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&yF(r,i))return!0}else for(const s of r)if(s===t||s.includes(".")&&s.indexOf(t)===0&&yF(s,i))return!0;return!1}function qoe(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Boe(e,t,i,r,s){let n=TI(t[i],s);qoe(n)&&(e[i]=!0);for(const o of Object.getOwnPropertyNames(t))n=TI(t[o],s),Goe(n,i,r)&&(e[o]=!0)}function Hoe(e,t,i,r){const s=i.metadata,n=Roe(s[t],r),o=n==null?void 0:n.default;if(o===void 0)return;const l=typeof o=="function"?o.call(e,t,r):o;l!==void 0&&i.set(t,l)}const Eq={origin:"service"};function Tq(e,t,i=Eq){if(!t||typeof t!="object")return;const r=Us(e),s=r.metadata,n={};for(const o of Object.getOwnPropertyNames(t))Boe(n,s,o,t,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(n)){const l=TI(s[o],i).read,d=l==null?void 0:l.source;let h;h=d&&typeof d=="string"?g_(t,d):t[o],l!=null&&l.reader&&(h=l.reader.call(e,h,t,i)),h!==void 0&&r.set(o,h)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||Hoe(e,o,r,i)}r.setDefaultOrigin("user")}function Woe(e,t,i,r=Eq){var n;const s={...r,messages:[]};i(s),(n=s.messages)==null||n.forEach(o=>{o.type!=="warning"||e.loaded?r!=null&&r.messages&&r.messages.push(o):e.loadWarnings.push(o)})}function Zoe(e,t,i,r,s){var o,l;const n={};return(l=(o=t.write)==null?void 0:o.writer)==null||l.call(e,r,n,i,s),n}function $q(e,t,i,r,s,n){if(!(r!=null&&r.write))return!1;const o=ys(e,i);if(!s&&r.write.overridePolicy){const l=r.write.overridePolicy.call(e,o,i,n??void 0);l!==void 0&&(s=l)}if(s||(s=r.write),!s||s.enabled===!1||s.layerContainerTypes&&(n!=null&&n.layerContainerType)&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const l=new B("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return l&&(n!=null&&n.messages)?n.messages.push(l):l&&!n&&ae.getLogger("esri.core.accessorSupport.write").error(l.name,l.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(i)===He.DEFAULTS)&&Yoe(e,i,n,r,o)||!s.ignoreOrigin&&(n!=null&&n.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(i)<Rc(n.origin))}function Yoe(e,t,i,r,s){const n=r.default;if(n===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(e,t,i??void 0);return ET(o,s)}return!1}return n===s}function Joe(e,t,i,r){const s=Us(e),n=s.metadata,o=gq(n[t],r);return!!o&&$q(e,s,t,o,i,r)}function xq(e,t,i){var n,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return IS(t,e.toJSON(i));const r=Us(e),s=r.metadata;for(const l in s){const d=gq(s[l],i);if(!$q(e,r,l,d,void 0,i))continue;const h=ys(e,l),y=Zoe(e,d,d.write&&typeof d.write.target=="string"?d.write.target:l,h,i);Object.keys(y).length>0&&(t=IS(t,y),(o=(n=i==null?void 0:i.resources)==null?void 0:n.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>IS(t,y,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:l,oldOrigin:fne(r.store.originOf(l)),newOrigin:i.origin}))}return t}const Mq=e=>{let t=class extends e{constructor(...i){super(...i);const r=Us(this),s=r.store,n=new joe;r.store=n,Sq(r,s,n)}read(i,r){Tq(this,i,r)}write(i,r){return xq(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return Xoe.call(this,i,r)}};return t=c([I("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Xoe(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let G0=class extends Mq(Me){};G0=c([I("esri.core.JSONSupport")],G0),function(e){function t(i){return i&&typeof i=="object"&&"toJSON"in i&&typeof i.toJSON=="function"}e.JSONSupportMixin=Mq,e.isSerializable=t}(G0||(G0={}));const se=G0,Qoe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Koe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function DF(e){const t=e==null?void 0:e.match(Qoe);if(!t)return null;const[,i,r,s]=t;if(!i)return null;let n=null,o=null,l=null;const{devext:d,qaext:h,www:y}=Koe;if(r)if(n=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=d);break;case"qa":({customBaseUrl:o,portalHostname:l}=h);break;default:return null}else({customBaseUrl:o,portalHostname:l}=y);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=d);break;case"qaext":({customBaseUrl:o,portalHostname:l}=h);break;case"www":({customBaseUrl:o,portalHostname:l}=y);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:l,urlKey:n}}function eae(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function Aq(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):i.test(e)?e=e.replace(i,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}function Iq(e){const t=atob(e),i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i.buffer}function tae(e){const t=new Uint8Array(e);let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return btoa(i)}const iae=()=>ae.getLogger("esri.core.urlUtils"),Hy=It.request,NF="esri/config: esriConfig.request.proxyUrl is not set.",Cq=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Oq=/^\s*http:/i,rae=/^\s*https:/i,sae=/^\s*file:/i,nae=/:\d+$/,oae=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,aae=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),lae=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let ty=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(aae);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(lae),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const Ew={},uae=new ty(It.applicationUrl);let Jr=uae;const cae=dae();let SP=cae;const EP=()=>Jr,qNe=()=>SP;function dae(){const e=Jr.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${Jr.scheme}://${Jr.host}${Jr.port!=null?`:${Jr.port}`:""}`}${t}`}function ur(e){if(!e)return null;const t={path:null,query:null},i=new ty(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.slice(0,r),t.query=TP(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.slice(0,t.path.length-(i.fragment.length+1)))),t}function TP(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const s=r.indexOf("=");let n,o;s<0?(n=decodeURIComponent(r),o=""):(n=decodeURIComponent(r.slice(0,s)),o=decodeURIComponent(r.slice(s+1)));let l=i[n];typeof l=="string"&&(l=i[n]=[l]),Array.isArray(l)?l.push(o):i[n]=o}return i}function Nb(e,t){return e?Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",n=t==null?void 0:t[i];return n?s+encodeURIComponent(n(r)):Array.isArray(r)?r.map(o=>se.isSerializable(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):se.isSerializable(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function Lq(e=!1){let t,i=Hy.proxyUrl;if(typeof e=="string"){t=gae(e);const r=RT(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw iae().warn(NF),new B("urlUtils:proxy-not-set",NF);return t&&AI()&&(i=IP(i)),ur(i)}function BNe(e,t=!1){const i=RT(e);let r,s;if(i){const n=$P(i.proxyUrl);r=n.path,s=n.query?TP(n.query):null}else if(t){const n=Lq(e);r=n.path,s=n.query}if(r){const n=ur(e);e=r+"?"+n.path;const o=Nb({...s,...n.query});o&&(e=`${e}?${o}`)}return e}const p0={path:"",query:""};function $P(e){const t=e.indexOf("?");return t!==-1?(p0.path=e.slice(0,t),p0.query=e.slice(t+1)):(p0.path=e,p0.query=null),p0}function Rq(e){return e=(e=mE(e=Sae(e=$P(e).path),!0)).toLowerCase()}function hae(e){const t={proxyUrl:e.proxyUrl,urlPrefix:Rq(e.urlPrefix)},i=Hy.proxyRules,r=t.urlPrefix;let s=i.length;for(let n=0;n<i.length;n++){const o=i[n].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;s=n;break}o.indexOf(r)===0&&(s=n+1)}return i.splice(s,0,t),s}function RT(e){const t=Hy.proxyRules,i=Rq(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function pae(e,t){if(!e||!t)return!1;e=fE(e),t=fE(t);const i=DF(e),r=DF(t);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&wy(e,t,!0)}function Pq(e,t){return e=fE(e),t=fE(t),mE(e)===mE(t)}function fE(e){const t=(e=Bo(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function MI(e,t=Hy.interceptors){const i=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r);if(t){for(const r of t)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function wy(e,t,i=!1){if(!e||!t)return!1;const r=CI(e),s=CI(t);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function xP(e){if(typeof e=="string"){if(!yn(e))return!0;e=CI(e)}if(wy(e,Jr))return!0;const t=Hy.trustedServers||[];for(let i=0;i<t.length;i++){const r=fae(t[i]);for(let s=0;s<r.length;s++)if(wy(e,r[s]))return!0}return!1}function fae(e){return Ew[e]||(AP(e)||Ra(e)?Ew[e]=[new ty(Hn(e))]:Ew[e]=[new ty(`http://${e}`),new ty(`https://${e}`)]),Ew[e]}function Hn(e,t=SP,i){return Ra(e)?i!=null&&i.preserveProtocolRelative?e:Jr.scheme==="http"&&Jr.authority===mn(e).slice(2)?`http:${e}`:`https:${e}`:AP(e)?e:Sy(e[0]==="/"?wae(t):t,e)}function MP(e,t=SP,i){if(e==null||!yn(e))return e;const r=Bo(e),s=r.toLowerCase(),n=Bo(t).toLowerCase().replace(/\/+$/,""),o=i?Bo(i).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return e;const l=(v,b,w)=>(w=v.indexOf(b,w))===-1?v.length:w;let d=l(s,"/",s.indexOf("//")+2),h=-1;for(;s.slice(0,d+1)===n.slice(0,d)+"/"&&(h=d+1,d!==s.length);)d=l(s,"/",d+1);if(h===-1||o&&h<o.length)return e;e=r.slice(h);const y=n.slice(h-1).replaceAll(/[^/]+/g,"").length;if(y>0)for(let v=0;v<y;v++)e=`../${e}`;else e=`./${e}`;return e}function Bo(e){return e=$ae(e=Tae(e=Eae(e=Hn(e=e.trim()))))}function Sy(...e){const t=e.filter(Yr);if(!(t!=null&&t.length))return;const i=[];if(yn(t[0])){const s=t[0],n=s.indexOf("//");n!==-1&&(i.push(s.slice(0,n+1)),bae(t[0])&&(i[0]+="/"),t[0]=s.slice(n+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<r.length;s++){const n=r[s];n===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!n&&s===r.length-1||n&&(n!=="."||i.length===0))&&i.push(n)}return i.join("/")}function mn(e,t=!1){if(e==null||PT(e)||Op(e))return null;let i=e.indexOf("://");if(i===-1&&Ra(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=mE(e,!0)),e}function yn(e){return Ra(e)||AP(e)}function PT(e){return e!=null&&e.slice(0,5)==="blob:"}function Op(e){return e!=null&&e.slice(0,5)==="data:"}function mae(e){const t=Ey(e);return t!=null&&t.isBase64?Iq(t.data):null}function HNe(e){return tae(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const yae=/^data:(.*?)(;base64)?,(.*)$/;function Ey(e){const t=e.match(yae);if(!t)return null;const[,i,r,s]=t;return{mediaType:i,isBase64:!!r,data:s}}function kq(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function WNe(e){return(await fetch(e)).blob()}function ZNe(e){const t=mae(e);if(!t)return null;const i=Ey(e);return new Blob([t],{type:i.mediaType})}function Ra(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function AP(e){return e!=null&&Cq.test(e)}function gae(e){return e!=null&&rae.test(e)||Jr.scheme==="https"&&Ra(e)}function vae(e){return e!=null&&Oq.test(e)||Jr.scheme==="http"&&Ra(e)}function bae(e){return e!=null&&sae.test(e)}function IP(e){return Ra(e)?`https:${e}`:e.replace(Oq,"https:")}function _ae(){return Jr.scheme==="http"}function AI(){return Jr.scheme==="https"}function mE(e,t=!1){return Ra(e)?e.slice(2):(e=e.replace(Cq,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function wae(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function CP(e){let t=0;if(yn(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function YNe(e,t){if(!e)return"";const i=ur(e).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return r.replace(s,"")}function Sae(e){return e.endsWith("/")?e:`${e}/`}function Dq(e){return e.replace(/\/+$/,"")}function Eae(e){if(/^https?:\/\//i.test(e)){const t=$P(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Tae(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function $ae(e){const t=Hy.httpsDomains;if(!vae(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),nae.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return _ae()&&r===Jr.authority&&!oae.test(e)||(AI()&&r===Jr.authority||t&&t.some(s=>r===s||r.endsWith(`.${s}`))||AI()&&!RT(e))&&(e=IP(e)),e}function II(e,t,i){if(!(t&&i&&e&&yn(e)))return e;const r=e.indexOf("//"),s=e.indexOf("/",r+2),n=e.indexOf(":",r+2),o=Math.min(s<0?e.length:s,n<0?e.length:n);return e.slice(r+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(o)}`}function CI(e){return typeof e=="string"?new ty(Hn(e)):(e.scheme||(e.scheme=Jr.scheme),e)}function JNe(e){return Mae.test(e)}function Nq(e,t){const i=ur(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function xae(e,t,i){const r=ur(e),s=r.query||{};return s[t]=String(i),`${r.path}?${Nb(s)}`}function kS(e,t){if(!t)return e;const i=ur(e),r=i.query||{};for(const[n,o]of Object.entries(t))o!=null&&(r[n]=o);const s=Nb(r);return s?`${i.path}?${s}`:i.path}function XNe(e){if(e==null)return null;const t=e.match(Fq);return t?t[2]:null}function FF(e){if(e==null)return null;const t=e.match(Fq);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function QNe(e){return typeof e=="string"?Ey(e)??{data:e}:new Promise((t,i)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(Ey(r.result)),r.onerror=s=>i(s)})}const Fq=/([^.]*)\.([^/]*)$/,Mae=/(^data:image\/svg|\.svg$)/i,Vq="20250407",zq="04d2b42da93678ca718b23aaf7e216985f10fa8e";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const Aae="4.32";let Be,OP=Aae;OP="4.32.10";function KNe(e){Be=e}function Iae(e){const t=Be==null?void 0:Be.findCredential(e);return t!=null&&t.token?xae(e,"token",t.token):e}Y("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),Y("host-webworker");function Wc(e,t){var r;const i=(r=t==null?void 0:t.url)==null?void 0:r.path;if(e&&i&&(e=Hn(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=MP(e,t.portalItem.itemUrl);s!=null&&Cae.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return(e=OI(e,t==null?void 0:t.portal))&&kT.test(e)?RP(e):e}function $_(e,t,i=Fb.YES){var s,n;if((e=e&&kT.test(e)?Uq(e):e)==null)return e;!yn(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let r=Hn(e);if(t){const o=((s=t.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((n=t.url)==null?void 0:n.path);if(o){const l=OI(o,t.portal),d=OI(r,t.portal);r=MP(d,l,l),r!=null&&r!==d&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=jq(r,t==null?void 0:t.portal),yn(r)&&(r=Bo(r)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!yn(r)&&!Op(r)&&i===Fb.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function LP(e,t,i){return Wc(e,i)}function yp(e,t,i,r){const s=$_(e,r);s!==void 0&&(t[i]=s)}const kT=/\/items\/([^/]+)\/resources\/(.*)/,Cae=/^\.\/resources\//;function Oae(e){const t=(e==null?void 0:e.match(kT))??null;return(t==null?void 0:t[1])??null}function Lae(e){const t=(e==null?void 0:e.match(kT))??null;if(t==null)return null;const i=t[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:l}=FF(i);return{prefix:null,filename:o,extension:l}}const{path:s,extension:n}=FF(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:n}}function jq(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?II(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function OI(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=EP();return wy(r,`${r.scheme}://${i}`)?II(e,t.portalHostname,i):II(e,i,t.portalHostname)}function RP(e){if(!e)return e||null;let t=e;return t&&Be&&!Be.findCredential(t)&&(t=Aq(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function Uq(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&Be&&!Be.findCredential(t)&&(t=Aq(t)),t}var Fb;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(Fb||(Fb={}));const e5e=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Fb},ensureMainOnlineDomain:jq,fromCDNUrl:Uq,fromJSON:Wc,itemIdFromResourceUrl:Oae,prefixAndFilenameFromResourceUrl:Lae,read:LP,toCDNUrl:RP,toJSON:$_,write:yp},Symbol.toStringTag,{value:"Module"})),Gq={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},qq=Object.values(Gq),Bq=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${qq.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Rae=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${qq.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Pae=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function t5e(e){return Bq.test(e)}function Wy(e){if(e==null)return null;const t=ur(e),i=(t==null?void 0:t.path.match(Bq))||(t==null?void 0:t.path.match(Rae));if(!i)return null;const[,r,s,n,o]=i,l=s.indexOf("/");return{title:PP(l!==-1?s.slice(l+1):s),serverType:Gq[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function kae(e){const t=ur(e).path.match(Pae);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function PP(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function Dae(e,t){const i=[];if(e){const r=Wy(e);r!=null&&r.title&&i.push(r.title)}if(t){const r=PP(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function yE(e){let t=mn(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function Nae(e,t){return e&&Dq(Nq(e,t))}function Fae(e){let{url:t}=e;if(!t)return{url:t};t=Nq(t,e.logger);const i=ur(t),r=Wy(i.path);let s;if(r!=null)r.sublayer!=null&&e.layer.layerId==null&&(s=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const n=kae(i.path);n!=null&&(t=n.serviceUrl,s=n.sublayerId)}return{url:Dq(t),layerId:s}}function Vae(e,t,i,r,s){yp(t,r,"url",s),r.url&&e.layerId!=null&&(r.url=Sy(r.url,i,e.layerId.toString()))}function i5e(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),n=t.includes("/wmsserver");return i&&(r||s||n)}const zae=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function jae(e){const t=mn(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!zae.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function Hq(e,t){return!(!It.apiKey||!jae(e))}function Uae(e,t,i=!1,r){return new Promise((s,n)=>{if(vn(r))return void n(VF());let o=()=>{h(),n(new Error(`Unable to load ${t}`))},l=()=>{const y=e;h(),s(y)},d=()=>{if(!e)return;const y=e;h(),y.src="",n(VF())};const h=()=>{Y("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",l)),o=null,l=null,e=null,r!=null&&r.removeEventListener("abort",d),d=null,i&&URL.revokeObjectURL(t)};r!=null&&r.addEventListener("abort",d),Y("esri-image-decode")?e.decode().then(l,o):(e.addEventListener("error",o),e.addEventListener("load",l))})}function VF(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const Wq="Timeout exceeded";function Gae(){return new Error(Wq)}function r5e(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===Wq}function qae(e){It.request.crossOriginNoCorsDomains||(It.request.crossOriginNoCorsDomains={});const t=It.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[mn(i)??""]=0:(t[mn("http://"+i)??""]=0,t[mn("https://"+i)??""]=0)}function Bae(e){const t=It.request.crossOriginNoCorsDomains;if(t){let i=mn(e);if(i)return i=i.toLowerCase(),!wy(i,EP())&&t[i]<Date.now()-36e5}return!1}async function Hae(e){var s;const t=ur(e);e=t.path,((s=t.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const i=It.request.crossOriginNoCorsDomains,r=mn(e);i&&r&&(i[r.toLowerCase()]=Date.now())}async function Rt(e,t){var w;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=TP(t.query.toString().replaceAll("+"," ")));const i=Op(e),r=PT(e);r||i||(e=Bo(e));const s={url:e,requestOptions:{...t}},n=E=>({data:E,getAllHeaders:Ty,getHeader:Ty,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=MI(e,Bn.internalInterceptors);if(o){const E=await jF(o,s);if(E!=null)return n(E)}let l=MI(e);if(l){const E=await jF(l,s);if(E!=null)return n(E);l.after||l.error||(l=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"&&(Y("host-webworker")||Y("host-node")))throw Ho("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(t.method==="head"){if(t.body)throw Ho("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw Ho("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await Xae(),gE)return gE.execute(e,t);const d=new AbortController,h=Jn(t,()=>d.abort()),y={controller:d,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:l,params:s,redoRequest:!1,useIdentity:Bn.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},v=t.useRequestQueue?ile(y):RI(y),b=await v.finally(()=>h==null?void 0:h.remove());return(w=l==null?void 0:l.after)==null||w.call(l,b),b}let gE;const Bn=It.request,Zq="FormData"in globalThis,Wae=new Set([499,498,403,401]),Zae=new Set(["COM_0056","COM_0057","SB_0008"]),Yae=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Ty=()=>null,vE=Symbol();function Jae(e){const t=mn(e);t&&!Rt._corsServers.includes(t)&&Rt._corsServers.push(t)}function zF(e){const t=mn(e);return!t||t.endsWith(".arcgis.com")||Rt._corsServers.includes(t)||xP(t)}function Ho(e,t,i,r){let s="Error";const n={url:i.url,requestOptions:i.requestOptions,getAllHeaders:Ty,getHeader:Ty,ssl:!1};if(t instanceof B)return t.details?(t.details=q(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=n,t;if(t){const o=r&&(()=>Array.from(r.headers)),l=r&&(y=>r.headers.get(y)),d=r==null?void 0:r.status,h=t.message;h&&(s=h),o&&l&&(n.getAllHeaders=o,n.getHeader=l),n.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||d||0,n.subCode=t.subcode,n.messageCode=t.messageCode,typeof t.details=="string"?n.messages=[t.details]:n.messages=t.details,n.raw=vE in t?t[vE]:t}return rs(t)?Yt():new B(e,s,n)}async function Xae(){Y("host-webworker")&&!gE&&(gE=await D(()=>import("./request-D1rMGUcy.js"),[]))}async function LI(){Be||await D(()=>import("./IdentityManager-BgnJu9vI.js"),[])}async function Qae(e){var l;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,s=i.body;let n=null,o=null;if(Zq&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),e.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Bn.priority,redirect:"follow",signal:r},(n||o)&&(e.fetchOptions.body=n||o),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(l=i.query)!=null&&l.token||n!=null&&n.get("token")),!e.hasToken&&Hq(t)&&(i.query||(i.query={}),i.query.token=It.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!Yq(t)&&!vn(r)){let d;i.authMode==="immediate"?(await LI(),d=await Be.getCredential(t,{signal:r}),e.credential=d):i.authMode==="no-prompt"?(await LI(),d=await Be.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=d):Be&&(d=Be.findCredential(t)),d&&(e.credentialToken=d.token,e.useSSL=!!d.ssl)}}function Yq(e){return Yae.some(t=>t.test(e))}async function Kae(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions??{},s=PT(t)||Op(t),n=i.responseType||"json",o=s?0:i.timeout!=null?i.timeout:Bn.timeout;let l=!1;if(!s){e.useSSL&&(t=IP(t));let b={...i.query};e.credentialToken&&(b.token=e.credentialToken);let w=Nb(b);Y("esri-url-encodes-apostrophe")&&(w=w.replaceAll("'","%27"));const E=t.length+1+w.length;let T;l=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||E>Bn.maxUrlLength;const $=i.useProxy||!!RT(t);if($){const A=Lq(t);T=A.path,!l&&T.length+1+E>Bn.maxUrlLength&&(l=!0),A.query&&(b={...A.query,...b})}if(r.method==="HEAD"&&(l||$)){if(l)throw E>Bn.maxUrlLength?Ho("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Ho("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if($)throw Ho("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(l?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=kS(t,b):(r.body=Nb(b),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=kS(t,b),$&&(e.useProxy=!0,t=`${T}?${t}`),b.token&&Zq&&r.body instanceof FormData&&!eae(t)&&r.body.set("token",b.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!wy(t,EP())){if(xP(t))e.withCredentials=!0;else if(Be){const A=Be.findServerInfo(t);A!=null&&A.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",Bae(t)&&await Hae(l?kS(t,b):t))}let d,h,y=0,v=!1;o>0&&(y=setTimeout(()=>{v=!0,e.controller.abort()},o));try{if(i.responseType==="native-request-init")h=r,h.url=t,i.signal?h.signal=i.signal:delete h.signal;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||l||ele(i.headers)||!s&&!e.useProxy&&Bn.proxyUrl&&!zF(t)){if(Rt._beforeFetch&&await Rt._beforeFetch(t,r),d=await fetch(t,r),Rt._afterFetch&&await Rt._afterFetch(d),e.useProxy||Jae(t),i.responseType==="native")h=d;else if(r.method!=="HEAD")if(d.ok){switch(n){case"array-buffer":h=await d.arrayBuffer();break;case"blob":case"image":h=await d.blob();break;default:h=await d.text()}if(y&&(clearTimeout(y),y=0),n==="json"||n==="xml"||n==="document")if(h)switch(n){case"json":h=JSON.parse(h);break;case"xml":h=UF(h,"application/xml");break;case"document":h=UF(h,"text/html")}else h=null;if(h){if(n==="array-buffer"||n==="blob"){const b=d.headers.get("Content-Type");if(b&&/application\/json|text\/plain/i.test(b)&&h[n==="blob"?"size":"byteLength"]<=750)try{const w=await new Response(h).json();w.error&&(h=w)}catch{}}n==="image"&&h instanceof Blob&&(h=await GF(URL.createObjectURL(h),e,!0))}}else{h=await d.text();try{h=JSON.parse(h)}catch{}}}else h=await GF(t,e)}catch(b){if(b.name==="AbortError")throw v?Gae():Yt("Request canceled");if(!(!d&&b instanceof TypeError&&Bn.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||zF(t))throw b;e.redoRequest=!0,hae({proxyUrl:Bn.proxyUrl,urlPrefix:mn(t)??""})}finally{y&&clearTimeout(y)}return[d,h]}async function jF(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(s){i=Ho("request:interceptor",s,t)}if((r instanceof Error||r instanceof B)&&(i=Ho("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function ele(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function UF(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}Rt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Rt._beforeFetch=void 0,Rt._afterFetch=void 0;const tle=new Map;async function ile(e){const t=sle(e.params.url);if(!t)return RI(e);const{QueueProcessor:i}=await D(()=>import("./QueueProcessor-Bw5QgC_m.js"),[]);return S_(tle,t.origin,()=>{const s=t.isHosted?Y("request-queue-concurrency-hosted"):Y("request-queue-concurrency-non-hosted");return new i({concurrency:s,process:n=>{if(vn(n.params.requestOptions))throw Ho("",Yt("Request canceled"),n.params);return RI(n)}})}).push(e)}async function RI(e){var n,o;let t,i;await Qae(e);try{do[t,i]=await Kae(e);while(!await rle(e,t,i))}catch(l){const d=Ho("request:server",l,e.params,t);throw d.details.ssl=e.useSSL,(n=e.interceptor)!=null&&n.error&&e.interceptor.error(d),d}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((o=i.user)!=null&&o.username)&&!xP(r)){const l=mn(r,!0);l&&Bn.trustedServers.push(l)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&qae(i.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&Be){const l=Be.findServerInfo(s.server);let d=l==null?void 0:l.owningSystemUrl;if(d){d=d.replace(/\/?$/,"/sharing");const h=Be.findCredential(d,s.userId);h&&Be._getIdenticalSvcIdx(d,h)===-1&&h.resources.unshift(d)}}return{data:i,getAllHeaders:t?()=>Array.from(t.headers):Ty,getHeader:t?l=>t.headers.get(l):Ty,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function rle(e,t,i){var h;if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,n;if(i&&(i.error&&typeof i.error=="object"?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[vE]=i,s.details=i.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[vE]=i,s;let o,l=null;s&&(n=Number(s.code),l=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o==null?void 0:o.toUpperCase());const d=r.authMode;if(n===403&&(l===4||(h=s.message)!=null&&h.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(d!=="no-prompt"||n===498)&&n!==void 0&&Wae.has(n)&&!Yq(e.params.url)&&(n!==403||(!o||!Zae.has(o))&&(l==null||l===2&&e.credentialToken))){await LI();try{const y=await Be.getCredential(e.params.url,{error:Ho("request:server",s,e.params),prompt:d!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=y,e.credentialToken=y.token,e.useSSL=e.useSSL||y.ssl,!1}catch(y){if(d==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=y}}if(s)throw s;return!0}function GF(e,t,i=!1){const r=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Bn.priority,s.src=e,Uae(s,e,i,r)}function sle(e){let t,i;return typeof e=="string"?(t=mn(e,!0),i=yE(e)):(t=e.origin,i=yE(e.toString())),t==null?null:{origin:t,isHosted:i}}let Kn=class Jq{constructor(){this._emitter=new Jq.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,n){var h;let o=(h=this._listenersMap)==null?void 0:h.get(s);if(!o)return!1;const l=this._target||this;let d=!1;for(const y of o.slice()){const v="deref"in y?y.deref():y;v?v==null||v.call(l,n):d=!0}return d&&(o=o.filter(y=>!("deref"in y)||y.deref()!=null),this._listenersMap.set(s,o)),o.length>0}on(s,n){if(Array.isArray(s)){const l=s.map(d=>this.on(d,n));return y_(l)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),bt(()=>{var h;const l=(h=this._listenersMap)==null?void 0:h.get(s),d=(l==null?void 0:l.indexOf(n))??-1;d>=0&&l.splice(d,1)})}once(s,n){const o=this.on(s,l=>{o.remove();const d="deref"in n?n.deref():n;d==null||d.call(null,l)});return o}hasEventListener(s){var o;const n=(o=this._listenersMap)==null?void 0:o.get(s);return n!=null&&n.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=c([I("esri.core.Evented")],s),s};let i=class extends Me{constructor(){super(...arguments),this._emitter=new Kn.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=c([I("esri.core.Evented.EventedAccessor")],i),e.EventedAccessor=i})(Kn);var Mt;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Mt||(Mt={}));function kP(e){return(t,i)=>{t[i]=e}}let x_=class extends VG{notify(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var Bl;let nle=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},ole=class{constructor(t,i,r,s,n){this.target=t,this.added=i,this.removed=r,this.start=s,this.deleteCount=n}};const Cn=new Cp(nle,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function qF(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function g3(e){return e?e instanceof zl?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function v3(e){if(e!=null&&e.length)return e[0]}function ale(e,t,i,r){const s=Math.min(e.length-i,t.length-r);let n=0;for(;n<s&&e[i+n]===t[r+n];)n++;return n}function Xq(e,t,i,r){t&&t.forEach((s,n,o)=>{e.push(s),Xq(e,i.call(r,s,n,o),i,r)})}const Du=new Set,Nu=new Set,Fu=new Set,b3=new Map;let lle=0,zl=Bl=class extends Kn.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Bl}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new x_,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:lle++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Bl?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Fe(this._observable),this._items}set items(e){this._emitBeforeChanges(Mt.ADD)||(this._splice(0,this.length,g3(e)),this._emitAfterChanges(Mt.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return bt();if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),bt(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return this._emitter.on(e,t)}once(e,t){const i="deref"in t?()=>t.deref():()=>t,r=this.on(e,s=>{var n;(n=i())==null||n.call(null,s),r.remove()});return r}add(e,t){if(Fe(this._observable),this._emitBeforeChanges(Mt.ADD))return this;const i=this.getNextIndex(t??null);return this._splice(i,0,[e]),this._emitAfterChanges(Mt.ADD),this}addMany(e,t=this._items.length){if(Fe(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(Mt.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,g3(e)),this._emitAfterChanges(Mt.ADD),this}at(e){if(Fe(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Fe(this._observable),!this.length||this._emitBeforeChanges(Mt.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(Mt.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Fe(this._observable),this._createNewInstance({items:this._items.map(q)})}concat(...e){Fe(this._observable);const t=e.map(g3);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Fe(this._observable),!this.length||this._emitBeforeChanges(Mt.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let s=0;s<r;s++)e.call(t,i[s],s,i);this._emitAfterChanges(Mt.REMOVE)}destroyAll(){this.drain(qF)}destroyMany(e){const t=this.removeMany(e);return t.forEach(qF),t}every(e,t){return Fe(this._observable),this._items.every(e,t)}filter(e,t){Fe(this._observable);const i=arguments.length===2?this._items.filter(e,t):this._items.filter(e);return this._createNewInstance({items:i})}find(e,t){return Fe(this._observable),this._items.find(e,t)}findIndex(e,t){return Fe(this._observable),this._items.findIndex(e,t)}flatten(e,t){Fe(this._observable);const i=[];return Xq(i,this,e,t),new Bl(i)}forEach(e,t){return Fe(this._observable),this._items.forEach(e,t)}getItemAt(e){return Fe(this._observable),this._items[e]}getNextIndex(e){Fe(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Fe(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Fe(this._observable),this._items.indexOf(e,t)}join(e=","){return Fe(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Fe(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Fe(this._observable);const i=this._items.map(e,t);return new Bl({items:i})}reorder(e,t=this.length-1){Fe(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(Mt.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(Mt.MOVE)}return e}}pop(){if(Fe(this._observable),!this.length||this._emitBeforeChanges(Mt.REMOVE))return;const e=v3(this._splice(this.length-1,1));return this._emitAfterChanges(Mt.REMOVE),e}push(...e){return Fe(this._observable),this._emitBeforeChanges(Mt.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Mt.ADD)),this.length}reduce(e,t){Fe(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){Fe(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return Fe(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Fe(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Mt.REMOVE))return;const t=v3(this._splice(e,1));return this._emitAfterChanges(Mt.REMOVE),t}removeMany(e){if(Fe(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(Mt.REMOVE))return[];const t=e instanceof Bl?e.toArray():e,i=this._items,r=[],s=t.length;for(let n=0;n<s;n++){const o=t[n],l=i.indexOf(o);if(l>-1){const d=1+ale(t,i,n+1,l+1),h=this._splice(l,d);h&&h.length>0&&r.push.apply(r,h),n+=d-1}}return this._emitAfterChanges(Mt.REMOVE),r}reverse(){if(Fe(this._observable),this._emitBeforeChanges(Mt.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Mt.MOVE),this}shift(){if(Fe(this._observable),!this.length||this._emitBeforeChanges(Mt.REMOVE))return;const e=v3(this._splice(0,1));return this._emitAfterChanges(Mt.REMOVE),e}slice(e=0,t=this.length){return Fe(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Fe(this._observable),this._items.some(e,t)}sort(e){if(Fe(this._observable),!this.length||this._emitBeforeChanges(Mt.MOVE)||!this._requiresSort(e))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Mt.MOVE),this}_requiresSort(e=(t,i)=>t===i?0:t<i?-1:1){const t=this.length-1;for(let i=0;i<t;i++)if(e(this.items[i],this.items[i+1])>0)return!0;return!1}splice(e,t,...i){Fe(this._observable);const r=(t?Mt.REMOVE:0)|(i.length?Mt.ADD:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(e,t,i)||[];return this._emitAfterChanges(r),s}toArray(){return Fe(this._observable),this._items.slice()}toJSON(){return Fe(this._observable),this.toArray()}toLocaleString(){return Fe(this._observable),this._items.toLocaleString()}toString(){return Fe(this._observable),this._items.toString()}unshift(...e){return Fe(this._observable),!e.length||this._emitBeforeChanges(Mt.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Mt.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=w_(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=r.splice(e,t),this.hasEventListener("before-remove")){const l=Cn.acquire();l.target=this,l.cancellable=!0;for(let d=0,h=o.length;d<h;d++)n=o[d],l.reset(n),this.emit("before-remove",l),l.defaultPrevented&&(o.splice(d,1),r.splice(e,0,n),e+=1,d-=1,h-=1);Cn.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=Cn.acquire();l.target=this,l.cancellable=!1;const d=o.length;for(let h=0;h<d;h++)l.reset(o[h]),this.emit("after-remove",l);Cn.release(l)}}if(i!=null&&i.length){if(s){const y=[];for(const v of i){const b=s.ensureType(v);b==null&&v!=null||y.push(b)}i=y}const l=this.hasEventListener("before-add"),d=this.hasEventListener("after-add"),h=e===this.length;if(l||d){const y=Cn.acquire();y.target=this,y.cancellable=!0;const v=Cn.acquire();v.target=this,v.cancellable=!1;for(const b of i)l?(y.reset(b),this.emit("before-add",y),y.defaultPrevented||(h?r.push(b):r.splice(e++,0,b),this._set("length",r.length),d&&(v.reset(b),this.emit("after-add",v)))):(h?r.push(b):r.splice(e++,0,b),this._set("length",r.length),v.reset(b),this.emit("after-add",v));Cn.release(v),Cn.release(y)}else{if(h)for(const y of i)r.push(y);else r.splice(e,0,...i);this._set("length",r.length)}}if((i!=null&&i.length||o!=null&&o.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const l=new ole(this,i,o,e,t);this.emit("after-splice",l)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Cn.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Cn.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Cn.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Cn.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;Du.clear(),Nu.clear(),Fu.clear();for(const{added:d,removed:h}of i){if(d)if(Fu.size===0&&Nu.size===0)for(const y of d)Du.add(y);else for(const y of d)Nu.has(y)?(Fu.add(y),Nu.delete(y)):Fu.has(y)||Du.add(y);if(h)if(Fu.size===0&&Du.size===0)for(const y of h)Nu.add(y);else for(const y of h)Du.has(y)?Du.delete(y):(Fu.delete(y),Nu.add(y))}const r=fs.acquire();Du.forEach(d=>{r.push(d)});const s=fs.acquire();Nu.forEach(d=>{s.push(d)});const n=this._items,o=t.items,l=fs.acquire();if(Fu.forEach(d=>{o.indexOf(d)!==n.indexOf(d)&&l.push(d)}),t.listeners&&(r.length||s.length||l.length)){const d={target:this,added:r,removed:s,moved:l},h=t.listeners.length;for(let y=0;y<h;y++){const v=t.listeners[y];v.removed||v.callback.call(this,d)}}fs.release(r),fs.release(s),fs.release(l)}Du.clear(),Nu.clear(),Fu.clear()}};zl.ofType=e=>{if(!e)return Bl;if(b3.has(e))return b3.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const s=e.typeMap[r].prototype.declaredClass;t?t+=` | ${s}`:t=s}let i=class extends Bl{};return c([kP({Type:e,ensureType:typeof e=="function"?Zi(e):Yo(e)})],i.prototype,"itemType",void 0),i=c([I(`esri.core.Collection<${t}>`)],i),b3.set(e,i),i},c([p()],zl.prototype,"_updating",void 0),c([p()],zl.prototype,"length",void 0),c([p()],zl.prototype,"items",null),c([p({readOnly:!0})],zl.prototype,"updating",null),zl=Bl=c([I("esri.core.Collection")],zl);const _e=zl;function tu(e,t,i=_e){return t||(t=new i),t===e||(t.removeAll(),ule(e)?t.addMany(e):e&&t.add(e)),t}function Qq(e){return e}function ule(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var Sc;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Sc||(Sc={}));let cle=class{constructor(){this._resolver=bn(),this._status=Sc.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Sc.RESOLVED,this._cleanUp()},()=>{this._status=Sc.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Sc.RESOLVED}isRejected(){return this._status===Sc.REJECTED}isFulfilled(){return this._status!==Sc.PENDING}abort(){this._resolver.reject(Yt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=bn(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==r||rs(s)||this._resolver.reject(s)}),t.resolve()}};const Kq=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new cle,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=c([I("esri.core.Promise")],t),t};let q0=class extends Kq(Me){};q0=c([I("esri.core.Promise")],q0),function(e){e.EsriPromiseMixin=Kq}(q0||(q0={}));const M_=q0,dle="not-loaded",hle="loading",ple="failed",BF="loaded",eB=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise((l,d)=>{const h=fP(n,d);this.destroyed&&d(new B("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,d).finally(()=>{h&&h.remove()})});if(this.loadStatus===dle){this._set("loadStatus",hle);const l=this._loadController=new AbortController;s({signal:l.signal})}return r(),o}})),this.when(()=>{this._set("loadStatus",BF),this._loadController=null},r=>{this._set("loadStatus",ple),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController&&(this._loadController=by(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===BF}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new B("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return c([p({readOnly:!0})],t.prototype,"loaded",null),c([p({readOnly:!0})],t.prototype,"loadError",void 0),c([p({clonable:!1})],t.prototype,"loadStatus",void 0),c([p({type:[Qn],readOnly:!0})],t.prototype,"loadWarnings",null),t=c([I("esri.core.Loadable")],t),t};let B0=class extends eB(M_){};B0=c([I("esri.core.Loadable")],B0),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=eB,e.isLoadable=t}(B0||(B0={}));const iu=B0;function fle(e,t,i){return mP(e.map((r,s)=>t.apply(i,[r,s])))}async function mle(e,t,i){return(await mP(e.map((r,s)=>t.apply(i,[r,s])))).map(r=>r.value)}function DP(e){return{ok:!0,value:e}}function NP(e){return{ok:!1,error:e}}function yle(e){return e!=null&&e.ok===!0?e.value:null}function gle(e){return e!=null&&e.ok===!1?e.error:null}async function DT(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return DP(await e)}catch(t){return NP(t)}}async function vle(e){try{return DP(await e)}catch(t){return Ia(t),NP(t)}}function A_(e,t){return new Zu(e,t)}let Zu=class extends Me{get value(){return yle(this._result)}get error(){return gle(this._result)}get finished(){return this._result!=null}constructor(t,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=by(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=t(r),this.promise.then(s=>{this._result=DP(s),this._cleanup()},s=>{this._result=NP(s),this._cleanup()}),this._abortHandle=Jn(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=ui(this._abortHandle),this._abortController=null}};c([p()],Zu.prototype,"value",null),c([p()],Zu.prototype,"error",null),c([p()],Zu.prototype,"finished",null),c([p()],Zu.prototype,"promise",void 0),c([p()],Zu.prototype,"_result",void 0),Zu=c([I("esri.core.asyncUtils.ReactiveTask")],Zu);async function tB(e,t){return await e.load(),ble(e,t)}async function ble(e,t){const i=[],r=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?r(...o):_e.isCollection(o)?o.forEach(l=>r(l)):iu.isLoadable(o)&&i.push(o))};t(r);let s=null;if(await mle(i,async n=>{const o=await DT(_le(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return e}function _le(e){return"loadAll"in e&&typeof e.loadAll=="function"}function be(e,t,i){let r,s;return t===void 0?(s=e,r=[void 0]):typeof t!="string"?(s=e,r=[void 0],i=t):(s=t,r=Array.isArray(e)?e:[e]),(n,o)=>{const l=n.constructor.prototype;for(const d of r){const h=cq(n,d,s);h.write&&typeof h.write=="object"||(h.write={}),i&&(h.write.target=i),h.write.writer=l[o]}}}let ot=class{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=wle(t),this.apiValues=HF(this._apiToJSON),this.jsonValues=HF(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,n)=>{const o=this.toJSON(r);o!==void 0&&$r(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function wle(e){const t={};for(const i in e)t[e[i]]=i;return t}function HF(e){const t=[];for(const i in e)t.push(i);return t.sort(),t}function xr(){return function(e,t){return new ot(e,{ignoreUnknown:!0,...t})}}let FP=class{constructor(t,i,r,s,n,o){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=s,this.scaleHeight=n;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const wi=new FP(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Oa=new FP(3396190,1/169.8944472236118,23e4,6e4,.111),Zc=new FP(1737400,0,0,0,0);function oi(e){if(!It.assetsPath)throw ae.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new B("assets:path-not-set","config.assetsPath is not set");return Sy(It.assetsPath,e)}let _3,U=null;function VP(){return!!U}function Sle(){return!!Y("esri-wasm")}function iB(){return _3||(_3=D(()=>import("./pe-wasm-Co3DzcyP.js"),__vite__mapDeps([0,1])).then(e=>e.p).then(({default:e})=>e({locateFile:t=>oi(`esri/geometry/support/${t}`)})).then(e=>{nB(e)}),_3)}var PI,ai;(function(e){function t(n,o,l){U.ensureCache.prepare();const d=Bh(l),h=l===d,y=U.ensureFloat64(d),v=U._pe_geog_to_proj(U.getPointer(n),o,y);return v&&Ic(l,o,y,h),v}function i(n,o,l,d){switch(d){case ai.PE_TRANSFORM_P_TO_G:return r(n,o,l);case ai.PE_TRANSFORM_G_TO_P:return t(n,o,l)}return 0}function r(n,o,l){return s(n,o,l,0)}function s(n,o,l,d){U.ensureCache.prepare();const h=Bh(l),y=l===h,v=U.ensureFloat64(h),b=U._pe_proj_to_geog_center(U.getPointer(n),o,v,d);return b&&Ic(l,o,v,y),b}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=s})(PI||(PI={})),function(e){function t(){e.PE_BUFFER_MAX=U.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=U.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=U.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=U.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=U.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=U.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=U.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=U.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=U.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=U.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=U.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=U.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=U.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=U.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=U.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=U.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=U.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=U.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=U.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=U.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=U.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=U.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=U.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=U.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=U.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=U.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=U.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=U.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=U.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=U.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=U.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=U.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(ai||(ai={}));let rB=null;var kI;(function(e){const t={},i={},r=w=>{const E=w.getType();switch(E){case ai.PE_TYPE_GEOGCS:w=U.castObject(w,U.PeGeogcs);break;case ai.PE_TYPE_PROJCS:w=U.castObject(w,U.PeProjcs);break;case ai.PE_TYPE_GEOGTRAN:w=U.castObject(w,U.PeGeogtran);break;default:E&ai.PE_TYPE_UNIT&&(w=U.castObject(w,U.PeUnit))}return w};function s(){U.PeFactory.prototype.initialize(null)}function n(w){return o(ai.PE_TYPE_COORDSYS,w)}function o(w,E){let T=null,$=t[w];if($||($={},t[w]=$),$.hasOwnProperty(String(E))&&(T=$[E],U.compare(T,U.NULL)&&(T=null)),!T){const A=U.PeFactory.prototype.factoryByType(w,E);U.compare(A,U.NULL)||(T=r(A),$[E]=T)}return T}function l(w,E){let T=null,$=i[w];if($||($={},i[w]=$),$.hasOwnProperty(E)&&(T=$[E],U.compare(T,U.NULL)&&(T=null)),!T){const A=U.PeFactory.prototype.fromString(w,E);U.compare(A,U.NULL)||(T=r(A),$[E]=T)}return T}function d(w){return o(ai.PE_TYPE_GEOGCS,w)}function h(w){return o(ai.PE_TYPE_GEOGTRAN,w)}function y(w){return U.PeFactory.prototype.getCode(w)}function v(w){return o(ai.PE_TYPE_PROJCS,w)}function b(w){return o(ai.PE_TYPE_UNIT,w)}e.initialize=s,e.coordsys=n,e.factoryByType=o,e.fromString=l,e.geogcs=d,e.geogtran=h,e.getCode=y,e.projcs=v,e.unit=b})(kI||(kI={}));let sB=null;var bE,DI,NI,FI,VI,zI,_E,jI,wE,SE,UI;function nB(e){function t(n,o,l){n[o]=l(n[o])}U=e,ai.init(),bE.init(),_E.init(),wE.init(),SE.init(),rB=class extends U.PeDouble{constructor(n=NaN){super(n)}destroy(){U.destroy(this)}[Symbol.dispose](){this.destroy()}},sB=class extends U.PeGCSExtent{destroy(){U.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[U.PeAngunit,U.PeDatum,U.PeGeogcs,U.PeGeogtran,U.PeObject,U.PeParameter,U.PePrimem,U.PeProjcs,U.PeSpheroid,U.PeUnit];for(const n of i)t(n.prototype,"getName",o=>function(){return o.call(this,new Array(ai.PE_NAME_MAX))});for(const n of[U.PeGeogtran,U.PeProjcs])t(n.prototype,"getParameters",o=>function(){const l=new Array(ai.PE_PARM_MAX);let d=o.call(this);for(let h=0;h<l.length;h++){const y=U.getValue(d,"*");l[h]=y?U.wrapPointer(y,U.PeParameter):null,d+=Int32Array.BYTES_PER_ELEMENT}return l});t(U.PeHorizon.prototype,"getCoord",n=>function(o=!1){const l=this.getSize();if(!l)return null;const d=[];return Ic(d,l,n.call(this),o),d}),t(U.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=U._pe_getPeGTlistExtendedGTsSize();return function(){let l=null;const d=n.call(this);if(!U.compare(d,U.NULL)){l=[d];const h=this.getSteps();if(h>1){const y=U.getPointer(d);for(let v=1;v<h;v++)l.push(U.wrapPointer(y+o*v,U.PeGTlistExtendedGTs))}}return l}});const r=U._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let l=null;const d=n.call(this);if(!U.compare(d,U.NULL)){l=[d];const h=d.getNump();if(h>1){const y=U.getPointer(d);for(let v=1;v<h;v++)l.push(U.wrapPointer(y+r*v,U.PeHorizon))}}return o.set(n,l),l};t(U.PeProjcs.prototype,"horizonGcsGenerate",s),t(U.PeProjcs.prototype,"horizonPcsGenerate",s),U.PeObject.prototype.toString=function(n=ai.PE_STR_OPTS_NONE){U.ensureCache.prepare();const o=U.getPointer(this),l=U.ensureInt8(new Array(ai.PE_BUFFER_MAX));return U.UTF8ToString(U._pe_object_to_string_ext(o,n,l))},U.PeGeogcs.prototype.destroy=function(){this.Delete(),ko(this),this.ptr=0},U.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},U.PeProjcs.prototype.destroy=function(){this.Delete(),ko(this),this.ptr=0},U.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function ko(e){if(!e)return;const t=U.getClass(e);if(!t)return;const i=U.getCache(t);if(!i)return;const r=U.getPointer(e);r&&delete i[r]}function Tw(e,t){const i=[],r=new Array(t);for(let s=0;s<e;s++)i.push(U.ensureInt8(r));return i}function Bh(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function Ic(e,t,i,r=!1){if(r)for(let s=0;s<2*t;s++)e[s]=U.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let n=0;n<t;n++)s&&(e[n]=new Array(2)),e[n][0]=U.getValue(i,"double"),e[n][1]=U.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=U.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=U._pe_getPeGTlistExtendedEntrySize()}function r(s,n,o,l,d,h){let y=null;const v=new U.PeInteger(h);try{const b=U.PeGTlistExtended.prototype.getGTlist(s,n,o,l,d,v);if((h=v.val)&&(y=[b],h>1)){const w=U.getPointer(b);for(let E=1;E<h;E++)y.push(U.wrapPointer(w+t*E,U.PeGTlistExtendedEntry))}}finally{U.destroy(v)}return y}e.init=i,e.getGTlist=r})(bE||(bE={})),function(e){function t(i){if(i!=null&&i.length){for(const r of i)ko(r),r.getEntries().forEach(s=>{ko(s);const n=s.getGeogtran();ko(n),n.getParameters().forEach(ko),[n.getGeogcs1(),n.getGeogcs2()].forEach(o=>{ko(o);const l=o.getDatum();ko(l),ko(l.getSpheroid()),ko(o.getPrimem()),ko(o.getUnit())})});U.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(DI||(DI={})),function(e){function t(i,r,s,n,o){U.ensureCache.prepare();const l=Bh(s),d=s===l,h=U.ensureFloat64(l);let y=0;n&&(y=U.ensureFloat64(n));const v=U._pe_geog_to_geog(U.getPointer(i),r,h,y,o);return v&&Ic(s,r,h,d),v}e.geogToGeog=t}(NI||(NI={})),function(e){function t(n,o,l,d,h,y,v,b){U.PeLineType.prototype.geodesic_coordinate(n,o,l,d,h,y,v,b)}function i(n,o,l,d,h,y,v,b,w){U.PeLineType.prototype.geodetic_coordinate(n,o,l,d,h,y,v,b,w)}function r(n,o,l,d,h,y,v,b,w,E){U.PeLineType.prototype.geodetic_distance(n,o,l,d,h,y,v,b,w,E)}function s(n,o,l,d,h,y,v,b,w){U.PeLineType.prototype.great_elliptic_distance(n,o,l,d,h,y,v,b,w)}e.geodesicCoordinate=t,e.geodeticCoordinate=i,e.geodeticDistance=r,e.greatEllipticDistance=s}(FI||(FI={})),function(e){function t(o,l){return U.PeMath.prototype.phi_to_eta(o,l)}function i(o,l){return U.PeMath.prototype.eta_to_phi(o,l)}function r(o,l){return U.PeMath.prototype.phi_to_phig(o,l)}function s(o,l,d){return U.PeMath.prototype.q(o,l,d)}function n(o,l){return U.PeMath.prototype.q90(o,l)}e.phiToEta=t,e.etaToPhi=i,e.phiToPhig=r,e.q=s,e.q90=n}(VI||(VI={})),function(e){const t=(h,y,v,b,w,E)=>{let T,$;switch(U.ensureCache.prepare(),h){case"dd":T=U._pe_geog_to_dd,$=ai.PE_DD_MAX;break;case"ddm":T=U._pe_geog_to_ddm,$=ai.PE_DDM_MAX;break;case"dms":T=U._pe_geog_to_dms,$=ai.PE_DMS_MAX}let A=0;y&&(A=U.getPointer(y));const O=Bh(b),L=U.ensureFloat64(O),R=Tw(v,$),N=T(A,v,L,w,U.ensureInt32(R));if(N)for(let j=0;j<v;j++)E[j]=U.UTF8ToString(R[j]);return N},i=(h,y,v,b,w)=>{let E;switch(U.ensureCache.prepare(),h){case"dd":E=U._pe_dd_to_geog;break;case"ddm":E=U._pe_ddm_to_geog;break;case"dms":E=U._pe_dms_to_geog}let T=0;y&&(T=U.getPointer(y));const $=b.map(R=>U.ensureString(R)),A=U.ensureInt32($),O=U.ensureFloat64(new Array(2*v)),L=E(T,v,A,O);return L&&Ic(w,v,O),L};function r(h,y,v,b,w){return t("dms",h,y,v,b,w)}function s(h,y,v,b){return i("dms",h,y,v,b)}function n(h,y,v,b,w){return t("ddm",h,y,v,b,w)}function o(h,y,v,b){return i("ddm",h,y,v,b)}function l(h,y,v,b,w){return t("dd",h,y,v,b,w)}function d(h,y,v,b){return i("dd",h,y,v,b)}e.geogToDms=r,e.dmsToGeog=s,e.geogToDdm=n,e.ddmToGeog=o,e.geogToDd=l,e.ddToGeog=d}(zI||(zI={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=U.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=U.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=U.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=U.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=U.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,n,o,l,d,h,y){U.ensureCache.prepare();let v=0;s&&(v=U.getPointer(s));const b=Bh(o),w=U.ensureFloat64(b),E=Tw(n,ai.PE_MGRS_MAX),T=U.ensureInt32(E),$=U._pe_geog_to_mgrs_extended(v,n,w,l,d,h,T);if($)for(let A=0;A<n;A++)y[A]=U.UTF8ToString(E[A]);return $}function r(s,n,o,l,d){U.ensureCache.prepare();let h=0;s&&(h=U.getPointer(s));const y=o.map(E=>U.ensureString(E)),v=U.ensureInt32(y),b=U.ensureFloat64(new Array(2*n)),w=U._pe_mgrs_to_geog_extended(h,n,v,l,b);return w&&Ic(d,n,b),w}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(_E||(_E={})),function(e){function t(r,s,n,o,l,d,h){U.ensureCache.prepare();let y=0;r&&(y=U.getPointer(r));const v=Bh(n),b=U.ensureFloat64(v),w=Tw(s,ai.PE_MGRS_MAX),E=U.ensureInt32(w),T=U._pe_geog_to_usng(y,s,b,o,l,d,E);if(T)for(let $=0;$<s;$++)h[$]=U.UTF8ToString(w[$]);return T}function i(r,s,n,o){U.ensureCache.prepare();let l=0;r&&(l=U.getPointer(r));const d=n.map(b=>U.ensureString(b)),h=U.ensureInt32(d),y=U.ensureFloat64(new Array(2*s)),v=U._pe_usng_to_geog(l,s,h,y);return v&&Ic(o,s,y),v}e.geogToUsng=t,e.usngToGeog=i}(jI||(jI={})),function(e){function t(){e.PE_UTM_OPTS_NONE=U.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=U.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=U.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,n,o,l,d){U.ensureCache.prepare();let h=0;s&&(h=U.getPointer(s));const y=Bh(o),v=U.ensureFloat64(y),b=Tw(n,ai.PE_UTM_MAX),w=U.ensureInt32(b),E=U._pe_geog_to_utm(h,n,v,l,w);if(E)for(let T=0;T<n;T++)d[T]=U.UTF8ToString(b[T]);return E}function r(s,n,o,l,d){U.ensureCache.prepare();let h=0;s&&(h=U.getPointer(s));const y=o.map(E=>U.ensureString(E)),v=U.ensureInt32(y),b=U.ensureFloat64(new Array(2*n)),w=U._pe_utm_to_geog(h,n,v,l,b);return w&&Ic(d,n,b),w}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(wE||(wE={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=U.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=U.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=U.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=U.PePCSInfo.prototype.PE_POLE_POINT}function r(s,n=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,l=null;return t.has(s)&&(l=t.get(s),l[n]&&(o=l[n])),o||(o=U.PePCSInfo.prototype.generate(s,n),l||(l=[],t.set(s,l)),l[n]=o),o}e.init=i,e.generate=r}(SE||(SE={})),function(e){function t(){return U.PeVersion.prototype.version_string()}e.versionString=t}(UI||(UI={}));const Ele=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return PI},get PeDefs(){return ai},get PeDouble(){return rB},get PeFactory(){return kI},get PeGCSExtent(){return sB},get PeGTTransformations(){return NI},get PeGTlistExtended(){return bE},get PeGTlistExtendedEntry(){return DI},get PeLineType(){return FI},get PeMath(){return VI},get PeNotationDms(){return zI},get PeNotationMgrs(){return _E},get PeNotationUsng(){return jI},get PeNotationUtm(){return wE},get PePCSInfo(){return SE},get PeVersion(){return UI},_init:nB,get _pe(){return U},isLoaded:VP,isSupported:Sle,load:iB},Symbol.toStringTag,{value:"Module"}));var gp;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(gp||(gp={}));let m;const M={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10665:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(m=2e3;m<=2045;m++)M[m]=0;for(m=2056;m<=2065;m++)M[m]=0;for(m=2067;m<=2135;m++)M[m]=0;for(m=2137;m<=2154;m++)M[m]=0;for(m=2161;m<=2170;m++)M[m]=0;for(m=2172;m<=2193;m++)M[m]=0;for(m=2195;m<=2198;m++)M[m]=0;for(m=2200;m<=2203;m++)M[m]=0;for(m=2205;m<=2217;m++)M[m]=0;for(m=2222;m<=2224;m++)M[m]=1;for(m=2225;m<=2250;m++)M[m]=2;for(m=2251;m<=2253;m++)M[m]=1;for(m=2257;m<=2264;m++)M[m]=2;for(m=2274;m<=2279;m++)M[m]=2;for(m=2280;m<=2282;m++)M[m]=1;for(m=2283;m<=2289;m++)M[m]=2;for(m=2290;m<=2292;m++)M[m]=0;for(m=2308;m<=2313;m++)M[m]=0;for(m=2315;m<=2491;m++)M[m]=0;for(m=2494;m<=2866;m++)M[m]=0;for(m=2867;m<=2869;m++)M[m]=1;for(m=2870;m<=2888;m++)M[m]=2;for(m=2891;m<=2895;m++)M[m]=2;for(m=2896;m<=2898;m++)M[m]=1;for(m=2902;m<=2908;m++)M[m]=2;for(m=2915;m<=2920;m++)M[m]=2;for(m=2921;m<=2923;m++)M[m]=1;for(m=2924;m<=2930;m++)M[m]=2;for(m=2931;m<=2962;m++)M[m]=0;for(m=2964;m<=2968;m++)M[m]=2;for(m=2969;m<=2973;m++)M[m]=0;for(m=2975;m<=2991;m++)M[m]=0;for(m=2995;m<=3051;m++)M[m]=0;for(m=3054;m<=3079;m++)M[m]=0;for(m=3081;m<=3088;m++)M[m]=0;for(m=3092;m<=3101;m++)M[m]=0;for(m=3106;m<=3138;m++)M[m]=0;for(m=3146;m<=3151;m++)M[m]=0;for(m=3153;m<=3166;m++)M[m]=0;for(m=3168;m<=3172;m++)M[m]=0;for(m=3174;m<=3203;m++)M[m]=0;for(m=3294;m<=3358;m++)M[m]=0;for(m=3367;m<=3403;m++)M[m]=0;for(m=3408;m<=3416;m++)M[m]=0;for(m=3417;m<=3438;m++)M[m]=2;for(m=3441;m<=3446;m++)M[m]=2;for(m=3447;m<=3450;m++)M[m]=0;for(m=3451;m<=3459;m++)M[m]=2;for(m=3460;m<=3478;m++)M[m]=0;for(m=3554;m<=3559;m++)M[m]=0;for(m=3560;m<=3570;m++)M[m]=2;for(m=3571;m<=3581;m++)M[m]=0;for(m=3594;m<=3597;m++)M[m]=0;for(m=3601;m<=3604;m++)M[m]=0;for(m=3637;m<=3639;m++)M[m]=0;for(m=3665;m<=3667;m++)M[m]=0;for(m=3693;m<=3695;m++)M[m]=0;for(m=3701;m<=3727;m++)M[m]=0;for(m=3728;m<=3739;m++)M[m]=2;for(m=3740;m<=3751;m++)M[m]=0;for(m=3753;m<=3760;m++)M[m]=2;for(m=3761;m<=3773;m++)M[m]=0;for(m=3775;m<=3777;m++)M[m]=0;for(m=3779;m<=3781;m++)M[m]=0;for(m=3783;m<=3785;m++)M[m]=0;for(m=3788;m<=3791;m++)M[m]=0;for(m=3797;m<=3802;m++)M[m]=0;for(m=3814;m<=3816;m++)M[m]=0;for(m=3825;m<=3829;m++)M[m]=0;for(m=3832;m<=3841;m++)M[m]=0;for(m=3844;m<=3852;m++)M[m]=0;for(m=3873;m<=3885;m++)M[m]=0;for(m=3890;m<=3893;m++)M[m]=0;for(m=3907;m<=3912;m++)M[m]=0;for(m=3942;m<=3950;m++)M[m]=0;for(m=3968;m<=3970;m++)M[m]=0;for(m=3973;m<=3976;m++)M[m]=0;for(m=3986;m<=3989;m++)M[m]=0;for(m=3994;m<=3997;m++)M[m]=0;for(m=4048;m<=4051;m++)M[m]=0;for(m=4056;m<=4063;m++)M[m]=0;for(m=4093;m<=4096;m++)M[m]=0;for(m=4390;m<=4398;m++)M[m]=0;for(m=4399;m<=4413;m++)M[m]=2;for(m=4418;m<=4433;m++)M[m]=2;for(m=4455;m<=4457;m++)M[m]=2;for(m=4484;m<=4489;m++)M[m]=0;for(m=4491;m<=4554;m++)M[m]=0;for(m=4568;m<=4589;m++)M[m]=0;for(m=4652;m<=4656;m++)M[m]=0;for(m=4766;m<=4800;m++)M[m]=0;for(m=5014;m<=5016;m++)M[m]=0;for(m=5069;m<=5072;m++)M[m]=0;for(m=5105;m<=5130;m++)M[m]=0;for(m=5167;m<=5188;m++)M[m]=0;for(m=5253;m<=5259;m++)M[m]=0;for(m=5269;m<=5275;m++)M[m]=0;for(m=5292;m<=5311;m++)M[m]=0;for(m=5329;m<=5331;m++)M[m]=0;for(m=5343;m<=5349;m++)M[m]=0;for(m=5355;m<=5357;m++)M[m]=0;for(m=5387;m<=5389;m++)M[m]=0;for(m=5459;m<=5463;m++)M[m]=0;for(m=5479;m<=5482;m++)M[m]=0;for(m=5518;m<=5520;m++)M[m]=0;for(m=5530;m<=5539;m++)M[m]=0;for(m=5550;m<=5552;m++)M[m]=0;for(m=5562;m<=5583;m++)M[m]=0;for(m=5623;m<=5625;m++)M[m]=2;for(m=5631;m<=5639;m++)M[m]=0;for(m=5649;m<=5653;m++)M[m]=0;for(m=5663;m<=5680;m++)M[m]=0;for(m=5682;m<=5685;m++)M[m]=0;for(m=5875;m<=5877;m++)M[m]=0;for(m=5896;m<=5899;m++)M[m]=0;for(m=5921;m<=5940;m++)M[m]=0;for(m=6050;m<=6125;m++)M[m]=0;for(m=6244;m<=6275;m++)M[m]=0;for(m=6328;m<=6348;m++)M[m]=0;for(m=6350;m<=6356;m++)M[m]=0;for(m=6366;m<=6372;m++)M[m]=0;for(m=6381;m<=6387;m++)M[m]=0;for(m=6393;m<=6404;m++)M[m]=0;for(m=6480;m<=6483;m++)M[m]=0;for(m=6511;m<=6514;m++)M[m]=0;for(m=6579;m<=6581;m++)M[m]=0;for(m=6619;m<=6624;m++)M[m]=0;for(m=6625;m<=6627;m++)M[m]=2;for(m=6628;m<=6632;m++)M[m]=0;for(m=6634;m<=6637;m++)M[m]=0;for(m=6669;m<=6692;m++)M[m]=0;for(m=6707;m<=6709;m++)M[m]=0;for(m=6720;m<=6723;m++)M[m]=0;for(m=6732;m<=6738;m++)M[m]=0;for(m=6931;m<=6933;m++)M[m]=0;for(m=6956;m<=6959;m++)M[m]=0;for(m=7005;m<=7007;m++)M[m]=0;for(m=7057;m<=7070;m++)M[m]=2;for(m=7074;m<=7082;m++)M[m]=0;for(m=7109;m<=7118;m++)M[m]=0;for(m=7119;m<=7127;m++)M[m]=1;for(m=7374;m<=7376;m++)M[m]=0;for(m=7528;m<=7586;m++)M[m]=0;for(m=7587;m<=7645;m++)M[m]=2;for(m=7692;m<=7696;m++)M[m]=0;for(m=7755;m<=7787;m++)M[m]=0;for(m=7791;m<=7795;m++)M[m]=0;for(m=7799;m<=7801;m++)M[m]=0;for(m=7803;m<=7805;m++)M[m]=0;for(m=7825;m<=7831;m++)M[m]=0;for(m=7845;m<=7859;m++)M[m]=0;for(m=8013;m<=8032;m++)M[m]=0;for(m=8065;m<=8068;m++)M[m]=1;for(m=8518;m<=8529;m++)M[m]=2;for(m=8533;m<=8536;m++)M[m]=2;for(m=8538;m<=8540;m++)M[m]=2;for(m=8677;m<=8679;m++)M[m]=0;for(m=8836;m<=8840;m++)M[m]=0;for(m=8857;m<=8859;m++)M[m]=0;for(m=8908;m<=8910;m++)M[m]=0;for(m=9154;m<=9159;m++)M[m]=0;for(m=9205;m<=9218;m++)M[m]=0;for(m=9271;m<=9273;m++)M[m]=0;for(m=9295;m<=9297;m++)M[m]=0;for(m=9356;m<=9360;m++)M[m]=0;for(m=9404;m<=9407;m++)M[m]=0;for(m=9476;m<=9482;m++)M[m]=0;for(m=9487;m<=9494;m++)M[m]=0;for(m=9697;m<=9699;m++)M[m]=0;for(m=9821;m<=9865;m++)M[m]=0;for(m=10285;m<=10291;m++)M[m]=0;for(m=10314;m<=10317;m++)M[m]=0;for(m=10448;m<=10465;m++)M[m]=0;for(m=10731;m<=10733;m++)M[m]=0;for(m=11114;m<=11118;m++)M[m]=0;for(m=20004;m<=20032;m++)M[m]=0;for(m=20047;m<=20049;m++)M[m]=0;for(m=20062;m<=20092;m++)M[m]=0;for(m=20135;m<=20138;m++)M[m]=0;for(m=20248;m<=20258;m++)M[m]=0;for(m=20348;m<=20358;m++)M[m]=0;for(m=20436;m<=20440;m++)M[m]=0;for(m=20822;m<=20824;m++)M[m]=0;for(m=20904;m<=20932;m++)M[m]=0;for(m=20934;m<=20936;m++)M[m]=0;for(m=21004;m<=21032;m++)M[m]=0;for(m=21035;m<=21037;m++)M[m]=0;for(m=21095;m<=21097;m++)M[m]=0;for(m=21148;m<=21150;m++)M[m]=0;for(m=21207;m<=21264;m++)M[m]=0;for(m=21307;m<=21364;m++)M[m]=0;for(m=21413;m<=21423;m++)M[m]=0;for(m=21453;m<=21463;m++)M[m]=0;for(m=21473;m<=21483;m++)M[m]=0;for(m=21780;m<=21782;m++)M[m]=0;for(m=21891;m<=21894;m++)M[m]=0;for(m=21896;m<=21899;m++)M[m]=0;for(m=22171;m<=22177;m++)M[m]=0;for(m=22181;m<=22187;m++)M[m]=0;for(m=22191;m<=22197;m++)M[m]=0;for(m=22207;m<=22222;m++)M[m]=0;for(m=22229;m<=22232;m++)M[m]=0;for(m=22234;m<=22236;m++)M[m]=0;for(m=22243;m<=22250;m++)M[m]=0;for(m=22262;m<=22265;m++)M[m]=0;for(m=22307;m<=22322;m++)M[m]=0;for(m=22348;m<=22357;m++)M[m]=0;for(m=22407;m<=22422;m++)M[m]=0;for(m=22462;m<=22465;m++)M[m]=0;for(m=22521;m<=22525;m++)M[m]=0;for(m=22607;m<=22622;m++)M[m]=0;for(m=22641;m<=22646;m++)M[m]=0;for(m=22648;m<=22657;m++)M[m]=0;for(m=22707;m<=22722;m++)M[m]=0;for(m=22762;m<=22765;m++)M[m]=0;for(m=22807;m<=22822;m++)M[m]=0;for(m=22991;m<=22994;m++)M[m]=0;for(m=23028;m<=23038;m++)M[m]=0;for(m=23301;m<=23333;m++)M[m]=2;for(m=23830;m<=23853;m++)M[m]=0;for(m=23866;m<=23872;m++)M[m]=0;for(m=23877;m<=23884;m++)M[m]=0;for(m=23886;m<=23894;m++)M[m]=0;for(m=23946;m<=23948;m++)M[m]=0;for(m=24311;m<=24313;m++)M[m]=0;for(m=24342;m<=24347;m++)M[m]=0;for(m=24370;m<=24374;m++)M[m]=10;for(m=24375;m<=24381;m++)M[m]=0;for(m=24718;m<=24721;m++)M[m]=0;for(m=24817;m<=24821;m++)M[m]=0;for(m=24877;m<=24882;m++)M[m]=0;for(m=24891;m<=24893;m++)M[m]=0;for(m=25391;m<=25395;m++)M[m]=0;for(m=25828;m<=25838;m++)M[m]=0;for(m=26191;m<=26195;m++)M[m]=0;for(m=26391;m<=26393;m++)M[m]=0;for(m=26701;m<=26722;m++)M[m]=0;for(m=26729;m<=26799;m++)M[m]=2;for(m=26801;m<=26803;m++)M[m]=2;for(m=26811;m<=26813;m++)M[m]=2;for(m=26847;m<=26870;m++)M[m]=2;for(m=26891;m<=26899;m++)M[m]=0;for(m=26901;m<=26923;m++)M[m]=0;for(m=26929;m<=26946;m++)M[m]=0;for(m=26948;m<=26998;m++)M[m]=0;for(m=27037;m<=27040;m++)M[m]=0;for(m=27205;m<=27232;m++)M[m]=0;for(m=27258;m<=27260;m++)M[m]=0;for(m=27391;m<=27398;m++)M[m]=0;for(m=27561;m<=27564;m++)M[m]=0;for(m=27571;m<=27574;m++)M[m]=0;for(m=27581;m<=27584;m++)M[m]=0;for(m=27591;m<=27594;m++)M[m]=0;for(m=27700;m<=27707;m++)M[m]=0;for(m=28191;m<=28193;m++)M[m]=0;for(m=28348;m<=28358;m++)M[m]=0;for(m=28402;m<=28432;m++)M[m]=0;for(m=28462;m<=28492;m++)M[m]=0;for(m=29118;m<=29122;m++)M[m]=0;for(m=29168;m<=29172;m++)M[m]=0;for(m=29177;m<=29185;m++)M[m]=0;for(m=29187;m<=29195;m++)M[m]=0;for(m=29900;m<=29903;m++)M[m]=0;for(m=30161;m<=30179;m++)M[m]=0;for(m=30491;m<=30494;m++)M[m]=0;for(m=30729;m<=30732;m++)M[m]=0;for(m=31251;m<=31259;m++)M[m]=0;for(m=31265;m<=31268;m++)M[m]=0;for(m=31275;m<=31279;m++)M[m]=0;for(m=31281;m<=31297;m++)M[m]=0;for(m=31461;m<=31469;m++)M[m]=0;for(m=31491;m<=31495;m++)M[m]=0;for(m=31917;m<=31922;m++)M[m]=0;for(m=31965;m<=32e3;m++)M[m]=0;for(m=32001;m<=32003;m++)M[m]=2;for(m=32005;m<=32031;m++)M[m]=2;for(m=32033;m<=32060;m++)M[m]=2;for(m=32064;m<=32067;m++)M[m]=2;for(m=32074;m<=32077;m++)M[m]=2;for(m=32081;m<=32086;m++)M[m]=0;for(m=32107;m<=32130;m++)M[m]=0;for(m=32133;m<=32159;m++)M[m]=0;for(m=32164;m<=32167;m++)M[m]=2;for(m=32180;m<=32199;m++)M[m]=0;for(m=32201;m<=32260;m++)M[m]=0;for(m=32301;m<=32360;m++)M[m]=0;for(m=32401;m<=32460;m++)M[m]=0;for(m=32501;m<=32560;m++)M[m]=0;for(m=32601;m<=32662;m++)M[m]=0;for(m=32664;m<=32667;m++)M[m]=2;for(m=32701;m<=32761;m++)M[m]=0;for(m=53001;m<=53004;m++)M[m]=0;for(m=53008;m<=53019;m++)M[m]=0;for(m=53021;m<=53032;m++)M[m]=0;for(m=53034;m<=53037;m++)M[m]=0;for(m=53042;m<=53046;m++)M[m]=0;for(m=53074;m<=53080;m++)M[m]=0;for(m=54001;m<=54004;m++)M[m]=0;for(m=54008;m<=54019;m++)M[m]=0;for(m=54021;m<=54032;m++)M[m]=0;for(m=54034;m<=54037;m++)M[m]=0;for(m=54042;m<=54046;m++)M[m]=0;for(m=54048;m<=54053;m++)M[m]=0;for(m=54074;m<=54080;m++)M[m]=0;for(m=54098;m<=54101;m++)M[m]=0;for(m=102001;m<=102040;m++)M[m]=0;for(m=102042;m<=102063;m++)M[m]=0;for(m=102065;m<=102067;m++)M[m]=0;for(m=102070;m<=102117;m++)M[m]=0;for(m=102122;m<=102216;m++)M[m]=0;for(m=102221;m<=102377;m++)M[m]=0;for(m=102382;m<=102388;m++)M[m]=0;for(m=102389;m<=102398;m++)M[m]=2;for(m=102399;m<=102444;m++)M[m]=0;for(m=102445;m<=102447;m++)M[m]=2;for(m=102448;m<=102458;m++)M[m]=0;for(m=102459;m<=102468;m++)M[m]=2;for(m=102469;m<=102499;m++)M[m]=0;for(m=102500;m<=102519;m++)M[m]=1;for(m=102520;m<=102524;m++)M[m]=0;for(m=102525;m<=102529;m++)M[m]=2;for(m=102530;m<=102588;m++)M[m]=0;for(m=102590;m<=102598;m++)M[m]=0;for(m=102601;m<=102603;m++)M[m]=0;for(m=102605;m<=102628;m++)M[m]=0;for(m=102629;m<=102646;m++)M[m]=2;for(m=102648;m<=102700;m++)M[m]=2;for(m=102701;m<=102703;m++)M[m]=0;for(m=102707;m<=102730;m++)M[m]=2;for(m=102733;m<=102758;m++)M[m]=2;for(m=102767;m<=102900;m++)M[m]=0;for(m=102901;m<=102933;m++)M[m]=2;for(m=102934;m<=102950;m++)M[m]=13;for(m=102951;m<=102963;m++)M[m]=0;for(m=102965;m<=102969;m++)M[m]=0;for(m=102971;m<=102973;m++)M[m]=0;for(m=102975;m<=102989;m++)M[m]=0;for(m=102990;m<=102992;m++)M[m]=1;for(m=102997;m<=103002;m++)M[m]=0;for(m=103003;m<=103008;m++)M[m]=2;for(m=103009;m<=103011;m++)M[m]=0;for(m=103012;m<=103014;m++)M[m]=2;for(m=103019;m<=103021;m++)M[m]=0;for(m=103022;m<=103024;m++)M[m]=2;for(m=103029;m<=103031;m++)M[m]=0;for(m=103032;m<=103034;m++)M[m]=2;for(m=103065;m<=103068;m++)M[m]=0;for(m=103074;m<=103076;m++)M[m]=0;for(m=103077;m<=103079;m++)M[m]=1;for(m=103080;m<=103082;m++)M[m]=0;for(m=103083;m<=103085;m++)M[m]=2;for(m=103090;m<=103093;m++)M[m]=0;for(m=103097;m<=103099;m++)M[m]=0;for(m=103100;m<=103102;m++)M[m]=2;for(m=103107;m<=103109;m++)M[m]=0;for(m=103110;m<=103112;m++)M[m]=2;for(m=103113;m<=103116;m++)M[m]=0;for(m=103117;m<=103120;m++)M[m]=2;for(m=103153;m<=103157;m++)M[m]=0;for(m=103158;m<=103162;m++)M[m]=2;for(m=103163;m<=103165;m++)M[m]=0;for(m=103166;m<=103168;m++)M[m]=1;for(m=103169;m<=103171;m++)M[m]=2;for(m=103186;m<=103188;m++)M[m]=0;for(m=103189;m<=103191;m++)M[m]=2;for(m=103192;m<=103195;m++)M[m]=0;for(m=103196;m<=103199;m++)M[m]=2;for(m=103200;m<=103224;m++)M[m]=0;for(m=103225;m<=103227;m++)M[m]=1;for(m=103232;m<=103237;m++)M[m]=0;for(m=103238;m<=103243;m++)M[m]=2;for(m=103244;m<=103246;m++)M[m]=0;for(m=103247;m<=103249;m++)M[m]=2;for(m=103254;m<=103256;m++)M[m]=0;for(m=103257;m<=103259;m++)M[m]=2;for(m=103264;m<=103266;m++)M[m]=0;for(m=103267;m<=103269;m++)M[m]=2;for(m=103300;m<=103375;m++)M[m]=0;for(m=103381;m<=103383;m++)M[m]=0;for(m=103384;m<=103386;m++)M[m]=1;for(m=103387;m<=103389;m++)M[m]=0;for(m=103390;m<=103392;m++)M[m]=2;for(m=103397;m<=103399;m++)M[m]=0;for(m=103400;m<=103471;m++)M[m]=2;for(m=103476;m<=103478;m++)M[m]=0;for(m=103479;m<=103481;m++)M[m]=2;for(m=103486;m<=103488;m++)M[m]=0;for(m=103489;m<=103491;m++)M[m]=2;for(m=103492;m<=103495;m++)M[m]=0;for(m=103496;m<=103499;m++)M[m]=2;for(m=103528;m<=103543;m++)M[m]=0;for(m=103544;m<=103548;m++)M[m]=2;for(m=103549;m<=103551;m++)M[m]=0;for(m=103552;m<=103554;m++)M[m]=1;for(m=103555;m<=103557;m++)M[m]=2;for(m=103558;m<=103560;m++)M[m]=0;for(m=103571;m<=103573;m++)M[m]=0;for(m=103574;m<=103576;m++)M[m]=2;for(m=103577;m<=103580;m++)M[m]=0;for(m=103581;m<=103583;m++)M[m]=2;for(m=103595;m<=103694;m++)M[m]=0;for(m=103696;m<=103699;m++)M[m]=0;for(m=103700;m<=103793;m++)M[m]=2;for(m=103794;m<=103890;m++)M[m]=0;for(m=103891;m<=103896;m++)M[m]=2;for(m=103900;m<=103971;m++)M[m]=2;for(m=103972;m<=103977;m++)M[m]=0;for(m=112e3;m<=112101;m++)M[m]=0;const oB=[102100,102113,3857,3785,900913],Tle=[104905,104971],$le=[4326,...oB,...Tle],Vb=[-20037508342788905e-9,20037508342788905e-9],GI=[-20037508342787e-6,20037508342787e-6],w3={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:Vb,origin:GI,dx:1e-5},aB={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Vb,origin:GI,dx:1e-5},102100:w3,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Vb,origin:GI,dx:1e-5},3857:w3,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:w3};function cr(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const i=e.wkid,r=t.wkid;if(i!=null||r!=null){if(i===r||Pa(e)&&Pa(t))return!0;const o=e.latestWkid;if(o!=null&&r===o)return!0;const l=t.latestWkid;return l!=null&&i===l}let s,n;return e.wkt2&&t.wkt2?(s=e.wkt2,n=t.wkt2):e.wkt&&t.wkt&&(s=e.wkt,n=t.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function vs(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&aB[t]||null}function lB(e){if(!e)return;const{wkid:t,vcsWkid:i}=e;if(t)return i?JSON.stringify({wkid:t,vcsWkid:i}):String(t);const r=e.wkt||e.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function Zy(e){if(!fn(e))return!1;const{wkid:t}=e;if(t)return M[t]==null;const i=e.wkt2||e.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function xle(e){return!(uB(e)||cB(e))}function vp(e){return(e==null?void 0:e.wkid)===4326}function p5e(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function WF(e){return(e==null?void 0:e.wkid)===gp.CGCS2000}function Pa(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&oB.includes(t)}function Mle(e){return(e==null?void 0:e.wkid)===32662}function NT(e){return e===gp.GCSMARS2000||e===gp.GCSMARS2000_SPHERE}function uB(e){return NT(e==null?void 0:e.wkid)}function FT(e){return e===gp.GCSMOON2000}function cB(e){return FT(e==null?void 0:e.wkid)}function Ale(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&$le.includes(t)}function fn(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const dB={wkid:4326,wkt:f_(aB[4326].wkTemplate,{Central_Meridian:"0.0"})},hB={wkid:102100,latestWkid:3857},Ile={wkid:32662};function zP(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const Cle=zP(wi),jP=zP(Oa),UP=zP(Zc),Ole={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${wi.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},Lle=jP.wkt.toUpperCase(),Rle=UP.wkt.toUpperCase();function Ple(e){if(e!=null&&fn(e)){const t=e.wkid,i=e.wkt2??e.wkt;if(NT(t))return Oa;const r=i==null?void 0:i.toUpperCase();if(i&&r===Lle)return Oa;if(FT(t)||r&&r===Rle)return Zc}return wi}function f5e(e){return NT(e)?Oa:FT(e)?Zc:wi}function EE(e){return cr(e,Cle)}function Yc(e){return EE(e)||cr(e,jP)||cr(e,UP)}const pB=39.37,kle=wi.radius*Math.PI/200,fB=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,$y=M,mB=/UNIT\[([^\]]+)]/i,Dle=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),Nle=xr()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),po=e=>e*e,Vu=e=>e*e*e,zb={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:po(.001)},"square-centimeters":{inBaseUnits:po(.01)},"square-decimeters":{inBaseUnits:po(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:po(1e3)},"square-inches":{inBaseUnits:po(.0254)},"square-feet":{inBaseUnits:po(.3048)},"square-yards":{inBaseUnits:po(.9144)},"square-miles":{inBaseUnits:po(1609.344)},"square-nautical-miles":{inBaseUnits:po(1852)},"square-us-feet":{inBaseUnits:po(1200/3937)},acres:{inBaseUnits:.0015625*po(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Vu(.001)},"cubic-centimeters":{inBaseUnits:1e3*Vu(.01)},"cubic-decimeters":{inBaseUnits:1e3*Vu(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Vu(1e3)},"cubic-inches":{inBaseUnits:1e3*Vu(.0254)},"cubic-feet":{inBaseUnits:1e3*Vu(.3048)},"cubic-yards":{inBaseUnits:1e3*Vu(.9144)},"cubic-miles":{inBaseUnits:1e3*Vu(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Fle=(()=>{const e={};for(const t in zb)for(const i in zb[t].units)e[i]=t;return e})();function Vle(e,t,i){return e*zb[i].units[t].inBaseUnits}function zle(e,t,i){return e/zb[i].units[t].inBaseUnits}const yB=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],jle=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function qI(e){const t=Fle[e];if(!t)throw new Error("unknown type");return t}function ZF(e,t=null){return t=t||qI(e),zb[t].baseUnit===e}function Ci(e,t,i){if(t===i)return e;const r=qI(t);if(r!==qI(i))throw new Error("incompatible units");const s=ZF(t,r)?e:Vle(e,t,r);return ZF(i,r)?s:zle(s,i,r)}function m5e(e,t,i,r=!1){if(!r&&Zy(t))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=Lp(t);return s!==i&&(e=s?Ci(e,s,i):Ci(e*=eo(t),"meters",i)),e}function y5e(e,t,i,r=!1){if(!r&&Zy(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=Lp(i);return t!==s&&(e=s?Ci(e,t,s):Ci(e,t,"meters")/eo(i)),e}function Ule(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function g5e(e){return Ule(e)}function v5e(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function b5e(e,t){const i=Ci(e,t,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function _5e(e,t){const i=Ci(e,t,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function w5e(e,t){const i=Ci(e,t,"feet");return Math.abs(i)<1e3?"feet":"miles"}function S5e(e,t){const i=Ci(e,t,"feet");return Math.abs(i)<1e5?"feet":"miles"}function E5e(e,t){const i=Ci(e,t,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function T5e(e,t){const i=Ci(e,t,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function Gle(e,t,i){return Ci(e,t,"meters")/(i*Math.PI/180)}function GP(e){return Nle.fromJSON(e.toLowerCase())||null}function TE(e){if(e!=null&&!xle(e))return 1;const t=eo(e);return t>1e5?1:t}function gB(e){return eo(e)>=Ple(e).metersPerDegree?"meters":Lp(e)}function eo(e,t=wi.metersPerDegree){return qle(e,!0)??t}function qle(e,t=!1){const i=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let s=null;if(i){if(NT(i))return Oa.metersPerDegree;if(FT(i))return Zc.metersPerDegree;s=$y.values[$y[i]],!s&&t&&Dle.has(i)&&(s=kle)}else r&&(_B(r)?s=YF(fB.exec(r),s):bB(r)&&(s=YF(mB.exec(r),s)));return s}function $5e(e){return Zy(e)?1:eo(e)}function YF(e,t){return e!=null&&e[1]?vB(e[1]):t}function vB(e){return parseFloat(e.split(",")[1])}function Lp(e){const t=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let r=null;if(t)r=$y.units[$y[t]];else if(i){const s=_B(i)?fB:bB(i)?mB:null;if(s){const n=s.exec(i);n!=null&&n[1]&&(r=Hle(n[1]))}}return r!=null?GP(r):null}function x5e(e){const t=Lp(e);return t!=null&&yB.includes(t)?t:null}function M5e(e){const t=gB(e);return t!=null&&yB.includes(t)?t:null}function A5e(e){const t=Lp(e);return t==null?null:jle.get(t)}function bB(e){return/^GEOCCS/i.test(e)}function _B(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const Ble=1e-7;function Hle(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let i=t==null?void 0:t[1];if(!i||!GP(i)){const r=vB(e);i=null;const s=$y.values;for(let n=0;n<s.length;++n)if(Math.abs(r-s[n])<Ble){i=$y.units[n];break}}return i}function I5e(e){const t=Lp(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const Wle={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Zle={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Yle={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},Jle=xr()(Wle),Xle=xr()(Zle),C5e=xr()(Yle);var aa;let Pt=aa=class extends se{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return aa.WebMercator;if((e==null?void 0:e.wkid)===4326)return aa.WGS84;const t=new aa;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return vp(this)}get isWebMercator(){return Pa(this)}get isGeographic(){return Zy(this)}get isWrappable(){return Ale(this)}get metersPerUnit(){return eo(this)}get unit(){return Lp(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===aa.WGS84)return new aa(dB);if(this===aa.WebMercator)return new aa(hB);const e=new aa;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=q(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||r?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):i?s.id===t&&s.referenceServiceName===i:s.id===t}return cr(this,e)}toJSON(e){return this.write(void 0,e)}};Pt.GCS_NAD_1927=null,Pt.WGS84=null,Pt.WebMercator=null,Pt.PlateCarree=null,c([p({readOnly:!0})],Pt.prototype,"isWGS84",null),c([p({readOnly:!0})],Pt.prototype,"isWebMercator",null),c([p({readOnly:!0})],Pt.prototype,"isGeographic",null),c([p({readOnly:!0})],Pt.prototype,"isWrappable",null),c([p({type:vt,json:{write:!0}})],Pt.prototype,"latestWkid",void 0),c([p({readOnly:!0})],Pt.prototype,"metersPerUnit",null),c([p({readOnly:!0})],Pt.prototype,"unit",null),c([p({type:vt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Pt.prototype,"wkid",void 0),c([p({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Pt.prototype,"wkt",void 0),c([be("wkt"),be("web-scene","wkt")],Pt.prototype,"writeWkt",null),c([p({type:String,json:{write:!1}})],Pt.prototype,"wkt2",void 0),c([p({type:vt,json:{write:!0}})],Pt.prototype,"vcsWkid",void 0),c([p({type:vt,json:{write:!0}})],Pt.prototype,"latestVcsWkid",void 0),c([p()],Pt.prototype,"imageCoordinateSystem",void 0),Pt=aa=c([I("esri.geometry.SpatialReference")],Pt),Pt.prototype.toJSON.isDefaultToJSON=!0,Pt.GCS_NAD_1927=Me.freeze(new Pt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Pt.WGS84=Me.freeze(new Pt(dB)),Pt.WebMercator=Me.freeze(new Pt(hB)),Pt.PlateCarree=Me.freeze(new Pt(Ile));const tt=Pt;function pe(e,t,i){let r,s;return t===void 0||Array.isArray(t)?(s=e,i=t,r=[void 0]):(s=t,r=Array.isArray(e)?e:[e]),(n,o)=>{const l=n.constructor.prototype;r.forEach(d=>{const h=cq(n,d,s);h.read&&typeof h.read=="object"||(h.read={}),h.read.reader=l[o],i&&(h.read.source=(h.read.source||[]).concat(i))})}}let la=class extends se{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=tt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,i){if(t instanceof tt)return t;if(t!=null){const r=new tt;return r.read(t,i),r}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,i){this.cache[t]=i}};c([p()],la.prototype,"type",void 0),c([p({readOnly:!0})],la.prototype,"cache",null),c([p({readOnly:!0})],la.prototype,"extent",null),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],la.prototype,"hasM",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],la.prototype,"hasZ",void 0),c([p({type:tt,json:{write:!0},value:tt.WGS84})],la.prototype,"spatialReference",void 0),c([pe("spatialReference")],la.prototype,"readSpatialReference",null),la=c([I("esri.geometry.Geometry")],la);const ou=la,Qle=Object.prototype.toString;function Kle(e){const t="__accessorMetadata__"in e?Zi(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return eue.apply(this,i)}}function eue(e,t,i,r){xT(e,t).cast=r}function tue(e){return(t,i)=>{xT(t,e).cast=t[i]}}function mt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&Qle.call(e[0])==="[object Function]"?Kle(e[0]):e.length===1&&typeof e[0]=="string"?tue(e[0]):void 0}function xy(e){if(e&&typeof e=="object"&&"type"in e&&e.type==="mesh")throw new B("Mesh geometries are not supported for this operation")}function iue(e){e.forEach(xy)}const rue=57.29577951308232,sue=.017453292519943;function JF(e){return e*rue}function XF(e){return e*sue}function L5e(e){return Math.PI/2-2*Math.atan(Math.exp(-e/wi.radius))}function BI(e){return e.wkid!=null||e.wkt!=null}const S3=[0,0];function $E(e,t,i,r,s){const n=e,o=s;if(o.spatialReference=i,"x"in n&&"x"in o)[o.x,o.y]=t(n.x,n.y,S3,r);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=t(n.xmin,n.ymin,S3,r),[o.xmax,o.ymax]=t(n.xmax,n.ymax,S3,r);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const l="paths"in n?n.paths:n.rings,d=[];let h;for(let y=0;y<l.length;y++){const v=l[y];h=[],d.push(h);for(let b=0;b<v.length;b++)h.push(t(v[b][0],v[b][1],[0,0],r)),v[b].length>2&&h[b].push(v[b][2]),v[b].length>3&&h[b].push(v[b][3])}"paths"in o?o.paths=d:o.rings=d}else if("points"in n&&"points"in o){const l=n.points,d=[];for(let h=0;h<l.length;h++)d[h]=t(l[h][0],l[h][1],[0,0],r),l[h].length>2&&d[h].push(l[h][2]),l[h].length>3&&d[h].push(l[h][3]);o.points=d}return s}function DS(e,t){const i=e&&(BI(e)?e:e.spatialReference),r=t&&(BI(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!cr(r,i)||Pa(r)&&vp(i)||Pa(i)&&vp(r))}function VT(e,t){if(e==null)return null;const i=e.spatialReference,r=t&&(BI(t)?t:t.spatialReference);return DS(i,r)?cr(i,r)?q(e):Pa(r)?$E(e,Vm,tt.WebMercator,!1,q(e)):vp(r)?$E(e,zT,tt.WGS84,!1,q(e)):null:null}function Vm(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=XF(t);return i[0]=XF(e)*wi.radius,i[1]=wi.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function zT(e,t,i=[0,0],r=!1){if(e===Vb[0])i[0]=-180;else if(e===Vb[1])i[0]=180;else{const s=JF(e/wi.radius);i[0]=r?s:s-360*Math.floor((s+180)/360)}return i[1]=JF(Math.PI/2-2*Math.atan(Math.exp(-t/wi.radius))),i}function ap(e,t=!1,i=q(e)){return xy(e),xy(i),$E(e,Vm,tt.WebMercator,t,i)}function zm(e,t=!1,i=q(e)){return xy(e),xy(i),$E(e,zT,tt.WGS84,t,i)}function wB(e,t){const i=e.x-t.x,r=e.y-t.y,s=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(i*i+r*r+s*s)}function nue(e){var t;return((t=SB(e,EB))==null?void 0:t[0])??null}function oue(e){var t;return((t=SB(e,EB))==null?void 0:t[1])??null}function SB({x:e,y:t,spatialReference:i},r=[0,0]){if(i){if(Pa(i))return zT(e,t,r);if(Zy(i))return r[0]=e,r[1]=t,r}return null}const EB=[0,0];var NS;const E3=[0,0];function QF(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let ls=NS=class extends ou{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Me.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,r,s){let n;if(Array.isArray(e))n=e,s=t,e=n[0],t=n[1],i=n[2],r=n[3];else if(e&&typeof e=="object"){if(n=e,e=n.x!=null?n.x:n.longitude,t=n.y!=null?n.y:n.latitude,i=n.z,r=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new tt(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)ae.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)ae.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&(s!=null&&s.isWebMercator)){const l=Vm(n.longitude,n.latitude,E3);e=l[0],t=l[1]}}}else QF(i)?(s=i,i=null):QF(r)&&(s=r,r=null);const o={x:e,y:t};return o.x==null&&o.y!=null?ae.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&ae.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return oue(this)}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Vm(i,e,E3)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return nue(this)}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",Vm(e,t,E3)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new NS;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return NS.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:i,z:r,m:s,spatialReference:n}=this,{z:o,m:l}=e;let{x:d,y:h,spatialReference:y}=e;if(!n.equals(y))if(n.isWebMercator&&y.isWGS84)[d,h]=Vm(d,h),y=n;else{if(!n.isWGS84||!y.isWebMercator)return!1;[d,h]=zT(d,h),y=n}return t===d&&i===h&&r===o&&s===l&&n.wkid===y.wkid}offset(e,t,i){return this.x+=e,this.y+=t,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const e=vs(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,s=2*r;let n;return t>r?(n=Math.ceil(Math.abs(t-r)/s),t-=n*s):t<i&&(n=Math.ceil(Math.abs(t-i)/s),t+=n*s),this._set("x",t),this}distance(e){return wB(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};c([p({readOnly:!0})],ls.prototype,"cache",null),c([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ls.prototype,"hasM",null),c([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ls.prototype,"hasZ",null),c([p({type:Number})],ls.prototype,"latitude",null),c([p({type:Number})],ls.prototype,"longitude",null),c([p({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),mt(e=>isNaN(e)?e:ms(e))],ls.prototype,"x",void 0),c([be("x")],ls.prototype,"writeX",null),c([pe("x")],ls.prototype,"readX",null),c([p({type:Number,json:{write:!0}})],ls.prototype,"y",void 0),c([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ls.prototype,"z",void 0),c([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ls.prototype,"m",void 0),ls=NS=c([I("esri.geometry.Point")],ls),ls.prototype.toJSON.isDefaultToJSON=!0;const rt=ls,T3=[0,0];function I_(e,t){return t!=null&&ps(e,t.x,t.y,t.z)}function R5e(e,t){var i;if(!((i=t.points)!=null&&i.length))return!1;for(const r of t.points)if(!My(e,r))return!1;return!0}function aue(e,t){const{xmin:i,ymin:r,zmin:s,xmax:n,ymax:o,zmax:l}=t;return e.hasZ&&t.hasZ?ps(e,i,r,s)&&ps(e,i,o,s)&&ps(e,n,o,s)&&ps(e,n,r,s)&&ps(e,i,r,l)&&ps(e,i,o,l)&&ps(e,n,o,l)&&ps(e,n,r,l):ps(e,i,r)&&ps(e,i,o)&&ps(e,n,o)&&ps(e,n,r)}function My(e,t){return ps(e,t[0],t[1])}function lue(e,t){return ps(e,t[0],t[1],t[2])}function ps(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function qP(e,t){return T3[1]=t.y,T3[0]=t.x,uue(e,T3)}function uue(e,t){return BP(e.rings,t)}function BP(e,t){if(!e)return!1;if(cue(e))return KF(!1,e,t);let i=!1;for(let r=0,s=e.length;r<s;r++)i=KF(i,e[r],t);return i}function cue(e){return!Array.isArray(e[0][0])}function KF(e,t,i){const[r,s]=i;let n=e,o=0;for(let l=0,d=t.length;l<d;l++){o++,o===d&&(o=0);const[h,y]=t[l],[v,b]=t[o];(y<s&&b>=s||b<s&&y>=s)&&h+(s-y)/(b-y)*(v-h)<r&&(n=!n)}return n}function due(e,t){return I_(e,t)}function hue(e,t){const i=e.hasZ&&t.hasZ;let r,s,n;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1}return!0}function pue(e,t){const{points:i,hasZ:r}=t,s=r?lue:My;for(const n of i)if(s(e,n))return!0;return!1}const bp=[0,0],_p=[0,0],wp=[0,0],Sp=[0,0],fue=[bp,_p,wp,Sp],TB=[[wp,bp],[bp,_p],[_p,Sp],[Sp,wp]];function mue(e,t){return yue(e,t.rings)}function yue(e,t){bp[0]=e.xmin,bp[1]=e.ymax,_p[0]=e.xmax,_p[1]=e.ymax,wp[0]=e.xmin,wp[1]=e.ymin,Sp[0]=e.xmax,Sp[1]=e.ymin;for(const i of fue)if(BP(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(My(e,r))return!0;for(let s=1;s<i.length;s++){const n=i[s];if(My(e,n)||$B(r,n,TB))return!0;r=n}}return!1}function gue(e,t){bp[0]=e.xmin,bp[1]=e.ymax,_p[0]=e.xmax,_p[1]=e.ymax,wp[0]=e.xmin,wp[1]=e.ymin,Sp[0]=e.xmax,Sp[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(My(e,s))return!0;for(let n=1;n<r.length;n++){const o=r[n];if(My(e,o)||$B(s,o,TB))return!0;s=o}}return!1}const mr=[0,0];function vue(e){for(let t=0;t<e.length;t++){const i=e[t];for(let s=0;s<i.length-1;s++){const n=i[s],o=i[s+1];for(let l=t+1;l<e.length;l++)for(let d=0;d<e[l].length-1;d++){const h=e[l][d],y=e[l][d+1];if(HI(n,o,h,y,mr)&&!(mr[0]===n[0]&&mr[1]===n[1]||mr[0]===h[0]&&mr[1]===h[1]||mr[0]===o[0]&&mr[1]===o[1]||mr[0]===y[0]&&mr[1]===y[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let n=r-1;s===0&&(n=r-2);const o=i[s],l=i[s+1];for(let d=s+2;d<n;d++){const h=i[d],y=i[d+1];if(HI(o,l,h,y,mr)&&!(mr[0]===o[0]&&mr[1]===o[1]||mr[0]===h[0]&&mr[1]===h[1]||mr[0]===l[0]&&mr[1]===l[1]||mr[0]===y[0]&&mr[1]===y[1]))return!0}}}return!1}function $B(e,t,i){for(let r=0;r<i.length;r++)if(HI(e,t,i[r][0],i[r][1]))return!0;return!1}function HI(e,t,i,r,s){const[n,o]=e,[l,d]=t,[h,y]=i,[v,b]=r,w=v-h,E=n-h,T=l-n,$=b-y,A=o-y,O=d-o,L=$*T-w*O;if(L===0)return!1;const R=(w*A-$*E)/L,N=(T*A-O*E)/L;return R>=0&&R<=1&&N>=0&&N<=1&&(s&&(s[0]=n+R*(l-n),s[1]=o+R*(d-o)),!0)}function bue(e){switch(e){case"esriGeometryEnvelope":case"extent":return hue;case"esriGeometryMultipoint":case"multipoint":return pue;case"esriGeometryPoint":case"point":return due;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return mue;case"esriGeometryPolyline":case"polyline":return gue}}var _o;function _ue(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function zu(e,t,i){return t==null?i:i==null?t:e(t,i)}let ir=_o=class extends ou{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,s){return _ue(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?tt.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:s??tt.WGS84}}static fromPoint(e){return new _o({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new rt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new _o;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&DS(t,i)&&(e=t.isWebMercator?ap(e):zm(e,!0)),e.type==="point"?I_(this,e):e.type==="extent"&&aue(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&DS(t,i)&&(e=t.isWebMercator?ap(e):zm(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!cr(t,i)&&DS(t,i)&&(e=t.isWebMercator?ap(e):zm(e,!0)),bue(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=zu(Math.min,this.zmin,e.zmin),this.zmax=zu(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=zu(Math.min,this.mmin,e.mmin),this.mmax=zu(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=zu(Math.max,this.zmin,e.zmin),this.zmax=zu(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=zu(Math.max,this.mmin,e.mmin),this.mmax=zu(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=vs(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?zm(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=$3(r.x,e).x),this.spatialReference=new tt(f_((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,s=this.xmin,n=this.xmax;return s>=i&&s<=r&&n>=i&&n<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;const s=i??vs(r);if(s==null)return this;const n=this._getParts(s).map(d=>d.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return n;let o=!0,l=!0;return n.forEach(d=>{d.hasZ||(o=!1),d.hasM||(l=!1)}),{rings:n.map(d=>{const h=[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]];if(o){const y=(d.zmax-d.zmin)/2;for(let v=0;v<h.length;v++)h[v].push(y)}if(l){const y=(d.mmax-d.mmin)/2;for(let v=0;v<h.length;v++)h[v].push(y)}return h}),hasZ:o,hasM:l,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:n,spatialReference:o}=this,l=this.width,d=this.xmin,h=this.xmax;let y;e=e||vs(o);const[v,b]=e.valid;y=$3(this.xmin,e);const w=y.x,E=y.frameId;y=$3(this.xmax,e);const T=y.x,$=y.frameId,A=w===T&&l>0;if(l>2*b){const O=new _o(d<h?w:T,s,b,n,o),L=new _o(v,s,d<h?T:w,n,o),R=new _o(0,s,b,n,o),N=new _o(v,s,0,n,o),j=[],V=[];O.contains(R)&&j.push(E),O.contains(N)&&V.push(E),L.contains(R)&&j.push($),L.contains(N)&&V.push($);for(let Z=E+1;Z<$;Z++)j.push(Z),V.push(Z);t.push({extent:O,frameIds:[E]},{extent:L,frameIds:[$]},{extent:R,frameIds:j},{extent:N,frameIds:V})}else w>T||A?t.push({extent:new _o(w,s,b,n,o),frameIds:[E]},{extent:new _o(v,s,T,n,o),frameIds:[$]}):t.push({extent:new _o(w,s,T,n,o),frameIds:[E]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<t.length;n++)t[n].extent.set(s)}return t}};function $3(e,t){const[i,r]=t.valid,s=2*r;let n,o=0;return e>r?(n=Math.ceil(Math.abs(e-r)/s),e-=n*s,o=n):e<i&&(n=Math.ceil(Math.abs(e-i)/s),e+=n*s,o=-n),{x:e,frameId:o}}c([p({readOnly:!0})],ir.prototype,"cache",null),c([p({readOnly:!0})],ir.prototype,"center",null),c([p({readOnly:!0})],ir.prototype,"extent",null),c([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ir.prototype,"hasM",null),c([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ir.prototype,"hasZ",null),c([p({readOnly:!0})],ir.prototype,"height",null),c([p({readOnly:!0})],ir.prototype,"width",null),c([p({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],ir.prototype,"xmin",void 0),c([p({type:Number,json:{write:!0}})],ir.prototype,"ymin",void 0),c([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ir.prototype,"mmin",void 0),c([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ir.prototype,"zmin",void 0),c([p({type:Number,json:{write:!0}})],ir.prototype,"xmax",void 0),c([p({type:Number,json:{write:!0}})],ir.prototype,"ymax",void 0),c([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ir.prototype,"mmax",void 0),c([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ir.prototype,"zmax",void 0),ir=_o=c([I("esri.geometry.Extent")],ir),ir.prototype.toJSON.isDefaultToJSON=!0;const Jt=ir;let sb;var cG,dG;const wue=((cG=globalThis.esriConfig)==null?void 0:cG.locale)??((dG=globalThis.dojoConfig)==null?void 0:dG.locale);var hG;const nb=(hG=globalThis.document)==null?void 0:hG.documentElement;function xB(){var i;const e=nb==null?void 0:nb.getAttribute("lang"),t=(i=globalThis.navigator)==null?void 0:i.language;return wue??e??t??"en"}function Vs(){return sb===void 0&&(sb=xB()),sb}function P5e(e=Vs()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const FS=[];function HP(e){return FS.push(e),bt(()=>FS.splice(FS.indexOf(e),1))}const VS=[];function WP(e){return VS.push(e),bt(()=>VS.splice(VS.indexOf(e),1))}function e8(){const e=xB();sb!==e&&([...VS].forEach(t=>t(e)),sb=e,[...FS].forEach(t=>t(e)))}var pG;(pG=globalThis.addEventListener)==null||pG.call(globalThis,"languagechange",e8),nb&&new MutationObserver(()=>{e8()}).observe(nb,{attributeFilter:["lang"]});let $w;function Sue(e){return $w&&!$w.destroyed||($w=e()),$w}var WI;const Eue=new ot({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Ln=WI=class extends Me{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new WI({categories:this.categories?q(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=VT(this.extent,tt.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const n={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>Eue.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...t,...n}}}};c([p()],Ln.prototype,"categories",void 0),c([p()],Ln.prototype,"disableExtraQuery",void 0),c([p({type:Jt})],Ln.prototype,"extent",void 0),c([p()],Ln.prototype,"filter",void 0),c([p()],Ln.prototype,"num",void 0),c([p()],Ln.prototype,"query",void 0),c([p()],Ln.prototype,"sortField",void 0),c([p()],Ln.prototype,"sortOrder",null),c([p()],Ln.prototype,"start",void 0),Ln=WI=c([I("esri.portal.PortalQueryParams")],Ln);const jo=Ln;var ZI;let ji=ZI=class extends se{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new B("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new ZI({sourceJSON:e});return t.read(e),t}queryItems(e,t){let i=Zi(jo,e);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new jo,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new jo,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,t))}_fetchCategorySchemaSet(e,t){const i=this.portal;return i.fetchSelf(i.authMode,!0,t).then(r=>{const s=r.contentCategorySetsGroupQuery;if(s){const n=new jo({disableExtraQuery:!0,num:1,query:s});return i.queryGroups(n,t)}throw new B("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],n=new jo({num:1,query:`typekeywords:"${e}"`});return s.queryItems(n,t)}throw new B("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(s=>{const n=s==null?void 0:s.categorySchema;return n!=null&&n.length?n:[]}):[])}};c([p()],ji.prototype,"access",void 0),c([p({type:Date})],ji.prototype,"created",void 0),c([p()],ji.prototype,"description",void 0),c([p()],ji.prototype,"id",void 0),c([p()],ji.prototype,"isInvitationOnly",void 0),c([p({type:Date})],ji.prototype,"modified",void 0),c([p()],ji.prototype,"owner",void 0),c([p()],ji.prototype,"portal",void 0),c([p()],ji.prototype,"snippet",void 0),c([p()],ji.prototype,"sortField",void 0),c([p()],ji.prototype,"sortOrder",void 0),c([p()],ji.prototype,"sourceJSON",void 0),c([p()],ji.prototype,"tags",void 0),c([p()],ji.prototype,"thumbnail",void 0),c([p({readOnly:!0})],ji.prototype,"thumbnailUrl",null),c([p()],ji.prototype,"title",void 0),c([p({readOnly:!0})],ji.prototype,"url",null),ji=ZI=c([I("esri.portal.PortalGroup")],ji);const YI=ji;let Yd=class extends Me{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};c([p()],Yd.prototype,"nextQueryParams",void 0),c([p()],Yd.prototype,"queryParams",void 0),c([p()],Yd.prototype,"results",void 0),c([p()],Yd.prototype,"total",void 0),Yd=c([I("esri.portal.PortalQueryResult")],Yd);const Tue=Yd;let vl=class extends se{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const t=(i=this.portal)==null?void 0:i.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new B("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};c([p({type:Date})],vl.prototype,"created",void 0),c([p()],vl.prototype,"id",void 0),c([p()],vl.prototype,"portal",void 0),c([p()],vl.prototype,"title",void 0),c([p({readOnly:!0})],vl.prototype,"url",null),c([p()],vl.prototype,"username",void 0),vl=c([I("esri.portal.PortalFolder")],vl);const $ue=vl;var JI;let Wt=JI=class extends se{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e==null?void 0:e.data,r=e==null?void 0:e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let n=this.userContentUrl;return r&&(n+="/"+(typeof r=="string"?r:r.id)),this.portal.request(n+"/addItem",s).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let i=this.userContentUrl;e.ownerFolder&&(i+="/"+e.ownerFolder);const r=t?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${e.id}/delete`,{method:"post",query:r}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const i=this.userContentUrl+"/deleteItems",r=[],s=e.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:t}},o=await this.portal.request(i,n);for(const l of o.results){const d=e.find(v=>l.itemId===v.id),h=l.success;let y=null;h?(d.id=null,d.portal=null):l.error&&(y=new B("portal:delete-item-failed",l.error.message,l.error)),r.push({item:d,success:h,error:y})}}return r}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const s=$ue.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=YI.fromJSON(i);return r.portal=this.portal,r}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:i}=await D(()=>Promise.resolve().then(()=>MB),void 0),r={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},s=await this.portal.request(t,{query:r});let n;return s!=null&&s.items?(n=s.items.map(o=>{const l=i.fromJSON(o);return l.portal=this.portal,l}),await Promise.all(n.map(o=>o.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new YI({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new B("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const i=this.userContentUrl,r=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(i+`/items/${e.id}/restore`,{method:"post",query:r})}toJSON(){throw new B("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new JI({sourceJSON:e});return t.read(e),t}};c([p()],Wt.prototype,"access",void 0),c([p({type:Date})],Wt.prototype,"created",void 0),c([p()],Wt.prototype,"culture",void 0),c([p()],Wt.prototype,"description",void 0),c([p()],Wt.prototype,"email",void 0),c([p()],Wt.prototype,"favGroupId",void 0),c([p()],Wt.prototype,"fullName",void 0),c([p({type:Date})],Wt.prototype,"modified",void 0),c([p()],Wt.prototype,"orgId",void 0),c([p()],Wt.prototype,"portal",void 0),c([p()],Wt.prototype,"preferredView",void 0),c([p()],Wt.prototype,"privileges",void 0),c([p()],Wt.prototype,"region",void 0),c([p()],Wt.prototype,"role",void 0),c([p()],Wt.prototype,"roleId",void 0),c([p()],Wt.prototype,"sourceJSON",void 0),c([p()],Wt.prototype,"thumbnail",void 0),c([p({readOnly:!0})],Wt.prototype,"thumbnailUrl",null),c([p()],Wt.prototype,"units",void 0),c([p({readOnly:!0})],Wt.prototype,"userContentUrl",null),c([p({readOnly:!0})],Wt.prototype,"url",null),c([p()],Wt.prototype,"username",void 0),c([p()],Wt.prototype,"userLicenseTypeId",void 0),c([p()],Wt.prototype,"userType",void 0),Wt=JI=c([I("esri.portal.PortalUser")],Wt);const ZP=Wt;var sn;let f0;const t8={PortalGroup:()=>Promise.resolve({default:YI}),PortalItem:()=>D(()=>Promise.resolve().then(()=>MB),void 0),PortalUser:()=>Promise.resolve({default:ZP})};let ge=sn=class extends se.JSONSupportMixin(iu){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=It.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){i8.unregister(this),this.defaultBasemap=Zt(this.defaultBasemap),this.defaultDevBasemap=Zt(this.defaultDevBasemap),this.defaultVectorBasemap=Zt(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=ui(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)It.request.trustedServers.includes(t)||It.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var i;const e=(i=this.user)==null?void 0:i.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return Hq(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=ZP.fromJSON(e),t.portal=this),t}load(e){const t=D(()=>Promise.resolve().then(()=>whe),void 0).then(({default:i})=>{yi(e),f0=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{var r;if(!this.hasAPIKey&&Be){const s=Be;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==sn.AUTH_MODE_AUTO&&this.authMode!==sn.AUTH_MODE_NO_PROMPT||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",xue(new WeakRef(this))),i8.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await D(async()=>{const{default:i}=await import("./ElevationLayer-tg13fuWy.js");return{default:i}},__vite__mapDeps([2,3,4,5,6,7,8]))).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}async fetchBasemaps(e,t){const i=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(e,t);i.unshift(...r)}return i}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new jo;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const i=(await this.queryItems(t,e)).results.find(r=>r.type==="Web Scene");return i?new f0({portalItem:i}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):vn(e)?Promise.reject(Yt()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(t=>t.classificationSchema):null}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new jo({num:100,sortField:"title"});if(t!=null&&t.length){const r=[];for(const s of t)r.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(s=>s.results)}return vn(e)?Promise.reject(Yt()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Vs();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Vs();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return Sue(()=>new sn)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",s={authMode:e,query:{culture:Vs().toLowerCase()},withCredentials:!0,...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this.request(r,s)}queryPortal(e,t,i,r){const s=Zi(jo,t),n=o=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...r}).then(l=>{const d=s.clone();return d.start=l.nextStart,new Tue({nextQueryParams:d,queryParams:s,total:l.total,results:sn._resultsToTypedArray(o,{portal:this},l,r)})}).then(l=>Promise.all(l.results.map(d=>typeof d.when=="function"?d.when():l)).then(()=>l,d=>(Ia(d),l)));return i&&t8[i]?t8[i]().then(({default:o})=>(yi(r),n(o))):n()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new B("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===sn.AUTH_MODE_ANONYMOUS||this.authMode===sn.AUTH_MODE_NO_PROMPT&&!Be)return Promise.reject(new B("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Be?Be.getCredential(this.restUrl,{prompt:this.authMode!==sn.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var i;const t=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,i){return this.request(e,t).then(r=>{const s=sn._resultsToTypedArray(i,{portal:this},r);return Promise.all(s.map(n=>typeof n.when=="function"?n.when():r)).then(()=>s,()=>s)})}request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===sn.AUTH_MODE_ANONYMOUS||this.authMode===sn.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:n=!1,method:o="auto",responseType:l="json",signal:d}=t,h={authMode:r,body:s,cacheBust:n,method:o,query:i,responseType:l,timeout:0,signal:d};return t.withCredentials&&(h.withCredentials=!0),Rt(this._normalizeSSL(e),h).then(y=>y.data)}toJSON(){throw new B("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new sn({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new B("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const i=new jo;i.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,t);if(!r.total)return[];const s=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const n=await s.queryItems(i,t);return n.total?n.results.filter(o=>o.type==="Web Map").map(o=>new f0({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const i=e||this.basemapGalleryGroupQuery3D;if(!i)return[];if(this.hasAPIKey)return[];const r=new jo({query:i,disableExtraQuery:!0}),s=await this.queryGroups(r,t);if(!s.total)return[];const n=s.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(r,t);return o.total?o.results.filter(l=>l.type==="Web Scene").map(l=>new f0({portalItem:l})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=f0.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,i,r){let s;if(i){const n=r!=null?r.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(s=s.map(o=>{const l=Object.assign(e?e.fromJSON(o):o,t);return typeof l.load=="function"&&l.load(n),l}))}else s=[];return s}};ge.AUTH_MODE_ANONYMOUS="anonymous",ge.AUTH_MODE_AUTO="auto",ge.AUTH_MODE_IMMEDIATE="immediate",ge.AUTH_MODE_NO_PROMPT="no-prompt",c([p()],ge.prototype,"access",void 0),c([p()],ge.prototype,"allSSL",void 0),c([p()],ge.prototype,"authMode",void 0),c([p()],ge.prototype,"authorizedCrossOriginDomains",void 0),c([pe("authorizedCrossOriginDomains")],ge.prototype,"readAuthorizedCrossOriginDomains",null),c([p()],ge.prototype,"basemapGalleryGroupQuery",void 0),c([p({json:{name:"3DBasemapGalleryGroupQuery"}})],ge.prototype,"basemapGalleryGroupQuery3D",void 0),c([p()],ge.prototype,"bingKey",void 0),c([p()],ge.prototype,"canListApps",void 0),c([p()],ge.prototype,"canListData",void 0),c([p()],ge.prototype,"canListPreProvisionedItems",void 0),c([p()],ge.prototype,"canProvisionDirectPurchase",void 0),c([p()],ge.prototype,"canSearchPublic",void 0),c([p()],ge.prototype,"canShareBingPublic",void 0),c([p()],ge.prototype,"canSharePublic",void 0),c([p()],ge.prototype,"canSignInArcGIS",void 0),c([p()],ge.prototype,"canSignInIDP",void 0),c([p()],ge.prototype,"colorSetsGroupQuery",void 0),c([p()],ge.prototype,"commentsEnabled",void 0),c([p({type:Date})],ge.prototype,"created",void 0),c([p()],ge.prototype,"credential",void 0),c([p()],ge.prototype,"culture",void 0),c([p()],ge.prototype,"currentVersion",void 0),c([p()],ge.prototype,"customBaseUrl",void 0),c([p()],ge.prototype,"default3DBasemapQuery",void 0),c([p()],ge.prototype,"defaultBasemap",void 0),c([pe("defaultBasemap")],ge.prototype,"readDefaultBasemap",null),c([p()],ge.prototype,"defaultDevBasemap",void 0),c([pe("defaultDevBasemap")],ge.prototype,"readDefaultDevBasemap",null),c([p({type:Jt})],ge.prototype,"defaultExtent",void 0),c([p()],ge.prototype,"defaultVectorBasemap",void 0),c([pe("defaultVectorBasemap")],ge.prototype,"readDefaultVectorBasemap",null),c([p()],ge.prototype,"description",void 0),c([p()],ge.prototype,"devBasemapGalleryGroupQuery",void 0),c([p()],ge.prototype,"eueiEnabled",void 0),c([p({readOnly:!0})],ge.prototype,"extraQuery",null),c([p()],ge.prototype,"featuredGroups",void 0),c([p()],ge.prototype,"featuredItemsGroupQuery",void 0),c([p()],ge.prototype,"galleryTemplatesGroupQuery",void 0),c([p()],ge.prototype,"layoutGroupQuery",void 0),c([p()],ge.prototype,"livingAtlasGroupQuery",void 0),c([p({readOnly:!0})],ge.prototype,"hasAPIKey",null),c([p()],ge.prototype,"hasCategorySchema",void 0),c([p()],ge.prototype,"hasClassificationSchema",void 0),c([p()],ge.prototype,"helpBase",void 0),c([p()],ge.prototype,"helperServices",void 0),c([p()],ge.prototype,"helpMap",void 0),c([p()],ge.prototype,"homePageFeaturedContent",void 0),c([p()],ge.prototype,"homePageFeaturedContentCount",void 0),c([p()],ge.prototype,"httpPort",void 0),c([p()],ge.prototype,"httpsPort",void 0),c([p()],ge.prototype,"id",void 0),c([p()],ge.prototype,"ipCntryCode",void 0),c([p({readOnly:!0})],ge.prototype,"isOrganization",null),c([p()],ge.prototype,"isPortal",void 0),c([p()],ge.prototype,"isReadOnly",void 0),c([p({readOnly:!0})],ge.prototype,"itemPageUrl",null),c([p()],ge.prototype,"layerTemplatesGroupQuery",void 0),c([p()],ge.prototype,"maxTokenExpirationMinutes",void 0),c([p({type:Date})],ge.prototype,"modified",void 0),c([p()],ge.prototype,"name",void 0),c([p()],ge.prototype,"portalHostname",void 0),c([p()],ge.prototype,"portalMode",void 0),c([p()],ge.prototype,"portalProperties",void 0),c([p()],ge.prototype,"region",void 0),c([p()],ge.prototype,"recycleBinEnabled",void 0),c([p({readOnly:!0})],ge.prototype,"restUrl",null),c([p()],ge.prototype,"rotatorPanels",void 0),c([p()],ge.prototype,"showHomePageDescription",void 0),c([p()],ge.prototype,"sourceJSON",void 0),c([p()],ge.prototype,"staticImagesUrl",void 0),c([p({json:{name:"2DStylesGroupQuery"}})],ge.prototype,"stylesGroupQuery2d",void 0),c([p({json:{name:"stylesGroupQuery"}})],ge.prototype,"stylesGroupQuery3d",void 0),c([p()],ge.prototype,"supportsHostedServices",void 0),c([p()],ge.prototype,"symbolSetsGroupQuery",void 0),c([p()],ge.prototype,"templatesGroupQuery",void 0),c([p()],ge.prototype,"thumbnail",void 0),c([p({readOnly:!0})],ge.prototype,"thumbnailUrl",null),c([p()],ge.prototype,"units",void 0),c([p()],ge.prototype,"url",void 0),c([p()],ge.prototype,"urlKey",void 0),c([pe("urlKey")],ge.prototype,"readUrlKey",null),c([p()],ge.prototype,"user",void 0),c([pe("user")],ge.prototype,"readUser",null),c([p()],ge.prototype,"use3dBasemaps",void 0),c([p()],ge.prototype,"useDefault3dBasemap",void 0),c([p()],ge.prototype,"useStandardizedQuery",void 0),c([p()],ge.prototype,"useVectorBasemaps",void 0),c([p()],ge.prototype,"vectorBasemapGalleryGroupQuery",void 0),ge=sn=c([I("esri.portal.Portal")],ge);const ts=ge,i8=new FinalizationRegistry(e=>{e.remove()});function xue(e){const t=Be;return()=>{const i=e.deref();i&&t.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let bl=class extends Me{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:r8(t.path,t.portalItem)}:t}set path(t){t!=null&&yn(t)?ae.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return r8(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",i){const r=this.cdnUrl;if(r==null)throw new B("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:t,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(t,i){const{addOrUpdateResources:r}=await D(()=>import("./resourceUtils-BaZOsZNx.js"),[]);return await r(this.portalItem,[{resource:this,content:t,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function r8(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&yn(e)&&(e=MP(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}c([p()],bl.prototype,"portalItem",void 0),c([p({type:String,value:null})],bl.prototype,"path",null),c([mt("path")],bl.prototype,"_castPath",null),c([p({type:String,readOnly:!0})],bl.prototype,"url",null),c([p({type:String,readOnly:!0})],bl.prototype,"cdnUrl",null),c([p({type:String,readOnly:!0})],bl.prototype,"itemRelativeUrl",null),bl=c([I("esri.portal.PortalItemResource")],bl);const Mue=bl;let H0=class extends Me{constructor(t){super(t),this.created=null,this.rating=null}};c([p({type:Date})],H0.prototype,"created",void 0),c([p()],H0.prototype,"rating",void 0),H0=c([I("esri.portal.PortalRating")],H0);const x3=H0;var Jd;const Aue=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),Iue=new Set(["KML","GeoJson","CSV"]);let Qe=Jd=class extends se.JSONSupportMixin(iu){static from(e){return T_(Jd,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Geocoding Service"?i="Locator":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?i=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="Raster function template"?i="Raster Function Template":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?i="Instant App":e==="Insights Page"?i="Insights Report":e==="Excalibur Imagery Project"?i="Excalibur Project":e==="3DTiles Service"?i="3D tiles layer":e==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(e){return e&&e.length?new Jt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var w;const e=((w=this.type)==null?void 0:w.toLowerCase())||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,n=!1,o=!1,l=!1,d=!1,h=!1,y=!1,v=!1,b=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(n=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),l=t.includes("Route Layer"),d=t.includes("Markup"),h=t.includes("Spatiotemporal"),y=t.includes("UtilityNetwork"),s=h&&o?"spatiotemporaltable":o?"table":l?"routelayer":d?"markup":h?"spatiotemporal":y?"utilitynetwork":n?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(h=t.includes("Spatiotemporal"),v=t.includes("Relational"),s=h||v?"mapimages":n||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):s=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?s="maps":e==="web scene"?s=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?s="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?s="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?s="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?s="datafiles":e==="360 vr experience"?s="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?s="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?s="addindesktop":e==="pdf"?s="pdf":e==="microsoft word"?s="word":e==="microsoft excel"?s="excel":e==="microsoft powerpoint"?s="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?s="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?s="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?s="layersgray":e==="analysis model"?s="analysismodel":e==="scene package"?s="scenepackage":e==="3dtiles package"?s="3dtileslayerpackage":e==="3dtiles service"?s="3dtileslayer":e==="mobile scene package"?s="mobilescenepackage":e==="tile package"||e==="compact tile package"?s="tilepackage":e==="task file"?s="taskfile":e==="report template"?s="report-template":e==="statistical data collection"?s="statisticaldatacollection":e==="insights workbook"?s="workbook":e==="insights model"?s="insightsmodel":e==="insights page"?s="insightspage":e==="insights theme"?s="insightstheme":e==="hub initiative"?s="hubinitiative":e==="hub page"?s="hubpage":e==="hub site application"?s="hubsite":e==="hub event"?s="hubevent":e==="hub project"?s="hubproject":e==="relational database connection"?s="relationaldatabaseconnection":e==="big data file share"?s="datastorecollection":e==="image collection"?s="imagecollection":e==="desktop style"?s="desktopstyle":e==="style"?s=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?s="dashboard":e==="raster function template"?s="rasterprocessingtemplate":e==="vector tile package"?s="vectortilepackage":e==="ortho mapping project"?s="orthomappingproject":e==="ortho mapping template"?s="orthomappingtemplate":e==="solution"?s="solutions":e==="geopackage"?s="geopackage":e==="deep learning package"?s="deeplearningpackage":e==="real time analytic"?s="realtimeanalytics":e==="reality mapping project"?s="realitymappingproject":e==="big data analytic"?s="bigdataanalytics":e==="feed"?s="feed":e==="excalibur imagery project"?s="excaliburimageryproject":e==="notebook"?s="notebook":e==="storymap"?s="storymap":e==="survey123 add in"?s="survey123addin":e==="mission"?s="mission":e==="mission report"?s="missionreport":e==="mission template"?s="missiontemplate":e==="quickcapture project"?s="quickcaptureproject":e==="pro report"?s="proreport":e==="pro report template"?s="proreporttemplate":e==="urban model"?s="urbanmodel":e==="urban project"?s="urbanproject":e==="web experience"?s="experiencebuilder":e==="web experience template"?s="webexperiencetemplate":e==="experience builder widget"?s="experiencebuilderwidget":e==="experience builder widget package"?s="experiencebuilderwidgetpackage":e==="workflow"?s="workflow":e==="kernel gateway connection"?s="kernelgatewayconnection":e==="insights script"?s="insightsscript":e==="hub initiative template"?s="hubinitiativetemplate":e==="storymap theme"?s="storymaptheme":e==="knowledge graph"?s="knowledgegraph":e==="knowledge graph layer"?s="knowledgegraphlayer":e==="knowledge studio project"?s="knowledgestudio":e==="native application"?s="nativeapp":e==="native application installer"?s="nativeappinstaller":e==="web link chart"?s="linkchart":e==="knowledge graph web investigation"?s="investigation":e==="ogcfeatureserver"?s="features":e==="pro presentation"?s="propresentation":e==="pro project"?s="proproject":e==="insights workbook package"?s="insightsworkbookpackage":e==="apache parquet"?s="apacheparquet":e==="notebook code snippet library"?s="notebookcodesnippets":e==="suitability model"?s="suitabilitymodel":e==="esri classifier definition"?s="classifierdefinition":e==="esri classification schema"?s="classificationschema":e==="insights data engineering workbook"?s="dataengineeringworkbook":e==="insights data engineering model"?s="dataengineeringmodel":e==="deep learning studio project"?s="deeplearningproject":e==="discussion"?s="discussion":e==="allsource project"?s="allsourceproject":e==="api key"?s="apikey":e==="data pipeline"?s="datapipelines":e==="group layer"?(b=t.includes("Map"),s=b?"layergroup2d":"layergroup"):s=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",s?oi(i+s+r+".png"):null}get isLayer(){return this.type!=null&&Aue.has(this.type)}get itemCdnUrl(){return RP(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const e=this.itemUrl,t=this.thumbnail;return e&&t?((i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var i,r,s;const e=(i=this.portal)==null?void 0:i.restUrl;if(!e)return null;const t=this.owner||((s=(r=this.portal)==null?void 0:r.user)==null?void 0:s.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=ts.getDefault()),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}},i=e instanceof x3?e.rating:e;return i==null||isNaN(i)||typeof e!="number"||(t.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new x3({rating:i,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:q(this.applicationProxies),avgRating:this.avgRating,categories:q(this.categories),classification:q(this.classification),created:q(this.created),culture:this.culture,description:this.description,extent:q(this.extent),groupCategories:q(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:q(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:q(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:q(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:q(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Jd({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]=(t=e[i])==null?void 0:t.join(", ");for(const i of["extent","classification"]){const r=e[i];r&&(e[i]=JSON.stringify(r))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new x3(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Jd)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new B("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new B("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:i}=this;await t.signIn();const{copyResources:r,folder:s,tags:n,title:o}=e||{},l={method:"post",query:{copyPrivateResources:r==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!r,tags:n==null?void 0:n.join(","),title:o}},{itemId:d}=await t.request(`${i}/copy`,l);return new Jd({id:d,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")Op(t)?r.query={data:t}:r.query={url:Hn(t)},i!=null&&(r.query.filename=i);else{const s=new FormData;i!=null?s.append("file",t,i):s.append("file",t),r.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new B("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:i}=await D(()=>import("./resourceUtils-BaZOsZNx.js"),[]);return i(this,e,t)}async addResource(e,t,i){const{addOrUpdateResources:r}=await D(()=>import("./resourceUtils-BaZOsZNx.js"),[]);return e.portalItem=this,await r(this,[{resource:e,content:t,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),e}async removeResource(e,t){const{removeResource:i}=await D(()=>import("./resourceUtils-BaZOsZNx.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new B("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await D(()=>import("./resourceUtils-BaZOsZNx.js"),[]);return t(this,e)}resourceFromPath(e){return new Mue({portalItem:this,path:e})}toJSON(){var i,r;const e=this.extent,t={accessInformation:this.accessInformation,categories:q(this.categories),classification:q(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:q(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:q(this.typeKeywords),url:this.url};return jse(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Jd({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};c([p({type:["private","shared","org","public"]})],Qe.prototype,"access",void 0),c([p()],Qe.prototype,"accessInformation",void 0),c([p({type:String})],Qe.prototype,"apiKey",void 0),c([p({json:{read:{source:"appProxies"}}})],Qe.prototype,"applicationProxies",void 0),c([p()],Qe.prototype,"avgRating",void 0),c([p()],Qe.prototype,"categories",void 0),c([p()],Qe.prototype,"classification",void 0),c([p({type:Date})],Qe.prototype,"created",void 0),c([p()],Qe.prototype,"culture",void 0),c([p()],Qe.prototype,"description",void 0),c([p({readOnly:!0})],Qe.prototype,"displayName",null),c([p({type:Jt})],Qe.prototype,"extent",void 0),c([pe("extent")],Qe.prototype,"readExtent",null),c([p()],Qe.prototype,"groupCategories",void 0),c([p({readOnly:!0})],Qe.prototype,"iconUrl",null),c([p()],Qe.prototype,"id",void 0),c([p({readOnly:!0})],Qe.prototype,"isLayer",null),c([p({type:Boolean,readOnly:!0})],Qe.prototype,"isOrgItem",void 0),c([p()],Qe.prototype,"itemControl",void 0),c([p({readOnly:!0})],Qe.prototype,"itemPageUrl",null),c([p({readOnly:!0})],Qe.prototype,"itemUrl",null),c([p()],Qe.prototype,"licenseInfo",void 0),c([p({type:Date})],Qe.prototype,"modified",void 0),c([p()],Qe.prototype,"name",void 0),c([p()],Qe.prototype,"numComments",void 0),c([p()],Qe.prototype,"numRatings",void 0),c([p()],Qe.prototype,"numViews",void 0),c([p()],Qe.prototype,"owner",void 0),c([p()],Qe.prototype,"ownerFolder",void 0),c([p({type:ts})],Qe.prototype,"portal",void 0),c([p()],Qe.prototype,"screenshots",void 0),c([p()],Qe.prototype,"size",void 0),c([p()],Qe.prototype,"snippet",void 0),c([p()],Qe.prototype,"sourceJSON",void 0),c([p({type:String})],Qe.prototype,"sourceUrl",void 0),c([p({type:String})],Qe.prototype,"spatialReference",void 0),c([p()],Qe.prototype,"tags",void 0),c([p()],Qe.prototype,"thumbnail",void 0),c([p({readOnly:!0})],Qe.prototype,"thumbnailUrl",null),c([p()],Qe.prototype,"title",void 0),c([p()],Qe.prototype,"type",void 0),c([p()],Qe.prototype,"typeKeywords",void 0),c([p({type:String,json:{read(e,t){var i;if(Iue.has(t.type)){const r=(i=this.portal)==null?void 0:i.restUrl;e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return e}}})],Qe.prototype,"url",void 0),c([p({readOnly:!0})],Qe.prototype,"userItemUrl",null),Qe=Jd=c([I("esri.portal.PortalItem")],Qe);const ob=Qe,MB=Object.freeze(Object.defineProperty({__proto__:null,default:ob},Symbol.toStringTag,{value:"Module"})),s8=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,AB={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function Cue(e){return e in AB}function n8(e){if(Cue(e)){const t=AB[e];return t===!0?e:t}return null}const W0=[],iy=new Map;function o8(e){for(const t of iy.keys())CB(e.pattern,t)&&iy.delete(t)}function Oue(e){return W0.includes(e)||(o8(e),W0.unshift(e)),bt(()=>{const t=W0.indexOf(e);t>-1&&(W0.splice(t,1),o8(e))})}async function YP(e){const t=Vs();iy.has(e)||iy.set(e,Lue(e,t));const i=iy.get(e);return i&&await Rue.add(i),i}function IB(e){if(!s8.test(e))return null;const t=s8.exec(e);if(t===null)return null;const[,i,r]=t;return n8(i+(r?"-"+r.toUpperCase():""))??n8(i)}async function Lue(e,t){const i=[];for(const r of W0)if(CB(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(s){i.push(s)}throw i.length?new B("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new B("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function CB(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}WP(()=>{iy.clear()});const Rue=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=bn())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Pue(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,i=await YP("esri/t9n/basemaps");return i[e]||i[t]}const XI={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return oi("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return oi("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return oi("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return oi("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return oi("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return oi("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return oi("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return oi("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return oi("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return oi("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return oi("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return oi("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return oi("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return oi("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return oi("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return oi("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return oi("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}},ka="system",Ep="unknown",Da="UTC",kue=Intl.DateTimeFormat().resolvedOptions().timeZone,a8=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Rp extends Error{}class Due extends Rp{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Nue extends Rp{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Fue extends Rp{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class jm extends Rp{}class OB extends Rp{constructor(t){super(`Invalid unit ${t}`)}}class Wr extends Rp{}class ju extends Rp{constructor(){super("Zone is an abstract class")}}const $e="numeric",Jo="short",gn="long",xE={year:$e,month:$e,day:$e},LB={year:$e,month:Jo,day:$e},Vue={year:$e,month:Jo,day:$e,weekday:Jo},RB={year:$e,month:gn,day:$e},PB={year:$e,month:gn,day:$e,weekday:gn},kB={hour:$e,minute:$e},DB={hour:$e,minute:$e,second:$e},NB={hour:$e,minute:$e,second:$e,timeZoneName:Jo},FB={hour:$e,minute:$e,second:$e,timeZoneName:gn},VB={hour:$e,minute:$e,hourCycle:"h23"},zB={hour:$e,minute:$e,second:$e,hourCycle:"h23"},jB={hour:$e,minute:$e,second:$e,hourCycle:"h23",timeZoneName:Jo},UB={hour:$e,minute:$e,second:$e,hourCycle:"h23",timeZoneName:gn},GB={year:$e,month:$e,day:$e,hour:$e,minute:$e},qB={year:$e,month:$e,day:$e,hour:$e,minute:$e,second:$e},BB={year:$e,month:Jo,day:$e,hour:$e,minute:$e},HB={year:$e,month:Jo,day:$e,hour:$e,minute:$e,second:$e},zue={year:$e,month:Jo,day:$e,weekday:Jo,hour:$e,minute:$e},WB={year:$e,month:gn,day:$e,hour:$e,minute:$e,timeZoneName:Jo},ZB={year:$e,month:gn,day:$e,hour:$e,minute:$e,second:$e,timeZoneName:Jo},YB={year:$e,month:gn,day:$e,weekday:gn,hour:$e,minute:$e,timeZoneName:gn},JB={year:$e,month:gn,day:$e,weekday:gn,hour:$e,minute:$e,second:$e,timeZoneName:gn};class Pp{get type(){throw new ju}get name(){throw new ju}get ianaName(){return this.name}get isUniversal(){throw new ju}offsetName(t,i){throw new ju}formatOffset(t,i){throw new ju}offset(t){throw new ju}equals(t){throw new ju}get isValid(){throw new ju}}let M3=null;class jT extends Pp{static get instance(){return M3===null&&(M3=new jT),M3}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return nH(t,i,r)}formatOffset(t,i){return ab(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let zS={};function jue(e){return zS[e]||(zS[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),zS[e]}const Uue={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Gue(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,n,o,l,d,h,y]=r;return[o,s,n,l,d,h,y]}function que(e,t){const i=e.formatToParts(t),r=[];for(let s=0;s<i.length;s++){const{type:n,value:o}=i[s],l=Uue[n];n==="era"?r[l]=o:it(l)||(r[l]=parseInt(o,10))}return r}let xw={};class Gs extends Pp{static create(t){return xw[t]||(xw[t]=new Gs(t)),xw[t]}static resetCache(){xw={},zS={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Gs.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return nH(t,i,r,this.name)}formatOffset(t,i){return ab(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const r=jue(this.name);let[s,n,o,l,d,h,y]=r.formatToParts?que(r,i):Gue(r,i);l==="BC"&&(s=-Math.abs(s)+1);const b=GT({year:s,month:n,day:o,hour:d===24?0:d,minute:h,second:y,millisecond:0});let w=+i;const E=w%1e3;return w-=E>=0?E:1e3+E,(b-w)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let l8={};function Bue(e,t={}){const i=JSON.stringify([e,t]);let r=l8[i];return r||(r=new Intl.ListFormat(e,t),l8[i]=r),r}let QI={};function KI(e,t={}){const i=JSON.stringify([e,t]);let r=QI[i];return r||(r=new Intl.DateTimeFormat(e,t),QI[i]=r),r}let eC={};function Hue(e,t={}){const i=JSON.stringify([e,t]);let r=eC[i];return r||(r=new Intl.NumberFormat(e,t),eC[i]=r),r}let tC={};function Wue(e,t={}){const{base:i,...r}=t,s=JSON.stringify([e,r]);let n=tC[s];return n||(n=new Intl.RelativeTimeFormat(e,t),tC[s]=n),n}let Z0=null;function Zue(){return Z0||(Z0=new Intl.DateTimeFormat().resolvedOptions().locale,Z0)}let u8={};function Yue(e){let t=u8[e];if(!t){const i=new Intl.Locale(e);t="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,u8[e]=t}return t}function Jue(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const i=e.indexOf("-u-");if(i===-1)return[e];{let r,s;try{r=KI(e).resolvedOptions(),s=e}catch{const d=e.substring(0,i);r=KI(d).resolvedOptions(),s=d}const{numberingSystem:n,calendar:o}=r;return[s,n,o]}}function Xue(e,t,i){return(i||t)&&(e.includes("-u-")||(e+="-u"),i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function Que(e){const t=[];for(let i=1;i<=12;i++){const r=ke.utc(2009,i,1);t.push(e(r))}return t}function Kue(e){const t=[];for(let i=1;i<=7;i++){const r=ke.utc(2016,11,13+i);t.push(e(r))}return t}function Mw(e,t,i,r){const s=e.listingMode();return s==="error"?null:s==="en"?i(t):r(t)}function ece(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class tce{constructor(t,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:n,...o}=r;if(!i||Object.keys(o).length>0){const l={useGrouping:!1,...r};r.padTo>0&&(l.minimumIntegerDigits=r.padTo),this.inf=Hue(t,l)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):ek(t,3);return Hi(i,this.padTo)}}}class ice{constructor(t,i,r){this.opts=r,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Gs.create(l).valid?(s=l,this.dt=t):(s="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,s=t.zone.name):(s="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=KI(i,n)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class rce{constructor(t,i,r){this.opts={style:"long",...r},!i&&rH()&&(this.rtf=Wue(t,r))}format(t,i){return this.rtf?this.rtf.format(t,i):xce(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}const sce={firstDay:1,minimalDays:4,weekend:[6,7]};class Dt{static fromOpts(t){return Dt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,i,r,s,n=!1){const o=t||Oi.defaultLocale,l=o||(n?"en-US":Zue()),d=i||Oi.defaultNumberingSystem,h=r||Oi.defaultOutputCalendar,y=iC(s)||Oi.defaultWeekSettings;return new Dt(l,d,h,y,o)}static resetCache(){Z0=null,QI={},eC={},tC={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:r,weekSettings:s}={}){return Dt.create(t,i,r,s)}constructor(t,i,r,s,n){const[o,l,d]=Jue(t);this.locale=o,this.numberingSystem=i||l||null,this.outputCalendar=r||d||null,this.weekSettings=s,this.intl=Xue(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=ece(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Dt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,iC(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1){return Mw(this,t,lH,()=>{const r=i?{month:t,day:"numeric"}:{month:t},s=i?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=Que(n=>this.extract(n,r,"month"))),this.monthsCache[s][t]})}weekdays(t,i=!1){return Mw(this,t,dH,()=>{const r=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=i?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=Kue(n=>this.extract(n,r,"weekday"))),this.weekdaysCache[s][t]})}meridiems(){return Mw(this,void 0,()=>hH,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ke.utc(2016,11,13,9),ke.utc(2016,11,13,19)].map(i=>this.extract(i,t,"dayperiod"))}return this.meridiemCache})}eras(t){return Mw(this,t,pH,()=>{const i={era:t};return this.eraCache[t]||(this.eraCache[t]=[ke.utc(-40,1,1),ke.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[t]})}extract(t,i,r){const s=this.dtFormatter(t,i),n=s.formatToParts(),o=n.find(l=>l.type.toLowerCase()===r);return o?o.value:null}numberFormatter(t={}){return new tce(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new ice(t,this.intl,i)}relFormatter(t={}){return new rce(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Bue(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:sH()?Yue(this.locale):sce}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let A3=null;class Sr extends Pp{static get utcInstance(){return A3===null&&(A3=new Sr(0)),A3}static instance(t){return t===0?Sr.utcInstance:new Sr(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Sr(qT(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ab(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ab(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return ab(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class nce extends Pp{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Cc(e,t){if(it(e)||e===null)return t;if(e instanceof Pp)return e;if(dce(e)){const i=e.toLowerCase();return i==="default"?t:i==="local"||i==="system"?jT.instance:i==="utc"||i==="gmt"?Sr.utcInstance:Sr.parseSpecifier(i)||Gs.create(e)}else return jc(e)?Sr.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new nce(e)}const JP={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},c8={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},oce=JP.hanidec.replace(/[\[|\]]/g,"").split("");function ace(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(e[i].search(JP.hanidec)!==-1)t+=oce.indexOf(e[i]);else for(const s in c8){const[n,o]=c8[s];r>=n&&r<=o&&(t+=r-n)}}return parseInt(t,10)}else return t}let Jf={};function lce(){Jf={}}function fo({numberingSystem:e},t=""){const i=e||"latn";return Jf[i]||(Jf[i]={}),Jf[i][t]||(Jf[i][t]=new RegExp(`${JP[i]}${t}`)),Jf[i][t]}let d8=()=>Date.now(),h8="system",p8=null,f8=null,m8=null,y8=60,g8,v8=null;class Oi{static get now(){return d8}static set now(t){d8=t}static set defaultZone(t){h8=t}static get defaultZone(){return Cc(h8,jT.instance)}static get defaultLocale(){return p8}static set defaultLocale(t){p8=t}static get defaultNumberingSystem(){return f8}static set defaultNumberingSystem(t){f8=t}static get defaultOutputCalendar(){return m8}static set defaultOutputCalendar(t){m8=t}static get defaultWeekSettings(){return v8}static set defaultWeekSettings(t){v8=iC(t)}static get twoDigitCutoffYear(){return y8}static set twoDigitCutoffYear(t){y8=t%100}static get throwOnInvalid(){return g8}static set throwOnInvalid(t){g8=t}static resetCaches(){Dt.resetCache(),Gs.resetCache(),ke.resetCache(),lce()}}class Uo{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const XB=[0,31,59,90,120,151,181,212,243,273,304,334],QB=[0,31,60,91,121,152,182,213,244,274,305,335];function Zn(e,t){return new Uo("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function XP(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function KB(e,t,i){return i+(C_(e)?QB:XB)[t-1]}function eH(e,t){const i=C_(e)?QB:XB,r=i.findIndex(n=>n<t),s=t-i[r];return{month:r+1,day:s}}function QP(e,t){return(e-t+7)%7+1}function ME(e,t=4,i=1){const{year:r,month:s,day:n}=e,o=KB(r,s,n),l=QP(XP(r,s,n),i);let d=Math.floor((o-l+14-t)/7),h;return d<1?(h=r-1,d=jb(h,t,i)):d>jb(r,t,i)?(h=r+1,d=1):h=r,{weekYear:h,weekNumber:d,weekday:l,...BT(e)}}function b8(e,t=4,i=1){const{weekYear:r,weekNumber:s,weekday:n}=e,o=QP(XP(r,1,t),i),l=ry(r);let d=s*7+n-o-7+t,h;d<1?(h=r-1,d+=ry(h)):d>l?(h=r+1,d-=ry(r)):h=r;const{month:y,day:v}=eH(h,d);return{year:h,month:y,day:v,...BT(e)}}function I3(e){const{year:t,month:i,day:r}=e,s=KB(t,i,r);return{year:t,ordinal:s,...BT(e)}}function _8(e){const{year:t,ordinal:i}=e,{month:r,day:s}=eH(t,i);return{year:t,month:r,day:s,...BT(e)}}function w8(e,t){if(!it(e.localWeekday)||!it(e.localWeekNumber)||!it(e.localWeekYear)){if(!it(e.weekday)||!it(e.weekNumber)||!it(e.weekYear))throw new jm("Cannot mix locale-based week fields with ISO-based week fields");return it(e.localWeekday)||(e.weekday=e.localWeekday),it(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),it(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function uce(e,t=4,i=1){const r=UT(e.weekYear),s=Yn(e.weekNumber,1,jb(e.weekYear,t,i)),n=Yn(e.weekday,1,7);return r?s?n?!1:Zn("weekday",e.weekday):Zn("week",e.weekNumber):Zn("weekYear",e.weekYear)}function cce(e){const t=UT(e.year),i=Yn(e.ordinal,1,ry(e.year));return t?i?!1:Zn("ordinal",e.ordinal):Zn("year",e.year)}function tH(e){const t=UT(e.year),i=Yn(e.month,1,12),r=Yn(e.day,1,AE(e.year,e.month));return t?i?r?!1:Zn("day",e.day):Zn("month",e.month):Zn("year",e.year)}function iH(e){const{hour:t,minute:i,second:r,millisecond:s}=e,n=Yn(t,0,23)||t===24&&i===0&&r===0&&s===0,o=Yn(i,0,59),l=Yn(r,0,59),d=Yn(s,0,999);return n?o?l?d?!1:Zn("millisecond",s):Zn("second",r):Zn("minute",i):Zn("hour",t)}function it(e){return typeof e>"u"}function jc(e){return typeof e=="number"}function UT(e){return typeof e=="number"&&e%1===0}function dce(e){return typeof e=="string"}function hce(e){return Object.prototype.toString.call(e)==="[object Date]"}function rH(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function sH(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function pce(e){return Array.isArray(e)?e:[e]}function S8(e,t,i){if(e.length!==0)return e.reduce((r,s)=>{const n=[t(s),s];return r&&i(r[0],n[0])===r[0]?r:n},null)[1]}function fce(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}function Ay(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function iC(e){if(e==null)return null;if(typeof e!="object")throw new Wr("Week settings must be an object");if(!Yn(e.firstDay,1,7)||!Yn(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Yn(t,1,7)))throw new Wr("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Yn(e,t,i){return UT(e)&&e>=t&&e<=i}function mce(e,t){return e-t*Math.floor(e/t)}function Hi(e,t=2){const i=e<0;let r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function Ec(e){if(!(it(e)||e===null||e===""))return parseInt(e,10)}function Dd(e){if(!(it(e)||e===null||e===""))return parseFloat(e)}function KP(e){if(!(it(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function ek(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function C_(e){return e%4===0&&(e%100!==0||e%400===0)}function ry(e){return C_(e)?366:365}function AE(e,t){const i=mce(t-1,12)+1,r=e+(t-i)/12;return i===2?C_(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function GT(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function E8(e,t,i){return-QP(XP(e,1,t),i)+t-1}function jb(e,t=4,i=1){const r=E8(e,t,i),s=E8(e+1,t,i);return(ry(e)-r+s)/7}function rC(e){return e>99?e:e>Oi.twoDigitCutoffYear?1900+e:2e3+e}function nH(e,t,i,r=null){const s=new Date(e),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(n.timeZone=r);const o={timeZoneName:t,...n},l=new Intl.DateTimeFormat(i,o).formatToParts(s).find(d=>d.type.toLowerCase()==="timezonename");return l?l.value:null}function qT(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function oH(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Wr(`Invalid unit value ${e}`);return t}function IE(e,t){const i={};for(const r in e)if(Ay(e,r)){const s=e[r];if(s==null)continue;i[t(r)]=oH(s)}return i}function ab(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${Hi(i,2)}:${Hi(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${Hi(i,2)}${Hi(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function BT(e){return fce(e,["hour","minute","second","millisecond"])}const yce=["January","February","March","April","May","June","July","August","September","October","November","December"],aH=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],gce=["J","F","M","A","M","J","J","A","S","O","N","D"];function lH(e){switch(e){case"narrow":return[...gce];case"short":return[...aH];case"long":return[...yce];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const uH=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],cH=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],vce=["M","T","W","T","F","S","S"];function dH(e){switch(e){case"narrow":return[...vce];case"short":return[...cH];case"long":return[...uH];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const hH=["AM","PM"],bce=["Before Christ","Anno Domini"],_ce=["BC","AD"],wce=["B","A"];function pH(e){switch(e){case"narrow":return[...wce];case"short":return[..._ce];case"long":return[...bce];default:return null}}function Sce(e){return hH[e.hour<12?0:1]}function Ece(e,t){return dH(t)[e.weekday-1]}function Tce(e,t){return lH(t)[e.month-1]}function $ce(e,t){return pH(t)[e.year<0?0:1]}function xce(e,t,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&n){const v=e==="days";switch(t){case 1:return v?"tomorrow":`next ${s[e][0]}`;case-1:return v?"yesterday":`last ${s[e][0]}`;case 0:return v?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,l=Math.abs(t),d=l===1,h=s[e],y=r?d?h[1]:h[2]||h[1]:d?s[e][0]:e;return o?`${l} ${y} ago`:`in ${l} ${y}`}function T8(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const Mce={D:xE,DD:LB,DDD:RB,DDDD:PB,t:kB,tt:DB,ttt:NB,tttt:FB,T:VB,TT:zB,TTT:jB,TTTT:UB,f:GB,ff:BB,fff:WB,ffff:YB,F:qB,FF:HB,FFF:ZB,FFFF:JB};class Xr{static create(t,i={}){return new Xr(t,i)}static parseFormat(t){let i=null,r="",s=!1;const n=[];for(let o=0;o<t.length;o++){const l=t.charAt(o);l==="'"?(r.length>0&&n.push({literal:s||/^\s+$/.test(r),val:r}),i=null,r="",s=!s):s||l===i?r+=l:(r.length>0&&n.push({literal:/^\s+$/.test(r),val:r}),r=l,i=l)}return r.length>0&&n.push({literal:s||/^\s+$/.test(r),val:r}),n}static macroTokenToFormatOpts(t){return Mce[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}dtFormatter(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i})}formatDateTime(t,i){return this.dtFormatter(t,i).format()}formatDateTimeParts(t,i){return this.dtFormatter(t,i).formatToParts()}formatInterval(t,i){return this.dtFormatter(t.start,i).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,i){return this.dtFormatter(t,i).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return Hi(t,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(w,E)=>this.loc.extract(t,w,E),o=w=>t.isOffsetFixed&&t.offset===0&&w.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,w.format):"",l=()=>r?Sce(t):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),d=(w,E)=>r?Tce(t,w):n(E?{month:w}:{month:w,day:"numeric"},"month"),h=(w,E)=>r?Ece(t,w):n(E?{weekday:w}:{weekday:w,month:"long",day:"numeric"},"weekday"),y=w=>{const E=Xr.macroTokenToFormatOpts(w);return E?this.formatWithSystemDefault(t,E):w},v=w=>r?$ce(t,w):n({era:w},"era"),b=w=>{switch(w){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return l();case"d":return s?n({day:"numeric"},"day"):this.num(t.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return d("short",!0);case"LLLL":return d("long",!0);case"LLLLL":return d("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(t.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return d("short",!1);case"MMMM":return d("long",!1);case"MMMMM":return d("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(t.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(t.year,6);case"G":return v("short");case"GG":return v("long");case"GGGGG":return v("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return y(w)}};return T8(Xr.parseFormat(i),b)}formatDurationFromString(t,i){const r=d=>{switch(d[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=d=>h=>{const y=r(h);return y?this.num(d.get(y),h.length):h},n=Xr.parseFormat(i),o=n.reduce((d,{literal:h,val:y})=>h?d:d.concat(y),[]),l=t.shiftTo(...o.map(r).filter(d=>d));return T8(n,s(l))}}const fH=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Yy(...e){const t=e.reduce((i,r)=>i+r.source,"");return RegExp(`^${t}$`)}function Jy(...e){return t=>e.reduce(([i,r,s],n)=>{const[o,l,d]=n(t,s);return[{...i,...o},l||r,d]},[{},null,1]).slice(0,2)}function Xy(e,...t){if(e==null)return[null,null];for(const[i,r]of t){const s=i.exec(e);if(s)return r(s)}return[null,null]}function mH(...e){return(t,i)=>{const r={};let s;for(s=0;s<e.length;s++)r[e[s]]=Ec(t[i+s]);return[r,null,i+s]}}const yH=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ace=`(?:${yH.source}?(?:\\[(${fH.source})\\])?)?`,tk=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,gH=RegExp(`${tk.source}${Ace}`),ik=RegExp(`(?:T${gH.source})?`),Ice=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Cce=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Oce=/(\d{4})-?(\d{3})/,Lce=mH("weekYear","weekNumber","weekDay"),Rce=mH("year","ordinal"),Pce=/(\d{4})-(\d\d)-(\d\d)/,vH=RegExp(`${tk.source} ?(?:${yH.source}|(${fH.source}))?`),kce=RegExp(`(?: ${vH.source})?`);function sy(e,t,i){const r=e[t];return it(r)?i:Ec(r)}function Dce(e,t){return[{year:sy(e,t),month:sy(e,t+1,1),day:sy(e,t+2,1)},null,t+3]}function Qy(e,t){return[{hours:sy(e,t,0),minutes:sy(e,t+1,0),seconds:sy(e,t+2,0),milliseconds:KP(e[t+3])},null,t+4]}function O_(e,t){const i=!e[t]&&!e[t+1],r=qT(e[t+1],e[t+2]),s=i?null:Sr.instance(r);return[{},s,t+3]}function L_(e,t){const i=e[t]?Gs.create(e[t]):null;return[{},i,t+1]}const Nce=RegExp(`^T?${tk.source}$`),Fce=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Vce(e){const[t,i,r,s,n,o,l,d,h]=e,y=t[0]==="-",v=d&&d[0]==="-",b=(w,E=!1)=>w!==void 0&&(E||w&&y)?-w:w;return[{years:b(Dd(i)),months:b(Dd(r)),weeks:b(Dd(s)),days:b(Dd(n)),hours:b(Dd(o)),minutes:b(Dd(l)),seconds:b(Dd(d),d==="-0"),milliseconds:b(KP(h),v)}]}const zce={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function rk(e,t,i,r,s,n,o){const l={year:t.length===2?rC(Ec(t)):Ec(t),month:aH.indexOf(i)+1,day:Ec(r),hour:Ec(s),minute:Ec(n)};return o&&(l.second=Ec(o)),e&&(l.weekday=e.length>3?uH.indexOf(e)+1:cH.indexOf(e)+1),l}const jce=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Uce(e){const[,t,i,r,s,n,o,l,d,h,y,v]=e,b=rk(t,s,r,i,n,o,l);let w;return d?w=zce[d]:h?w=0:w=qT(y,v),[b,new Sr(w)]}function Gce(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const qce=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Bce=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Hce=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function $8(e){const[,t,i,r,s,n,o,l]=e;return[rk(t,s,r,i,n,o,l),Sr.utcInstance]}function Wce(e){const[,t,i,r,s,n,o,l]=e;return[rk(t,l,i,r,s,n,o),Sr.utcInstance]}const Zce=Yy(Ice,ik),Yce=Yy(Cce,ik),Jce=Yy(Oce,ik),Xce=Yy(gH),bH=Jy(Dce,Qy,O_,L_),Qce=Jy(Lce,Qy,O_,L_),Kce=Jy(Rce,Qy,O_,L_),ede=Jy(Qy,O_,L_);function tde(e){return Xy(e,[Zce,bH],[Yce,Qce],[Jce,Kce],[Xce,ede])}function ide(e){return Xy(Gce(e),[jce,Uce])}function rde(e){return Xy(e,[qce,$8],[Bce,$8],[Hce,Wce])}function sde(e){return Xy(e,[Fce,Vce])}const nde=Jy(Qy);function ode(e){return Xy(e,[Nce,nde])}const ade=Yy(Pce,kce),lde=Yy(vH),ude=Jy(Qy,O_,L_);function cde(e){return Xy(e,[ade,bH],[lde,ude])}const x8="Invalid Duration",_H={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},dde={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},..._H},On=146097/400,Mf=146097/4800,hde={years:{quarters:4,months:12,weeks:On/7,days:On,hours:On*24,minutes:On*24*60,seconds:On*24*60*60,milliseconds:On*24*60*60*1e3},quarters:{months:3,weeks:On/28,days:On/4,hours:On*24/4,minutes:On*24*60/4,seconds:On*24*60*60/4,milliseconds:On*24*60*60*1e3/4},months:{weeks:Mf/7,days:Mf,hours:Mf*24,minutes:Mf*24*60,seconds:Mf*24*60*60,milliseconds:Mf*24*60*60*1e3},..._H},Kh=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],pde=Kh.slice(0).reverse();function Uu(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Et(r)}function wH(e,t){let i=t.milliseconds??0;for(const r of pde.slice(1))t[r]&&(i+=t[r]*e[r].milliseconds);return i}function M8(e,t){const i=wH(e,t)<0?-1:1;Kh.reduceRight((r,s)=>{if(it(t[s]))return r;if(r){const n=t[r]*i,o=e[s][r],l=Math.floor(n/o);t[s]+=l*i,t[r]-=l*o*i}return s},null),Kh.reduce((r,s)=>{if(it(t[s]))return r;if(r){const n=t[r]%1;t[r]-=n,t[s]+=n*e[r][s]}return s},null)}function fde(e){const t={};for(const[i,r]of Object.entries(e))r!==0&&(t[i]=r);return t}class Et{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;let r=i?hde:dde;t.matrix&&(r=t.matrix),this.values=t.values,this.loc=t.loc||Dt.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(t,i){return Et.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new Wr(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Et({values:IE(t,Et.normalizeUnit),loc:Dt.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(t){if(jc(t))return Et.fromMillis(t);if(Et.isDuration(t))return t;if(typeof t=="object")return Et.fromObject(t);throw new Wr(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[r]=sde(t);return r?Et.fromObject(r,i):Et.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[r]=ode(t);return r?Et.fromObject(r,i):Et.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new Wr("need to specify a reason the Duration is invalid");const r=t instanceof Uo?t:new Uo(t,i);if(Oi.throwOnInvalid)throw new Fue(r);return new Et({invalid:r})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new OB(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Xr.create(this.loc,r).formatDurationFromString(this,t):x8}toHuman(t={}){if(!this.isValid)return x8;const i=Kh.map(r=>{const s=this.values[r];return it(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(s)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=ek(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},ke.fromMillis(i,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?wH(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=Et.fromDurationLike(t),r={};for(const s of Kh)(Ay(i.values,s)||Ay(this.values,s))&&(r[s]=i.get(s)+this.get(s));return Uu(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const i=Et.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=oH(t(this.values[r],r));return Uu(this,{values:i},!0)}get(t){return this[Et.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...IE(t,Et.normalizeUnit)};return Uu(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:r,matrix:s}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:i}),matrix:s,conversionAccuracy:r};return Uu(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return M8(this.matrix,t),Uu(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=fde(this.normalize().shiftToAll().toObject());return Uu(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Et.normalizeUnit(o));const i={},r={},s=this.toObject();let n;for(const o of Kh)if(t.indexOf(o)>=0){n=o;let l=0;for(const h in r)l+=this.matrix[h][o]*r[h],r[h]=0;jc(s[o])&&(l+=s[o]);const d=Math.trunc(l);i[o]=d,r[o]=(l*1e3-d*1e3)/1e3}else jc(s[o])&&(r[o]=s[o]);for(const o in r)r[o]!==0&&(i[n]+=o===n?r[o]:r[o]/this.matrix[n][o]);return M8(this.matrix,i),Uu(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return Uu(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of Kh)if(!i(this.values[r],t.values[r]))return!1;return!0}}const Af="Invalid Interval";function mde(e,t){return!e||!e.isValid?Ii.invalid("missing or invalid start"):!t||!t.isValid?Ii.invalid("missing or invalid end"):t<e?Ii.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Ii{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new Wr("need to specify a reason the Interval is invalid");const r=t instanceof Uo?t:new Uo(t,i);if(Oi.throwOnInvalid)throw new Nue(r);return new Ii({invalid:r})}static fromDateTimes(t,i){const r=m0(t),s=m0(i),n=mde(r,s);return n??new Ii({start:r,end:s})}static after(t,i){const r=Et.fromDurationLike(i),s=m0(t);return Ii.fromDateTimes(s,s.plus(r))}static before(t,i){const r=Et.fromDurationLike(i),s=m0(t);return Ii.fromDateTimes(s.minus(r),s)}static fromISO(t,i){const[r,s]=(t||"").split("/",2);if(r&&s){let n,o;try{n=ke.fromISO(r,i),o=n.isValid}catch{o=!1}let l,d;try{l=ke.fromISO(s,i),d=l.isValid}catch{d=!1}if(o&&d)return Ii.fromDateTimes(n,l);if(o){const h=Et.fromISO(s,i);if(h.isValid)return Ii.after(n,h)}else if(d){const h=Et.fromISO(r,i);if(h.isValid)return Ii.before(l,h)}}return Ii.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(t,i);let s;return i!=null&&i.useLocaleWeeks?s=this.end.reconfigure({locale:r.locale}):s=this.end,s=s.startOf(t,i),Math.floor(s.diff(r,t).get(t))+(s.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?Ii.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(m0).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),r=[];let{s}=this,n=0;for(;s<this.e;){const o=i[n]||this.e,l=+o>+this.e?this.e:o;r.push(Ii.fromDateTimes(s,l)),s=l,n+=1}return r}splitBy(t){const i=Et.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,n;const o=[];for(;r<this.e;){const l=this.start.plus(i.mapUnits(d=>d*s));n=+l>+this.e?this.e:l,o.push(Ii.fromDateTimes(r,n)),r=n,s+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return i>=r?null:Ii.fromDateTimes(i,r)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return Ii.fromDateTimes(i,r)}static merge(t){const[i,r]=t.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return r&&i.push(r),i}static xor(t){let i=null,r=0;const s=[],n=t.map(d=>[{time:d.s,type:"s"},{time:d.e,type:"e"}]),o=Array.prototype.concat(...n),l=o.sort((d,h)=>d.time-h.time);for(const d of l)r+=d.type==="s"?1:-1,r===1?i=d.time:(i&&+i!=+d.time&&s.push(Ii.fromDateTimes(i,d.time)),i=null);return Ii.merge(s)}difference(...t){return Ii.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Af}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=xE,i={}){return this.isValid?Xr.create(this.s.loc.clone(i),t).formatInterval(this):Af}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Af}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Af}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Af}toFormat(t,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:Af}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):Et.invalid(this.invalidReason)}mapEndpoints(t){return Ii.fromDateTimes(t(this.s),t(this.e))}}class Aw{static hasDST(t=Oi.defaultZone){const i=ke.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return Gs.isValidZone(t)}static normalizeZone(t){return Cc(t,Oi.defaultZone)}static getStartOfWeek({locale:t=null,locObj:i=null}={}){return(i||Dt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:i=null}={}){return(i||Dt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:i=null}={}){return(i||Dt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Dt.create(i,r,n)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Dt.create(i,r,n)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Dt.create(i,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Dt.create(i,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Dt.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return Dt.create(i,null,"gregory").eras(t)}static features(){return{relative:rH(),localeWeek:sH()}}}function A8(e,t){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(Et.fromMillis(r).as("days"))}function yde(e,t,i){const r=[["years",(d,h)=>h.year-d.year],["quarters",(d,h)=>h.quarter-d.quarter+(h.year-d.year)*4],["months",(d,h)=>h.month-d.month+(h.year-d.year)*12],["weeks",(d,h)=>{const y=A8(d,h);return(y-y%7)/7}],["days",A8]],s={},n=e;let o,l;for(const[d,h]of r)i.indexOf(d)>=0&&(o=d,s[d]=h(e,t),l=n.plus(s),l>t?(s[d]--,e=n.plus(s),e>t&&(l=e,s[d]--,e=n.plus(s))):e=l);return[e,s,l,o]}function gde(e,t,i,r){let[s,n,o,l]=yde(e,t,i);const d=t-s,h=i.filter(v=>["hours","minutes","seconds","milliseconds"].indexOf(v)>=0);h.length===0&&(o<t&&(o=s.plus({[l]:1})),o!==s&&(n[l]=(n[l]||0)+d/(o-s)));const y=Et.fromObject(n,r);return h.length>0?Et.fromMillis(d,r).shiftTo(...h).plus(y):y}const vde="missing Intl.DateTimeFormat.formatToParts support";function Ot(e,t=i=>i){return{regex:e,deser:([i])=>t(ace(i))}}const bde="",SH=`[ ${bde}]`,EH=new RegExp(SH,"g");function _de(e){return e.replace(/\./g,"\\.?").replace(EH,SH)}function I8(e){return e.replace(/\./g,"").replace(EH," ").toLowerCase()}function mo(e,t){return e===null?null:{regex:RegExp(e.map(_de).join("|")),deser:([i])=>e.findIndex(r=>I8(i)===I8(r))+t}}function C8(e,t){return{regex:e,deser:([,i,r])=>qT(i,r),groups:t}}function Iw(e){return{regex:e,deser:([t])=>t}}function wde(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Sde(e,t){const i=fo(t),r=fo(t,"{2}"),s=fo(t,"{3}"),n=fo(t,"{4}"),o=fo(t,"{6}"),l=fo(t,"{1,2}"),d=fo(t,"{1,3}"),h=fo(t,"{1,6}"),y=fo(t,"{1,9}"),v=fo(t,"{2,4}"),b=fo(t,"{4,6}"),w=$=>({regex:RegExp(wde($.val)),deser:([A])=>A,literal:!0}),T=($=>{if(e.literal)return w($);switch($.val){case"G":return mo(t.eras("short"),0);case"GG":return mo(t.eras("long"),0);case"y":return Ot(h);case"yy":return Ot(v,rC);case"yyyy":return Ot(n);case"yyyyy":return Ot(b);case"yyyyyy":return Ot(o);case"M":return Ot(l);case"MM":return Ot(r);case"MMM":return mo(t.months("short",!0),1);case"MMMM":return mo(t.months("long",!0),1);case"L":return Ot(l);case"LL":return Ot(r);case"LLL":return mo(t.months("short",!1),1);case"LLLL":return mo(t.months("long",!1),1);case"d":return Ot(l);case"dd":return Ot(r);case"o":return Ot(d);case"ooo":return Ot(s);case"HH":return Ot(r);case"H":return Ot(l);case"hh":return Ot(r);case"h":return Ot(l);case"mm":return Ot(r);case"m":return Ot(l);case"q":return Ot(l);case"qq":return Ot(r);case"s":return Ot(l);case"ss":return Ot(r);case"S":return Ot(d);case"SSS":return Ot(s);case"u":return Iw(y);case"uu":return Iw(l);case"uuu":return Ot(i);case"a":return mo(t.meridiems(),0);case"kkkk":return Ot(n);case"kk":return Ot(v,rC);case"W":return Ot(l);case"WW":return Ot(r);case"E":case"c":return Ot(i);case"EEE":return mo(t.weekdays("short",!1),1);case"EEEE":return mo(t.weekdays("long",!1),1);case"ccc":return mo(t.weekdays("short",!0),1);case"cccc":return mo(t.weekdays("long",!0),1);case"Z":case"ZZ":return C8(new RegExp(`([+-]${l.source})(?::(${r.source}))?`),2);case"ZZZ":return C8(new RegExp(`([+-]${l.source})(${r.source})?`),2);case"z":return Iw(/[a-z_+-/]{1,256}?/i);case" ":return Iw(/[^\S\n\r]/);default:return w($)}})(e)||{invalidReason:vde};return T.token=e,T}const Ede={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Tde(e,t,i){const{type:r,value:s}=e;if(r==="literal"){const d=/^\s+$/.test(s);return{literal:!d,val:d?" ":s}}const n=t[r];let o=r;r==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let l=Ede[o];if(typeof l=="object"&&(l=l[n]),l)return{literal:!1,val:l}}function $de(e){return[`^${e.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,e]}function xde(e,t,i){const r=e.match(t);if(r){const s={};let n=1;for(const o in i)if(Ay(i,o)){const l=i[o],d=l.groups?l.groups+1:1;!l.literal&&l.token&&(s[l.token.val[0]]=l.deser(r.slice(n,n+d))),n+=d}return[r,s]}else return[r,{}]}function Mde(e){const t=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return it(e.z)||(i=Gs.create(e.z)),it(e.Z)||(i||(i=new Sr(e.Z)),r=e.Z),it(e.q)||(e.M=(e.q-1)*3+1),it(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),it(e.u)||(e.S=KP(e.u)),[Object.keys(e).reduce((n,o)=>{const l=t(o);return l&&(n[l]=e[o]),n},{}),i,r]}let C3=null;function Ade(){return C3||(C3=ke.fromMillis(1555555555555)),C3}function Ide(e,t){if(e.literal)return e;const i=Xr.macroTokenToFormatOpts(e.val),r=MH(i,t);return r==null||r.includes(void 0)?e:r}function TH(e,t){return Array.prototype.concat(...e.map(i=>Ide(i,t)))}class $H{constructor(t,i){if(this.locale=t,this.format=i,this.tokens=TH(Xr.parseFormat(i),t),this.units=this.tokens.map(r=>Sde(r,t)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,s]=$de(this.units);this.regex=RegExp(r,"i"),this.handlers=s}}explainFromTokens(t){if(this.isValid){const[i,r]=xde(t,this.regex,this.handlers),[s,n,o]=r?Mde(r):[null,null,void 0];if(Ay(r,"a")&&Ay(r,"H"))throw new jm("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:s,zone:n,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function xH(e,t,i){return new $H(e,i).explainFromTokens(t)}function Cde(e,t,i){const{result:r,zone:s,specificOffset:n,invalidReason:o}=xH(e,t,i);return[r,s,n,o]}function MH(e,t){if(!e)return null;const r=Xr.create(t,e).dtFormatter(Ade()),s=r.formatToParts(),n=r.resolvedOptions();return s.map(o=>Tde(o,e,n))}const O3="Invalid DateTime",Ode=864e13;function Y0(e){return new Uo("unsupported zone",`the zone "${e.name}" is not supported`)}function L3(e){return e.weekData===null&&(e.weekData=ME(e.c)),e.weekData}function R3(e){return e.localWeekData===null&&(e.localWeekData=ME(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Nd(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new ke({...i,...t,old:i})}function AH(e,t,i){let r=e-t*60*1e3;const s=i.offset(r);if(t===s)return[r,t];r-=(s-t)*60*1e3;const n=i.offset(r);return s===n?[r,s]:[e-Math.min(s,n)*60*1e3,Math.max(s,n)]}function Cw(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function jS(e,t,i){return AH(GT(e),t,i)}function O8(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,n={...e.c,year:r,month:s,day:Math.min(e.c.day,AE(r,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Et.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),l=GT(n);let[d,h]=AH(l,i,e.zone);return o!==0&&(d+=o,h=e.zone.offset(d)),{ts:d,o:h}}function If(e,t,i,r,s,n){const{setZone:o,zone:l}=i;if(e&&Object.keys(e).length!==0||t){const d=t||l,h=ke.fromObject(e,{...i,zone:d,specificOffset:n});return o?h:h.setZone(l)}else return ke.invalid(new Uo("unparsable",`the input "${s}" can't be parsed as ${r}`))}function Ow(e,t,i=!0){return e.isValid?Xr.create(Dt.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function P3(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=Hi(e.c.year,i?6:4),t?(r+="-",r+=Hi(e.c.month),r+="-",r+=Hi(e.c.day)):(r+=Hi(e.c.month),r+=Hi(e.c.day)),r}function L8(e,t,i,r,s,n){let o=Hi(e.c.hour);return t?(o+=":",o+=Hi(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(o+=":")):o+=Hi(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(o+=Hi(e.c.second),(e.c.millisecond!==0||!r)&&(o+=".",o+=Hi(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!n?o+="Z":e.o<0?(o+="-",o+=Hi(Math.trunc(-e.o/60)),o+=":",o+=Hi(Math.trunc(-e.o%60))):(o+="+",o+=Hi(Math.trunc(e.o/60)),o+=":",o+=Hi(Math.trunc(e.o%60)))),n&&(o+="["+e.zone.ianaName+"]"),o}const IH={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Lde={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Rde={ordinal:1,hour:0,minute:0,second:0,millisecond:0},CH=["year","month","day","hour","minute","second","millisecond"],Pde=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],kde=["year","ordinal","hour","minute","second","millisecond"];function Dde(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new OB(e);return t}function R8(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Dde(e)}}function Nde(e){return GS[e]||(US===void 0&&(US=Oi.now()),GS[e]=e.offset(US)),GS[e]}function P8(e,t){const i=Cc(t.zone,Oi.defaultZone);if(!i.isValid)return ke.invalid(Y0(i));const r=Dt.fromObject(t);let s,n;if(it(e.year))s=Oi.now();else{for(const d of CH)it(e[d])&&(e[d]=IH[d]);const o=tH(e)||iH(e);if(o)return ke.invalid(o);const l=Nde(i);[s,n]=jS(e,l,i)}return new ke({ts:s,zone:i,loc:r,o:n})}function k8(e,t,i){const r=it(i.round)?!0:i.round,s=(o,l)=>(o=ek(o,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(o,l)),n=o=>i.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(i.unit)return s(n(i.unit),i.unit);for(const o of i.units){const l=n(o);if(Math.abs(l)>=1)return s(l,o)}return s(e>t?-0:0,i.units[i.units.length-1])}function D8(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}let US,GS={};class ke{constructor(t){const i=t.zone||Oi.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new Uo("invalid input"):null)||(i.isValid?null:Y0(i));this.ts=it(t.ts)?Oi.now():t.ts;let s=null,n=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[s,n]=[t.old.c,t.old.o];else{const l=jc(t.o)&&!t.old?t.o:i.offset(this.ts);s=Cw(this.ts,l),r=Number.isNaN(s.year)?new Uo("invalid input"):null,s=r?null:s,n=r?null:l}this._zone=i,this.loc=t.loc||Dt.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new ke({})}static local(){const[t,i]=D8(arguments),[r,s,n,o,l,d,h]=i;return P8({year:r,month:s,day:n,hour:o,minute:l,second:d,millisecond:h},t)}static utc(){const[t,i]=D8(arguments),[r,s,n,o,l,d,h]=i;return t.zone=Sr.utcInstance,P8({year:r,month:s,day:n,hour:o,minute:l,second:d,millisecond:h},t)}static fromJSDate(t,i={}){const r=hce(t)?t.valueOf():NaN;if(Number.isNaN(r))return ke.invalid("invalid input");const s=Cc(i.zone,Oi.defaultZone);return s.isValid?new ke({ts:r,zone:s,loc:Dt.fromObject(i)}):ke.invalid(Y0(s))}static fromMillis(t,i={}){if(jc(t))return t<-864e13||t>Ode?ke.invalid("Timestamp out of range"):new ke({ts:t,zone:Cc(i.zone,Oi.defaultZone),loc:Dt.fromObject(i)});throw new Wr(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(jc(t))return new ke({ts:t*1e3,zone:Cc(i.zone,Oi.defaultZone),loc:Dt.fromObject(i)});throw new Wr("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const r=Cc(i.zone,Oi.defaultZone);if(!r.isValid)return ke.invalid(Y0(r));const s=Dt.fromObject(i),n=IE(t,R8),{minDaysInFirstWeek:o,startOfWeek:l}=w8(n,s),d=Oi.now(),h=it(i.specificOffset)?r.offset(d):i.specificOffset,y=!it(n.ordinal),v=!it(n.year),b=!it(n.month)||!it(n.day),w=v||b,E=n.weekYear||n.weekNumber;if((w||y)&&E)throw new jm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&y)throw new jm("Can't mix ordinal dates with month/day");const T=E||n.weekday&&!w;let $,A,O=Cw(d,h);T?($=Pde,A=Lde,O=ME(O,o,l)):y?($=kde,A=Rde,O=I3(O)):($=CH,A=IH);let L=!1;for(const oe of $){const ue=n[oe];it(ue)?L?n[oe]=A[oe]:n[oe]=O[oe]:L=!0}const R=T?uce(n,o,l):y?cce(n):tH(n),N=R||iH(n);if(N)return ke.invalid(N);const j=T?b8(n,o,l):y?_8(n):n,[V,Z]=jS(j,h,r),ie=new ke({ts:V,zone:r,o:Z,loc:s});return n.weekday&&w&&t.weekday!==ie.weekday?ke.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${ie.toISO()}`):ie.isValid?ie:ke.invalid(ie.invalid)}static fromISO(t,i={}){const[r,s]=tde(t);return If(r,s,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[r,s]=ide(t);return If(r,s,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[r,s]=rde(t);return If(r,s,i,"HTTP",i)}static fromFormat(t,i,r={}){if(it(t)||it(i))throw new Wr("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=r,o=Dt.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[l,d,h,y]=Cde(o,t,i);return y?ke.invalid(y):If(l,d,r,`format ${i}`,t,h)}static fromString(t,i,r={}){return ke.fromFormat(t,i,r)}static fromSQL(t,i={}){const[r,s]=cde(t);return If(r,s,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new Wr("need to specify a reason the DateTime is invalid");const r=t instanceof Uo?t:new Uo(t,i);if(Oi.throwOnInvalid)throw new Due(r);return new ke({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,i={}){const r=MH(t,Dt.fromObject(i));return r?r.map(s=>s?s.val:null).join(""):null}static expandFormat(t,i={}){return TH(Xr.parseFormat(t),Dt.fromObject(i)).map(s=>s.val).join("")}static resetCache(){US=void 0,GS={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?L3(this).weekYear:NaN}get weekNumber(){return this.isValid?L3(this).weekNumber:NaN}get weekday(){return this.isValid?L3(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?R3(this).weekday:NaN}get localWeekNumber(){return this.isValid?R3(this).weekNumber:NaN}get localWeekYear(){return this.isValid?R3(this).weekYear:NaN}get ordinal(){return this.isValid?I3(this.c).ordinal:NaN}get monthShort(){return this.isValid?Aw.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Aw.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Aw.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Aw.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,i=6e4,r=GT(this.c),s=this.zone.offset(r-t),n=this.zone.offset(r+t),o=this.zone.offset(r-s*i),l=this.zone.offset(r-n*i);if(o===l)return[this];const d=r-o*i,h=r-l*i,y=Cw(d,o),v=Cw(h,l);return y.hour===v.hour&&y.minute===v.minute&&y.second===v.second&&y.millisecond===v.millisecond?[Nd(this,{ts:d}),Nd(this,{ts:h})]:[this]}get isInLeapYear(){return C_(this.year)}get daysInMonth(){return AE(this.year,this.month)}get daysInYear(){return this.isValid?ry(this.year):NaN}get weeksInWeekYear(){return this.isValid?jb(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?jb(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:r,calendar:s}=Xr.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(t=0,i={}){return this.setZone(Sr.instance(t),i)}toLocal(){return this.setZone(Oi.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(t=Cc(t,Oi.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(i||r){const n=t.offset(this.ts),o=this.toObject();[s]=jS(o,n,t)}return Nd(this,{ts:s,zone:t})}else return ke.invalid(Y0(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:r});return Nd(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=IE(t,R8),{minDaysInFirstWeek:r,startOfWeek:s}=w8(i,this.loc),n=!it(i.weekYear)||!it(i.weekNumber)||!it(i.weekday),o=!it(i.ordinal),l=!it(i.year),d=!it(i.month)||!it(i.day),h=l||d,y=i.weekYear||i.weekNumber;if((h||o)&&y)throw new jm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&o)throw new jm("Can't mix ordinal dates with month/day");let v;n?v=b8({...ME(this.c,r,s),...i},r,s):it(i.ordinal)?(v={...this.toObject(),...i},it(i.day)&&(v.day=Math.min(AE(v.year,v.month),v.day))):v=_8({...I3(this.c),...i});const[b,w]=jS(v,this.o,this.zone);return Nd(this,{ts:b,o:w})}plus(t){if(!this.isValid)return this;const i=Et.fromDurationLike(t);return Nd(this,O8(this,i))}minus(t){if(!this.isValid)return this;const i=Et.fromDurationLike(t).negate();return Nd(this,O8(this,i))}startOf(t,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},s=Et.normalizeUnit(t);switch(s){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(s==="weeks")if(i){const n=this.loc.getStartOfWeek(),{weekday:o}=this;o<n&&(r.weekNumber=this.weekNumber-1),r.weekday=n}else r.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);r.month=(n-1)*3+1}return this.set(r)}endOf(t,i){return this.isValid?this.plus({[t]:1}).startOf(t,i).minus(1):this}toFormat(t,i={}){return this.isValid?Xr.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):O3}toLocaleString(t=xE,i={}){return this.isValid?Xr.create(this.loc.clone(i),t).formatDateTime(this):O3}toLocaleParts(t={}){return this.isValid?Xr.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const o=t==="extended";let l=P3(this,o);return l+="T",l+=L8(this,o,i,r,s,n),l}toISODate({format:t="extended"}={}){return this.isValid?P3(this,t==="extended"):null}toISOWeekDate(){return Ow(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+L8(this,o==="extended",i,t,r,n):null}toRFC2822(){return Ow(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ow(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?P3(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||t)&&(r&&(s+=" "),i?s+="z":t&&(s+="ZZ")),Ow(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():O3}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",r={}){if(!this.isValid||!t.isValid)return Et.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},n=pce(i).map(Et.normalizeUnit),o=t.valueOf()>this.valueOf(),l=o?this:t,d=o?t:this,h=gde(l,d,n,s);return o?h.negate():h}diffNow(t="milliseconds",i={}){return this.diff(ke.now(),t,i)}until(t){return this.isValid?Ii.fromDateTimes(this,t):this}hasSame(t,i,r){if(!this.isValid)return!1;const s=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(i,r)<=s&&s<=n.endOf(i,r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||ke.fromObject({},{zone:this.zone}),r=t.padding?this<i?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=t.unit;return Array.isArray(t.unit)&&(s=t.unit,n=void 0),k8(i,this.plus(r),{...t,numeric:"always",units:s,unit:n})}toRelativeCalendar(t={}){return this.isValid?k8(t.base||ke.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(ke.isDateTime))throw new Wr("min requires all arguments be DateTimes");return S8(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(ke.isDateTime))throw new Wr("max requires all arguments be DateTimes");return S8(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,r={}){const{locale:s=null,numberingSystem:n=null}=r,o=Dt.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return xH(o,t,i)}static fromStringExplain(t,i,r={}){return ke.fromFormatExplain(t,i,r)}static buildFormatParser(t,i={}){const{locale:r=null,numberingSystem:s=null}=i,n=Dt.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return new $H(n,t)}static fromFormatParser(t,i,r={}){if(it(t)||it(i))throw new Wr("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:n=null}=r,o=Dt.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});if(!o.equals(i.locale))throw new Wr(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:l,zone:d,specificOffset:h,invalidReason:y}=i.explainFromTokens(t);return y?ke.invalid(y):If(l,d,r,`format ${i.format}`,t,h)}static get DATE_SHORT(){return xE}static get DATE_MED(){return LB}static get DATE_MED_WITH_WEEKDAY(){return Vue}static get DATE_FULL(){return RB}static get DATE_HUGE(){return PB}static get TIME_SIMPLE(){return kB}static get TIME_WITH_SECONDS(){return DB}static get TIME_WITH_SHORT_OFFSET(){return NB}static get TIME_WITH_LONG_OFFSET(){return FB}static get TIME_24_SIMPLE(){return VB}static get TIME_24_WITH_SECONDS(){return zB}static get TIME_24_WITH_SHORT_OFFSET(){return jB}static get TIME_24_WITH_LONG_OFFSET(){return UB}static get DATETIME_SHORT(){return GB}static get DATETIME_SHORT_WITH_SECONDS(){return qB}static get DATETIME_MED(){return BB}static get DATETIME_MED_WITH_SECONDS(){return HB}static get DATETIME_MED_WITH_WEEKDAY(){return zue}static get DATETIME_FULL(){return WB}static get DATETIME_FULL_WITH_SECONDS(){return ZB}static get DATETIME_HUGE(){return YB}static get DATETIME_HUGE_WITH_SECONDS(){return JB}}function m0(e){if(ke.isDateTime(e))return e;if(e&&e.valueOf&&jc(e.valueOf()))return ke.fromJSDate(e);if(e&&typeof e=="object")return ke.fromObject(e);throw new Wr(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const Fde="shortOffset";function Vde(e){return"timeZoneIANA"in e}function zde(e){return e.startsWith("UTC")}function CE(e,t=!1){return{json:{read:{source:e,reader:(i,r)=>r[e]?qS(r[e]):null},write:!!t&&{allowNull:!0,writer(i,r){r[e]=i?jde(i):null}}}}}function qS(e,t=ka){return e?Vde(e)?e.timeZoneIANA:Ude(e,t):t}function jde(e){return{timeZoneIANA:e}}function Ude(e,t=ka){if(!e||!a8.has(e.timeZone))return t;const i=a8.get(e.timeZone);return zde(e.timeZone)||e.respectsDaylightSaving?i:Gde(i)}function Gde(e){const t=ke.local().setZone(e),i=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Sr.instance(-i).formatOffset(0,"narrow")}`}function qde(e,t,i,r,s){if(t&&s==="date")return{timeZone:Da,timeZoneName:void 0};const n=r.timeStyle||r.hour,o=i===Ep;return{timeZone:o?s==="timestamp-offset"?void 0:e??Da:i,timeZoneName:o&&n?Fde:void 0}}function Bde(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return e===ka||e===Ep||t.has(e.toLowerCase())||i.has(e.toLowerCase())}const Hde={year:void 0,month:void 0,day:void 0,weekday:void 0},Wde={hour:void 0,minute:void 0,second:void 0},OH={timeZone:Da},na={year:"numeric",month:"numeric",day:"numeric"},y0={year:"numeric",month:"long",day:"numeric"},g0={year:"numeric",month:"short",day:"numeric"},v0={year:"numeric",month:"long",weekday:"long",day:"numeric"},Tc={hour:"numeric",minute:"numeric"},Xd={...Tc,second:"numeric"},LH={hourCycle:"h23"},b0={...Tc,...LH},_0={...Xd,...LH},RH={"short-date":na,"short-date-short-time":{...na,...Tc},"short-date-short-time-24":{...na,...b0},"short-date-long-time":{...na,...Xd},"short-date-long-time-24":{...na,..._0},"short-date-le":na,"short-date-le-short-time":{...na,...Tc},"short-date-le-short-time-24":{...na,...b0},"short-date-le-long-time":{...na,...Xd},"short-date-le-long-time-24":{...na,..._0},"long-month-day-year":y0,"long-month-day-year-short-time":{...y0,...Tc},"long-month-day-year-short-time-24":{...y0,...b0},"long-month-day-year-long-time":{...y0,...Xd},"long-month-day-year-long-time-24":{...y0,..._0},"day-short-month-year":g0,"day-short-month-year-short-time":{...g0,...Tc},"day-short-month-year-short-time-24":{...g0,...b0},"day-short-month-year-long-time":{...g0,...Xd},"day-short-month-year-long-time-24":{...g0,..._0},"long-date":v0,"long-date-short-time":{...v0,...Tc},"long-date-short-time-24":{...v0,...b0},"long-date-long-time":{...v0,...Xd},"long-date-long-time-24":{...v0,..._0},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Tc,"long-time":Xd},Zde=xr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),PH={ar:"ar-u-nu-latn-ca-gregory"};let sC=new WeakMap;const HT=RH["short-date-short-time"];function Yde(e){let t=sC.get(e);if(!t){const i=Vs(),r=PH[i]||i,s=sk(e.timeZone??ka),n={...e,timeZone:s};t=new Intl.DateTimeFormat(r,n),sC.set(e,t)}return t}function w0(e){return RH[e]}function Go(e,t=HT){return Yde(t).format(e)}function Jde(e,t=HT){return Go(new Date(e),{...t,...OH,...Wde})}function Xde(e,t=HT){return Go(new Date(`1970-01-01T${e}Z`),{...t,...OH,...Hde})}function Qde(e,t=HT){if(t.timeZone)return Go(new Date(e),t);const i=ke.fromISO(e,{setZone:!0}),r=Vs(),s=PH[r]??r,n=i.offset===0?Da:t.timeZone,o={...t,timeZone:n};return i.toLocaleString(o,{locale:s})}function sk(e){switch(e){case ka:return kue;case Ep:return Da;default:return e}}WP(()=>{sC=new WeakMap});const Kde={ar:"ar-u-nu-latn"};let BS=new WeakMap,kH={};function nC(e){const t=e||kH;if(!BS.has(t)){const i=Vs(),r=Kde[Vs()]||i;BS.set(t,new Intl.NumberFormat(r,e))}return BS.get(t)}function V5e(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Tp(e,t){return Object.is(e,-0)&&(e=0),nC(t).format(e)}function z5e(e,t=Vs()){var r,s;if(!e)return null;let i=N8.get(t);if(!i){const n=nC().formatToParts(12345.6),o=[...nC({useGrouping:!1}).format(9876543210)].reverse(),l=new Map(o.map((w,E)=>[w,E])),d=new RegExp(`[${(r=n.find(w=>w.type==="group"))==null?void 0:r.value}]`,"g"),h=new RegExp(`[${(s=n.find(w=>w.type==="decimal"))==null?void 0:s.value}]`),y=new RegExp(`[${o.join("")}]`,"g"),v=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,b=/[-\u2212\u2013\u2014\u2015]/g;i=w=>{if((w=w.trim().replaceAll(d,"").replace(h,".").replace(y,T=>String(l.get(T))).replaceAll(v,"").replaceAll(b,"-"))==="")return null;const E=Number(w);return isNaN(E)?null:E},N8.set(t,i)}return i(e)}WP(()=>{BS=new WeakMap,kH={}});const N8=new Map,DH=()=>ae.getLogger("esri.intl.substitute");function Ub(e,t,i={}){const{format:r={}}=i;return f_(e,s=>ehe(s,t,r))}function ehe(e,t,i){let r,s;const n=e.indexOf(":");if(n===-1?r=e.trim():(r=e.slice(0,n).trim(),s=e.slice(n+1).trim()),!r)return"";const o=p_(r,t);if(o==null)return"";const l=(s?i==null?void 0:i[s]:null)??(i==null?void 0:i[r]);return l?the(o,l):s?ihe(o,s):nk(o)}function the(e,t){switch(t.type){case"date":return Go(e,t.intlOptions);case"number":return Tp(e,t.intlOptions);default:return DH().warn("missing format descriptor for key {key}"),nk(e)}}function ihe(e,t){switch(t.toLowerCase()){case"dateformat":return Go(e);case"numberformat":return Tp(e);default:return DH().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Go(e):/^numberformat/i.test(t)?Tp(e):nk(e)}}function nk(e){switch(typeof e){case"string":return e;case"number":return Tp(e);case"boolean":return""+e;default:return e instanceof Date?Go(e):""}}async function rhe(e,t,i,r){const s=t.exec(i);if(!s)throw new B("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],l=IB(r),d=`${n}${o}.json`,h=l?`${n}${o}_${l}.json`:d;let y;try{y=await F8(e(h))}catch(v){if(h===d)throw new B("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:v});try{y=await F8(e(d))}catch(b){throw new B("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:b})}}return y}async function F8(e){if(V8.fetchBundleAsset!=null)return V8.fetchBundleAsset(e);const t=await Rt(e,{responseType:"text"});return JSON.parse(t.data)}let she=class{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?n=>new URL(n,new URL(r,window.location.href)).href:r instanceof URL?n=>new URL(n,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,i){return rhe(this.getAssetUrl,this.matcher,t,i)}};function nhe(e){return new she(e)}const V8={};Oue(nhe({pattern:"esri/",location:oi}));let _l=class extends Me{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const t=this.language;let i=t==="local"||t==="global"?t:IB(t??Vs())??"global";return i=i==="no"?"nb":i,i}};c([p()],_l.prototype,"apiKey",void 0),c([p()],_l.prototype,"id",void 0),c([p()],_l.prototype,"language",void 0),c([p()],_l.prototype,"places",void 0),c([p()],_l.prototype,"serviceUrl",void 0),c([p()],_l.prototype,"worldview",void 0),_l=c([I("esri.support.BasemapStyle")],_l);const ohe=_l;function ahe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function lhe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function Qd(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const G5e={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function oC(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function q5e(e){return e==="integrated-mesh"||e==="integrated-mesh-3dtiles"}function WT(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function B5e(e){var i;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((i=e==null?void 0:e.source)==null?void 0:i.type)==="feature-layer"}async function ok(e,t){const i=Be==null?void 0:Be.findServerInfo(e);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=e.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const s=`${e.slice(0,r)}/rest/info`,n=t!=null?t.signal:null,{data:o}=await Rt(s,{query:{f:"json"},responseType:"json",signal:n});return(o==null?void 0:o.owningSystemUrl)||null}function NH(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function uhe(e){return NH(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function che(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function dhe(e){return!!che(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const hhe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),FH=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wcs","wfs","wms","wmts"]),phe=new Set([...FH,"link-chart"]);function fhe(e){switch(e.layerContainerType){case"basemap":return hhe;case"operational-layers":return e.origin==="link-chart"?phe:FH;default:return null}}function mhe(e,t){if(t.restrictedWebMapWriting){const i=fhe(t);return i==null||i.has(e.type)&&!WT(e)}return!0}function yhe(e,t){var i;if(t)if(WT(e)){const r=p_("featureCollection.layers",t),s=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;s&&z8(e,s)}else e.type!=="group"&&z8(e,t)}function z8(e,t){"maxScale"in e&&(t.maxScale=pE(e.maxScale)??void 0),"minScale"in e&&(t.minScale=pE(e.minScale)??void 0)}function ghe(e,t){if(yhe(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=pE(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(WT(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function j8(e,t,i){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return i!=null&&i.messages&&i.messages.push(new B("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(WT(e)&&!e.isTable)t=e.resourceInfo;else if(mhe(e,i)){const r={};return e.write(r,i)?r:null}return t!=null&&ghe(e,t=q(t)),t}var J0;let vhe=0,nn=J0=class extends se.JSONSupportMixin(iu){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+vhe++,this.baseLayers=new _e,this.referenceLayers=new _e;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&ae.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{ae.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const i of e)i.destroy();const t=this.referenceLayers.toArray();for(const i of t)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Zt(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",tu(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const n=j8(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);n!=null&&r.push(n)}),this.referenceLayers.forEach(s=>{const n=j8(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);n!=null&&(s.type!=="scene"&&(n.isReference=!0),r.push(n))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",tu(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return tB(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>Q2(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>Q2(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new J0({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var i;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const s=q(r);return s.url&&Ra(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&Ra(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i,style:r}=this;yi(e);const s=[];if(t){const n=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const o=t.data.id;s.push(Pue(o).then(l=>{l&&this.read({title:l},t.context)}))}}else i?s.push(this._loadFromItem(i,e)):r&&s.push(this._loadFromStylesService(r,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,i){var d,h;const r=(d=this.resourceInfo)==null?void 0:d.context,s=((h=this.portalItem)==null?void 0:h.portal)||(r==null?void 0:r.portal)||null,n=_he[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:o}=await D(async()=>{const{populateOperationalLayers:y}=await import("./layersCreator-g6TyJUcC.js");return{populateOperationalLayers:y}},__vite__mapDeps([9,10,11,12,13,14])),l=[];if(yi(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const y={context:{...r,origin:n,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},v=E=>n==="web-scene"&&E.layerType==="ArcGISSceneServiceLayer"||E.isReference,b=o(this.baseLayers,e.baseMapLayers.filter(E=>!v(E)),y);l.push(b);const w=o(this.referenceLayers,e.baseMapLayers.filter(v),y);l.push(w)}await Promise.allSettled(l)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),s=ur(e.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:bhe[e.type||""]??"web-map",portal:e.portal||ts.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||ts.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}async _loadFromStylesService(e,t){const i=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,r=`${i}/styles/${e.id}/self`,s=`${i}/webmaps/${e.id}`,[n,o]=await Promise.all([(await Rt(r,{query:{token:e.apiKey},signal:t==null?void 0:t.signal})).data,(await Rt(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=n.thumbnailUrl);const l=ur(s);if(this._set("resourceInfo",{data:o.baseMap??{},context:{origin:"web-map",url:l}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:o.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,l,t),e.apiKey)for(const d of[...this.baseLayers,...this.referenceLayers])"apiKey"in d&&(d.apiKey=e.apiKey)}static fromId(e){const t=XI[e];return t?t.itemId?new J0({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):J0.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};c([p({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:_e}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],nn.prototype,"baseLayers",null),c([p({type:String,json:{origins:{"web-scene":{write:!0}}}})],nn.prototype,"id",void 0),c([p({type:ob})],nn.prototype,"portalItem",void 0),c([p()],nn.prototype,"referenceLayers",null),c([p({readOnly:!0})],nn.prototype,"resourceInfo",void 0),c([p({type:tt})],nn.prototype,"spatialReference",void 0),c([p({type:ohe})],nn.prototype,"style",void 0),c([p()],nn.prototype,"thumbnailUrl",void 0),c([p({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],nn.prototype,"title",void 0),c([be("title")],nn.prototype,"writeTitle",null),nn=J0=c([I("esri.Basemap")],nn);const bhe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},_he={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},lb=nn,whe=Object.freeze(Object.defineProperty({__proto__:null,default:lb},Symbol.toStringTag,{value:"Module"})),OE={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function VH(e){return!!OE[e]||!!OE[e.toLowerCase()]}function ak(e){return OE[e]??OE[e.toLowerCase()]}function She(e){return[...ak(e)]}function k3(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function zH(e,t,i,r=1){const s=(e%360+360)%360/360,n=i<=.5?i*(t+1):i+t-i*t,o=2*i-n;return[Math.round(255*k3(o,n,s+1/3)),Math.round(255*k3(o,n,s)),Math.round(255*k3(o,n,s-1/3)),r]}function Ehe(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,s=t?1:17,n=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const l=[0,0,0,1];let d;return n&&(d=o&r,o>>=i,l[3]=s*d/255),d=o&r,o>>=i,l[2]=s*d,d=o&r,o>>=i,l[1]=s*d,d=o&r,o>>=i,l[0]=s*d,l}const H5e=2.2,U8=new Float32Array(1);function W5e(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function _n(e,t,i){return Math.min(Math.max(e,t),i)}function Z5e(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function X0(e,t,i){return e+(t-e)*i}function Y5e(e,t,i,r,s){return X0(r,s,(e-t)/(i-t))}function ZT(e){return e*Math.PI/180}function jH(e){return 180*e/Math.PI}function J5e(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function X5e(e){return Math.acos(_n(e,-1,1))}function The(e){return Math.asin(_n(e,-1,1))}function Wo(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}function UH(e,t,i=1e-6){return!Wo(e,t,i)&&e>t}function aC(e,t,i=1e-6){return!Wo(e,t,i)&&e<t}function $he(e,t,i=1e-6){return Wo(e,t,i)||e>t}const LE=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function lC(e){return LE.setFloat64(0,e),LE.getBigInt64(0)}function xhe(e){return LE.setBigInt64(0,e),LE.getFloat64(0)}const HS=BigInt("1000000"),Mhe=GH(1);function GH(e){const t=lC(e=Math.abs(e)),i=xhe(t<=HS?HS:t-HS);return Math.abs(e-i)}function Q5e(e,t,i=Mhe){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(i!=null&&GH(Math.min(Math.abs(e),Math.abs(t)))<i)return Math.abs(e-t)<=i;const r=lC(e),s=lC(t);return r<0!=s<0?!1:!((r<s?s-r:r-s)>HS)}function K5e(e){return qH(Math.max(-G8,Math.min(e,G8)))}function qH(e){return U8[0]=e,U8[0]}function e4e(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Wo(t,1)&&Wo(i,1)&&Wo(r,1))}const G8=qH(34028234663852886e22);function t4e(e,t,i){if(i===void 0||+i==0)return Math[e](t);if(t=+t,i=+i,isNaN(t)||typeof i!="number"||i%1!=0)return NaN;let r=t.toString().split("e");return r=(t=Math[e](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}function Lw(e){return _n(vP(e),0,255)}function Rw(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}function Pw(e,t){const i=e.toString(16).padStart(2,"0");return t?i.slice(0,1):i}let ye=class rr{static blendColors(t,i,r,s=new rr){return s.r=Math.round(t.r+(i.r-t.r)*r),s.g=Math.round(t.g+(i.g-t.g)*r),s.b=Math.round(t.b+(i.b-t.b)*r),s.a=t.a+(i.a-t.a)*r,s._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(r){const s=r[2].split(/\s*,\s*/),n=r[1];if(n==="rgb"&&s.length===3||n==="rgba"&&s.length===4){const o=s[0];if(o.charAt(o.length-1)==="%"){const l=s.map(d=>2.56*parseFloat(d));return s.length===4&&(l[3]=parseFloat(s[3])),rr.fromArray(l,i)}return rr.fromArray(s.map(l=>parseFloat(l)),i)}if(n==="hsl"&&s.length===3||n==="hsla"&&s.length===4)return rr.fromArray(zH(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(t,i=new rr){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const r=parseInt(t.slice(1,2),16),s=parseInt(t.slice(2,3),16),n=parseInt(t.slice(3,4),16),o=t.length===5?15:parseInt(t.slice(4),16);return rr.fromArray([r+16*r,s+16*s,n+16*n,(o+16*o)/255],i)}case 7:case 9:{const r=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16),o=t.length===7?255:parseInt(t.slice(7),16);return rr.fromArray([r,s,n,o/255],i)}default:return null}}static fromArray(t,i=new rr){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=VH(t)?ak(t):null;return r&&rr.fromArray(r,i)||rr.fromRgb(t,i)||rr.fromHex(t,i)}static fromJSON(t){return t!=null?new rr([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?rr.fromString(t,this):Array.isArray(t)?rr.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof rr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const i=(t==null?void 0:t.capitalize)??!1,r=(t==null?void 0:t.digits)??6,s=r===3||r===4,n=r===4||r===8,o=`#${Pw(this.r,s)}${Pw(this.g,s)}${Pw(this.b,s)}${n?Pw(Math.round(255*this.a),s):""}`;return i?o.toUpperCase():o}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=rr.AlphaMode.ALWAYS){const i=Lw(this.r),r=Lw(this.g),s=Lw(this.b);return t===rr.AlphaMode.ALWAYS||this.a!==1?[i,r,s,Lw(255*this.a)]:[i,r,s]}clone(){return new rr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(Rw(this.r,0,255)),this.g=Math.round(Rw(this.g,0,255)),this.b=Math.round(Rw(this.b,0,255)),this.a=Rw(this.a,0,1),this}_set(t,i,r,s){this.r=t,this.g=i,this.b=r,this.a=s}};ye.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(ye);function Pe(e,t={}){const i=e instanceof ot?e:new ot(e,t),{alwaysWriteDefaults:r,default:s,ignoreUnknown:n=!0,name:o,nonNullable:l,readOnly:d=!1}=t;return p({type:n?i.apiValues:String,json:{type:i.jsonValues,default:s,name:o,read:!d&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:l,readOnly:d})}var uC;let WS=uC=class extends se{constructor(e){super(e),this.type="none"}clone(){return new uC({type:this.type})}};c([Pe({none:"none",stayAbove:"stay-above"}),p({json:{write:{isRequired:!0}}})],WS.prototype,"type",void 0),WS=uC=c([I("esri.ground.NavigationConstraint")],WS);const Ahe=Symbol("GroundInstance");function YT(e){const t=vP(100*(1-e));return Math.max(0,Math.min(t,100))}function Gb(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var BH,cC;let wl=cC=class extends se.JSONSupportMixin(iu){constructor(e){super(e),this[BH]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new _e;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&ae.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{rs(e)||ae.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)Zt(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}get layers(){return this._get("layers")}set layers(e){this._set("layers",tu(e,this._get("layers")))}writeLayers(e,t,i,r){const s=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(n=>{if("write"in n){const o={};Dse(n)().write(o,r)&&s.push(o)}else r!=null&&r.messages&&r.messages.push(new B("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return tB(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await D(()=>import("./ElevationQuery-CdL4Skbd.js"),[]);yi(t);const r=new i,s=this.layers.filter(q8).toArray();return r.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await D(()=>import("./ElevationQuery-CdL4Skbd.js"),[]);yi(t);const r=new i,s=this.layers.filter(q8).toArray();return r.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:q(this.surfaceColor),navigationConstraint:q(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new cC({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,i){const r=(t==null?void 0:t.origin)||"web-scene",s=(t==null?void 0:t.portal)||null,n=(t==null?void 0:t.url)||null,{populateOperationalLayers:o}=await D(async()=>{const{populateOperationalLayers:d}=await import("./layersCreator-g6TyJUcC.js");return{populateOperationalLayers:d}},__vite__mapDeps([9,10,11,12,13,14]));yi(i);const l=[];if(e.layers&&Array.isArray(e.layers)){const d={context:{origin:r,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};l.push(o(this.layers,e.layers,d))}await Promise.allSettled(l)}};function Ihe(e){return e&&"createElevationSampler"in e}function q8(e){return e.type==="elevation"||Ihe(e)}BH=Ahe,c([p({json:{read:!1,write:{isRequired:!0}}})],wl.prototype,"layers",null),c([be("layers")],wl.prototype,"writeLayers",null),c([p({readOnly:!0})],wl.prototype,"resourceInfo",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:vt,read:{reader:Gb,source:"transparency"},write:{writer:(e,t)=>{t.transparency=YT(e)},target:"transparency"}}})],wl.prototype,"opacity",void 0),c([p({type:ye,json:{type:[vt],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],wl.prototype,"surfaceColor",void 0),c([p({type:WS,json:{write:!0}})],wl.prototype,"navigationConstraint",void 0),wl=cC=c([I("esri.Ground")],wl);const RE=wl;function ve(e,t,i={}){return lk(e,t,i,HH)}function qs(e,t,i={}){return lk(e,t,i,WH)}function lk(e,t,i={},r){let s=null;const n=i.once?(o,l)=>{r(o)&&(ui(s),t(o,l))}:(o,l)=>{r(o)&&t(o,l)};if(s=aoe(e,n,i.sync,i.equals),i.initial){const o=e();n(o,o)}return s}function zs(e,t,i,r={}){let s=null,n=null,o=null;function l(){var y;s&&n&&(n.remove(),(y=r.onListenerRemove)==null||y.call(r,s),s=null,n=null)}function d(y){r.once&&r.once&&ui(o),i(y)}const h=ve(e,(y,v)=>{var b;l(),AT(y)&&(s=y,n=b_(y,t,d),(b=r.onListenerAdd)==null||b.call(r,y))},{sync:r.sync,initial:!0});return o=bt(()=>{h.remove(),l()}),o}function JT(e,t){return Che(e,WH,t)}function Che(e,t,i){if(vn(i))return Promise.reject(Yt());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let s=null;function n(){s=ui(s)}return new Promise((o,l)=>{s=y_([Jn(i,()=>{n(),l(Yt())}),lk(e,d=>{n(),o(d)},{sync:!1,once:!0},t??HH)])})}function HH(e){return!0}function WH(e){return!!e}function i4e(e,t,i={}){let r=!1;const s=ve(e,(n,o)=>{r||t(n,o)},i);return{remove(){s.remove()},pause(){r=!0},resume(){r=!1}}}function Ohe(e,t){const i=new _e,r=zs(e,"after-splice",({added:s,start:n,deleteCount:o})=>{const l=i.splice(n,o);for(const d of l)d.remove();if(s!=null&&s.length){const d=s.map(t);i.addMany(d,n)}},{sync:!0,onListenerRemove:()=>i.drain(s=>s.remove()),onListenerAdd:s=>i.addMany(s.items.map(t))});return i.addHandles(r),i}function r4e(e,t){const i=new _e,r=Ohe(e,l=>A_(async d=>{const h=await t(l,d);if(vn(d))throw h.remove(),Yt();return h})),s=()=>null,n=async l=>{const d=await l.promise,h=r.indexOf(l);h<0||i.splice(h,1,d)};i.addMany(r.items.map(s));for(const l of r)Rb(n(l));const o=r.on("after-splice",({added:l,start:d,deleteCount:h})=>{const y=i.splice(d,h);for(const v of y)v==null||v.remove();if(l!=null&&l.length){i.addMany(l.map(s),d);for(const v of l)Rb(n(v))}});return i.addHandles([sne(r),o]),i}const Na={sync:!0},yt={initial:!0},ks={sync:!0,initial:!0};let Xf=class extends _e{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(iq(()=>this._refresh(),Na))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let i=0;for(const r of t)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(t){return new _e(t)}_processCollection(t,i){if(!i)return t;const r=this.itemFilterFunction??(s=>!!s);for(const s of i)if(s){if(r(s)){const n=this.indexOf(s,t);n>=0?n!==t&&this.reorder(s,t):this.add(s,t),++t}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)t=this._processCollection(t,o);else t=this._processCollection(t,n)}}return t}};c([p()],Xf.prototype,"getCollections",void 0),c([p()],Xf.prototype,"getChildrenFunction",void 0),c([p()],Xf.prototype,"itemFilterFunction",void 0),Xf=c([I("esri.core.CollectionFlattener")],Xf);const qb=Xf,kw=new WeakMap;function uk(e){return!e.destroyed&&(kw.has(e)||e.addHandles([ve(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||uk(t))},t=>kw.set(e,t),ks),bt(()=>kw.delete(e))]),kw.get(e))}function B8(e,t){var l;const i=e.parent,r=e.layer;if((r==null?void 0:r.type)!=="map-image"||!r.sourceJSON||!i)return!1;const s=r.sourceJSON.layers;if(!s)return!1;const n=s.find(d=>e.id===d.id),o=t==="footprints"?"Feature Layer":"Catalog Dynamic Group Layer";return(n==null?void 0:n.type)===o&&((l=s.find(d=>d.id===i.id))==null?void 0:l.type)==="Catalog Layer"}function Lhe(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function Rhe(e){var t,i;return!(!Lhe(e)||!((i=(t=uhe(e))==null?void 0:t.operations)!=null&&i.supportsEditing)||"editingEnabled"in e&&!dhe(e)||uk(e))}const Phe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,khe="screenUtils.toPt: input not recognized!",ZH=96;function mi(e){return e?e/72*ZH:0}function Bs(e){return e?72*e/ZH:0}function ft(e){if(typeof e=="string"){const t=e.match(Phe);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",n=r==="px"?Bs(i):i;return s?-n:n}return console.warn(khe),null}return e}function Er(e=0,t=0){return{x:e,y:t}}function n4e(e){return e?Er(e.x,e.y):null}function o4e(e=0,t=0){return[e,t]}function a4e(e=0,t=0,i=0){return[e,t,i]}function l4e(e){return e}function u4e(e){return e}function c4e(e){return e}function d4e(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function XT(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Dhe(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Nhe(e,t,i,r,s,n,o,l,d,h,y,v,b,w,E,T){const $=new Float32Array(16);return $[0]=e,$[1]=t,$[2]=i,$[3]=r,$[4]=s,$[5]=n,$[6]=o,$[7]=l,$[8]=d,$[9]=h,$[10]=y,$[11]=v,$[12]=b,$[13]=w,$[14]=E,$[15]=T,$}function Fhe(e,t){return new Float32Array(e,t,16)}const Vhe=XT();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Vhe,clone:Dhe,create:XT,createView:Fhe,fromValues:Nhe},Symbol.toStringTag,{value:"Module"}));function nd(){return[0,0,0]}function ck(e){return[e[0],e[1],e[2]]}function Ky(e,t,i){return[e,t,i]}function zhe(e,t,i){return[e,t,i]}function jhe(e,t=nd()){const i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Uhe(e,t){return new Float64Array(e,t,3)}function YH(){return nd()}function JH(){return Ky(1,1,1)}function XH(){return Ky(1,0,0)}function QH(){return Ky(0,1,0)}function KH(){return Ky(0,0,1)}const Ghe=YH(),eW=JH(),qhe=XH(),Bhe=QH(),Hhe=KH();Object.freeze(Object.defineProperty({__proto__:null,ONES:eW,UNIT_X:qhe,UNIT_Y:Bhe,UNIT_Z:Hhe,ZEROS:Ghe,clone:ck,create:nd,createView:Uhe,freeze:zhe,fromArray:jhe,fromValues:Ky,ones:JH,unitX:XH,unitY:QH,unitZ:KH,zeros:YH},Symbol.toStringTag,{value:"Module"}));let dk=1e-6;function bs(){return dk}function Whe(e){dk=e}const QT=Math.random,Zhe=Math.PI/180,Yhe=180/Math.PI;function hk(e){return e*Zhe}function Jhe(e){return e*Yhe}function Xhe(e,t){return Math.abs(e-t)<=dk*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:QT,equals:Xhe,getEpsilon:bs,setEpsilon:Whe,toDegree:Jhe,toRadian:hk},Symbol.toStringTag,{value:"Module"}));function tW(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function od(e,t,i,r,s,n,o,l,d,h,y,v,b,w,E,T,$){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=n,e[5]=o,e[6]=l,e[7]=d,e[8]=h,e[9]=y,e[10]=v,e[11]=b,e[12]=w,e[13]=E,e[14]=T,e[15]=$,e}function KT(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ad(e,t){if(e===t){const i=t[1],r=t[2],s=t[3],n=t[6],o=t[7],l=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=n,e[11]=t[14],e[12]=s,e[13]=o,e[14]=l}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Qhe(e,t){return iW(e,t)||KT(e),e}function iW(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],l=t[5],d=t[6],h=t[7],y=t[8],v=t[9],b=t[10],w=t[11],E=t[12],T=t[13],$=t[14],A=t[15],O=i*l-r*o,L=i*d-s*o,R=i*h-n*o,N=r*d-s*l,j=r*h-n*l,V=s*h-n*d,Z=y*T-v*E,ie=y*$-b*E,oe=y*A-w*E,ue=v*$-b*T,me=v*A-w*T,Te=b*A-w*$;let Ee=O*Te-L*me+R*ue+N*oe-j*ie+V*Z;return Ee?(Ee=1/Ee,e[0]=(l*Te-d*me+h*ue)*Ee,e[1]=(s*me-r*Te-n*ue)*Ee,e[2]=(T*V-$*j+A*N)*Ee,e[3]=(b*j-v*V-w*N)*Ee,e[4]=(d*oe-o*Te-h*ie)*Ee,e[5]=(i*Te-s*oe+n*ie)*Ee,e[6]=($*R-E*V-A*L)*Ee,e[7]=(y*V-b*R+w*L)*Ee,e[8]=(o*me-l*oe+h*Z)*Ee,e[9]=(r*oe-i*me-n*Z)*Ee,e[10]=(E*j-T*R+A*O)*Ee,e[11]=(v*R-y*j-w*O)*Ee,e[12]=(l*ie-o*ue-d*Z)*Ee,e[13]=(i*ue-r*ie+s*Z)*Ee,e[14]=(T*L-E*N-$*O)*Ee,e[15]=(y*N-v*L+b*O)*Ee,e):null}function Khe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],l=t[5],d=t[6],h=t[7],y=t[8],v=t[9],b=t[10],w=t[11],E=t[12],T=t[13],$=t[14],A=t[15];return e[0]=l*(b*A-w*$)-v*(d*A-h*$)+T*(d*w-h*b),e[1]=-(r*(b*A-w*$)-v*(s*A-n*$)+T*(s*w-n*b)),e[2]=r*(d*A-h*$)-l*(s*A-n*$)+T*(s*h-n*d),e[3]=-(r*(d*w-h*b)-l*(s*w-n*b)+v*(s*h-n*d)),e[4]=-(o*(b*A-w*$)-y*(d*A-h*$)+E*(d*w-h*b)),e[5]=i*(b*A-w*$)-y*(s*A-n*$)+E*(s*w-n*b),e[6]=-(i*(d*A-h*$)-o*(s*A-n*$)+E*(s*h-n*d)),e[7]=i*(d*w-h*b)-o*(s*w-n*b)+y*(s*h-n*d),e[8]=o*(v*A-w*T)-y*(l*A-h*T)+E*(l*w-h*v),e[9]=-(i*(v*A-w*T)-y*(r*A-n*T)+E*(r*w-n*v)),e[10]=i*(l*A-h*T)-o*(r*A-n*T)+E*(r*h-n*l),e[11]=-(i*(l*w-h*v)-o*(r*w-n*v)+y*(r*h-n*l)),e[12]=-(o*(v*$-b*T)-y*(l*$-d*T)+E*(l*b-d*v)),e[13]=i*(v*$-b*T)-y*(r*$-s*T)+E*(r*b-s*v),e[14]=-(i*(l*$-d*T)-o*(r*$-s*T)+E*(r*d-s*l)),e[15]=i*(l*b-d*v)-o*(r*b-s*v)+y*(r*d-s*l),e}function epe(e){const t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],o=e[5],l=e[6],d=e[7],h=e[8],y=e[9],v=e[10],b=e[11],w=e[12],E=e[13],T=e[14],$=e[15];return(t*o-i*n)*(v*$-b*T)-(t*l-r*n)*(y*$-b*E)+(t*d-s*n)*(y*T-v*E)+(i*l-r*o)*(h*$-b*w)-(i*d-s*o)*(h*T-v*w)+(r*d-s*l)*(h*E-y*w)}function rW(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],l=t[4],d=t[5],h=t[6],y=t[7],v=t[8],b=t[9],w=t[10],E=t[11],T=t[12],$=t[13],A=t[14],O=t[15];let L=i[0],R=i[1],N=i[2],j=i[3];return e[0]=L*r+R*l+N*v+j*T,e[1]=L*s+R*d+N*b+j*$,e[2]=L*n+R*h+N*w+j*A,e[3]=L*o+R*y+N*E+j*O,L=i[4],R=i[5],N=i[6],j=i[7],e[4]=L*r+R*l+N*v+j*T,e[5]=L*s+R*d+N*b+j*$,e[6]=L*n+R*h+N*w+j*A,e[7]=L*o+R*y+N*E+j*O,L=i[8],R=i[9],N=i[10],j=i[11],e[8]=L*r+R*l+N*v+j*T,e[9]=L*s+R*d+N*b+j*$,e[10]=L*n+R*h+N*w+j*A,e[11]=L*o+R*y+N*E+j*O,L=i[12],R=i[13],N=i[14],j=i[15],e[12]=L*r+R*l+N*v+j*T,e[13]=L*s+R*d+N*b+j*$,e[14]=L*n+R*h+N*w+j*A,e[15]=L*o+R*y+N*E+j*O,e}function tpe(e,t,i){const r=i[0],s=i[1],n=i[2];if(t===e)e[12]=t[0]*r+t[4]*s+t[8]*n+t[12],e[13]=t[1]*r+t[5]*s+t[9]*n+t[13],e[14]=t[2]*r+t[6]*s+t[10]*n+t[14],e[15]=t[3]*r+t[7]*s+t[11]*n+t[15];else{const o=t[0],l=t[1],d=t[2],h=t[3],y=t[4],v=t[5],b=t[6],w=t[7],E=t[8],T=t[9],$=t[10],A=t[11];e[0]=o,e[1]=l,e[2]=d,e[3]=h,e[4]=y,e[5]=v,e[6]=b,e[7]=w,e[8]=E,e[9]=T,e[10]=$,e[11]=A,e[12]=o*r+y*s+E*n+t[12],e[13]=l*r+v*s+T*n+t[13],e[14]=d*r+b*s+$*n+t[14],e[15]=h*r+w*s+A*n+t[15]}return e}function ipe(e,t,i){const r=i[0],s=i[1],n=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rpe(e,t,i,r){let s=r[0],n=r[1],o=r[2],l=Math.sqrt(s*s+n*n+o*o);if(l<=bs())return void tW(e,t);l=1/l,s*=l,n*=l,o*=l;const d=Math.sin(i),h=Math.cos(i),y=1-h,v=t[0],b=t[1],w=t[2],E=t[3],T=t[4],$=t[5],A=t[6],O=t[7],L=t[8],R=t[9],N=t[10],j=t[11],V=s*s*y+h,Z=n*s*y+o*d,ie=o*s*y-n*d,oe=s*n*y-o*d,ue=n*n*y+h,me=o*n*y+s*d,Te=s*o*y+n*d,Ee=n*o*y-s*d,Ye=o*o*y+h;e[0]=v*V+T*Z+L*ie,e[1]=b*V+$*Z+R*ie,e[2]=w*V+A*Z+N*ie,e[3]=E*V+O*Z+j*ie,e[4]=v*oe+T*ue+L*me,e[5]=b*oe+$*ue+R*me,e[6]=w*oe+A*ue+N*me,e[7]=E*oe+O*ue+j*me,e[8]=v*Te+T*Ee+L*Ye,e[9]=b*Te+$*Ee+R*Ye,e[10]=w*Te+A*Ee+N*Ye,e[11]=E*Te+O*Ee+j*Ye,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function spe(e,t,i){const r=Math.sin(i),s=Math.cos(i),n=t[4],o=t[5],l=t[6],d=t[7],h=t[8],y=t[9],v=t[10],b=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*s+h*r,e[5]=o*s+y*r,e[6]=l*s+v*r,e[7]=d*s+b*r,e[8]=h*s-n*r,e[9]=y*s-o*r,e[10]=v*s-l*r,e[11]=b*s-d*r,e}function npe(e,t,i){const r=Math.sin(i),s=Math.cos(i),n=t[0],o=t[1],l=t[2],d=t[3],h=t[8],y=t[9],v=t[10],b=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s-h*r,e[1]=o*s-y*r,e[2]=l*s-v*r,e[3]=d*s-b*r,e[8]=n*r+h*s,e[9]=o*r+y*s,e[10]=l*r+v*s,e[11]=d*r+b*s,e}function ope(e,t,i){const r=Math.sin(i),s=Math.cos(i),n=t[0],o=t[1],l=t[2],d=t[3],h=t[4],y=t[5],v=t[6],b=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s+h*r,e[1]=o*s+y*r,e[2]=l*s+v*r,e[3]=d*s+b*r,e[4]=h*s-n*r,e[5]=y*s-o*r,e[6]=v*s-l*r,e[7]=b*s-d*r,e}function ape(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function lpe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function upe(e,t,i){if(t===0)return KT(e);let r=i[0],s=i[1],n=i[2],o=Math.sqrt(r*r+s*s+n*n);if(o<=bs())return null;o=1/o,r*=o,s*=o,n*=o;const l=Math.sin(t),d=Math.cos(t),h=1-d;return e[0]=r*r*h+d,e[1]=s*r*h+n*l,e[2]=n*r*h-s*l,e[3]=0,e[4]=r*s*h-n*l,e[5]=s*s*h+d,e[6]=n*s*h+r*l,e[7]=0,e[8]=r*n*h+s*l,e[9]=s*n*h-r*l,e[10]=n*n*h+d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function cpe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function dpe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function hpe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function sW(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],l=r+r,d=s+s,h=n+n,y=r*l,v=r*d,b=r*h,w=s*d,E=s*h,T=n*h,$=o*l,A=o*d,O=o*h;return e[0]=1-(w+T),e[1]=v+O,e[2]=b-A,e[3]=0,e[4]=v-O,e[5]=1-(y+T),e[6]=E+$,e[7]=0,e[8]=b+A,e[9]=E-$,e[10]=1-(y+w),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function ppe(e,t){const i=fpe,r=-t[0],s=-t[1],n=-t[2],o=t[3],l=t[4],d=t[5],h=t[6],y=t[7],v=r*r+s*s+n*n+o*o;return v>0?(i[0]=2*(l*o+y*r+d*n-h*s)/v,i[1]=2*(d*o+y*s+h*r-l*n)/v,i[2]=2*(h*o+y*n+l*s-d*r)/v):(i[0]=2*(l*o+y*r+d*n-h*s),i[1]=2*(d*o+y*s+h*r-l*n),i[2]=2*(h*o+y*n+l*s-d*r)),sW(e,t,i),e}const fpe=nd();function mpe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function ype(e,t){const i=t[0],r=t[1],s=t[2],n=t[4],o=t[5],l=t[6],d=t[8],h=t[9],y=t[10];return e[0]=Math.sqrt(i*i+r*r+s*s),e[1]=Math.sqrt(n*n+o*o+l*l),e[2]=Math.sqrt(d*d+h*h+y*y),e}function gpe(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function vpe(e,t,i,r){const s=t[0],n=t[1],o=t[2],l=t[3],d=s+s,h=n+n,y=o+o,v=s*d,b=s*h,w=s*y,E=n*h,T=n*y,$=o*y,A=l*d,O=l*h,L=l*y,R=r[0],N=r[1],j=r[2];return e[0]=(1-(E+$))*R,e[1]=(b+L)*R,e[2]=(w-O)*R,e[3]=0,e[4]=(b-L)*N,e[5]=(1-(v+$))*N,e[6]=(T+A)*N,e[7]=0,e[8]=(w+O)*j,e[9]=(T-A)*j,e[10]=(1-(v+E))*j,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function bpe(e,t,i,r,s){const n=t[0],o=t[1],l=t[2],d=t[3],h=n+n,y=o+o,v=l+l,b=n*h,w=n*y,E=n*v,T=o*y,$=o*v,A=l*v,O=d*h,L=d*y,R=d*v,N=r[0],j=r[1],V=r[2],Z=s[0],ie=s[1],oe=s[2],ue=(1-(T+A))*N,me=(w+R)*N,Te=(E-L)*N,Ee=(w-R)*j,Ye=(1-(b+A))*j,te=($+O)*j,fe=(E+L)*V,we=($-O)*V,Je=(1-(b+T))*V;return e[0]=ue,e[1]=me,e[2]=Te,e[3]=0,e[4]=Ee,e[5]=Ye,e[6]=te,e[7]=0,e[8]=fe,e[9]=we,e[10]=Je,e[11]=0,e[12]=i[0]+Z-(ue*Z+Ee*ie+fe*oe),e[13]=i[1]+ie-(me*Z+Ye*ie+we*oe),e[14]=i[2]+oe-(Te*Z+te*ie+Je*oe),e[15]=1,e}function _pe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=i+i,l=r+r,d=s+s,h=i*o,y=r*o,v=r*l,b=s*o,w=s*l,E=s*d,T=n*o,$=n*l,A=n*d;return e[0]=1-v-E,e[1]=y+A,e[2]=b-$,e[3]=0,e[4]=y-A,e[5]=1-h-E,e[6]=w+T,e[7]=0,e[8]=b+$,e[9]=w-T,e[10]=1-h-v,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function wpe(e,t,i,r,s,n,o){const l=1/(i-t),d=1/(s-r),h=1/(n-o);return e[0]=2*n*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*d,e[6]=0,e[7]=0,e[8]=(i+t)*l,e[9]=(s+r)*d,e[10]=(o+n)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n*2*h,e[15]=0,e}function Spe(e,t,i,r,s){const n=1/Math.tan(t/2);let o;return e[0]=n/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(o=1/(r-s),e[10]=(s+r)*o,e[14]=2*s*r*o):(e[10]=-1,e[14]=-2*r),e}function Epe(e,t,i,r){const s=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),d=2/(o+l),h=2/(s+n);return e[0]=d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=-(o-l)*d*.5,e[9]=(s-n)*h*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function Tpe(e,t,i,r,s,n,o){const l=1/(t-i),d=1/(r-s),h=1/(n-o);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+i)*l,e[13]=(s+r)*d,e[14]=(o+n)*h,e[15]=1,e}function $pe(e,t,i,r){const s=t[0],n=t[1],o=t[2];let l=s-i[0],d=n-i[1],h=o-i[2];const y=bs();if(Math.abs(l)<y&&Math.abs(d)<y&&Math.abs(h)<y)return void KT(e);let v=1/Math.sqrt(l*l+d*d+h*h);l*=v,d*=v,h*=v;const b=r[0],w=r[1],E=r[2];let T=w*h-E*d,$=E*l-b*h,A=b*d-w*l;v=Math.sqrt(T*T+$*$+A*A),v?(v=1/v,T*=v,$*=v,A*=v):(T=0,$=0,A=0);let O=d*A-h*$,L=h*T-l*A,R=l*$-d*T;v=Math.sqrt(O*O+L*L+R*R),v?(v=1/v,O*=v,L*=v,R*=v):(O=0,L=0,R=0),e[0]=T,e[1]=O,e[2]=l,e[3]=0,e[4]=$,e[5]=L,e[6]=d,e[7]=0,e[8]=A,e[9]=R,e[10]=h,e[11]=0,e[12]=-(T*s+$*n+A*o),e[13]=-(O*s+L*n+R*o),e[14]=-(l*s+d*n+h*o),e[15]=1}function xpe(e,t,i,r){const s=t[0],n=t[1],o=t[2],l=r[0],d=r[1],h=r[2];let y=s-i[0],v=n-i[1],b=o-i[2],w=y*y+v*v+b*b;w>0&&(w=1/Math.sqrt(w),y*=w,v*=w,b*=w);let E=d*b-h*v,T=h*y-l*b,$=l*v-d*y;return w=E*E+T*T+$*$,w>0&&(w=1/Math.sqrt(w),E*=w,T*=w,$*=w),e[0]=E,e[1]=T,e[2]=$,e[3]=0,e[4]=v*$-b*T,e[5]=b*E-y*$,e[6]=y*T-v*E,e[7]=0,e[8]=y,e[9]=v,e[10]=b,e[11]=0,e[12]=s,e[13]=n,e[14]=o,e[15]=1,e}function Mpe(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Ape(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function Ipe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function nW(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function Cpe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function Ope(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function Lpe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Rpe(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],l=e[5],d=e[6],h=e[7],y=e[8],v=e[9],b=e[10],w=e[11],E=e[12],T=e[13],$=e[14],A=e[15],O=t[0],L=t[1],R=t[2],N=t[3],j=t[4],V=t[5],Z=t[6],ie=t[7],oe=t[8],ue=t[9],me=t[10],Te=t[11],Ee=t[12],Ye=t[13],te=t[14],fe=t[15],we=bs();return Math.abs(i-O)<=we*Math.max(1,Math.abs(i),Math.abs(O))&&Math.abs(r-L)<=we*Math.max(1,Math.abs(r),Math.abs(L))&&Math.abs(s-R)<=we*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(n-N)<=we*Math.max(1,Math.abs(n),Math.abs(N))&&Math.abs(o-j)<=we*Math.max(1,Math.abs(o),Math.abs(j))&&Math.abs(l-V)<=we*Math.max(1,Math.abs(l),Math.abs(V))&&Math.abs(d-Z)<=we*Math.max(1,Math.abs(d),Math.abs(Z))&&Math.abs(h-ie)<=we*Math.max(1,Math.abs(h),Math.abs(ie))&&Math.abs(y-oe)<=we*Math.max(1,Math.abs(y),Math.abs(oe))&&Math.abs(v-ue)<=we*Math.max(1,Math.abs(v),Math.abs(ue))&&Math.abs(b-me)<=we*Math.max(1,Math.abs(b),Math.abs(me))&&Math.abs(w-Te)<=we*Math.max(1,Math.abs(w),Math.abs(Te))&&Math.abs(E-Ee)<=we*Math.max(1,Math.abs(E),Math.abs(Ee))&&Math.abs(T-Ye)<=we*Math.max(1,Math.abs(T),Math.abs(Ye))&&Math.abs($-te)<=we*Math.max(1,Math.abs($),Math.abs(te))&&Math.abs(A-fe)<=we*Math.max(1,Math.abs(A),Math.abs(fe))}function Ppe(e){const t=bs(),i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],l=e[6],d=e[8],h=e[9],y=e[10];return Math.abs(1-(i*i+n*n+d*d))<=t&&Math.abs(1-(r*r+o*o+h*h))<=t&&Math.abs(1-(s*s+l*l+y*y))<=t}function kpe(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const Dpe=rW,Npe=nW;Object.freeze(Object.defineProperty({__proto__:null,add:Ipe,adjoint:Khe,copy:tW,determinant:epe,equals:Rpe,exactEquals:Lpe,frob:Ape,fromQuat:_pe,fromQuat2:ppe,fromRotation:upe,fromRotationTranslation:sW,fromRotationTranslationScale:vpe,fromRotationTranslationScaleOrigin:bpe,fromScaling:lpe,fromTranslation:ape,fromXRotation:cpe,fromYRotation:dpe,fromZRotation:hpe,frustum:wpe,getRotation:gpe,getScaling:ype,getTranslation:mpe,hasIdentityRotation:kpe,identity:KT,invert:iW,invertOrIdentity:Qhe,isOrthoNormal:Ppe,lookAt:$pe,mul:Dpe,multiply:rW,multiplyScalar:Cpe,multiplyScalarAndAdd:Ope,ortho:Tpe,perspective:Spe,perspectiveFromFieldOfView:Epe,rotate:rpe,rotateX:spe,rotateY:npe,rotateZ:ope,scale:ipe,set:od,str:Mpe,sub:Npe,subtract:nW,targetTo:xpe,translate:tpe,transpose:ad},Symbol.toStringTag,{value:"Module"}));const Fpe=(e,t)=>{const i=od(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return ad(i,i)},Vpe=(e,t)=>{const i=od(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return ad(i,i)},zpe=(e,t)=>{const i=1-t,r=od(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return ad(r,r)},jpe=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),s=od(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return ad(s,s)},Upe=(e,t)=>{const i=1-2*t,r=od(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return ad(r,r)},Gpe=(e,t)=>{const i=od(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return ad(i,i)},qpe=(e,t)=>{const i=1-t,r=od(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return ad(r,r)};let oW=class aW{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=Ds(t.strength,i.strength,r),this.radius=Ds(t.radius,i.radius,r),this.threshold=Ds(t.threshold,i.threshold,r)}clone(){return new aW(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:ub(this.radius),strength:this.strength,threshold:this.threshold}}},lW=class uW{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(Ds(t.radius,i.radius,r))}clone(){return new uW(this.radius)}toJSON(){return{type:"blur",radius:ub(this.radius)}}},dC=class cW{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=Ds(t.amount,i.amount,r),this._updateMatrix()}clone(){return new cW(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||XT();switch(this.type){case"brightness":this._colorMatrix=Fpe(t,this.amount);break;case"contrast":this._colorMatrix=Vpe(t,this.amount);break;case"grayscale":this._colorMatrix=zpe(t,this.amount);break;case"invert":this._colorMatrix=Upe(t,this.amount);break;case"saturate":this._colorMatrix=Gpe(t,this.amount);break;case"sepia":this._colorMatrix=qpe(t,this.amount)}}},dW=class hW{constructor(t,i,r,s){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=Ds(t.offsetX,i.offsetX,r),this.offsetY=Ds(t.offsetY,i.offsetY,r),this.blurRadius=Ds(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Ds(t.color[0],i.color[0],r)),this.color[1]=Math.round(Ds(t.color[1],i.color[1],r)),this.color[2]=Math.round(Ds(t.color[2],i.color[2],r)),this.color[3]=Ds(t.color[3],i.color[3],r)}clone(){return new hW(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:ub(this.offsetX),yoffset:ub(this.offsetY),blurRadius:ub(this.blurRadius),color:t}}},pW=class fW{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=Ds(t.angle,i.angle,r),this._updateMatrix()}clone(){return new fW(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||XT();this._colorMatrix=jpe(t,this.angle)}},mW=class yW{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=Ds(t.amount,i.amount,r)}clone(){return new yW(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Ds(e,t,i){return e+(t-e)*i}function ub(e){return Math.round(1e3*Bs(e))/1e3}function Bpe(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new dC(e.type,0);case"saturate":case"brightness":case"contrast":return new dC(e.type,1);case"opacity":return new mW(1);case"hue-rotate":return new pW(0);case"blur":return new lW(0);case"drop-shadow":return new dW(0,0,0,[...ak("transparent")]);case"bloom":return new oW(0,0,1)}}function gW(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,s)=>r.type===i[s].type)}function vW(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let s=r.length;s<i.length;s++)r.push(Bpe(i[s]))}function Hpe(e){const t=e[0];return!!t&&"type"in t}const D3=()=>ae.getLogger("esri.support.basemapUtils");function Wpe(){return{}}function Zpe(e){for(const t in e){const i=e[t];Zt(i),delete e[t]}}function Ype(e,t){let i;if(typeof e=="string"){const r=e in XI,s=!r&&e.includes("/");if(!r&&!s){if(It.apiKey)D3().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(XI).filter(([o,l])=>l.classic||l.is3d).map(([o])=>`"${o}"`).sort().join(", ");D3().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${n}`)}return null}t&&(i=t[e]),i||(i=r?lb.fromId(e):new lb({style:{id:e}}),t&&(t[e]=i))}else i=Zi(lb,e);return i!=null&&i.destroyed&&(D3().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function Jpe(e){return new qb({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return!!i&&"tables"in i&&i.tables.includes(t)}})}function N3(e){for(const t of e.values())t==null||t.destroy();e.clear()}const H8={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Xpe(e){let t=null;if(typeof e=="string")if(e in H8){const i=H8[e];t=new RE({resourceInfo:{data:{layers:[i]}}})}else ae.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Zi(RE,e);return t}let bW=0;const _W=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+bW++})}};return t=c([I("esri.core.Identifiable")],t),t},Qpe=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:bW++})}};return t=c([I("esri.core.Identifiable.NumericIdentifiable")],t),t};let Q0=class extends _W(class{}){};Q0=c([I("esri.core.Identifiable")],Q0),function(e){e.IdentifiableMixin=_W,e.NumericIdentifiableMixin=Qpe}(Q0||(Q0={}));const ld=Q0;async function Kpe(e){var r;const t="portalItem"in e?e:{portalItem:e},{fromItem:i}=await D(async()=>{const{fromItem:s}=await import("./portalLayers-B1Bs-j34.js");return{fromItem:s}},__vite__mapDeps([14,12,11,10,13]));try{return await i(t)}catch(s){const n=t==null?void 0:t.portalItem,o=(n==null?void 0:n.id)||"unset",l=((r=n==null?void 0:n.portal)==null?void 0:r.url)||It.portalUrl;throw ae.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+l+"', id: '"+o+"')",s),s}}const hC={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function F3(e,t,i,r=ka){const s=new Gs(sk(r)),n=ke.fromJSDate(e,{zone:s}),o=i==="decades"||i==="centuries"?"year":SW(i);return i==="decades"&&(t*=10),i==="centuries"&&(t*=100),n.plus({[o]:t}).toJSDate()}function p4e(e,t,i="milliseconds"){const r=e.getTime(),s=wW(t,i,"milliseconds");return new Date(r+s)}function W8(e,t,i=ka){const r=new Gs(sk(i)),s=ke.fromJSDate(e,{zone:r});if(t==="decades"||t==="centuries"){const o=s.startOf("year"),{year:l}=o,d=l-l%(t==="decades"?10:100);return o.set({year:d}).toJSDate()}const n=SW(t);return s.startOf(n).toJSDate()}function wW(e,t,i){return e===0?0:e*hC[t]/hC[i]}function f4e(e,t){return e&&t?e.intersection(t):e||t}function SW(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Rn;let pn=Rn=class extends se{static get allTime(){return Z8}static get empty(){return efe}static fromArray(e){return new Rn({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Rn.allTime)}get isEmpty(){return this.equals(Rn.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new Rn({end:this.end,start:this.start})}equals(e){var n,o,l,d;if(!e)return!1;const t=((n=this.start)==null?void 0:n.getTime())??this.start,i=((o=this.end)==null?void 0:o.getTime())??this.end,r=((l=e.start)==null?void 0:l.getTime())??e.start,s=((d=e.end)==null?void 0:d.getTime())??e.end;return t===r&&i===s}expandTo(e,t=ka){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=W8(i,e,t));let r=this.end;if(r){const s=W8(r,e,t);r=r.getTime()===s.getTime()?s:F3(s,1,e,t)}return new Rn({start:i,end:r})}intersection(e){var l,d,h,y;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Rn.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((l=this.start)==null?void 0:l.getTime())??-1/0,i=((d=this.end)==null?void 0:d.getTime())??1/0,r=((h=e.start)==null?void 0:h.getTime())??-1/0,s=((y=e.end)==null?void 0:y.getTime())??1/0;let n,o;return r>=t&&r<=i?n=r:t>=r&&t<=s&&(n=t),i>=r&&i<=s?o=i:s>=t&&s<=i&&(o=s),n==null||o==null||isNaN(n)||isNaN(o)?Rn.empty:new Rn({start:n===-1/0?null:new Date(n),end:o===1/0?null:new Date(o)})}offset(e,t,i=ka){if(this.isEmpty||this.isAllTime)return this.clone();const r=new Rn,{start:s,end:n}=this;return s!=null&&(r.start=F3(s,e,t,i)),n!=null&&(r.end=F3(n,e,t,i)),r}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return Z8.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Rn({start:t,end:i})}};c([p({type:Date,json:{write:{allowNull:!0}}})],pn.prototype,"end",void 0),c([pe("end")],pn.prototype,"readEnd",null),c([be("end")],pn.prototype,"writeEnd",null),c([p({readOnly:!0,json:{read:!1}})],pn.prototype,"isAllTime",null),c([p({readOnly:!0,json:{read:!1}})],pn.prototype,"isEmpty",null),c([p({type:Date,json:{write:{allowNull:!0}}})],pn.prototype,"start",void 0),c([pe("start")],pn.prototype,"readStart",null),c([be("start")],pn.prototype,"writeStart",null),pn=Rn=c([I("esri.time.TimeExtent")],pn);const ru=pn,Z8=new pn,efe=new pn({start:void 0,end:void 0});let tfe=0,xi=class extends Kn.EventedMixin(ld.IdentifiableMixin(iu)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Jt(-180,-90,180,90,tt.WGS84),this.id=Date.now().toString(16)+"-layer-"+tfe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=tt.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const i=typeof t=="string"?{url:t}:t;return(await D(async()=>{const{fromUrl:r}=await import("./arcgisLayers-BL8Hwe5a.js");return{fromUrl:r}},__vite__mapDeps([15,12,11,13]))).fromUrl(i)}static fromPortalItem(t){return Kpe(t)}initialize(){this.when().catch(t=>{rs(t)||ae.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const i=this;"layers"in t&&t.layers.includes(i)?t.layers.remove(i):"tables"in t&&t.tables.includes(i)?t.tables.remove(i):"baseLayers"in t&&t.baseLayers.includes(i)?t.baseLayers.remove(i):"referenceLayers"in t&&t.referenceLayers.includes(i)&&t.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const i=this.parent;return t&&i&&"effectiveVisible"in i&&t&&(t=i.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return ur(this.url)}createLayerView(t,i){return Promise.reject(new B("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Rt(t,{query:{f:"json"},responseType:"json"})).data;throw new B("layer:no-attribution-data","Layer does not have attribution data")}};c([p({type:String})],xi.prototype,"attributionDataUrl",void 0),c([p({readOnly:!0})],xi.prototype,"effectiveVisible",null),c([p({type:Jt})],xi.prototype,"fullExtent",void 0),c([p({readOnly:!0})],xi.prototype,"hasAttributionData",null),c([p({type:String,clonable:!1})],xi.prototype,"id",void 0),c([p({type:Boolean,nonNullable:!0})],xi.prototype,"legendEnabled",void 0),c([p({type:["show","hide","hide-children"]})],xi.prototype,"listMode",void 0),c([p({type:Number,range:{min:0,max:1},nonNullable:!0})],xi.prototype,"opacity",void 0),c([p({clonable:!1})],xi.prototype,"parent",void 0),c([p({readOnly:!0})],xi.prototype,"parsedUrl",null),c([p({type:Boolean,readOnly:!0})],xi.prototype,"persistenceEnabled",void 0),c([p({type:Boolean})],xi.prototype,"popupEnabled",void 0),c([p({type:Boolean})],xi.prototype,"attributionVisible",void 0),c([p({type:tt})],xi.prototype,"spatialReference",void 0),c([p({type:String})],xi.prototype,"title",void 0),c([p({readOnly:!0,json:{read:!1}})],xi.prototype,"type",void 0),c([p()],xi.prototype,"url",void 0),c([p({type:ru})],xi.prototype,"visibilityTimeExtent",void 0),c([p({type:Boolean,nonNullable:!0})],xi.prototype,"visible",void 0),xi=c([I("esri.layers.Layer")],xi);const pk=xi;function pC(e,t,i){let r,s;if(e)for(let n=0,o=e.length;n<o;n++){if(r=e.at(n),(r==null?void 0:r[t])===i)return r;if((r==null?void 0:r.type)==="group"&&(s=pC(r.layers,t,i),s))return s}}const ife=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new _e;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||ae.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},n=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void ae.getLogger(this).error("#add()","Cannot add layer to itself.");r(o.item)}),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>n(o.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",tu(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof pk){const n=i;n.parent===this?this.reorder(n,r):s.add(n,r)}else Ua(i)?i.then(n=>{this.destroyed||this.add(n,r)}):ae.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;let n=s.getNextIndex(r);i.slice().forEach(o=>{o.parent!==this?(s.add(o,n),n+=1):this.reorder(o,n)})}findLayerById(i){return pC(this.layers,"id",i)}findLayerByUid(i){return pC(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return c([p()],t.prototype,"layers",null),t=c([I("esri.support.LayersMixin")],t),t},rfe=new Set(["feature","subtype-group"]);function fC(e,t,i){if(e)for(let r=0,s=e.length;r<s;r++){const n=e.at(r);if(n[t]===i)return n;if((n==null?void 0:n.type)==="group"){const o=fC(n.tables,t,i);if(o)return o}}}const sfe=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new _e,this.addHandles([this.tables.on("after-add",r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,rfe.has(s.type)||ae.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",tu(i,this._get("tables")))}findTableById(i){return fC(this.tables,"id",i)}findTableByUid(i){return fC(this.tables,"uid",i)}};return c([p()],t.prototype,"tables",null),t=c([I("esri.support.TablesMixin")],t),t};let wo=class extends sfe(ife(Kn.EventedMixin(Me))){constructor(t){super(t),this.allLayers=new qb({getCollections:()=>{var i,r,s;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=Jpe(this),this.basemap=null,this.editableLayers=new qb({getCollections:()=>[this.allLayers],itemFilterFunction:Rhe}),this.ground=new RE,this._basemapCache=Wpe()}destroy(){Zpe(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Zt(this.basemap),Zt(this.ground),this._set("ground",null)}castBasemap(t){return Ype(t,this._basemapCache)}castGround(t){return Xpe(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(i=>i.id===t)}findTableById(t){return this.allTables.find(i=>i.id===t)}};c([p({readOnly:!0,dependsOn:[]})],wo.prototype,"allLayers",void 0),c([p({readOnly:!0})],wo.prototype,"allTables",void 0),c([p({type:lb,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],wo.prototype,"basemap",void 0),c([mt("basemap")],wo.prototype,"castBasemap",null),c([p({readOnly:!0})],wo.prototype,"editableLayers",void 0),c([p({type:RE,nonNullable:!0})],wo.prototype,"ground",void 0),c([mt("ground")],wo.prototype,"castGround",null),c([p()],wo.prototype,"undoRedo",void 0),wo=c([I("esri.Map")],wo);const EW=wo,TW=e=>{let t=class extends e{clone(){var d;const i=Us(this);m_(i,"unable to clone instance of non-accessor class");const r=i.metadata,s=i.store,n={},o=new Map;for(const h in r){const y=r[h],v=s==null?void 0:s.originOf(h),b=y.clonable;if(y.readOnly||b===!1||v!==He.USER&&v!==He.DEFAULTS&&v!==He.WEB_MAP&&v!==He.WEB_SCENE)continue;const w=this[h];let E=null;E=typeof b=="function"?b(w):b==="reference"?w:cI(w),w!=null&&E==null||(v===He.DEFAULTS?o.set(h,E):n[h]=E)}const l=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){const h=(d=Us(l))==null?void 0:d.store;if(h)for(const[y,v]of o)h.set(y,v,He.DEFAULTS)}return l}};return t=c([I("esri.core.Clonable")],t),t};let K0=class extends TW(Me){};K0=c([I("esri.core.Clonable")],K0),function(e){e.ClonableMixin=TW}(K0||(K0={}));const ut=K0;let Kd=class extends ut{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};c([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Kd.prototype,"row",void 0),c([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Kd.prototype,"column",void 0),c([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Kd.prototype,"rows",void 0),c([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Kd.prototype,"columns",void 0),Kd=c([I("esri.CameraLayout")],Kd);const $W=Kd;let fk=class{constructor(t,i){this.min=t,this.max=i,this.range=i-t}normalize(t,i=0,r=!1){return Y8(this.range,this.min,this.max,t,i,r)}clamp(t,i=0){return _n(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+mC(this.range,t-i,r)}minimalMonotonic(t,i,r){return Y8(this.range,t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,s=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(s)?r:s}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}};function Y8(e,t,i,r,s=0,n=!1){return(r-=s)<t?r+=mC(e,t-r):r>i&&(r-=mC(e,r-i)),n&&r===i&&(r=t),r+s}function mC(e,t,i=0){return Math.ceil((t-i)/e)*e+i}const _4e=new fk(0,2*Math.PI),w4e=new fk(-Math.PI,Math.PI),nfe=new fk(0,360);let ua=class extends ut.ClonableMixin(se){constructor(...t){super(...t),this.position=new rt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new $W}normalizeCtorArgs(t,i,r,s){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const n={position:t};return i!=null&&(n.heading=i),r!=null&&(n.tilt=r),s!=null&&(n.fov=s),n}return t}writePosition(t,i,r,s){const n=t.clone();n.x=ms(t.x||0),n.y=ms(t.y||0),n.z=t.hasZ?ms(t.z||0):t.z,i[r]=n.write({},s)}readPosition(t,i){const r=new rt;return r.read(t,i),r.x=ms(r.x||0),r.y=ms(r.y||0),r.z=r.hasZ?ms(r.z||0):r.z,r}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};c([p({type:rt,json:{write:{isRequired:!0}}})],ua.prototype,"position",void 0),c([be("position")],ua.prototype,"writePosition",null),c([pe("position")],ua.prototype,"readPosition",null),c([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),mt(e=>nfe.normalize(ms(e)))],ua.prototype,"heading",void 0),c([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),mt(e=>_n(ms(e),-180,180))],ua.prototype,"tilt",void 0),c([p({type:Number,nonNullable:!0,json:{default:55,write:!0}}),mt(e=>_n(ms(e,55),1,170))],ua.prototype,"fov",void 0),c([p({type:$W,nonNullable:!0,json:{read:!1,write:!1}})],ua.prototype,"layout",void 0),ua=c([I("esri.Camera")],ua);const ofe=ua;function Iy(e,t,i=!1){let{hasM:r,hasZ:s}=e;Array.isArray(t)?t.length!==4||r||s?t.length===3&&i&&!r?(s=!0,r=!1):t.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=r}var yC;function J8(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function afe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Yu=yC=class extends ou{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var s;if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):afe(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=(s=i.points)==null?void 0:s[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Jt,i=this.hasZ,r=this.hasM,s=i?3:2,n=e[0],o=J8(Math.min),l=J8(Math.max);let d,h,y,v,[b,w]=n,[E,T]=n;for(let $=0,A=e.length;$<A;$++){const O=e[$],[L,R]=O;if(b=o(b,L),w=o(w,R),E=l(E,L),T=l(T,R),i&&O.length>2){const N=O[2];d=o(d,N),y=l(y,N)}if(r&&O.length>s){const N=O[s];h=o(h,N),v=l(v,N)}}return t.xmin=b,t.ymin=w,t.xmax=E,t.ymax=T,t.spatialReference=this.spatialReference,i?(t.zmin=d,t.zmax=y):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=h,t.mmax=v):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=q(this.points)}addPoint(e){return Iy(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:q(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new yC(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new rt(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new rt(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Iy(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};c([p({readOnly:!0})],Yu.prototype,"cache",null),c([p()],Yu.prototype,"extent",null),c([p({type:[[Number]],json:{write:{isRequired:!0}}})],Yu.prototype,"points",void 0),c([be("points")],Yu.prototype,"writePoints",null),Yu=yC=c([I("esri.geometry.Multipoint")],Yu),Yu.prototype.toJSON.isDefaultToJSON=!0;const e$=Yu;function E4e(e){const t=[];for(e.reset();e.nextPath();){const i=[];for(;e.nextPoint();)i.push([e.x,e.y]);t.push(i)}return e.reset(),t}function lfe(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var PE;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(PE||(PE={}));function T4e(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,i=e.hasM;if(e.type==="point")return i&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:i?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice();if(e.type==="polyline")return e.paths.slice();if(e.type==="multipoint")return e.points.slice();if(e.type==="extent"){const r=e.clone().normalize();if(!r)return null;let s=!1,n=!1;return r.forEach(o=>{o.hasZ&&(s=!0),o.hasM&&(n=!0)}),r.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const d=.5*(o.zmax-o.zmin);for(let h=0;h<l.length;h++)l[h].push(d)}if(n&&o.hasM){const d=.5*(o.mmax-o.mmin);for(let h=0;h<l.length;h++)l[h].push(d)}return l})}return null}function t$(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function xW(e,t,i){const r=e[0]+i*(t[0]-e[0]),s=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,s,e[2]+i*(t[2]-e[2])]:[r,s]}function ufe(e,t,i,r){return cfe(e,t,i[r],i[r+1])}function cfe(e,t,i,r){const[s,n]=t,[o,l]=i,[d,h]=r,y=d-o,v=h-l,b=y*y+v*v,w=(s-o)*y+(n-l)*v,E=Math.min(1,Math.max(0,w/b));return e[0]=o+y*E,e[1]=l+v*E,e}function $4e(e,t,i,r,s,n){let o=i,l=r,d=s-o,h=n-l;if(d!==0||h!==0){const y=((e-o)*d+(t-l)*h)/(d*d+h*h);y>1?(o=s,l=n):y>0&&(o+=d*y,l+=h*y)}return d=e-o,h=t-l,d*d+h*h}function MW(e,t){return xW(e,t,.5)}function x4e(e){const t=e.length;let i=0;for(let r=0;r<t-1;++r)i+=t$(e[r],e[r+1]);return i}function M4e(e,t){if(t<=0)return e[0];const i=e.length;let r=0;for(let s=0;s<i-1;++s){const n=t$(e[s],e[s+1]);if(t-r<n){const o=(t-r)/n;return xW(e[s],e[s+1],o)}r+=n}return e[i-1]}function AW(e,t=PE.X,i=PE.Y){let r=0;const s=e.length;let n=e[0];for(let o=1;o<s;o++){const l=e[o];r+=(l[t]-n[t])*(l[i]+n[i]),n=l}if(!IW(e)){const o=e[0];r+=(o[t]-n[t])*(o[i]+n[i])}return r>=0}function IW(e){const t=e.length;return t<3||ET(e[0],e[t-1])}function A4e(e){"rings"in e&&(dfe(e),hfe(e))}function dfe(e){if(!("rings"in e))return!1;let t=!1;for(const i of e.rings)IW(i)||(i.push(i[0].slice()),t=!0);return t}function hfe(e){if(!("rings"in e)||e.rings.length===0||AW(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function I4e(e){return e.type!=="polygon"&&e.type!=="polyline"||pfe(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function pfe(e,t){const i=vs(t);if(!i)return;const r=i.valid[0],s=i.valid[1],n=s-r;for(const o of e){let l=1/0,d=-1/0;for(const y of o){const v=ffe(y[0],r,s);l=Math.min(l,v),d=Math.max(d,v),y[0]=v}const h=d-l;n-h<h&&o.forEach(y=>{y[0]<0&&(y[0]+=n)})}}function ffe(e,t,i){const r=i-t;return e<t?i-(t-e)%r:e>i?t+(e-t)%r:e}function C4e(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[i,r]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return i.length===r.length&&i.every((s,n)=>s.length===r[n].length)}function O4e(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function mfe(e){return e?yfe(e.rings,e.hasZ??!1):null}function yfe(e,t){if(!(e!=null&&e.length))return null;const i=[],r=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=e.length;n<o;n++){const l=CW(e[n],t,s);l&&r.push(l)}if(r.sort((n,o)=>{let l=n[2]-o[2];return l===0&&t&&(l=n[4]-o[4]),l}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const n=e[0]&&e[0].length?gfe(e[0],t):null;if(!n)return null;i[0]=n[0],i[1]=n[1],t&&n.length>2&&(i[2]=n[2])}return i}function CW(e,t,i){let r=0,s=0,n=0,o=0,l=0;const d=e.length?e[0][0]:0,h=e.length?e[0][1]:0,y=e.length&&t?e[0][2]:0;for(let b=0;b<e.length;b++){const w=e[b],E=e[(b+1)%e.length],[T,$,A]=w,O=T-d,L=$-h,[R,N,j]=E,V=R-d,Z=N-h,ie=O*Z-V*L;if(o+=ie,r+=(O+V)*ie,s+=(L+Z)*ie,t&&w.length>2&&E.length>2){const oe=A-y,ue=j-y,me=O*ue-V*oe;n+=(oe+ue)*me,l+=me}T<i[0]&&(i[0]=T),T>i[1]&&(i[1]=T),$<i[2]&&(i[2]=$),$>i[3]&&(i[3]=$),t&&(A<i[4]&&(i[4]=A),A>i[5]&&(i[5]=A))}if(o>0&&(o*=-1),l>0&&(l*=-1),!o)return null;o*=.5,l*=.5;const v=[r/(6*o)+d,s/(6*o)+h,o];return t&&(i[4]===i[5]||l===0?(v[3]=(i[4]+i[5])/2,v[4]=0):(v[3]=n/(6*l)+y,v[4]=l)),v}function L4e(e,t){let i=0,r=0,s=0;e.nextPoint();const n=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let l=0;l<e.pathSize;l++){e.seekInPath(l);const d=[e.x,e.y];e.seekInPath((l+1)%e.pathSize);const h=[e.x,e.y],[y,v]=d,b=y-n,w=v-o,[E,T]=h,$=E-n,A=T-o,O=b*A-$*w;s+=O,i+=(b+$)*O,r+=(w+A)*O,y<t[0]&&(t[0]=y),y>t[1]&&(t[1]=y),v<t[2]&&(t[2]=v),v>t[3]&&(t[3]=v)}return s>0&&(s*=-1),s?(s*=.5,[i/(6*s)+n,r/(6*s)+o,s]):null}function gfe(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,n=0,o=0,l=0;for(let d=0,h=e.length;d<h-1;d++){const y=e[d],v=e[d+1];if(y&&v){i[0]=y[0],i[1]=y[1],r[0]=v[0],r[1]=v[1],t&&y.length>2&&v.length>2&&(i[2]=y[2],r[2]=v[2]);const b=t$(i,r);if(b){s+=b;const w=MW(y,v);n+=b*w[0],o+=b*w[1],t&&w.length>2&&(l+=b*w[2])}}}return s>0?t?[n/s,o/s,l/s]:[n/s,o/s]:e.length?e[0]:null}function vfe(e){const{hasZ:t,totalSize:i}=e;if(i===0)return null;const r=[],s=[],n=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=CW(lfe(e),e.hasZ,n);o&&s.push(o)}if(s.sort((o,l)=>{let d=o[2]-l[2];return d===0&&t&&(d=o[4]-l[4]),d}),s.length&&(r[0]=s[0][0],r[1]=s[0][1],t&&(r[2]=s[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){e.reset(),e.nextPath();const o=e.pathSize?bfe(e):null;if(!o)return null;r[0]=o[0],r[1]=o[1],t&&o.length>2&&(r[2]=o[2])}return r}function bfe(e){const{hasZ:t}=e,i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,n=0,o=0,l=0;if(e.nextPoint()){let d=e.x,h=e.y,y=e.z;for(;e.nextPoint();){const v=e.x,b=e.y,w=e.z;i[0]=d,i[1]=h,r[0]=v,r[1]=b,t&&(i[2]=y,r[2]=w);const E=t$(i,r);if(E){s+=E;const T=MW(i,r);n+=E*T[0],o+=E*T[1],t&&T.length>2&&(l+=E*T[2])}d=v,h=b,y=w}}return s>0?t?[n/s,o/s,l/s]:[n/s,o/s]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const _fe=1e-6;function R4e(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<_fe){const s=vfe(e);return s?[s[0],s[1]]:null}const i=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const r=[e.x,e.y];for(e.reset();e.nextPath();)Sfe(i,r,e);return i[0]*=1/t,i[1]*=1/t,i[0]+=r[0],i[1]+=r[1],i}const wfe=1/3;function Sfe(e,t,i){if(!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,s=i.y;i.nextPoint();let n,o=i.x-r,l=i.y-s,d=0,h=0;for(;i.nextPoint();)d=i.x-r,h=i.y-s,n=.5*wfe*(d*l-h*o),e[0]+=n*(o+d),e[1]+=n*(l+h),o=d,l=h;const y=i.getCurrentRingArea(),v=[r,s];return v[0]-=t[0],v[1]-=t[1],v[0]*=y,v[1]*=y,e[0]+=v[0],e[1]+=v[1],e}function gs(e=xfe){return[e[0],e[1],e[2],e[3]]}function OW(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function P4e(e,t,i,r,s=gs()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function k4e(e,t=gs()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Efe(e,t,i=new Jt){return i.xmin=e[0],i.ymin=e[1],i.xmax=e[2],i.ymax=e[3],i.spatialReference=t,i}function D4e(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function N4e(e,t,i){if(t!=null)if("length"in t)gC(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}else OW(i,e)}function F4e(e,t,i=e){const r=t.length;let s=e[0],n=e[1],o=e[2],l=e[3];for(let d=0;d<r;d++){const h=t[d];s=Math.min(s,h[0]),n=Math.min(n,h[1]),o=Math.max(o,h[0]),l=Math.max(l,h[1])}return i[0]=s,i[1]=n,i[2]=o,i[3]=l,i}function V4e(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function mk(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function yk(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function z4e(e){return mk(e)*yk(e)}function j4e(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function U4e(e){const t=mk(e),i=yk(e);return Math.sqrt(t*t+i*i)}function G4e(e,t){return Tfe(e,t.x,t.y)}function Tfe(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function q4e(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function B4e(e,t,i){return Math.max(t[0],e[0])-i<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])-i<=Math.min(t[3],e[3])}function $fe(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function H4e(e,t,i,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+t,r[3]=e[3]+i,r}function W4e(e){return e?OW(e,X8):gs(X8)}function gC(e){return e!=null&&e.length===4}function Z4e(e,t){return gC(e)&&gC(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const X8=[1/0,1/0,-1/0,-1/0],xfe=[0,0,0,0];function LW(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function RW(e){return e.points!==void 0}function PW(e){return e.x!==void 0&&e.y!==void 0}function kW(e){return e.paths!==void 0}function DW(e){return e.rings!==void 0}function NW(e){function t(i,r){return i==null?r:r==null?i:e(i,r)}return t}const Pc=NW(Math.min),kc=NW(Math.max);function Y4e(e,t){return kW(t)?Cy(e,t.paths,!1,!1):DW(t)?Cy(e,t.rings,!1,!1):RW(t)?gk(e,t.points,!1,!1,!1,!1):LW(t)?FW(e,t):(PW(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function J4e(e){let t,i,r,s;for(e.reset(),t=r=1/0,i=s=-1/0;e.nextPath();){const n=Mfe(e);t=Math.min(n[0],t),r=Math.min(n[1],r),i=Math.max(n[2],i),s=Math.max(n[3],s)}return gs([t,r,i,s])}function Mfe(e){let t,i,r,s;for(t=r=1/0,i=s=-1/0;e.nextPoint();)t=Math.min(e.x,t),r=Math.min(e.y,r),i=Math.max(e.x,i),s=Math.max(e.y,s);return gs([t,r,i,s])}function X4e(e,t){return kW(t)?Cy(e,t.paths,!0,!1):DW(t)?Cy(e,t.rings,!0,!1):RW(t)?gk(e,t.points,!0,!1,!0,!1):LW(t)?FW(e,t,!0,!1,!0,!1):(PW(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Cy(e,t,i,r){const s=i?3:2;if(!t.length||!t[0].length)return null;let n,o,l,d,[h,y]=t[0][0],[v,b]=t[0][0];for(let w=0;w<t.length;w++){const E=t[w];for(let T=0;T<E.length;T++){const $=E[T],[A,O]=$;if(h=Pc(h,A),y=Pc(y,O),v=kc(v,A),b=kc(b,O),i&&$.length>2){const L=$[2];n=Pc(n,L),o=kc(o,L)}if(r&&$.length>s){const L=$[s];l=Pc(n,L),d=kc(o,L)}}}return i?r?(e[0]=h,e[1]=y,e[2]=n,e[3]=l,e[4]=v,e[5]=b,e[6]=o,e[7]=d,e.length=8,e):(e[0]=h,e[1]=y,e[2]=n,e[3]=v,e[4]=b,e[5]=o,e.length=6,e):r?(e[0]=h,e[1]=y,e[2]=l,e[3]=v,e[4]=b,e[5]=d,e.length=6,e):(e[0]=h,e[1]=y,e[2]=v,e[3]=b,e.length=4,e)}function FW(e,t,i,r,s,n){const o=t.xmin,l=t.xmax,d=t.ymin,h=t.ymax;let y=t.zmin,v=t.zmax,b=t.mmin,w=t.mmax;return s?(y=y||0,v=v||0,n?(b=b||0,w=w||0,e[0]=o,e[1]=d,e[2]=y,e[3]=b,e[4]=l,e[5]=h,e[6]=v,e[7]=w,e):(e[0]=o,e[1]=d,e[2]=y,e[3]=l,e[4]=h,e[5]=v,e)):n?(b=b||0,w=w||0,e[0]=o,e[1]=d,e[2]=b,e[3]=l,e[4]=h,e[5]=w,e):(e[0]=o,e[1]=d,e[2]=l,e[3]=h,e)}function gk(e,t,i,r,s,n){const o=i?3:2,l=r&&n,d=i&&s;if(!t.length||!t[0].length)return null;let h,y,v,b,[w,E]=t[0],[T,$]=t[0];for(let A=0;A<t.length;A++){const O=t[A],[L,R]=O;if(w=Pc(w,L),E=Pc(E,R),T=kc(T,L),$=kc($,R),d&&O.length>2){const N=O[2];h=Pc(h,N),y=kc(y,N)}if(l&&O.length>o){const N=O[o];v=Pc(h,N),b=kc(y,N)}}return s?(h=h||0,y=y||0,n?(v=v||0,b=b||0,e[0]=w,e[1]=E,e[2]=h,e[3]=v,e[4]=T,e[5]=$,e[6]=y,e[7]=b,e):(e[0]=w,e[1]=E,e[2]=h,e[3]=T,e[4]=$,e[5]=y,e)):n?(v=v||0,b=b||0,e[0]=w,e[1]=E,e[2]=v,e[3]=T,e[4]=$,e[5]=b,e):(e[0]=w,e[1]=E,e[2]=T,e[3]=$,e)}function Afe(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Ife(e){return e.points!==void 0}function Cfe(e){return e.x!==void 0&&e.y!==void 0}function Ofe(e){return e.paths!==void 0}function Lfe(e){return e.rings!==void 0}const vk=[];function VW(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function zW(e,t,i,r,s,n){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:s,zmax:n}}function jW(e,t,i,r,s,n){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:s,mmax:n}}function UW(e,t,i,r,s,n,o,l){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:s,ymax:n,zmax:o,mmax:l}}function bk(e,t=!1,i=!1){return t?i?UW(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):zW(e[0],e[1],e[2],e[3],e[4],e[5]):i?jW(e[0],e[1],e[2],e[3],e[4],e[5]):VW(e[0],e[1],e[2],e[3])}function Q4e(e){return e?Afe(e)?e:Cfe(e)?Pfe(e):Lfe(e)?GW(e):Ofe(e)?qW(e):Ife(e)?Rfe(e):null:null}function Rfe(e){const{hasZ:t,hasM:i,points:r}=e;return bk(gk(vk,r,t??!1,i??!1),t,i)}function Pfe(e){const{x:t,y:i,z:r,m:s}=e,n=s!=null;return r!=null?n?UW(t,i,r,s,t,i,r,s):zW(t,i,r,t,i,r):n?jW(t,i,s,t,i,s):VW(t,i,t,i)}function GW(e){const{hasZ:t,hasM:i,rings:r}=e,s=Cy(vk,r,t??!1,i??!1);return s?bk(s,t,i):null}function qW(e){const{hasZ:t,hasM:i,paths:r}=e,s=Cy(vk,r,t??!1,i??!1);return s?bk(s,t,i):null}var ZS;function Q8(e){return!Array.isArray(e[0])}function kfe(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function Dfe(e){var n,o;if(!e)return;let{rings:t,hasM:i,hasZ:r,spatialReference:s}=e;switch(t??(t=[]),kfe(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return s??(s=tt.WGS84),{...e,hasM:i,hasZ:r,rings:t,spatialReference:s}}let Un=ZS=class extends ou{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:i}=e;let r=!1,s=!1;for(const o of t)o.hasZ&&(r=!0),o.hasM&&(s=!0);const n={rings:t.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const d=o.zmin+.5*(o.zmax-o.zmin);for(let h=0;h<l.length;h++)l[h].push(d)}if(s&&o.hasM){const d=o.mmin+.5*(o.mmax-o.mmin);for(let h=0;h<l.length;h++)l[h].push(d)}return l}),spatialReference:i};return r&&(n.hasZ=!0),s&&(n.hasM=!0),new ZS(n)}constructor(e){super(Dfe(e)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const e=mfe(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new rt;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}writeCurveRings(e,t){t.curveRings=q(e)}get extent(){const e=GW(this),{spatialReference:t}=this;return e?new Jt({...e,spatialReference:t}):null}get isSelfIntersecting(){return vue(this.rings)}writeRings(e,t){t.rings=q(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(Q8(e)){const r=[];for(let s=0,n=e.length;s<n;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new ZS;return e.spatialReference=this.spatialReference,e.rings=q(this.rings),e.curveRings=q(this.curveRings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;if(t!=null!=(i!=null)||t!=null&&i!=null&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([s,n,o,l],[d,h,y,v])=>s===d&&n===h&&(o==null&&y==null||o===y)&&(l==null&&v==null||l===v);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=e.rings[s];if(!ET(n,o,r))return!1}return!0}contains(e){if(!e)return!1;const t=VT(e,this.spatialReference);return qP(this,t??e)}isClockwise(e){const t=Q8(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e;return AW(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new rt(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new rt(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new rt(i[0],i[1],i[2],i[3],this.spatialReference):new rt(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Iy(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new rt(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new rt(s,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(Iy(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([p({readOnly:!0})],Un.prototype,"cache",null),c([p({readOnly:!0})],Un.prototype,"centroid",null),c([p({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Un.prototype,"curveRings",void 0),c([be("curveRings")],Un.prototype,"writeCurveRings",null),c([p({readOnly:!0})],Un.prototype,"extent",null),c([p({readOnly:!0})],Un.prototype,"isSelfIntersecting",null),c([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],Un.prototype,"rings",void 0),c([be("rings")],Un.prototype,"writeRings",null),Un=ZS=c([I("esri.geometry.Polygon")],Un);const Xo=Un;Un.prototype.toJSON.isDefaultToJSON=!0;var vC;function Nfe(e){return!Array.isArray(e[0])}function Ffe(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function Vfe(e){var n,o;if(!e)return;let{paths:t,hasM:i,hasZ:r,spatialReference:s}=e;switch(t??(t=[]),Ffe(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return s??(s=tt.WGS84),{...e,hasM:i,hasZ:r,paths:t,spatialReference:s}}let Ta=vC=class extends ou{constructor(e){super(Vfe(e)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(e,t){t.curvePaths=q(e)}get extent(){const e=qW(this),{spatialReference:t}=this;return e?new Jt({...e,spatialReference:t}):null}writePaths(e,t){t.paths=q(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(Nfe(e)){const r=[];for(let s=0,n=e.length;s<n;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new vC;return e.spatialReference=this.spatialReference,e.paths=q(this.paths),e.curvePaths=q(this.curvePaths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new rt(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new rt(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new rt(i[0],i[1],i[2],i[3],this.spatialReference):new rt(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Iy(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new rt(s,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new rt(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Iy(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([p({readOnly:!0})],Ta.prototype,"cache",null),c([p({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Ta.prototype,"curvePaths",void 0),c([be("curvePaths")],Ta.prototype,"writeCurvePaths",null),c([p({readOnly:!0})],Ta.prototype,"extent",null),c([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ta.prototype,"paths",void 0),c([be("paths")],Ta.prototype,"writePaths",null),Ta=vC=c([I("esri.geometry.Polyline")],Ta);const qo=Ta;Ta.prototype.toJSON.isDefaultToJSON=!0;function BW(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function HW(e){return e.points!==void 0}function WW(e){return e.x!==void 0&&e.y!==void 0}function _k(e){return e.paths!==void 0||e.curvePaths!==void 0}function lp(e){return e.rings!==void 0||e.curveRings!==void 0}function $p(e){return e==null?null:e instanceof ou?e:WW(e)?rt.fromJSON(e):_k(e)?qo.fromJSON(e):lp(e)?Xo.fromJSON(e):HW(e)?e$.fromJSON(e):BW(e)?Jt.fromJSON(e):null}function wk(e){return e?WW(e)?"esriGeometryPoint":_k(e)?"esriGeometryPolyline":lp(e)?"esriGeometryPolygon":BW(e)?"esriGeometryEnvelope":HW(e)?"esriGeometryMultipoint":null:null}const zfe={esriGeometryPoint:rt,esriGeometryPolyline:qo,esriGeometryPolygon:Xo,esriGeometryEnvelope:Jt,esriGeometryMultipoint:e$,esriGeometryMultiPatch:Xo};function jfe(e){return e&&zfe[e]||null}const Ufe=xr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),K8=xr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),R_={base:ou,key:"type",typeMap:{extent:Jt,multipoint:e$,point:rt,polyline:qo,polygon:Xo}};var bC;let Ju=bC=class extends se{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new bC({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};c([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:V3}}}}})],Ju.prototype,"rotation",void 0),c([mt("rotation")],Ju.prototype,"castRotation",null),c([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:V3}}}}})],Ju.prototype,"scale",void 0),c([p({types:R_,json:{read:$p,write:!0,origins:{"web-scene":{read:$p,write:{overridePolicy:V3}}}}})],Ju.prototype,"targetGeometry",void 0),c([p({type:ofe,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Ju.prototype,"camera",void 0),Ju=bC=c([I("esri.Viewpoint")],Ju);const Xn=Ju;function V3(){return{enabled:!this.camera}}let kE=class{constructor(t=i=>i.values().next().value){this._peeker=t,this._observable=new x_,this._items=new Set}get length(){return Fe(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return Fe(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const i=this.length;return this._items.forEach(r=>{t(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Fe(this._observable),yield*this._items}};const ZW=new FinalizationRegistry(e=>{e.close()});function Gfe(e,t){ZW.register(e,t,t)}function qfe(e){ZW.unregister(e)}function YW(e,t){return new Proxy({},{get:(i,r,s)=>(...n)=>{let o,l;const d=n[n.length-1];return Bfe(d)&&(o=d.signal,l=d.transferList,n.pop()),e.apply(t?`${t}.${r.toString()}`:r.toString(),n,{transferList:l,signal:o})}})}function Bfe(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const Hfe={statsWorker:()=>D(()=>import("./statsWorker-CcP9e-k7.js"),__vite__mapDeps([16,17,18,19,20])),geometryEngineWorker:()=>D(()=>import("./geometryEngineWorker-CA-tZxOm.js"),__vite__mapDeps([21,22,23,1,24])),arcadeGeometryOperatorsWorker:()=>D(()=>import("./operatorsWorker-CEzEZqKo.js"),[]),CSVSourceWorker:()=>D(()=>import("./CSVSourceWorker-Bq9aZDLf.js"),__vite__mapDeps([25,26,24,27,7,28,29,30,31,32,33,34,35,36,37,38,18,17,19,20,39,40,41,42,43,44,45,46])),EdgeProcessingWorker:()=>D(()=>import("./EdgeProcessingWorker-CnznGfFs.js"),__vite__mapDeps([47,48,49,50,51,52,53,54,55,56,57,58])),ElevationSamplerWorker:()=>D(()=>import("./ElevationSamplerWorker-QJug6tce.js"),__vite__mapDeps([59,43,60,61,62,63,64,65,66,67,68,50,69])),FeatureServiceSnappingSourceWorker:()=>D(()=>import("./FeatureServiceSnappingSourceWorker-BRJ8PPa4.js"),__vite__mapDeps([70,29,30,24,31,32,27,7,28,33,34,35,36,37,38,18,17,19,20,39,40,41,42,43,44,71,72,73,74,6])),GeoJSONSourceWorker:()=>D(()=>import("./GeoJSONSourceWorker-DknN0wzV.js"),__vite__mapDeps([75,32,27,7,28,33,29,30,24,31,34,35,36,37,38,18,17,19,20,39,40,41,42,43,44,76,26,46,77])),LercWorker:()=>D(()=>import("./LercWorker-UV78t4-p.js"),[]),MemorySourceWorker:()=>D(()=>import("./MemorySourceWorker-BPzqFUv8.js"),__vite__mapDeps([78,32,27,7,28,33,79,29,30,24,31,34,35,36,37,38,18,17,19,20,39,40,41,42,43,44,46,77,26])),PBFDecoderWorker:()=>D(()=>import("./PBFDecoderWorker-DDy7cuvn.js"),__vite__mapDeps([80,81,7,32,27,28,33,72,73])),FeaturePipelineWorker:()=>D(()=>import("./FeaturePipelineWorker-CtgJ3k_C.js"),__vite__mapDeps([82,83,84,85,57,86,30,24,37,32,27,7,28,33,36,87,88,89,90,91,92,93,18,94,95,96,97,98,99,100,101,102,44,31,34,35,38,17,19,20,39,40,103,104,105,106,74,72,73,107,76,26,46,77,108,109,110])),PointCloudWorker:()=>D(()=>import("./PointCloudWorker-Y4fFKtbw.js"),__vite__mapDeps([111,112,62,113,114,115,116,55,117,63,64,65,118])),RasterWorker:()=>D(()=>import("./RasterWorker-2pc68pD2.js"),__vite__mapDeps([119,120,121,1,122,123,124])),SceneLayerSnappingSourceWorker:()=>D(()=>import("./SceneLayerSnappingSourceWorker-Cq51MJj5.js"),__vite__mapDeps([125,126,127,62,118,63,113,128,49,50,51,52,53,54,55,56,57,58])),SceneLayerWorker:()=>D(()=>import("./SceneLayerWorker-CwzDOrLw.js"),__vite__mapDeps([129,60,68,130,66,127,62,118,63,113,131,116,55,132,92,133,134,135,136,117,112,64,65])),WFSSourceWorker:()=>D(()=>import("./WFSSourceWorker-Cn7ywko_.js"),__vite__mapDeps([137,32,27,7,28,33,29,30,24,31,34,35,36,37,38,18,17,19,20,39,40,41,42,43,44,76,26,77,138,139])),WorkerTileHandler:()=>D(()=>import("./WorkerTileHandler-CGWVjhdB.js"),__vite__mapDeps([140,141,90,93,142,143,73,7,98,144,145,57,100,88])),Lyr3DWorker:()=>D(()=>import("./Lyr3DWorker-V4tX0J0w.js"),[]),Feature3DPipelineWorker:()=>D(()=>import("./Feature3DPipelineWorker-CW9XvpSS.js"),__vite__mapDeps([146,31,32,27,7,28,33,34,35,36,37,30,24,38,18,17,19,20,39,40,43,74,72,73,54,147,148,149,150,135,63,136,134,62,55,151,127,118,113,126,117,112,64,65,152,153,49,50,51,154,56,57,155,128,156,92,157,158,67,60,130,66,159,114,160,161,162,133,163])),TextureCompressionWorker:()=>D(()=>import("./TextureCompressionWorker-C2BsO9gR.js"),__vite__mapDeps([164,153]))},JW="worker:port-closed";var wr;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(wr||(wr={}));let Wfe=0;function XW(){return Wfe++}function Zfe(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function Bb(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function Sk(e,t,i,r){if(t.type===wr.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==wr.INVOKE&&t.type!==wr.RESPONSE)return void e.postMessage(t);let s;if(Zfe(i)?(s=eV(i.transferList),t.data=i.result):(s=eV(r),t.data=i),s){if(Y("ff")){for(const n of s)if("byteLength"in n&&n.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case wr.INVOKE:throw o;case wr.RESPONSE:return void Sk(e,{type:wr.RESPONSE,jobId:t.jobId,error:Bb(o)})}}}e.postMessage(t,s)}else e.postMessage(t)}function Hb(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function eV(e){if(!(e!=null&&e.length))return null;if(Y("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!Yfe(i));return t.length?t:null}function Yfe(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function e6e(e){try{return await e}catch(t){const i=(t==null?void 0:t.name)===JW;if(!(rs(t)||i))throw t;return}}const{CLOSE:tV,ABORT:iV,INVOKE:rV,RESPONSE:S0,OPEN_PORT:sV,ON:Jfe}=wr,Xfe=2;let Qfe=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===wr.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Jc=class Qf{static connect(t,i){const r=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new Qf(r.port1,{channel:r,client:s,schedule:i});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),Qf.clients.set(n,s),r.port2}static loadWorker(t){const i=Hfe[t];return i?i():Promise.resolve(null)}constructor(t,i,r){this._port=t,this._jobQueue=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Qfe(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:tV}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){return this.apply(t,[i],r)}apply(t,i,r){const s=r==null?void 0:r.signal,n=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new B(JW,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const o=XW();return new Promise((l,d)=>{if(vn(s))return this._processWork(),void d(Yt());const h=Jn(s,()=>{const v=this._outJobs.get(o);v&&(this._outJobs.delete(o),this._processWork(),ui(v.abortHandle),this._post({type:iV,jobId:o}),d(Yt()))}),y={resolve:l,reject:d,abortHandle:h,debugInfo:t};this._outJobs.set(o,y),this._post({type:rV,jobId:o,methodName:t,abortable:s!=null},i,n)})}createInvokeProxy(t){return YW(this,t)}on(t,i){const r=new MessageChannel;function s(n){i(n.data)}return this._port.postMessage({type:wr.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),bt(()=>{r.port1.postMessage({type:wr.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:sV,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=Xfe)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:i,data:r,invokeOptions:s,resolver:n}=t;this.apply(i,r,s).then(l=>n.resolve(l)).catch(l=>n.reject(l))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{ui(t.abortHandle),t.reject(Yt(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,i){const r=Hb(t);if(r)switch(r.type){case S0:this._onResponseMessage(r);break;case rV:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case iV:this._onAbortMessage(r);break;case tV:this._onCloseMessage();break;case sV:this._onOpenPortMessage(r);break;case Jfe:this._onOnMessage(r)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Qf.clients.get(this)===t&&t.destroy(),Qf.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s=[],abortable:n}=t,o=n?new AbortController:null,l=this._inJobs;let d,h=this._client,y=h[i];try{if(!y&&i&&i.includes(".")){const v=i.split(".");for(let b=0;b<v.length-1;b++)h=h[v[b]],y=h[v[b+1]]}if(typeof y!="function")throw new TypeError(`${i} is not a function`);s.push({client:this,signal:o?o.signal:null}),d=y.apply(h,s)}catch(v){return void this._post({type:S0,jobId:r,error:Bb(v)})}Ua(d)?(l.set(r,{controller:o,promise:d}),d.then(v=>{l.has(r)&&(l.delete(r),this._post({type:S0,jobId:r},v))},v=>{l.has(r)&&(l.delete(r),rs(v)||this._post({type:S0,jobId:r,error:Bb(v||{message:`Error encountered at method ${i}`})}))})):this._post({type:S0,jobId:r},d)}_onOpenPortMessage(t){new Qf(t.port,{client:this._client})}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,n=>{i.postMessage(n)}),s=b_(t.port,"message",n=>{const o=Hb(n);(o==null?void 0:o.type)===wr.CLOSE&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,n=this._outJobs;if(!n.has(i))return;const o=n.get(i);n.delete(i),this._processWork(),ui(o.abortHandle),r?o.reject(B.fromJSON(JSON.parse(r))):o.resolve(s)}_post(t,i,r){return Sk(this._port,t,i,r)}};Jc.kernelInfo={buildDate:Vq,fullVersion:OP,revision:zq},Jc.clients=new Map;let Kfe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new kE}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,i){return new Promise((r,s)=>{let n=!0;const o=l=>{yi(i.signal),n&&(n=!1,l())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let l=0;l<t.length;++l){const d=t[l];Ua(d)?this._clientPromises[l]=d.then(h=>(this._clients[l]=new Jc(h,i,this._ongoingJobsQueue),o(r),this._clients[l]),()=>(o(s),null)):(this._clients[l]=new Jc(d,i,this._ongoingJobsQueue),this._clientPromises[l]=Promise.resolve(this._clients[l]),o(r))}})}broadcast(t,i,r){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(l=>l==null?void 0:l.invoke(t,i,r))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(Yt(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,qfe(this)}invoke(t,i,r){return this.apply(t,[i],r)}apply(t,i,r){const s=bn();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:r,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then(l=>l==null?void 0:l.jobAdded())}return s.promise}createInvokeProxy(t){return YW(this,t)}on(t,i){return Promise.all(this._clientPromises).then(()=>y_(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(i[s]=n.openPort()),--r==0&&t(i)})})}get test(){}};const eme={async request(e,t){var o,l;const i=e.options,r=i.responseType;i.signal=t==null?void 0:t.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((o=MI(e.url))!=null&&o.after)?r:"array-buffer";const s=await Rt(e.url,i),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((l=s.requestOptions)==null?void 0:l.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}},nV={};function tme(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((i=e.packages)==null?void 0:i.slice())||[],paths:{...nV.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=nV.baseUrl),t}let ime=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}},YS=class{constructor(){this._dispatcher=new ime,this._workerPostMessage({type:wr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){sE(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){sE(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=Hb(t);if(i&&i.type===wr.OPEN){const{modulePath:r,jobId:s}=i;let n=await Jc.loadWorker(r);n||(n=await import(r));const o=Jc.connect(n);this._workerPostMessage({type:wr.OPENED,jobId:s,data:o})}}};const _C=()=>ae.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:rme}=wr,sme='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Dw,Nw;const oV="Failed to create Worker. Fallback to execute module in main thread";async function nme(){if(!Y("esri-workers"))return aV(new YS);if(!Dw&&!Nw)try{const t=sme.split("{CONFIGURATION}").join(ome());Dw=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Nw=t||{}}let e;if(Dw)try{e=new Worker(Dw,{name:"esri-worker-"+ame++})}catch{_C().warn(oV,Nw),e=new YS}else _C().warn(oV,Nw),e=new YS;return aV(e)}async function aV(e){return new Promise(t=>{function i(s){const n=Hb(s);n&&n.type===rme&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(s){s.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),_C().warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new YS).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function ome(){let e;if(It.default!=null){const s={...It};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(It));e.assetsPath=Hn(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Hn(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Vs(),e.has={"esri-csp-restrictions":Y("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Y("esri-2d-update-debug"),"esri-2d-log-updating":Y("esri-2d-log-updating"),"featurelayer-pbf":Y("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":Y("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":Y("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":Y("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":Y("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":Y("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":Y("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":Y("featurelayer-snapshot-enabled"),"esri-atomics":Y("esri-atomics"),"esri-shared-array-buffer":Y("esri-shared-array-buffer"),"esri-tiles-debug":Y("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Y("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":Y("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Hn(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Hn(e.workers.workerPath):e.workers.workerPath=Hn(oi("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=It.workers.loaderConfig,i=tme({baseUrl:t==null?void 0:t.baseUrl,locale:Vs(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:{buildDate:Vq,fullVersion:OP,revision:zq}})}let ame=0;const{ABORT:lV,INVOKE:lme,OPEN:ume,OPENED:cme,RESPONSE:E0}=wr;let dme=class QW{static async create(t){const i=await nme();return new QW(i,t)}constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),ae.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,s=XW();return new Promise((n,o)=>{const l={resolve:n,reject:o,abortHandle:fP(r,()=>{this._outJobs.delete(s),this._post({type:lV,jobId:s})})};this._outJobs.set(s,l),this._post({type:ume,jobId:s,modulePath:t})})}_onMessage(t){const i=Hb(t);if(i)switch(i.type){case cme:this._onOpenedMessage(i);break;case E0:this._onResponseMessage(i);break;case lV:this._onAbortMessage(i);break;case lme:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:n}=t,o=n?new AbortController:null,l=this._inJobs,d=eme[i];let h;try{if(typeof d!="function")throw new TypeError(`${i} is not a function`);h=d.call(null,s,{signal:o?o.signal:null})}catch(y){return void this._post({type:E0,jobId:r,error:Bb(y)})}Ua(h)?(l.set(r,{controller:o,promise:h}),h.then(y=>{l.has(r)&&(l.delete(r),this._post({type:E0,jobId:r},y))},y=>{l.has(r)&&(l.delete(r),y||(y={message:"Error encountered at method"+i}),rs(y)||this._post({type:E0,jobId:r,error:Bb(y||{message:`Error encountered at method ${i}`})}))})):this._post({type:E0,jobId:r},h)}_onOpenedMessage(t){const{jobId:i,data:r}=t,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),ui(s.abortHandle),s.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),ui(n.abortHandle),r?n.reject(B.fromJSON(JSON.parse(r))):n.resolve(s))}_post(t,i,r){return Sk(this.worker,t,i,r)}};const uV=Y("host-browser")?Math.min(navigator.hardwareConcurrency-1,Y("workers-pool-size")??8):0;let ep=Y("esri-mobile")?Math.min(uV,3):uV;ep||(ep=Y("safari")&&Y("mac")?7:2);let cV=0;const JS=[];function hme(){KW()}async function Fw(e,t){const i=new Kfe,{registryTarget:r,...s}=t;return await i.open(e,s),r&&Gfe(r,i),i}async function pme(e,t={}){if(typeof e!="string")throw new B("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(Y("host-webworker")&&!Y("esri-workers")&&(i="local"),i==="local"){let r=await Jc.loadWorker(e);r||(r=await import(e)),yi(t.signal);const s=t.client||r;return Fw([Jc.connect(r,t.schedule)],{...t,client:s})}if(await KW(),yi(t.signal),i==="dedicated"){const r=cV++%ep;return Fw([await JS[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,ep);if(r<ep){const s=new Array(r);for(let n=0;n<r;++n){const o=cV++%ep;s[n]=JS[o].open(e,t)}return Fw(s,t)}}return Fw(JS.map(r=>r.open(e,t)),t)}let Vw=null;async function KW(){if(Vw)return Vw;new AbortController;const e=[];for(let t=0;t<ep;t++){const i=dme.create(t).then(r=>(JS[t]=r,r));e.push(i)}return Vw=Promise.all(e),Vw}const n6e=Math.PI/180,o6e=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Gu=wi.radius,yo=wi.eccentricitySquared,fme={a1:Gu*yo,a2:Gu*yo*Gu*yo,a3:Gu*yo*yo/2,a4:Gu*yo*Gu*yo*2.5,a5:Gu*yo+Gu*yo*yo/2,a6:1-yo},a6e={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:wi.radius,f:wi.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Zc.radius,f:Zc.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Oa.radius,f:Oa.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Oa.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var W;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(W||(W={}));const mme={[W.WGS84]:{[W.CGCS2000]:ni,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:ni,[W.SPHERICAL_ECEF]:db,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:ny,[W.PLATE_CARREE]:oy,[W.WGS84]:ni,[W.WGS84_ECEF]:uy},[W.CGCS2000]:{[W.CGCS2000]:ni,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:ni,[W.SPHERICAL_ECEF]:db,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:ny,[W.PLATE_CARREE]:oy,[W.WGS84]:ni,[W.WGS84_ECEF]:uy},[W.GCSMARS2000]:{[W.CGCS2000]:null,[W.GCSMARS2000]:ni,[W.GCSMOON2000]:null,[W.LON_LAT]:ni,[W.SPHERICAL_ECEF]:null,[W.SPHERICAL_MARS_PCPF]:pV,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:null,[W.PLATE_CARREE]:null,[W.WGS84]:null,[W.WGS84_ECEF]:null},[W.GCSMOON2000]:{[W.CGCS2000]:null,[W.GCSMARS2000]:null,[W.GCSMOON2000]:ni,[W.LON_LAT]:ni,[W.SPHERICAL_ECEF]:null,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:hV,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:null,[W.PLATE_CARREE]:null,[W.WGS84]:null,[W.WGS84_ECEF]:null},[W.WEB_MERCATOR]:{[W.CGCS2000]:cb,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:cb,[W.SPHERICAL_ECEF]:gme,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:ni,[W.PLATE_CARREE]:_me,[W.WGS84]:cb,[W.WGS84_ECEF]:vme},[W.WGS84_ECEF]:{[W.CGCS2000]:cy,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:cy,[W.SPHERICAL_ECEF]:Ime,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:Cme,[W.PLATE_CARREE]:wme,[W.WGS84]:cy,[W.WGS84_ECEF]:ni},[W.SPHERICAL_ECEF]:{[W.CGCS2000]:ly,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:ly,[W.SPHERICAL_ECEF]:ni,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:xme,[W.PLATE_CARREE]:Sme,[W.WGS84]:ly,[W.WGS84_ECEF]:Mme},[W.SPHERICAL_MARS_PCPF]:{[W.CGCS2000]:null,[W.GCSMARS2000]:mV,[W.GCSMOON2000]:null,[W.LON_LAT]:mV,[W.SPHERICAL_ECEF]:null,[W.SPHERICAL_MARS_PCPF]:ni,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:null,[W.PLATE_CARREE]:null,[W.WGS84]:null,[W.WGS84_ECEF]:null},[W.SPHERICAL_MOON_PCPF]:{[W.CGCS2000]:null,[W.GCSMARS2000]:null,[W.GCSMOON2000]:fV,[W.LON_LAT]:fV,[W.SPHERICAL_ECEF]:null,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:ni,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:null,[W.PLATE_CARREE]:null,[W.WGS84]:null,[W.WGS84_ECEF]:null},[W.UNKNOWN]:{[W.CGCS2000]:null,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:null,[W.SPHERICAL_ECEF]:null,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:ni,[W.WEB_MERCATOR]:null,[W.PLATE_CARREE]:null,[W.WGS84]:null,[W.WGS84_ECEF]:null},[W.LON_LAT]:{[W.CGCS2000]:ni,[W.GCSMARS2000]:ni,[W.GCSMOON2000]:ni,[W.LON_LAT]:ni,[W.SPHERICAL_ECEF]:db,[W.SPHERICAL_MARS_PCPF]:pV,[W.SPHERICAL_MOON_PCPF]:hV,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:ny,[W.PLATE_CARREE]:oy,[W.WGS84]:ni,[W.WGS84_ECEF]:uy},[W.PLATE_CARREE]:{[W.CGCS2000]:ay,[W.GCSMARS2000]:null,[W.GCSMOON2000]:null,[W.LON_LAT]:ay,[W.SPHERICAL_ECEF]:Eme,[W.SPHERICAL_MARS_PCPF]:null,[W.SPHERICAL_MOON_PCPF]:null,[W.UNKNOWN]:null,[W.WEB_MERCATOR]:Tme,[W.PLATE_CARREE]:ni,[W.WGS84]:ay,[W.WGS84_ECEF]:$me}};function eZ(e,t){var i;return(i=yme(e,t))==null?void 0:i.projector}function yme(e,t){if(e==null||t==null)return null;if(cl.source.spatialReference===e&&cl.dest.spatialReference===t)return cl;const i=dV(e,cl.source),r=dV(t,cl.dest);return i===W.UNKNOWN&&r===W.UNKNOWN?cr(e,t)?cl.projector=ni:cl.projector=null:cl.projector=mme[i][r],cl}function dV(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=eo(e,1)),EE(e)?t.spatialReferenceId=W.SPHERICAL_ECEF:vp(e)?t.spatialReferenceId=W.WGS84:Pa(e)?t.spatialReferenceId=W.WEB_MERCATOR:Mle(e)?t.spatialReferenceId=W.PLATE_CARREE:e.wkt===Ole.wkt?t.spatialReferenceId=W.WGS84_ECEF:e.wkid===gp.CGCS2000?t.spatialReferenceId=W.CGCS2000:e.wkt===jP.wkt?t.spatialReferenceId=W.SPHERICAL_MARS_PCPF:e.wkt===UP.wkt?t.spatialReferenceId=W.SPHERICAL_MOON_PCPF:uB(e)?t.spatialReferenceId=W.GCSMARS2000:cB(e)?t.spatialReferenceId=W.GCSMOON2000:t.spatialReferenceId=W.UNKNOWN):W.UNKNOWN}function ni(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function cb(e,t,i,r){i[r]=Ly*(e[t]/up),i[r+1]=Ly*(tZ-2*Math.atan(Math.exp(-e[t+1]/up))),i[r+2]=e[t+2]}function gme(e,t,i,r){const s=e[t]/up,n=tZ-2*Math.atan(Math.exp(-e[t+1]/up)),o=up+e[t+2],l=Math.cos(n)*o;i[r]=Math.cos(s)*l,i[r+1]=Math.sin(s)*l,i[r+2]=Math.sin(n)*o}function vme(e,t,i,r){cb(e,t,i,r),uy(i,r,i,r)}function bme(e,t,i,r,s){const n=.4999999*Math.PI,o=_n(Oy*e[t+1],-n,n),l=Math.sin(o);i[r++]=Oy*e[t]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+l)/(1-l)),i[r]=e[t+2]}function ny(e,t,i,r){bme(e,t,i,r,wi)}function oy(e,t,i,r){i[r]=e[t]*yV,i[r+1]=e[t+1]*yV,i[r+2]=e[t+2]}function ay(e,t,i,r){i[r]=e[t]*gV,i[r+1]=e[t+1]*gV,i[r+2]=e[t+2]}function _me(e,t,i,r){cb(e,t,i,r),oy(i,r,i,r)}function wme(e,t,i,r){cy(e,t,i,r),oy(i,r,i,r)}function Sme(e,t,i,r){ly(e,t,i,r),oy(i,r,i,r)}function Eme(e,t,i,r){ay(e,t,i,r),db(i,r,i,r)}function Tme(e,t,i,r){ay(e,t,i,r),ny(i,r,i,r)}function $me(e,t,i,r){ay(e,t,i,r),uy(i,r,i,r)}function Ek(e,t,i,r,s){const n=s+e[t+2],o=Oy*e[t+1],l=Oy*e[t],d=Math.cos(o)*n;i[r]=Math.cos(l)*d,i[r+1]=Math.sin(l)*d,i[r+2]=Math.sin(o)*n}function hV(e,t,i,r){Ek(e,t,i,r,Zc.radius)}function pV(e,t,i,r){Ek(e,t,i,r,Oa.radius)}function db(e,t,i,r){Ek(e,t,i,r,wi.radius)}function Tk(e,t,i,r,s){const n=e[t],o=e[t+1],l=e[t+2],d=Math.sqrt(n*n+o*o+l*l),h=The(l/(d===0?1:d)),y=Math.atan2(o,n);i[r++]=Ly*y,i[r++]=Ly*h,i[r]=d-s}function fV(e,t,i,r){Tk(e,t,i,r,Zc.radius)}function mV(e,t,i,r){Tk(e,t,i,r,Oa.radius)}function ly(e,t,i,r){Tk(e,t,i,r,wi.radius)}function xme(e,t,i,r){ly(e,t,i,r),ny(i,r,i,r)}function Mme(e,t,i,r){ly(e,t,i,r),uy(i,r,i,r)}function Ame(e,t,i,r,s){const n=Oy*e[t],o=Oy*e[t+1],l=e[t+2],d=Math.sin(o),h=Math.cos(o),y=s.radius/Math.sqrt(1-s.eccentricitySquared*d*d);i[r++]=(y+l)*h*Math.cos(n),i[r++]=(y+l)*h*Math.sin(n),i[r++]=(y*(1-s.eccentricitySquared)+l)*d}function uy(e,t,i,r){Ame(e,t,i,r,wi)}function cy(e,t,i,r){const s=fme,n=e[t],o=e[t+1],l=e[t+2];let d,h,y,v,b,w,E,T,$,A,O,L,R,N,j,V,Z,ie,oe,ue,me;d=Math.abs(l),h=n*n+o*o,y=Math.sqrt(h),v=h+l*l,b=Math.sqrt(v),ue=Math.atan2(o,n),w=l*l/v,E=h/v,N=s.a2/b,j=s.a3-s.a4/b,E>.3?(T=d/b*(1+E*(s.a1+N+w*j)/b),oe=Math.asin(T),A=T*T,$=Math.sqrt(1-A)):($=y/b*(1-w*(s.a5-N-E*j)/b),oe=Math.acos($),A=1-$*$,T=Math.sqrt(A)),O=1-wi.eccentricitySquared*A,L=wi.radius/Math.sqrt(O),R=s.a6*L,N=y-L*$,j=d-R*T,Z=$*N+T*j,V=$*j-T*N,ie=V/(R/O+Z),oe+=ie,me=Z+V*ie/2,l<0&&(oe=-oe),i[r++]=Ly*ue,i[r++]=Ly*oe,i[r]=me}function Ime(e,t,i,r){cy(e,t,i,r),db(i,r,i,r)}function Cme(e,t,i,r){cy(e,t,i,r),ny(i,r,i,r)}const cl={source:{spatialReference:null,spatialReferenceId:W.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:W.UNKNOWN,metersPerUnit:1},projector:ni},Oy=ZT(1),Ly=jH(1),tZ=.5*Math.PI,up=wi.radius,yV=up*Math.PI/180,gV=180/(up*Math.PI);function P_(e,t,i,r,s,n,o=Math.floor(e.length/3)){const l=eZ(t,s);if(l==null)return!1;if(l===ni){if(e===r&&i===n)return!0;const h=i+3*o;for(let y=i,v=n;y<h;y++,v++)r[v]=e[y];return!0}const d=i+3*o;for(let h=i,y=n;h<d;h+=3,y+=3)l(e,h,r,y);return!0}const l6e=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:P_},Symbol.toStringTag,{value:"Module"}));function vV(e,t,i,r,s,n){return zw[0]=e,zw[1]=t,zw[2]=i,P_(zw,r,0,s,n,0)}const zw=nd();let jw=0,z3=class wC{static fromGE(t){const i=new wC;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}constructor(t){this.uid=jw++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=jw++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=jw++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=jw++}getInverse(){const t=new wC;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},DE=class ev{static cacheKey(t,i){var r,s,n,o,l,d;return[((r=t.wkid)==null?void 0:r.toString())??"-1",((s=t.wkt)==null?void 0:s.toString())??"",((n=t.wkt2)==null?void 0:n.toString())??"",((o=i.wkid)==null?void 0:o.toString())??"-1",((l=i.wkt)==null?void 0:l.toString())??"",((d=i.wkt2)==null?void 0:d.toString())??""].join()}static fromGE(t){const i=new ev;let r="";for(const s of t.steps){const n=z3.fromGE(s);i.steps.push(n),r+=n.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const i of t.steps)i instanceof z3?this.steps.push(i):this.steps.push(new z3({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const t=new ev;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cachedProjection[ev.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const n of this.steps)r+=n.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const s=this._cachedProjection[ev.cacheKey(t,i)];return s===void 0?null:s}};function iZ(e,t,i){if(t==null||i==null||i.vcsWkid||cr(t,i)||Yc(t)||Yc(i))return null;const r=TE(t)/TE(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>Ome(s,r);case"polyline":case"esriGeometryPolyline":return s=>Rme(s,r);case"polygon":case"esriGeometryPolygon":return s=>Lme(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>Pme(s,r);case"extent":case"esriGeometryEnvelope":return s=>kme(s,r);default:return null}}function Ome(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function Lme(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function Rme(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function Pme(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function kme(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Zo=null,Xc=null,hb=null,XS={};const $k=new x_;function ud(){return!!Zo&&VP()}function rZ(){return!!ud()||(Fe($k),Qc(),!1)}function sZ(e,t){return!e||!t||Fa(e,t)||rZ()}function Dme(e,t){return!Fa(e,t)&&!ud()}function Qc(e){return hb==null&&(hb=Promise.all([iB(),D(()=>import("./geometryEngineBase-B0ZyeKAX.js"),__vite__mapDeps([23,1])).then(t=>t.g),D(()=>import("./hydrated-c2h3Jzf_.js"),[])])),hb.then(([,t,{hydratedAdapter:i}])=>{yi(e),Xc=i,Zo=t.default,Zo._enableProjection(Ele),$k.notify()})}function cd(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:(iue(e),SC(Xc,e,e[0].spatialReference,t,i,r)):(xy(e),SC(Xc,[e],e.spatialReference,t,i,r)[0])}function SC(e,t,i,r,s=null,n=null){if(i==null||r==null)return t;if(Fa(i,r,s))return t.map(o=>QS(o,i,r));if(s==null&&EE(i))return t.map(o=>QS(o,i,tt.WGS84)).map(o=>Wb(o,r));if(s==null&&EE(r))return t.map(o=>Wb(o,tt.WGS84)).map(o=>QS(o,tt.WGS84,r));if(s==null){const o=DE.cacheKey(i,r);XS[o]!==void 0?s=XS[o]:((s=oZ(i,r,void 0))==null&&(s=new DE),XS[o]=s)}if(Zo==null||e==null)throw new i$;return n!=null?Zo._project(e,t,i,r,s,n):Zo._project(e,t,i,r,s)}function Nme(e,t){const i=nZ([e],t);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function nZ(e,t){if(!ud()){for(const i of e)if(i!=null&&!cr(i.spatialReference,t)&&fn(i.spatialReference)&&fn(t)&&!Fa(i.spatialReference,t))return Fe($k),{pending:Qc(),geometries:null}}return{pending:null,geometries:e.map(i=>i==null?null:cr(i.spatialReference,t)?i:fn(i.spatialReference)&&fn(t)?Wb(i,t):null)}}function oZ(e,t,i=null){if(e==null||t==null)return null;if(Zo==null||Xc==null)throw new i$;const r=Zo._getTransformation(Xc,e,t,i,i==null?void 0:i.spatialReference);return r!==null?DE.fromGE(r):null}function Fme(e,t,i=null){if(Zo==null||Xc==null)throw new i$;const r=Zo._getTransformationBySuitability(Xc,e,t,i,i==null?void 0:i.spatialReference);if(r!==null){const s=[];for(const n of r)s.push(DE.fromGE(n));return s}return[]}let i$=class extends B{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function Vme(){Zo=null,Xc=null,hb=null,XS={}}const zme={get loadPromise(){return hb}};function Wb(e,t){try{const i=cd(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=iZ(i.type,e.spatialReference,t);return r!=null&&r(i),i}catch(i){if(!(i instanceof i$))throw i;return null}}async function jme(e,t,i){const r=e.spatialReference;return r!=null&&t!=null&&await xk(r,t,null,i),Wb(e,t)}function Fa(e,t,i){return!i&&(!!cr(e,t)||fn(e)&&fn(t)&&!!eZ(e,t))}function Ume(e,t){if(cr(e,t))return!0;if(!fn(e)||!fn(t))return!1;const i=vp(e)||Pa(e)||WF(e),r=vp(t)||Pa(t)||WF(t);return i&&r}async function xk(e,t,i,r){if(ud())return TF(r);if(Array.isArray(e)){for(const{source:s,dest:n,geographicTransformation:o}of e)if(s&&n&&!Fa(s,n,o))return Qc(r)}else if(e&&t&&!Fa(e,t,i))return Qc(r);return TF(r)}function QS(e,t,i){return e?"x"in e?aZ(e,t,new rt,i,0):"xmin"in e?dZ(e,t,new Jt,i,0):"rings"in e?cZ(e,t,new Xo,i,0):"paths"in e?uZ(e,t,new qo,i,0):"points"in e?lZ(e,t,new e$,i,0):null:null}function Gme(e,t,i=t.spatialReference,r=0){return i!=null&&e.spatialReference!=null&&aZ(e,e.spatialReference,t,i,r)!=null}function aZ(e,t,i,r,s){Zr[0]=e.x,Zr[1]=e.y;const n=e.z;return Zr[2]=n!==void 0?n:s,P_(Zr,t,0,Zr,r,0)?(i.x=Zr[0],i.y=Zr[1],i.spatialReference=r,n!==void 0||Yc(r)?(i.z=Zr[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function qme(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&lZ(e,e.spatialReference,t,i,r)!=null}function lZ(e,t,i,r,s){const{points:n,hasZ:o,hasM:l}=e,d=[],h=n.length,y=[];for(const b of n)y.push(b[0],b[1],o?b[2]:s);if(!P_(y,t,0,y,r,0,h))return null;const v=o||Yc(r);for(let b=0;b<h;++b){const w=3*b,E=y[w],T=y[w+1];v&&l?d.push([E,T,y[w+2],n[b][3]]):v?d.push([E,T,y[w+2]]):l?d.push([E,T,n[b][2]]):d.push([E,T])}return i.points=d,i.spatialReference=r,i.hasZ=o,i.hasM=l,i}function Bme(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&uZ(e,e.spatialReference,t,i,r)!=null}function uZ(e,t,i,r,s){const{paths:n,hasZ:o,hasM:l}=e,d=[];if(!hZ(n,o??!1,l??!1,t,d,r,s))return null;const h=o||Yc(r);return i.paths=d,i.spatialReference=r,i.hasZ=h,i.hasM=l,i}function Hme(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&cZ(e,e.spatialReference,t,i,r)!=null}function cZ(e,t,i,r,s){const{rings:n,hasZ:o,hasM:l}=e,d=[];if(!hZ(n,o??!1,l??!1,t,d,r,s))return null;const h=o||Yc(r);return i.rings=d,i.spatialReference=r,i.hasZ=h,i.hasM=l,i}function Wme(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&dZ(e,e.spatialReference,t,i,r)!=null}function dZ(e,t,i,r,s){const{xmin:n,ymin:o,xmax:l,ymax:d,hasZ:h,hasM:y}=e,v=h?e.zmin:s;if(!vV(n,o,v,t,Zr,r))return null;const b=h||Yc(r);i.xmin=Zr[0],i.ymin=Zr[1],b&&(i.zmin=Zr[2]);const w=h?e.zmax:s;return vV(l,d,w,t,Zr,r)?(i.xmax=Zr[0],i.ymax=Zr[1],b&&(i.zmax=Zr[2]),y&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null}function hZ(e,t,i,r,s,n,o=0){const l=new Array;for(const y of e)for(const v of y)l.push(v[0],v[1],t?v[2]:o);if(!P_(l,r,0,l,n,0))return!1;let d=0;s.length=0;const h=t||Yc(n);for(const y of e){const v=new Array;for(const b of y)h&&i?v.push([l[d++],l[d++],l[d++],b[3]]):h?v.push([l[d++],l[d++],l[d++]]):i?(v.push([l[d++],l[d++],b[2]]),d++):(v.push([l[d++],l[d++]]),d++);s.push(v)}return!0}const Zr=nd(),c6e=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Fa,getTransformation:oZ,getTransformations:Fme,initializeProjection:xk,isEqualBaseGCS:Ume,isLoaded:ud,isLoadedOrLoad:rZ,isLoadedOrLoadFor:sZ,load:Qc,project:cd,projectExtent:Wme,projectMany:SC,projectMultipoint:qme,projectOrLoad:Nme,projectOrLoadMany:nZ,projectPoint:Gme,projectPolygon:Hme,projectPolyline:Bme,projectWithZConversion:jme,projectWithoutEngine:QS,requiresLoad:Dme,test:zme,tryProjectWithZConversion:Wb,unload:Vme},Symbol.toStringTag,{value:"Module"}));var EC;let ca=EC=class extends se{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new EC({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};c([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ca.prototype,"cols",void 0),c([p({type:vt,json:{write:!0}})],ca.prototype,"level",void 0),c([p({type:String,json:{write:!0}})],ca.prototype,"levelValue",void 0),c([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ca.prototype,"origin",void 0),c([p({type:Number,json:{write:!0}})],ca.prototype,"resolution",void 0),c([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ca.prototype,"rows",void 0),c([p({type:Number,json:{write:!0}})],ca.prototype,"scale",void 0),ca=EC=c([I("esri.layers.support.LOD")],ca);const $c=ca;let Zme=class{constructor(t,i,r,s,n=void 0){this.id=t,this.level=i,this.row=r,this.col=s,this.extent=n}};var Xu;const bV=new ot({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Or=Xu=class extends se{static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:s=tt.WebMercator,numLODs:n=24}=e;if(!fn(s)){const v=[];if(i)for(let b=0;b<i.length;b++){const w=i[b];v.push(new $c({level:b,scale:w,resolution:w}))}else{let b=5e-4;for(let w=n-1;w>=0;w--)v.unshift(new $c({level:w,scale:b,resolution:b})),b*=2}return new Xu({dpi:96,lods:v,origin:new rt(0,0,s),size:[r,r],spatialReference:s})}const o=vs(s),l=e.origin?new rt({x:e.origin.x,y:e.origin.y,spatialReference:s}):new rt(o?{x:o.origin[0],y:o.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),d=96,h=1/(eo(s)*39.37*d),y=[];if(i)for(let v=0;v<i.length;v++){const b=i[v],w=b*h;y.push(new $c({level:v,scale:b,resolution:w}))}else{let v=Zy(s)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const b=Math.ceil(n/t);y.push(new $c({level:0,scale:v,resolution:v*h}));for(let w=1;w<b;w++){const E=v/2**t,T=E*h;y.push(new $c({level:w,scale:E,resolution:T})),v=E}}return new Xu({dpi:d,lods:y,origin:l,size:[r,r],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=vs(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return rt.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[],s=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(n=>{r.push(n.scale),t=n.scale>t?n.scale:t,i=n.scale<i?n.scale:i,s[n.level]=n})),this._set("scales",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const s=t[r],n=t[r+1];if(s<=e)return r;if(n===e)return r+1;if(s>e&&n<e)return r+Math.log(s/e)/Math.log(s/n)}return r}tileAt(e,t,i,r){const s=this.lodAt(e);if(!s)return null;let n,o;if(typeof t=="number")n=t,o=i;else if(cr(t.spatialReference,this.spatialReference))n=t.x,o=t.y,r=i;else{const h=VT(t,this.spatialReference);if(h==null)return null;n=h.x,o=h.y,r=i}const l=s.resolution*this.size[0],d=s.resolution*this.size[1];return r||(r=new Zme(null,0,0,0,gs())),r.level=e,r.row=Math.floor((this.origin.y-o)/d+.001),r.col=Math.floor((n-this.origin.x)/l+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=Xu.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===Xu.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(i=o)}if(!i)return;const r=e.level-i.level,s=i.resolution*this.size[0]/2**r,n=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=gs()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+n}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:r}=i,s=r*this.size[0],n=r*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+s,e[3]=e[1]+n,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return Xu.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const i=[],r=this.lods.length-t;for(let s=0;s<r;s++){const n=s+t,{scale:o,resolution:l}=n>=0?this.lods[n]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new $c({level:s,scale:o,resolution:l}))}return new Xu({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};c([p({type:Number,json:{write:!0}})],Or.prototype,"compressionQuality",void 0),c([p({type:Number,json:{write:!0}})],Or.prototype,"dpi",void 0),c([p({type:String,json:{read:bV.read,write:bV.write,origins:{"web-scene":{read:!1,write:!1}}}})],Or.prototype,"format",void 0),c([p({readOnly:!0})],Or.prototype,"isWrappable",null),c([p({type:rt,json:{write:!0}})],Or.prototype,"origin",void 0),c([pe("origin")],Or.prototype,"readOrigin",null),c([p({type:[$c],value:null,json:{write:!0}})],Or.prototype,"lods",null),c([p({readOnly:!0})],Or.prototype,"scales",void 0),c([p({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Or.prototype,"size",void 0),c([pe("size",["rows","cols"])],Or.prototype,"readSize",null),c([be("size",{cols:{type:vt},rows:{type:vt}})],Or.prototype,"writeSize",null),c([p({type:tt,json:{write:!0}})],Or.prototype,"spatialReference",void 0),Or=Xu=c([I("esri.layers.support.TileInfo")],Or),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Or||(Or={}));const Yme=Or,KS={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},j3={xsmall:544,small:768,medium:992,large:1200};function Jme(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function U3(e,t){return t?KS[e].valueToClassName[t].split(" "):[]}const Xme=e=>{let t=class extends e{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=j3}initialize(){this.addHandles(ve(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),yt))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!Jme(i)){const r=JSON.stringify(j3,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),i=j3}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=fs.acquire(),r=fs.acquire();let s,n=!1;for(s in KS){const o=this[s],l=KS[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==l&&(n=!0,this[s]=l,U3(s,o).forEach(d=>r.push(d)),U3(s,l).forEach(d=>i.push(d)))}n&&(this._applyClassNameChanges(i,r),fs.release(i),fs.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach(n=>s.classList.remove(n)),i.forEach(n=>s.classList.add(n)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in KS)U3(r,this[r]).forEach(s=>i.classList.remove(s))}};return c([p()],t.prototype,"breakpoints",null),c([p()],t.prototype,"orientation",void 0),c([p()],t.prototype,"widthBreakpoint",void 0),c([p()],t.prototype,"heightBreakpoint",void 0),t=c([I("esri.views.BreakpointsOwner")],t),t};function Mk(e){return typeof e=="string"?document.getElementById(e):e??null}function _V(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}let cp=class extends Me{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,i,r={}){return this._installWatch(t,i,r,ve)}addWhen(t,i,r={}){return this._installWatch(t,i,r,qs)}addOnCollectionChange(t,i,{initial:r=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([zs(t,"after-changes",this._createSyncUpdatingCallback(),Na),zs(t,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>i({added:[],removed:o.toArray()}):void 0})],n),bt(()=>this.removeHandles(n))}addPromise(t){if(t==null)return t;const i=++this._handleId;this.addHandles(bt(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(Uw)||this._set("updating",!1))}),i),this._pendingPromises.add(t),this._set("updating",!0);const r=()=>this.removeHandles(i);return t.then(r,r),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,i,r={},s){const n=++this._handleId;r.sync||this._installSyncUpdatingWatch(t,n);const o=s(t,i,r);return this.addHandles(o,n),bt(()=>this.removeHandles(n))}_installSyncUpdatingWatch(t,i){const r=this._createSyncUpdatingCallback(),s=ve(t,r,{sync:!0,equals:()=>!1});return this.addHandles(s,i),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Uw),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(w_(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Uw))}),Uw)}}};c([p({readOnly:!0})],cp.prototype,"updating",void 0),cp=c([I("esri.core.support.UpdatingHandles")],cp);const Uw=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var NE=function(){return NE=Object.assign||function(t){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},NE.apply(this,arguments)},TC={exports:{}},Si={},$C={exports:{}},kp={};function pZ(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Qme(e,t,i){}function Kme(e,t,i){}var eye=/javascript\s*\:/img;function tye(e,t){return eye.test(t)?"":t}kp.whiteList=pZ();kp.getDefaultWhiteList=pZ;kp.onAttr=Qme;kp.onIgnoreAttr=Kme;kp.safeAttrValue=tye;var iye={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},T0=iye;function rye(e,t){e=T0.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,s=0,n=0,o="";function l(){if(!r){var y=T0.trim(e.slice(s,n)),v=y.indexOf(":");if(v!==-1){var b=T0.trim(y.slice(0,v)),w=T0.trim(y.slice(v+1));if(b){var E=t(s,o.length,b,w,y);E&&(o+=E+"; ")}}}s=n+1}for(;n<i;n++){var d=e[n];if(d==="/"&&e[n+1]==="*"){var h=e.indexOf("*/",n+2);if(h===-1)break;n=h+1,s=n+1,r=!1}else d==="("?r=!0:d===")"?r=!1:d===";"?r||l():d===`
`&&l()}return T0.trim(o)}var sye=rye,Gw=kp,nye=sye;function wV(e){return e==null}function oye(e){var t={};for(var i in e)t[i]=e[i];return t}function fZ(e){e=oye(e||{}),e.whiteList=e.whiteList||Gw.whiteList,e.onAttr=e.onAttr||Gw.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Gw.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Gw.safeAttrValue,this.options=e}fZ.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onAttr,n=i.onIgnoreAttr,o=i.safeAttrValue,l=nye(e,function(d,h,y,v,b){var w=r[y],E=!1;if(w===!0?E=w:typeof w=="function"?E=w(v):w instanceof RegExp&&(E=w.test(v)),E!==!0&&(E=!1),v=o(y,v),!!v){var T={position:h,sourcePosition:d,source:b,isWhite:E};if(E){var $=s(y,v,T);return wV($)?y+":"+v:$}else{var $=n(y,v,T);if(!wV($))return $}}});return l};var aye=fZ;(function(e,t){var i=kp,r=aye;function s(o,l){var d=new r(l);return d.process(o)}t=e.exports=s,t.FilterCSS=r;for(var n in i)t[n]=i[n]})($C,$C.exports);var Ak=$C.exports,Ik={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},lye=Ak.FilterCSS,uye=Ak.getDefaultWhiteList,FE=Ik;function mZ(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var yZ=new lye;function cye(e,t,i){}function dye(e,t,i){}function hye(e,t,i){}function pye(e,t,i){}function gZ(e){return e.replace(mye,"&lt;").replace(yye,"&gt;")}function fye(e,t,i,r){if(i=EZ(i),t==="href"||t==="src"){if(i=FE.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(qw.lastIndex=0,qw.test(i))return""}else if(t==="style"){if(SV.lastIndex=0,SV.test(i)||(EV.lastIndex=0,EV.test(i)&&(qw.lastIndex=0,qw.test(i))))return"";r!==!1&&(r=r||yZ,i=r.process(i))}return i=TZ(i),i}var mye=/</g,yye=/>/g,gye=/"/g,vye=/&quot;/g,bye=/&#([a-zA-Z0-9]*);?/gim,_ye=/&colon;?/gim,wye=/&newline;?/gim,qw=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,SV=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,EV=/u\s*r\s*l\s*\(.*/gi;function vZ(e){return e.replace(gye,"&quot;")}function bZ(e){return e.replace(vye,'"')}function _Z(e){return e.replace(bye,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function wZ(e){return e.replace(_ye,":").replace(wye," ")}function SZ(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return FE.trim(t)}function EZ(e){return e=bZ(e),e=_Z(e),e=wZ(e),e=SZ(e),e}function TZ(e){return e=vZ(e),e=gZ(e),e}function Sye(){return""}function Eye(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(o){return i?!0:FE.indexOf(e,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,l,d){if(r(o))if(d.isClosing){var h="[/removed]",y=d.position+h.length;return s.push([n!==!1?n:d.position,y]),n=!1,h}else return n||(n=d.position),"[removed]";else return t(o,l,d)},remove:function(o){var l="",d=0;return FE.forEach(s,function(h){l+=o.slice(d,h[0]),d=h[1]}),l+=o.slice(d),l}}}function Tye(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var s=e.indexOf("-->",r);if(s===-1)break;i=s+3}return t}function $ye(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}Si.whiteList=mZ();Si.getDefaultWhiteList=mZ;Si.onTag=cye;Si.onIgnoreTag=dye;Si.onTagAttr=hye;Si.onIgnoreTagAttr=pye;Si.safeAttrValue=fye;Si.escapeHtml=gZ;Si.escapeQuote=vZ;Si.unescapeQuote=bZ;Si.escapeHtmlEntities=_Z;Si.escapeDangerHtml5Entities=wZ;Si.clearNonPrintableCharacter=SZ;Si.friendlyAttrValue=EZ;Si.escapeAttrValue=TZ;Si.onIgnoreTagStripAll=Sye;Si.StripTagBody=Eye;Si.stripCommentTag=Tye;Si.stripBlankChar=$ye;Si.cssFilter=yZ;Si.getDefaultCSSWhiteList=uye;var r$={},xc=Ik;function xye(e){var t=xc.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=xc.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function Mye(e){return e.slice(0,2)==="</"}function Aye(e,t,i){var r="",s=0,n=!1,o=!1,l=0,d=e.length,h="",y="";e:for(l=0;l<d;l++){var v=e.charAt(l);if(n===!1){if(v==="<"){n=l;continue}}else if(o===!1){if(v==="<"){r+=i(e.slice(s,l)),n=l,s=l;continue}if(v===">"){r+=i(e.slice(s,n)),y=e.slice(n,l+1),h=xye(y),r+=t(n,r.length,h,y,Mye(y)),s=l+1,n=!1;continue}if(v==='"'||v==="'")for(var b=1,w=e.charAt(l-b);w.trim()===""||w==="=";){if(w==="="){o=v;continue e}w=e.charAt(l-++b)}}else if(v===o){o=!1;continue}}return s<e.length&&(r+=i(e.substr(s))),r}var Iye=/[^a-zA-Z0-9\\_:.-]/gim;function Cye(e,t){var i=0,r=0,s=[],n=!1,o=e.length;function l(b,w){if(b=xc.trim(b),b=b.replace(Iye,"").toLowerCase(),!(b.length<1)){var E=t(b,w||"");E&&s.push(E)}}for(var d=0;d<o;d++){var h=e.charAt(d),y,v;if(n===!1&&h==="="){n=e.slice(i,d),i=d+1,r=e.charAt(i)==='"'||e.charAt(i)==="'"?i:Lye(e,d+1);continue}if(n!==!1&&d===r){if(v=e.indexOf(h,d+1),v===-1)break;y=xc.trim(e.slice(r+1,v)),l(n,y),n=!1,d=v,i=d+1;continue}if(/\s|\n|\t/.test(h))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(v=Oye(e,d),v===-1){y=xc.trim(e.slice(i,d)),l(y),n=!1,i=d+1;continue}else{d=v-1;continue}else if(v=Rye(e,d-1),v===-1){y=xc.trim(e.slice(i,d)),y=TV(y),l(n,y),n=!1,i=d+1;continue}else continue}return i<e.length&&(n===!1?l(e.slice(i)):l(n,TV(xc.trim(e.slice(i))))),xc.trim(s.join(" "))}function Oye(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Lye(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function Rye(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Pye(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function TV(e){return Pye(e)?e.substr(1,e.length-2):e}r$.parseTag=Aye;r$.parseAttr=Cye;var kye=Ak.FilterCSS,No=Si,$Z=r$,Dye=$Z.parseTag,Nye=$Z.parseAttr,e2=Ik;function Bw(e){return e==null}function Fye(e){var t=e2.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=e2.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=e2.trim(e.slice(0,-1))),{html:e,closing:i}}function Vye(e){var t={};for(var i in e)t[i]=e[i];return t}function zye(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(r){return r.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function xZ(e){e=Vye(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=No.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=zye(e.whiteList||e.allowList):e.whiteList=No.whiteList,e.onTag=e.onTag||No.onTag,e.onTagAttr=e.onTagAttr||No.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||No.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||No.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||No.safeAttrValue,e.escapeHtml=e.escapeHtml||No.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new kye(e.css))}xZ.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onTag,n=i.onIgnoreTag,o=i.onTagAttr,l=i.onIgnoreTagAttr,d=i.safeAttrValue,h=i.escapeHtml,y=t.cssFilter;i.stripBlankChar&&(e=No.stripBlankChar(e)),i.allowCommentTag||(e=No.stripCommentTag(e));var v=!1;i.stripIgnoreTagBody&&(v=No.StripTagBody(i.stripIgnoreTagBody,n),n=v.onIgnoreTag);var b=Dye(e,function(w,E,T,$,A){var O={sourcePosition:w,position:E,isClosing:A,isWhite:Object.prototype.hasOwnProperty.call(r,T)},L=s(T,$,O);if(!Bw(L))return L;if(O.isWhite){if(O.isClosing)return"</"+T+">";var R=Fye($),N=r[T],j=Nye(R.html,function(V,Z){var ie=e2.indexOf(N,V)!==-1,oe=o(T,V,Z,ie);return Bw(oe)?ie?(Z=d(T,V,Z,y),Z?V+'="'+Z+'"':V):(oe=l(T,V,Z,ie),Bw(oe)?void 0:oe):oe});return $="<"+T,j&&($+=" "+j),R.closing&&($+=" /"),$+=">",$}else return L=n(T,$,O),Bw(L)?h($):L},h);return v&&(b=v.remove(b)),b};var jye=xZ;(function(e,t){var i=Si,r=r$,s=jye;function n(l,d){var h=new s(d);return h.process(l)}t=e.exports=n,t.filterXSS=n,t.FilterXSS=s,function(){for(var l in i)t[l]=i[l];for(var d in r)t[d]=r[d]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(TC,TC.exports);var Cf=TC.exports,Uye=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Gye=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=NE(NE({},Cf.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,l,d){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?r.sanitizeUrl(l):Cf.safeAttrValue(n,o,l,d)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;t&&!i?s=t:t&&i?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(n){if(n==="whiteList")s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]);else if(n==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(l){return s.css.whiteList[l]=o[l]})}else s[n]=t[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new Cf.FilterXSS(s)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i??{}).isProtocolRequired,s=r===void 0?!0:r,n=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",l=/^#/.test(t),d=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||l||d?Cf.escapeAttrValue(t):!n&&!s?Cf.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,s):Cf.safeAttrValue(t,i,r,s)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(r,s){return i.test(r)?r:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var s=!1,n=void 0;if(Array.isArray(t))n=t.reduce(function(l,d){var h=r.validate(d,i);return h.isValid?l.concat([d]):(s=!0,l.concat([h.sanitized]))},[]);else if(Uye(t)){var o=Object.keys(t);n=o.reduce(function(l,d){var h=t[d],y=r.validate(h,i);return y.isValid?l[d]=h:(s=!0,l[d]=y.sanitized),l},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return s?n:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const s$=new Map;function MZ(){s$.clear()}function qye(e){return s$.get(e)}function Bye(e,t){s$.set(e,t)}function G3(e){s$.delete(e)}function Um(...e){const t=fs.acquire();for(let r=0;r<e.length;r++){const s=e[r],n=typeof s;if(n==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(n==="object")for(const o in s)s[o]&&t.push(o)}const i=t.join(" ");return fs.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(r=>{var s;MZ();for(const n of r)(s=e.get(n.target))==null||s(n)}),i=(r,s,n)=>(e.set(r,s),t.observe(r,n),bt(()=>{t.unobserve(r),e.delete(r)}));return(r,s,n)=>{let o=null;return y_([ve(()=>typeof r=="function"?r():r,l=>{o==null||o.remove(),l&&(o=i(l,s,n))},ks),bt(()=>o==null?void 0:o.remove())])}})();function n$(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function p6e(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function f6e(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const Hye=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],Wye=Hye.reduce((e,t)=>(e[t]=[],e),{}),Zye=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],AZ=new Gye({whiteList:Wye,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(Zye.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Yye(e){return e==="Enter"||e===" "}async function pb(e,t){await Une(__(t));const i=typeof e=="function"?e():e;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const IZ="http://www.w3.org/",o$=`${IZ}2000/svg`,CZ=`${IZ}1999/xlink`;let $V=[],Ck=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},Ok=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),OZ=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},Jye=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(Ok(e[r],t))return r}return-1},q3=(e,t,i,r)=>{let s=e[t];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<e.length;o++)if(o!==t){let l=e[o];if(Ok(l,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Xye=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},xC=[],MC=!1,LZ=e=>{(e.children||[]).forEach(LZ),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},xV=()=>{MC=!1,xC.forEach(LZ),xC.length=0},MV=e=>{xC.push(e),MC||(MC=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(xV,{timeout:16}):setTimeout(xV,16))},AV=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),MV(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),MV(e))},Qye=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,s=Object.keys(t),n=s.length;for(let o=0;o<n;o++){let l=s[o],d=t[l];if(l==="className")throw new Error('Property "className" is not supported, use "class".');if(l==="class")IC(e,d,!0);else if(l==="classes"){let h=Object.keys(d),y=h.length;for(let v=0;v<y;v++){let b=h[v];d[b]&&e.classList.add(b)}}else if(l==="styles"){let h=Object.keys(d),y=h.length;for(let v=0;v<y;v++){let b=h[v],w=d[b];w&&(OZ(w),i.styleApplyer(e,b,w))}}else if(l!=="key"&&d!=null){let h=typeof d;h==="function"?(l.lastIndexOf("on",0)===0&&(r&&(d=r(l,d,e,t)),l==="oninput"&&function(){let y=d;d=function(v){y.apply(this,[v]),v.target["oninput-value"]=v.target.value}}()),e[l]=d):i.namespace===o$?l==="href"?e.setAttributeNS(CZ,l,d):e.setAttribute(l,d):h==="string"&&l!=="value"?l==="innerHTML"?e[l]=AZ.sanitize(d):AC(e)&&l in e?e[l]=d:e.setAttribute(l,d):e[l]=d}}};function AC(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let VE,Kye=(e,t,i)=>{if(t)for(let r of t)fb(r,e,void 0,i)},RZ=(e,t,i)=>{Kye(e,t.children,i),t.text&&(e.textContent=t.text),Qye(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},fb=(e,t,i,r)=>{let s,n=0,o=e.vnodeSelector,l=t.ownerDocument;if(o==="")s=e.domNode=l.createTextNode(e.text),i!==void 0?t.insertBefore(s,i):t.appendChild(s);else{for(let d=0;d<=o.length;++d){let h=o.charAt(d);if(d===o.length||h==="."||h==="#"){let y=o.charAt(n-1),v=o.slice(n,d);y==="."?s.classList.add(v):y==="#"?s.id=v:(v==="svg"&&(r=Ck(r,{namespace:o$})),r.namespace!==void 0?s=e.domNode=l.createElementNS(r.namespace,v):(s=e.domNode=e.domNode||l.createElement(v),v==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(s,i):s.parentNode!==t&&t.appendChild(s)),n=d+1}}RZ(s,e,r)}},IC=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},ege=(e,t,i,r)=>{if(!i)return;let s=!1,n=Object.keys(i),o=n.length;for(let l=0;l<o;l++){let d=n[l],h=i[d],y=t[d];if(d==="class")y!==h&&(IC(e,y,!1),IC(e,h,!0));else if(d==="classes"){let v=e.classList,b=Object.keys(h),w=b.length;for(let E=0;E<w;E++){let T=b[E],$=!!h[T];$!==!!y[T]&&(s=!0,$?v.add(T):v.remove(T))}}else if(d==="styles"){let v=Object.keys(h),b=v.length;for(let w=0;w<b;w++){let E=v[w],T=h[E];T!==y[E]&&(s=!0,T?(OZ(T),r.styleApplyer(e,E,T)):r.styleApplyer(e,E,""))}}else if(h||typeof y!="string"||(h=""),d!=="value"||AC(e)){if(h!==y){let v=typeof h;v==="function"&&r.eventHandlerInterceptor||(r.namespace===o$?d==="href"?e.setAttributeNS(CZ,d,h):e.setAttribute(d,h):v==="string"?d==="innerHTML"?e[d]=AZ.sanitize(h):d==="role"&&h===""?e.removeAttribute(d):AC(e)&&d in e?e[d]=h:e.setAttribute(d,h):e[d]!==h&&(e[d]=h),s=!0)}}else{let v=e[d];v!==h&&(e["oninput-value"]?v===e["oninput-value"]:h!==y)&&(e[d]=h,e["oninput-value"]=void 0),h!==y&&(s=!0)}}return s},tge=(e,t,i,r,s)=>{if(i===r)return!1;r=r||$V;let n,o=(i=i||$V).length,l=r.length,d=0,h=0,y=!1;for(;h<l;){let v=d<o?i[d]:void 0,b=r[h];if(v!==void 0&&Ok(v,b))y=VE(v,b,s)||y,d++;else{let w=Jye(i,b,d+1);if(w>=0){for(n=d;n<w;n++)AV(i[n]),q3(i,n,e,"removed");y=VE(i[w],b,s)||y,d=w+1}else fb(b,t,d<o?i[d].domNode:void 0,s),Xye(b),q3(r,h,e,"added")}h++}if(o>d)for(n=d;n<o;n++)AV(i[n]),q3(i,n,e,"removed");return y};VE=(e,t,i)=>{let r=e.domNode,s=!1;if(e===t)return!1;let n=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(o,r),t.domNode=o,s=!0,s}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=Ck(i,{namespace:o$})),e.text!==t.text&&(n=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,n=tge(t,r,e.children,t.children,i)||n,n=ege(r,e.properties,t.properties,i)||n,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return n&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),s};let Hw=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,VE(r,i,t)},domNode:e.domNode});const ige={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let tv=e=>Ck(ige,e),Dc={append:(e,t,i)=>(i=tv(i),fb(t,e,void 0,i),Hw(t,i)),insertBefore:(e,t,i)=>(i=tv(i),fb(t,e.parentNode,e,i),Hw(t,i)),merge:(e,t,i)=>(i=tv(i),t.domNode=e,RZ(e,t,i),Hw(t,i)),replace:(e,t,i)=>(i=tv(i),fb(t,e.parentNode,e,i),e.parentNode.removeChild(e),Hw(t,i))},PZ,rge=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};PZ=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let sge=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?PZ(i.children,s=>s.domNode===r):void 0}),i},nge=(e,t,i)=>{let r=function(s){i("domEvent",s);let n=t(),o=rge(s.currentTarget,n.domNode);o.reverse();let l,d=sge(n.getLastRender(),o);return e.scheduleRender(),d&&(l=d.properties[`on${s.type}`].apply(d.properties.bind||this,arguments)),i("domEventProcessed",s),l};return(s,n,o,l)=>r},zE=e=>{let t,i,r=tv(e),s=r.performanceLogger,n=!0,o=!1,l=[],d=[],h=(v,b,w)=>{let E,T=()=>E;r.eventHandlerInterceptor=nge(t,T,s),E=v(b,w(),r),l.push(E),d.push(w)},y=()=>{if(i=void 0,n){n=!1,s("renderStart",void 0);for(let v=0;v<l.length;v++){let b=d[v]();s("rendered",void 0),l[v].update(b),s("patched",void 0)}s("renderDone",void 0),n=!0}};return t={renderNow:y,scheduleRender:()=>{i||o||(i=requestAnimationFrame(y))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,n=!0,t.scheduleRender()},append:(v,b)=>{h(Dc.append,v,b)},insertBefore:(v,b)=>{h(Dc.insertBefore,v,b)},merge:(v,b)=>{h(Dc.merge,v,b)},replace:(v,b)=>{h(Dc.replace,v,b)},detach:v=>{for(let b=0;b<d.length;b++)if(d[b]===v)return d.splice(b,1),l.splice(b,1)[0];throw new Error("renderFunction was not found")}},t},Qu=class extends Me{constructor(){super(...arguments),this.items=new _e,this._watchUpdatingTracking=new cp,this._callbacks=new Map,this._projector=zE(),this._hiddenProjector=zE()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const s=()=>r.render();this._callbacks.set(r,s),this._projector.append(this.surface,s)}for(const r of i.removed){const s=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(s.domNode),this._callbacks.delete(r)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const i=this._hiddenSurface,r=this._hiddenProjector;let s;const n=()=>(s=t.render(),s);r.append(i,n),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s!=null&&s.domNode){const l=s.domNode.getBoundingClientRect();o.left=l.left,o.top=l.top,o.right=l.right,o.bottom=l.bottom}for(r.detach(n);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(t,i){const r=this.computeBoundingRect(t),s=this.computeBoundingRect(i);return Math.max(r.left,s.left)<=Math.min(r.right,s.right)&&Math.max(r.top,s.top)<=Math.min(r.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some(n=>n.visible&&!(r&&n.isDecoration)))return;const s=t.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{r&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};c([p({readOnly:!0})],Qu.prototype,"surface",void 0),c([p({readOnly:!0})],Qu.prototype,"items",void 0),c([p({readOnly:!0})],Qu.prototype,"needsRender",null),c([p({readOnly:!0})],Qu.prototype,"_watchUpdatingTracking",void 0),c([p({readOnly:!0})],Qu.prototype,"updating",null),Qu=c([I("esri.views.overlay.ViewOverlay")],Qu);const IV=Qu,B3=[0,0];function oge(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return B3[0]=i.left+((t==null?void 0:t.pageXOffset)??0),B3[1]=i.top+((t==null?void 0:t.pageYOffset)??0),B3}function CV(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function age(e){const t=document.createElement("div");return e.appendChild(t),t}const Of=16,$0=750,lge=512,uge=2,cge=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:Of,time:$0},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([ve(()=>this.cursor,r=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",r)}),ve(()=>this.navigating,r=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([ve(()=>this.ui,(i,r)=>this._handleUIChange(i,r),yt),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){var i;this.destroyed||((i=this.ui)==null||i.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),s=Mk(i);if(s||typeof i!="string"||ae.getLogger(this).error("#container",`element with id '${i}' not found`),r===s)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(CV(this.root),this._set("root",null)),this.userContent&&(_V(this.userContent,r),CV(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const n=document.createElement("div");n.className="esri-view-user-storage",_V(s,n),s.appendChild(n),this._set("userContent",n);const o=document.createElement("div");o.className="esri-view-root",s.insertBefore(o,s.firstChild),this._set("root",o);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,o.appendChild(l),this._set("surface",l);const d=new IV;o.appendChild(d.surface),this._set("overlay",d),this.addHandles(ve(()=>d.needsRender,h=>{h&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=_y({render:()=>{var y;return(y=this.overlay)==null?void 0:y.render()}}):this._overlayRenderTaskHandle=ui(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,s){const n=this.position;return i-=n?n[0]:0,r-=n?n[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const n=this.position;return i+=n?n[0]:0,r+=n?n[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(ve(()=>this.root,s=>{i.container=s?age(s):null},yt),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Of,i.time=$0;const r=_y({prepare:o=>{const l=this._measure(),d=this._freqInfo;if(d.time+=o.deltaTime,l&&(d.freq=Of,this._get("resizing")||this._set("resizing",!0)),d.time<d.freq)return;d.time=0;const h=this._position();d.freq=h||l?Of:Math.min($0,d.freq*uge),!l&&d.freq>=lge&&(r.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(o=>{i.freq=Of,i.time=$0,r.resume()});this.container!=null&&s.observe(this.container);const n=bt(()=>s.disconnect());this.addHandles([b_(window,"resize",()=>{i.freq=Of,i.time=$0,r.resume()}),n,r],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const n=this.width,o=this.height;return r===n&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:o,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=i&&oge(i);return!!s&&(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return c([p()],t.prototype,"container",null),c([p({readOnly:!0})],t.prototype,"focused",null),c([p({readOnly:!0})],t.prototype,"height",void 0),c([p()],t.prototype,"messagesCommon",void 0),c([p({type:IV})],t.prototype,"overlay",void 0),c([p({readOnly:!0})],t.prototype,"position",void 0),c([p({readOnly:!0})],t.prototype,"resizing",void 0),c([p({readOnly:!0})],t.prototype,"root",void 0),c([p({value:null,readOnly:!0})],t.prototype,"size",null),c([p({readOnly:!0})],t.prototype,"surface",void 0),c([p({readOnly:!0})],t.prototype,"suspended",void 0),c([p({nonNullable:!0})],t.prototype,"ui",void 0),c([p({readOnly:!0})],t.prototype,"userContent",void 0),c([p({readOnly:!0})],t.prototype,"width",void 0),c([p()],t.prototype,"widthBreakpoint",void 0),t=c([I("esri.views.DOMContainer")],t),t},dge=Y("mac")?"Meta":"Control",hge=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),pge=e=>hge.has(e);let fge=class{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},dr=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const n=typeof t=="string"?new fge(t,s):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=y=>{const v=this._incoming[y.match.eventType];if(v){const b=v.indexOf(y);v.splice(b,1),o(),this._manager&&this._manager.updateDependencies()}},d=new mge(n,r,{onPause:l,onRemove:l,onResume:y=>{const v=this._incoming[y.match.eventType];v&&!v.includes(y)&&(v.push(y),o(),this._manager&&this._manager.updateDependencies())}});let h=this._incoming[n.eventType];return h||(h=[],this._incoming[n.eventType]=h),h.push(d),o(),this._manager&&this._manager.updateDependencies(),d}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new yge(t,{onEmit:(r,s,n,o)=>{var l;(l=this._manager)==null||l.emit(r.eventType,s,n,o)},onRemove:r=>{var s;delete this._outgoing[r.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!0)}stopCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var r;const i=this._incoming[t.type];if(i){for(const s of i)if(s.match.matches(t)&&((r=s.callback)==null||r.call(s,t),t.shouldStopPropagation()))break}}},mge=class{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},yge=class{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},gge=class extends dr{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:r,y:s}=t;i===this._value&&this._x===r&&this._y===s||(this._value=i,this._x=r,this._y=s,this._onChange(i,r,s))}},vge=class{constructor(t,i){this._observable=new x_,this._value=t,this._equalityFunction=i}get value(){return Fe(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function Ry(e,t=MG){return new vge(e,t)}let bge=class extends dr{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Ry(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},_ge=class{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in t){const s=t[r],n=new BG(s,void 0,void 0,2,2);this._properties[r]={pool:n,acquired:[]}}this._afterDispatchHandle=toe(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const r of i.acquired)MF(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),r=this._properties[t];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)r.acquired.push(s),s=r.pool.acquire();return s}_release(){for(const t in this._properties){const i=this._properties[t];let r=0;for(const s of i.acquired)MF(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}},Pn=class extends Me{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=dge,this._latestPointerType="mouse",this._propertiesPool=new _ge({latestPointerLocation:Ege},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const i of t)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,i,r=Uc.INTERNAL){if(this._nameToGroup[t]||i.length===0)return;const s={name:t,handlers:i.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(l,d,h,y,v)=>{this._emitInputEvent(o.priorityIndex+1,l,d,h,v,y)},setPointerCapture:(l,d)=>{this._setPointerCapture(s,o,l,d)},setEventCallback:l=>{o.eventCallback=l},setUninstallCallback:l=>{o.uninstallCallback=l},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const i=this._nameToGroup[t];i?(i.handlers.forEach(r=>{var s;r.removed=!0,(s=r.uninstallCallback)==null||s.call(r)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):ae.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const s=this._handlers[r];s.priorityIndex=r,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const s=this._handlersPriority[r];s.priorityIndex=r;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(t.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){t.add(o.eventType);for(const l of o.keyModifiers)pge(l)||i.add(l)}s.active=n}this._sourceEvents=t,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,i,r){this._latestPointerType=t;const s=this._get("latestPointerLocation");if(s==null||s.x!==i||s.y!==r){const n=this._propertiesPool.get("latestPointerLocation");n.x=i,n.y=r,this._set("latestPointerLocation",n)}}_onEventReceived(t,i){if(t==="pointer-capture-lost"){const n=i;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(t,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,s=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(t,i,r,s)}_updateKeyModifiers(t,i){if(!i)return;let r=!1;const s=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},n=(l,d)=>{d&&!this._activeKeyModifiers.has(l)?(s(),this._activeKeyModifiers.add(l)):!d&&this._activeKeyModifiers.has(l)&&(s(),this._activeKeyModifiers.delete(l))};if(t==="key-down"||t==="key-up"){const l=i.key;this._keyModifiers.has(l)&&n(l,t==="key-down")}const o=i.native;n("Alt",!!(o!=null&&o.altKey)),n("Control",!!(o!=null&&o.ctrlKey)),n("Ctrl",!!(o!=null&&o.ctrlKey)),n("Shift",!!(o!=null&&o.shiftKey)),n("Meta",!!(o!=null&&o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new gge((t,i,r)=>this._setLatestPointer(t,i,r)),this._multiTouchHandler=new bge,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Uc.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Uc.INTERNAL)}_setPointerCapture(t,i,r,s){const n=t.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,i,r,s){this._emitInputEvent(0,t,i,r,s)}_emitInputEvent(t,i,r,s,n,o){const l=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),d=n!==void 0&&n,h={event:new wge(i,r,l,o||this._activeKeyModifiers,d),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(h):this._doNewPropagation(h)}_doNewPropagation(t){this._currentPropagation={events:new kE,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var i,r,s;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:n,priorityIndex:o}=t.events.pop(),l=(i=n.data)==null?void 0:i.eventId;if(!(l!=null&&this._stoppedPropagationEventIds.has(l)))for(t.currentHandler=this._handlersPriority[o];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!n.shouldStopPropagation()&&((s=(r=t.currentHandler).eventCallback)==null||s.call(r,n)),n.shouldStopPropagation()){l!=null&&this._stoppedPropagationEventIds.add(l);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const i=new kE;i.push(t);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,i){if(t.handler.hasSideEffects!==i.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==i.groupPriority)return t.groupPriority>i.groupPriority?-1:1;for(const r of t.handler.incomingEventMatches)for(const s of i.handler.incomingEventMatches){if(r.eventType!==s.eventType)continue;const n=r.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(n.length===r.keyModifiers.length!=(n.length===s.keyModifiers.length))return r.keyModifiers.length>s.keyModifiers.length?-1:1}return t.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(t){const i=[];for(const r of t){let s=0;for(;s<i.length&&this._compareHandlerPriority(r,i[s])>=0;)s++;i.splice(s,0,r)}return i}get debug(){const t=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{t(()=>this._onEventReceived(i,r))},disablePointerCapture:t}}};c([p({readOnly:!0})],Pn.prototype,"hasPendingInputs",null),c([p({constructOnly:!0})],Pn.prototype,"eventSource",void 0),c([p({constructOnly:!0})],Pn.prototype,"recognizers",void 0),c([p()],Pn.prototype,"_latestPointerType",void 0),c([p()],Pn.prototype,"latestPointerType",null),c([p()],Pn.prototype,"multiTouchActive",null),c([p({readOnly:!0})],Pn.prototype,"latestPointerLocation",void 0),c([p()],Pn.prototype,"_paused",void 0),c([p({readOnly:!0})],Pn.prototype,"updating",null),Pn=c([I("esri.views.input.InputManager")],Pn);let wge=class{constructor(t,i,r,s,n){this.type=t,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=n,this._propagationState=Mc.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Mc.STOPPED}shouldStopPropagation(){return!!(this._propagationState&Mc.STOPPED)}async(t){this._propagationState|=Mc.PAUSED;const i=(r,s)=>{this._propagationState&=~Mc.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&Mc.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var Mc;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Mc||(Mc={}));const Uc={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let Sge=class{};const Ege=Sge;function qu(e){return e!=null&&"open"in e&&"declaredClass"in e}function OV(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const Tge=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([ve(()=>[this.ui,this.popup],([i,r],s)=>{const n="popup",o="manual";if(s){const[l,d]=s;l&&qu(d)&&(d.view=null,OV(d)&&l.remove(d,n))}i&&qu(r)&&(r.view=this,OV(r)&&i.add(r,{key:n,position:o,internal:!0}))},yt),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(qu(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),qu(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)}))},Uc.WIDGET)]),JT(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{D(()=>import("./Popup-DgLO9ALE.js").then(i=>i.P),__vite__mapDeps([165,166,6,167,168,169,170,74,72,73,7,28,27,33,171,36,172,173,174]))})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(qu(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void ae.getLogger(this).error(new B("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),qu(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,r),r)}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!qu(this.popup))return this._popupSetupTask=A_(async r=>{const{default:s}=await D(()=>import("./Popup-DgLO9ALE.js").then(o=>o.P),__vite__mapDeps([165,166,6,167,168,169,170,74,72,73,7,28,27,33,171,36,172,173,174]));if(yi(r),!this.popup||qu(this.popup))return;const n=this.popup;delete n.open,delete n.close,this.popup=new s(n)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:r},s){const n=[],o=[];let l=!1;const d=Lne(s,Y("popup-view-fetch-timeout")??xge),h=b=>{const w=new $ge(b);return o.push(w),n.push(w.promise),w},y=b=>{const w=o.at(-1);return w&&w.layerView===b&&!l?w:h(b)};for(const b of r)"graphic"in b?(y(b.layerView).graphics.push(b.graphic),l=!1):(n.push(b.layerView.fetchPopupFeaturesAtLocation(b.mapPoint,d)),l=!0);o.map(b=>b.resolve(d));const v=One(n).then(b=>b.filter(w=>!!w).flat());return{pendingFeatures:n,allGraphicsPromise:v,location:i}}async _getPopupHits(i,r){const{hits:s,location:n}=await this.popupHitTest(i);yi(r);const o=[];for(const l of s)if("graphic"in l){if(this._isValidPopupGraphic(l.graphic,r)){const d=this._isValidPopupGraphicsLayerView(l.layerView)?l.layerView:void 0;o.push({graphic:l.graphic,layerView:d})}}else this._isValidPopupLocationLayerView(l.layerView)&&o.push({mapPoint:l.mapPoint,layerView:l.layerView});return{hits:o,location:n}}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r==null?void 0:r.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return c([p()],t.prototype,"popup",void 0),c([p()],t.prototype,"popupEnabled",void 0),t=c([I("esri.views.PopupView")],t),t};let $ge=class{constructor(t){this.layerView=t,this._resolver=bn(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:i,graphics:r,_resolver:s}=this;if(!i)return s.resolve(r),s.promise;let n;return i.fetchPopupFeaturesFromGraphics(r,t).catch(o=>(n=o,null)).then(o=>{o?s.resolve(o):s.reject(n)}),s.promise}};const xge=5e3;let mb=class extends _e{constructor(t){super(t),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(_e.ofType(this.itemType.Type))(t):new _e(t)}};function LV(e,t){return{type:e,cast:Qq,set(i){const r=tu(i,this._get(t),e);r.owner=this,this._set(t,r)}}}c([p()],mb.prototype,"owner",null),mb=c([I("esri.core.support.OwningCollection")],mb);var iv;const jE=xr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),kZ=jE.jsonValues.slice();Fse(kZ,"orthometric");const yb=xr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let So=iv=class extends se{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return jE.write(e,t,i)}readHeightModel(e,t,i){return jE.read(e)||(i!=null&&i.messages&&i.messages.push(Mge(e,{context:i})),null)}readHeightUnit(e,t,i){return yb.read(e)||(i!=null&&i.messages&&i.messages.push(RV(e,{context:i})),null)}readHeightUnitService(e,t,i){return GP(e)||yb.read(e)||(i!=null&&i.messages&&i.messages.push(RV(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new iv({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=gB(t);return new iv({heightModel:e.heightModel,heightUnit:i??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new iv;return t.read(e,{origin:"web-scene"}),t}};function RV(e,t){return new Qn("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function Mge(e,t){return new Qn("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}c([p({type:jE.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:kZ,default:"ellipsoidal",write:{isRequired:!0}}}}})],So.prototype,"heightModel",void 0),c([be("web-scene","heightModel")],So.prototype,"writeHeightModel",null),c([pe(["web-scene","service"],"heightModel")],So.prototype,"readHeightModel",null),c([p({type:yb.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:yb.jsonValues,write:{writer:yb.write,isRequired:!0}}}}})],So.prototype,"heightUnit",void 0),c([pe("web-scene","heightUnit")],So.prototype,"readHeightUnit",null),c([pe("service","heightUnit")],So.prototype,"readHeightUnitService",null),c([p({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],So.prototype,"vertCRS",void 0),c([pe("service","vertCRS",["vertCRS","ellipsoid","geoid"])],So.prototype,"readVertCRS",null),So=iv=c([I("esri.geometry.HeightModelInfo")],So);const k_=So;let UE=class extends mb{constructor(t){super(t),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(ae.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};UE=c([I("esri.support.AnalysesCollection")],UE);let H3;async function Age(){return H3==null&&(H3=D(()=>import("./WhereClauseCache-C6U5AiEK.js"),__vite__mapDeps([34,35,36])).then(e=>new e.WhereClauseCache(500,500))),H3}async function Lk(e,t){const i=await Age(),r=i.get(e,t);if(r==null)throw i.getError(e,t);return r}function DZ(e,t){return e||(e=null),t||(t=null),e==="1=1"?t??e:t==="1=1"?e??t:e&&t?`(${e}) AND (${t})`:e??t}function Ige(e,t){return e||(e=null),t||(t=null),e==="1=1"||t==="1=1"||e===t?e==="1=1"?e:t:e&&t?`(${e}) OR (${t})`:e??t}function C6e(e,t){return t.length===0?null:`${e} IN (${Cge(t)})`}function Cge(e){return e.map(t=>typeof t=="string"?Oge(t):t).join(",")}function Oge(e){return`'${e.replaceAll("'","''")}'`}function PV(e){return typeof e=="number"}function O6e(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function L6e(e){return typeof e=="boolean"}function D_(e){return typeof e=="string"||e instanceof String}function Lge(e){return e==null||D_(e)}function R6e(e){return Array.isArray(e)}function Rge(e){return(e==null?void 0:e.declaredClass)==="esri.Graphic"}function P6e(e){return e instanceof Date}const Pge="HH:mm",kge="HH:mm:ss",Dge="HH:mm:ss.SSS",Nge=[Dge,kge,Pge,"TT"],Fge="yyyy-MM-dd";function kV(e){if(!e||!D_(e))return null;const t=ke.fromFormat(e,Fge);return t.isValid?t:null}function DV(e){return e&&D_(e)?ine(Nge,t=>{const i=ke.fromFormat(e,t);return i.isValid?i:null})??null:null}function NV(e){if(!e||!D_(e))return null;const t=ke.fromISO(e);return t.isValid?t:null}var GE;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(GE||(GE={}));const NZ=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function Vge(e){return e!=null&&NZ.has(e.type)}function FZ(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function VZ(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function zZ(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const zge=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);gP(NZ,zge);function k6e(e,t){const i=e==null?void 0:e.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,s="range"in i?i.range[1]:i.maxValue,n=Vge(e);return FZ(e)||zZ(e)||VZ(e)?{...jge(e,s,r),isInteger:n}:{min:r!=null&&typeof r=="number"?r:null,max:s!=null&&typeof s=="number"?s:null,rawMin:r,rawMax:s,isInteger:n}}function jge(e,t,i){var r,s,n,o,l,d;return FZ(e)?{min:(r=kV(i))==null?void 0:r.toMillis(),max:(s=kV(t))==null?void 0:s.toMillis(),rawMin:i,rawMax:t}:zZ(e)?{min:(n=DV(i))==null?void 0:n.toMillis(),max:(o=DV(t))==null?void 0:o.toMillis(),rawMin:i,rawMax:t}:VZ(e)?{min:(l=NV(i))==null?void 0:l.toMillis(),max:(d=NV(t))==null?void 0:d.toMillis(),rawMin:i,rawMax:t}:{max:null,min:null}}function Uge(e){if(!e)return;const t=e.match(Gge);return t!=null&&t.groups?t.groups.doubleQuoted??t.groups.singleQuoted??t.groups.dotNotation:void 0}const Gge=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function qge(e){var t,i;return((i=(t=e.match(Bge))==null?void 0:t[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const Bge=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let zo=class{};function Hge(e){return e instanceof Pp?e===zo.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function N6e(e){return Hge(e)?zo.instance:e}zo.instance=new Gs("Etc/UTC");var qE;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(qE||(qE={}));const Wge={[qE.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let Zge=class jZ extends Error{constructor(t,i){super(f_(Wge[t],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,jZ)}};function Lf(e,t,i){return e<t?e-t:e>i?e-i:0}function Rf(e,t,i){return e<t?t:e>i?i:e}let Ww=class Di{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,i=1,r=1,s=0,n=0,o=0,l=0,d){if(isNaN(t)||isNaN(i)||isNaN(r)||isNaN(s)||isNaN(n)||isNaN(o)||isNaN(l))return null;const h=ke.local(t,i).daysInMonth;let y=ke.fromObject({day:Rf(r,1,h),year:t,month:Rf(i,1,12),hour:Rf(s,0,23),minute:Rf(n,0,59),second:Rf(o,0,59),millisecond:Rf(l,0,999)},{zone:Fd(d)});return y=y.plus({months:Lf(i,1,12),days:Lf(r,1,h),hours:Lf(s,0,23),minutes:Lf(n,0,59),seconds:Lf(o,0,59),milliseconds:Lf(l,0,999)}),new Di(y)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,i){const r=Fd(i);return t.isUnknownTimeZone||r===zo.instance?Di.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,r):new Di(t._date.setZone(r))}static dateJSToArcadeDate(t){return new Di(ke.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,i="system"){const r=Fd(i);return new Di(ke.fromJSDate(t,{zone:r}))}static unknownEpochToArcadeDate(t){return new Di(ke.fromMillis(t,{zone:zo.instance}))}static unknownDateJSToArcadeDate(t){return new Di(ke.fromMillis(t.getTime(),{zone:zo.instance}))}static epochToArcadeDate(t,i="system"){const r=Fd(i);return new Di(ke.fromMillis(t,{zone:r}))}static dateTimeToArcadeDate(t){return new Di(t)}clone(){return new Di(this._date)}changeTimeZone(t){const i=Fd(t);return Di.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(t,i){const r=Fd(i);return t.zone===zo.instance||r===zo.instance?Di.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,r):new Di(t.setZone(r))}static nowToArcadeDate(t){const i=Fd(t);return new Di(ke.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new Di(ke.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Di.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===zo.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new Di(this._date.plus(t))}diff(t,i="milliseconds"){return this._date.diff(t._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,i){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(t,i){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Di(this._date.toUTC())}toLocal(){return new Di(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const i=ke.fromISO(t,{setZone:!0});return new Di(i)}};function Fd(e,t=!0){if(e instanceof Pp)return e;if(e.toLowerCase()==="system")return"system";if(e.toLowerCase()==="utc")return"UTC";if(e.toLowerCase()==="unknown")return zo.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const r=Sr.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(r)return r}const i=Gs.create(e);if(!i.isValid){if(t)throw new Zge(qE.TimeZoneNotRecognized);return null}return i}const Yge=()=>ae.getLogger("esri.support.arcadeOnDemand"),Jge=["geometry","scale","timeProperties"];function F6e(e,t){if(t!=null)for(const i of Jge)t.hasArcadeDependency(i)&&e.add(i);return e}let W3;function Va(){return W3||(W3=(async()=>{const e=await D(()=>import("./arcadeUtils-D3dVBoA3.js"),__vite__mapDeps([175,176,177,178,171,36,45,32,27,7,28,33,35]));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel}})()),W3}const V6e=(e,t,i)=>UZ.create(e,t,i,null,["$feature","$view"],[]),Xge=(e,t,i,r)=>UZ.create(e,t,i,r,["$feature","$view"],[]);let UZ=class GZ{constructor(t,i,r,s,n,o,l){this._dependencies=new Map,this.services=null,this.script=t,this.evaluate=s;const d=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=d??[],this._syntaxTree=r,this._arcade=i,this._arcadeFeature=n,this._spatialReference=l,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}static async create(t,i,r,s,n,o){const{arcade:l,Feature:d,Dictionary:h}=await Va(),y=i instanceof tt?i:tt.fromJSON(i);let v;try{v=l.parseScript(t,o)}catch(Z){return Yge().error(new B("arcade-bad-expression","Failed to parse arcade script",{script:t,error:Z})),null}const b=n.reduce((Z,ie)=>({...Z,[ie]:null}),{});let w=null;s!=null&&(w=new h(s),w.immutable=!0,b.$config=null);const E=l.scriptUsesGeometryEngine(v),T=E&&l.enableGeometrySupport(),$=l.scriptUsesFeatureSet(v)&&l.enableFeatureSetSupport(),A=l.scriptIsAsync(v),O=A&&l.enableAsyncSupport(),L={vars:b,spatialReference:y,useAsync:!!O};await Promise.all([T,$,O]);const R=new Set;await l.loadDependentModules(R,v,null,A,E);const N=new h;N.immutable=!1,N.setField("scale",0);const j=l.compileScript(v,L),V=(Z,ie)=>{var ue;const oe=(ue=Z.$view)==null?void 0:ue.timeZone;if("$view"in Z&&Z.$view){let me;if(N.setField("scale",typeof Z.$view=="object"&&"scale"in Z.$view?Z.$view.scale:void 0),typeof Z.$view=="object"&&"timeProperties"in Z.$view&&Z.$view.timeProperties!=null){const{currentStart:Te,currentEnd:Ee}=Z.$view.timeProperties;me=new h({currentStart:Te!=null?oe!=null?Ww.epochToArcadeDate(Te,oe):Ww.unknownEpochToArcadeDate(Te):void 0,currentEnd:Ee!=null?oe!=null?Ww.epochToArcadeDate(Ee,oe):Ww.unknownEpochToArcadeDate(Ee):void 0,startIncluded:!0,endIncluded:!0})}N.setField("timeProperties",me),Z.$view=N}return w&&(Z.$config=w),j({vars:Z,spatialReference:y,services:ie,timeZone:oe})};return new GZ(t,l,v,V,new d,r,y)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}references(t){return this._dependencies.get(t)??!1}};const Qge=/^([0-9_])/,Kge=/[^a-z0-9_\u0080-\uffff]+/gi;function e0e(e){return e==null?null:e.trim().replaceAll(Kge,"_").replace(Qge,"F$1")||null}const t0e=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],i0e=["field","normalizationField"];function FV(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(VV(t0e,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)VV(i0e,r,t)}}function VV(e,t,i){if(e)for(const r of e){const s=p_(r,t),n=s&&typeof s!="function"&&i.get(s);n&&$r(r,n.name,t)}}function qZ(e,t){var i;if(e!=null&&((i=t==null?void 0:t.fields)!=null&&i.length))if("startField"in e){const r=t.get(e.startField),s=t.get(e.endField);e.startField=(r==null?void 0:r.name)??null,e.endField=(s==null?void 0:s.name)??null}else{const r=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=(r==null?void 0:r.name)??null,e.endTimeField=(s==null?void 0:s.name)??null}}const Z3=new Set;function a$(e,t){return e&&t?(Z3.clear(),xp(Z3,e,t),Array.from(Z3).sort()):[]}function xp(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of i)_s(e,t,s);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const s of i)s!=null&&e.add(s)}}function _s(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function z6e(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(i=>i.name):t}function j6e(e,t,i=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const r=a$(e,t);return r.length/e.fields.length>=i?["*"]:r}async function is(e,t,i){var n;if(!i)return;let r;const s=Uge(i);if(s)r=[s];else{const{arcadeUtils:o}=await Va();r=o.extractFieldNames(i,(n=t==null?void 0:t.fields)==null?void 0:n.map(l=>l.name))}for(const o of r)_s(e,t,o)}async function Rk(e,t,i){if(i&&i!=="1=1"){const r=await Lk(i,t);if(!r.isStandardized)throw new B("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});xp(e,t,r.fieldNames)}}function r0e({displayField:e,fields:t}){return e||(t!=null&&t.length?Y3(t,"name-or-title")||Y3(t,"unique-identifier")||Y3(t,"type-or-category")||s0e(t):null)}function s0e(e){for(const t of e){if(!(t!=null&&t.name))continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function Y3(e,t){for(const i of e)if(i!=null&&i.valueType&&i.valueType===t)return i.name;return null}async function U6e(e,t){var r;if(!t)return;const i=(r=t.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function n0e(e,t,i){i.onStatisticExpression?is(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function G6e(e,t,i){if(!t||!i||!("fields"in i))return;const r=[],s=i.popupTemplate;r.push(BZ(e,t,s)),i.fields&&r.push(...i.fields.map(async n=>n0e(e,t.fieldsIndex,n))),await Promise.all(r)}async function q6e(e,t){var n,o,l;const{fieldsIndex:i,trackInfo:r}=t;if(!t||!r||!i)return;const s=[(n=r.latestObservations.renderer)==null?void 0:n.collectRequiredFields(e,i),(o=r.previousObservations.renderer)==null?void 0:o.collectRequiredFields(e,i),(l=r.trackLines.renderer)==null?void 0:l.collectRequiredFields(e,i)];r.popupTemplate&&s.push(BZ(e,t,r.popupTemplate));for(const d of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(d)for(const h of d)s.push(ZZ(e,i,h));await Promise.all(s)}async function BZ(e,t,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(n=>is(e,t.fieldsIndex,n.expression)));const s=i==null?void 0:i.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&r.push(is(e,t.fieldsIndex,n.expressionInfo.expression));await Promise.all(r)}async function B6e(e,t,i){t&&(t.timeInfo&&(i!=null&&i.timeExtent)&&xp(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&xp(e,t.fieldsIndex,[t.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await Rk(e,t.fieldsIndex,i.where))}async function H6e(e,t,i){t&&i&&await Promise.all(i.map(r=>o0e(e,t,r)))}async function o0e(e,t,i){t&&i&&(i.valueExpression?await is(e,t.fieldsIndex,i.valueExpression):i.field&&_s(e,t.fieldsIndex,i.field))}function W6e(e){return e?a$(e.fieldsIndex,HZ(e)):[]}function a0e(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?a$(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function Z6e(e,t,i){if(!t||!i)return;const r=t.fieldsIndex;await Promise.all(i.filters.map(s=>Rk(e,r,s.where)))}const l0e=new Set(["oid","global-id","guid"]),u0e=new Set(["oid","global-id"]),c0e=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function d0e(e){const t=new Set;WZ(e).forEach(r=>t.add(r)),a0e(e).forEach(r=>t.add(r.toLowerCase()));const i=e&&"infoFor3D"in e?e.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>t.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>t.add(r.toLowerCase()))),Array.from(t)}function HZ(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:i,creatorField:r,editDateField:s,editorField:n}=t;return[i,r,s,n].filter(Boolean)}function WZ(e){return HZ(e).map(t=>t.toLowerCase())}function h0e(e,t){var i;return e.editable&&!l0e.has(e.type)&&!WZ(t).includes(((i=e.name)==null?void 0:i.toLowerCase())??"")}function p0e(e,t){var r;const i=((r=e.name)==null?void 0:r.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&i===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&i===t.globalIdField.toLowerCase()||d0e(t).includes(i)||u0e.has(e.type)||c0e.some(s=>s.test(i)))}async function Y6e(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i!=null&&i.length&&await Promise.all(i.map(s=>ZZ(e,r,s)))}async function ZZ(e,t,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await is(e,t,r.expression);else{const n=r.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{_s(e,t,o.slice(1,-1))})}await Rk(e,t,s)}function f0e(e){const t=e.defaultValue;return t!==void 0&&JZ(e,t)?t:e.nullable?null:void 0}function J6e(e){const t=typeof e=="string"?{type:e}:e;return KZ(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function YZ(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function m0e(e){return e===null||YZ(e)}function y0e(e){return e===null||Number.isInteger(e)}function g0e(){return!0}function JZ(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=e.nullable?y0e:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?m0e:YZ;break;case"string":case"esriFieldTypeString":i=e.nullable?Lge:D_;break;default:i=g0e}return arguments.length===1?i:i(t)}const v0e=["integer","small-integer","big-integer"],b0e=["single","double"],_0e=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],w0e=["esriFieldTypeSingle","esriFieldTypeDouble"],XZ=new Set([...v0e,..._0e]),S0e=new Set([...b0e,...w0e]),E0e=gP(XZ,S0e);function T0e(e){return e!=null&&XZ.has(e.type)}function QZ(e){return e!=null&&E0e.has(e.type)}function KZ(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function Pk(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function $0e(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function x0e(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function eY(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function zV(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function jV(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function X6e(e,t){return M0e(e,t)===null}var BE,HE;function Q6e(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function M0e(e,t){return e==null||e.nullable&&t===null?null:JZ(e,t)?QZ(e)&&!A0e(e.type,Number(t))?BE.OUT_OF_RANGE:null:HE.INVALID_TYPE}function A0e(e,t){const i=typeof e=="string"?tY(e):e;if(!i)return!1;const r=i.min,s=i.max;return i.isInteger?Number.isInteger(t)&&t>=r&&t<=s:t>=r&&t<=s}function tY(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return I0e;case"esriFieldTypeInteger":case"integer":return C0e;case"esriFieldTypeBigInteger":case"big-integer":return O0e;case"esriFieldTypeSingle":case"single":return L0e;case"esriFieldTypeDouble":case"double":return R0e}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(BE||(BE={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(HE||(HE={}));const I0e={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},C0e={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},O0e={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},L0e={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},R0e={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function K6e(e,t,i){switch(e){case GE.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case GE.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case HE.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case BE.OUT_OF_RANGE:{const{min:r,max:s}=tY(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${s}`}}}function P0e(e,t){return!k0e(e,t,null)}function k0e(e,t,i){if(!(t!=null&&t.attributes)||!e)return!0;const r=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!r.has(n)&&(s=!0,i==null))break;return s}function D0e(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}async function N0e(e,t){const i=new Set;return e!=null&&e.collectRequiredFields&&await e.collectRequiredFields(i,t),Array.from(i).sort()}function kk(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let t2=class extends se{constructor(t){super(t),this.type=null}};c([p({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],t2.prototype,"type",void 0),t2=c([I("esri.popup.content.Content")],t2);const au=t2,Zw=new ot({asc:"ascending",desc:"descending"});let rv=class extends ut.ClonableMixin(se){constructor(t){super(t),this.field=null,this.order="ascending"}};c([p({type:String,json:{write:!0}})],rv.prototype,"field",void 0),c([p({type:Zw.apiValues,json:{type:Zw.jsonValues,read:Zw.read,write:Zw.write}})],rv.prototype,"order",void 0),rv=c([I("esri.popup.support.AttachmentsOrderByInfo")],rv);const F0e=rv;let Ku=class extends ut.ClonableMixin(au){constructor(t){super(t),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};c([p({type:String,json:{write:!0}})],Ku.prototype,"description",void 0),c([p({type:["auto","preview","list"],json:{write:!0}})],Ku.prototype,"displayType",void 0),c([p({type:[F0e],json:{write:!0}})],Ku.prototype,"orderByFields",void 0),c([p({type:String,json:{write:!0}})],Ku.prototype,"title",void 0),c([p({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ku.prototype,"type",void 0),Ku=c([I("esri.popup.content.AttachmentsContent")],Ku);const Py=Ku;var CC;let eh=CC=class extends au{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new CC({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?q(this.outFields):null})}};c([p()],eh.prototype,"creator",void 0),c([p()],eh.prototype,"destroyer",void 0),c([p()],eh.prototype,"outFields",void 0),c([p({type:["custom"],readOnly:!0})],eh.prototype,"type",void 0),eh=CC=c([I("esri.popup.content.CustomContent")],eh);const V0e=eh;var OC;let Kf=OC=class extends se{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new OC({title:this.title,expression:this.expression})}};c([p({type:String,json:{write:!0}})],Kf.prototype,"title",void 0),c([p({type:String,json:{write:!0}})],Kf.prototype,"expression",void 0),c([p({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Kf.prototype,"returnType",void 0),Kf=OC=c([I("esri.popup.ElementExpressionInfo")],Kf);const z0e=Kf;var LC;let sv=LC=class extends au{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new LC({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};c([p({type:z0e,json:{write:!0}})],sv.prototype,"expressionInfo",void 0),c([p({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],sv.prototype,"type",void 0),sv=LC=c([I("esri.popup.content.ExpressionContent")],sv);const l$=sv;let em=class extends ut.ClonableMixin(se){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};c([Pe(Zde)],em.prototype,"dateFormat",void 0),c([p({type:Boolean,json:{write:!0}})],em.prototype,"digitSeparator",void 0),c([p({type:vt,json:{write:!0}})],em.prototype,"places",void 0),em=c([I("esri.popup.support.FieldInfoFormat")],em);const i2=em;var RC;let Eo=RC=class extends se{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new RC({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};c([p({type:String,json:{write:!0}})],Eo.prototype,"fieldName",void 0),c([p({type:i2,json:{write:!0}})],Eo.prototype,"format",void 0),c([p({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Eo.prototype,"isEditable",void 0),c([p({type:String,json:{write:!0}})],Eo.prototype,"label",void 0),c([Pe(new ot({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Eo.prototype,"stringFieldOption",void 0),c([p({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Eo.prototype,"statisticType",void 0),c([p({type:String,json:{write:!0}})],Eo.prototype,"tooltip",void 0),c([p({type:Boolean,json:{write:!0}})],Eo.prototype,"visible",void 0),Eo=RC=c([I("esri.popup.FieldInfo")],Eo);const Dk=Eo;var PC;let Sl=PC=class extends au{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new PC(q({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};c([p({type:Object,json:{write:!0}})],Sl.prototype,"attributes",void 0),c([p({type:String,json:{write:!0}})],Sl.prototype,"description",void 0),c([p({type:[Dk]})],Sl.prototype,"fieldInfos",void 0),c([be("fieldInfos")],Sl.prototype,"writeFieldInfos",null),c([p({type:String,json:{write:!0}})],Sl.prototype,"title",void 0),c([p({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Sl.prototype,"type",void 0),Sl=PC=c([I("esri.popup.content.FieldsContent")],Sl);const ky=Sl;let th=class extends se{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};c([p({type:String,json:{write:!0}})],th.prototype,"altText",void 0),c([p({type:String,json:{write:!0}})],th.prototype,"caption",void 0),c([p({type:String,json:{write:!0}})],th.prototype,"title",void 0),c([p({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],th.prototype,"type",void 0),th=c([I("esri.popup.content.mixins.MediaInfo")],th);const Nk=th;var kC;let ih=kC=class extends Me{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new kC({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};c([p()],ih.prototype,"color",void 0),c([p()],ih.prototype,"fieldName",void 0),c([p()],ih.prototype,"tooltip",void 0),c([p()],ih.prototype,"value",void 0),ih=kC=c([I("esri.popup.content.support.ChartMediaInfoValueSeries")],ih);const j0e=ih;var DC;let ec=DC=class extends se{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new DC({colors:q(this.colors),fields:q(this.fields),normalizeField:this.normalizeField,series:q(this.series),tooltipField:this.tooltipField})}};c([p({type:[ye],json:{type:[[vt]],write:!0}})],ec.prototype,"colors",void 0),c([p({type:[String],json:{write:{isRequired:!0}}})],ec.prototype,"fields",void 0),c([p({type:String,json:{write:!0}})],ec.prototype,"normalizeField",void 0),c([p({type:[j0e],json:{read:!1}})],ec.prototype,"series",void 0),c([p({type:String,json:{write:!0}})],ec.prototype,"tooltipField",void 0),ec=DC=c([I("esri.popup.content.support.ChartMediaInfoValue")],ec);const U0e=ec;let nv=class extends Nk{constructor(t){super(t),this.type=null,this.value=void 0}};c([p({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],nv.prototype,"type",void 0),c([p({type:U0e,json:{write:{isRequired:!0}}})],nv.prototype,"value",void 0),nv=c([I("esri.popup.content.mixins.ChartMediaInfo")],nv);const u$=nv,c$=xr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var NC;let r2=NC=class extends u${constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new NC({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};c([p({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:c$.write,isRequired:!0}}})],r2.prototype,"type",void 0),r2=NC=c([I("esri.popup.content.BarChartMediaInfo")],r2);const iY=r2;var FC;let s2=FC=class extends u${constructor(e){super(e),this.type="column-chart"}clone(){var e;return new FC({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};c([p({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:c$.write,isRequired:!0}}})],s2.prototype,"type",void 0),s2=FC=c([I("esri.popup.content.ColumnChartMediaInfo")],s2);const rY=s2;var VC;let ov=VC=class extends se{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new VC({linkURL:this.linkURL,sourceURL:this.sourceURL})}};c([p({type:String,json:{write:!0}})],ov.prototype,"linkURL",void 0),c([p({type:String,json:{write:{isRequired:!0}}})],ov.prototype,"sourceURL",void 0),ov=VC=c([I("esri.popup.content.support.ImageMediaInfoValue")],ov);const G0e=ov;var zC;let tm=zC=class extends Nk{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new zC({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};c([p({type:Number,json:{write:!0}})],tm.prototype,"refreshInterval",void 0),c([p({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],tm.prototype,"type",void 0),c([p({type:G0e,json:{write:{isRequired:!0}}})],tm.prototype,"value",void 0),tm=zC=c([I("esri.popup.content.ImageMediaInfo")],tm);const sY=tm;var jC;let n2=jC=class extends u${constructor(e){super(e),this.type="line-chart"}clone(){var e;return new jC({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};c([p({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:c$.write,isRequired:!0}}})],n2.prototype,"type",void 0),n2=jC=c([I("esri.popup.content.LineChartMediaInfo")],n2);const nY=n2;var UC;let o2=UC=class extends u${constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new UC({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};c([p({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:c$.write,isRequired:!0}}})],o2.prototype,"type",void 0),o2=UC=c([I("esri.popup.content.PieChartMediaInfo")],o2);const oY=o2,GC={base:Nk,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":iY,"column-chart":rY,"line-chart":nY,"pie-chart":oY,image:sY}};var qC;let To=qC=class extends au{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?sY.fromJSON(t):t.type==="barchart"?iY.fromJSON(t):t.type==="columnchart"?rY.fromJSON(t):t.type==="linechart"?nY.fromJSON(t):t.type==="piechart"?oY.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new qC(q({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};c([p()],To.prototype,"activeMediaInfoIndex",void 0),c([p({type:Object,json:{write:!0}})],To.prototype,"attributes",void 0),c([p({type:String,json:{write:!0}})],To.prototype,"description",void 0),c([p({types:[GC]})],To.prototype,"mediaInfos",void 0),c([pe("mediaInfos")],To.prototype,"readMediaInfos",null),c([be("mediaInfos")],To.prototype,"writeMediaInfos",null),c([p({type:String,json:{write:!0}})],To.prototype,"title",void 0),c([p({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],To.prototype,"type",void 0),To=qC=c([I("esri.popup.content.MediaContent")],To);const Zb=To;var BC;let av=BC=class extends se{constructor(e){super(e),this.field=null,this.order=null}clone(){return new BC({field:this.field,order:this.order})}};c([p({type:String,json:{write:!0}})],av.prototype,"field",void 0),c([p({type:["asc","desc"],json:{write:!0}})],av.prototype,"order",void 0),av=BC=c([I("esri.popup.support.RelatedRecordsInfoFieldOrder")],av);const Fk=av;let da=class extends ut.ClonableMixin(au){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};c([p({type:String,json:{write:!0}})],da.prototype,"description",void 0),c([p({type:Number,json:{type:vt,write:!0}})],da.prototype,"displayCount",void 0),c([p({type:["list"],json:{write:{isRequired:!0}}})],da.prototype,"displayType",void 0),c([p({type:[Fk],json:{write:!0}})],da.prototype,"orderByFields",void 0),c([p({type:Number,json:{type:vt,write:{isRequired:!0}}})],da.prototype,"relationshipId",void 0),c([p({type:String,json:{write:!0}})],da.prototype,"title",void 0),c([p({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],da.prototype,"type",void 0),da=c([I("esri.popup.content.RelationshipContent")],da);const Yb=da;var HC;let lv=HC=class extends au{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new HC({text:this.text})}};c([p({type:String,json:{write:!0}})],lv.prototype,"text",void 0),c([p({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],lv.prototype,"type",void 0),lv=HC=c([I("esri.popup.content.TextContent")],lv);const Jb=lv;let El=class extends ut.ClonableMixin(se){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};c([p({type:String,json:{write:!0}})],El.prototype,"title",void 0),c([p({type:String,json:{write:!0}})],El.prototype,"description",void 0),c([p({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],El.prototype,"type",void 0),c([p({type:Number,json:{type:vt,write:!0}})],El.prototype,"associatedNetworkSourceId",void 0),c([p({type:Number,json:{type:vt,write:!0}})],El.prototype,"associatedAssetGroup",void 0),c([p({type:Number,json:{type:vt,write:!0}})],El.prototype,"associatedAssetType",void 0),El=c([I("esri.popup.support.UtilityNetworkAssociationType")],El);const aY=El;let tc=class extends ut.ClonableMixin(au){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};c([p({type:String,json:{write:!0}})],tc.prototype,"description",void 0),c([p({type:Number,json:{type:vt,write:!0}})],tc.prototype,"displayCount",void 0),c([p({type:String,json:{write:!0}})],tc.prototype,"title",void 0),c([p({type:[aY],json:{write:!0}})],tc.prototype,"associationTypes",void 0),c([Pe({utilityNetworkAssociations:"utility-network-associations"})],tc.prototype,"type",void 0),tc=c([I("esri.popup.content.UtilityNetworkAssociationsContent")],tc);const Vk=tc,q0e={base:null,key:"type",typeMap:{attachment:Py,media:Zb,text:Jb,expression:l$,field:ky,relationship:Yb,utilityNetworkAssociations:Vk}},B0e={base:null,key:"type",typeMap:{attachment:Py,media:Zb,text:Jb,expression:l$,field:ky,relationship:Yb}};var WC;let rh=WC=class extends se{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new WC({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([p({type:String,json:{write:!0}})],rh.prototype,"name",void 0),c([p({type:String,json:{write:!0}})],rh.prototype,"title",void 0),c([p({type:String,json:{write:!0}})],rh.prototype,"expression",void 0),c([p({type:["string","number"],json:{write:!0}})],rh.prototype,"returnType",void 0),rh=WC=c([I("esri.popup.ExpressionInfo")],rh);const H0e=rh;var ZC;let uv=ZC=class extends se{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new ZC({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};c([p({type:Boolean,json:{write:!0}})],uv.prototype,"returnTopmostRaster",void 0),c([p({type:Boolean,json:{write:!0}})],uv.prototype,"showNoDataRecords",void 0),uv=ZC=c([I("esri.popup.LayerOptions")],uv);const W0e=uv;var YC;let cv=YC=class extends se{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new YC({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?q(this.orderByFields):null})}};c([p({type:Boolean,json:{write:!0}})],cv.prototype,"showRelatedRecords",void 0),c([p({type:[Fk],json:{write:!0}})],cv.prototype,"orderByFields",void 0),cv=YC=c([I("esri.popup.RelatedRecordsInfo")],cv);const UV=cv;var JC;let kn=JC=class extends ld.IdentifiableMixin(Me){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new JC({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};c([p()],kn.prototype,"active",void 0),c([p()],kn.prototype,"className",void 0),c([p()],kn.prototype,"disabled",void 0),c([p()],kn.prototype,"icon",void 0),c([p()],kn.prototype,"id",void 0),c([p()],kn.prototype,"indicator",void 0),c([p()],kn.prototype,"title",void 0),c([p()],kn.prototype,"type",void 0),c([p()],kn.prototype,"visible",void 0),kn=JC=c([I("esri.support.actions.ActionBase")],kn);const d$=kn;var XC;let a2=XC=class extends d${constructor(e){super(e),this.image=null,this.type="button"}clone(){return new XC({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};c([p()],a2.prototype,"image",void 0),a2=XC=c([I("esri.support.actions.ActionButton")],a2);const lY=a2;var QC;let dv=QC=class extends d${constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new QC({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};c([p()],dv.prototype,"image",void 0),c([p()],dv.prototype,"value",void 0),dv=QC=c([I("esri.support.actions.ActionToggle")],dv);const uY=dv,x0="relationships/",GV="expression/",Z0e=_e.ofType({key:"type",defaultKeyValue:"button",base:d$,typeMap:{button:lY,toggle:uY}}),Y0e={base:au,key:"type",typeMap:{media:Zb,custom:V0e,text:Jb,attachments:Py,fields:ky,expression:l$,relationship:Yb,utilityNetworkAssociations:Vk}},cY=new Set(["attachments","fields","media","text","expression","relationship"]),J0e=new Set([...cY,"utility-network-associations"]);let Ui=class extends ut.ClonableMixin(se){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(i=>Yo(Y0e,i)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Ua(t)?t:(ae.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(t,i,r,s){this._writePopupTemplateContent(t,i,s)}writeWebMapContent(t,i,r,s){this._writePopupTemplateContent(t,i,s)}writeFieldInfos(t,i,r,s){const{content:n}=this,o=Array.isArray(n)?n:null;if(t){const l=o?o.filter(h=>h.type==="fields"):[],d=l.length&&l.every(h=>{var y;return(y=h.fieldInfos)==null?void 0:y.length});i.fieldInfos=t.filter(Boolean).map(h=>{const y=h.toJSON(s);return d&&(y.visible=!1),y})}if(o)for(const l of o)l.type==="fields"&&this._writeFieldsContent(l,i)}writeLayerOptions(t,i,r,s){i[r]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(s)}writeTitle(t,i){i.title=t||""}async collectRequiredFields(t,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(t,i,[...r,...this._getContentExpressionInfos(this.content,r)]),xp(t,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const i=new Set;return await this.collectRequiredFields(i,t),[...i].sort()}_writePopupTemplateContent(t,i,r){typeof t!="string"?Array.isArray(t)&&(i.popupElements=t.filter(s=>(r==null?void 0:r.origin)==="web-scene"?cY.has(s.type):J0e.has(s.type)).map(s=>s==null?void 0:s.toJSON(r)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=t}_writeFieldsContent(t,i){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const r=q(t.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(s=>{const n=i.fieldInfos.find(o=>{var l,d;return((l=o.fieldName)==null?void 0:l.toLowerCase())===((d=s.fieldName)==null?void 0:d.toLowerCase())});n?n.visible=!0:i.fieldInfos.push(s)}):i.fieldInfos=r}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,i){var n,o;const r=((n=t.orderByFields)==null?void 0:n.map(l=>this._toFieldOrderJSON(l,t.relationshipId)))||[],s=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(t,i){!i.description&&t.text&&(i.description=t.text)}_writeMediaContent(t,i){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const r=q(t.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(t,i,r){const s={description:!1,mediaInfos:!1};return r.map(n=>n.type==="media"?(n.mediaInfos||!i||s.mediaInfos||(n.mediaInfos=i,s.mediaInfos=!0),Zb.fromJSON(n)):n.type==="text"?(n.text||!t||s.description||(n.text=t,s.description=!0),Jb.fromJSON(n)):n.type==="attachments"?Py.fromJSON(n):n.type==="fields"?ky.fromJSON(n):n.type==="expression"?l$.fromJSON(n):n.type==="relationship"?Yb.fromJSON(n):n.type==="utilityNetworkAssociations"?Vk.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:i,order:r}=t;if(!(i!=null&&i.startsWith(x0)))return null;const s=i.replace(x0,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return!Number.isNaN(n)&&o?Yb.fromJSON({relationshipId:n,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(t,i){const{order:r,field:s}=t;return{field:`${x0}${i}/${s}`,order:r}}_readPopupInfo({description:t,mediaInfos:i,showAttachments:r,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];t?n.push(new Jb({text:t})):n.push(new ky),Array.isArray(i)&&i.length&&n.push(Zb.fromJSON({mediaInfos:i})),r&&n.push(Py.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:l}=s;return o&&(l!=null&&l.length)&&l.forEach(d=>{const h=this._toRelationshipContent(d);h&&n.push(h)}),n.length?n:t}_getContentElementFields(t){const i=t==null?void 0:t.type;if(i==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(i==="custom")return t.outFields||[];if(i==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(i==="media"){const r=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...r.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return i==="text"?this._extractFieldNames(t.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:i,title:r,value:s}=t,n=s||{},{fields:o,normalizeField:l,tooltipField:d,sourceURL:h,linkURL:y}=n,v=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(h),...this._extractFieldNames(y),...o??[]];return l&&v.push(l),d&&v.push(d),v}_getContentExpressionInfos(t,i){return Array.isArray(t)?t.reduce((r,s)=>[...r,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],i):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(t,i,r){r&&await Promise.all(r.map(s=>is(t,i,s.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(x0)||i.startsWith(GV))).map(i=>i.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(t){const{className:i,title:r,type:s}=t,n=s==="button"||s==="toggle"?t.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(n)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return kk(t).filter(i=>!(i.indexOf(x0)===0||i.indexOf(GV)===0))}};c([p({type:Z0e})],Ui.prototype,"actions",void 0),c([p()],Ui.prototype,"content",void 0),c([mt("content")],Ui.prototype,"castContent",null),c([pe("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Ui.prototype,"readContent",null),c([be("web-scene","content",{popupElements:{type:_e.ofType(B0e)},showAttachments:{type:Boolean},mediaInfos:{type:_e.ofType(GC)},description:{type:String},relatedRecordsInfo:{type:UV}})],Ui.prototype,"writeWebSceneContent",null),c([be("content",{popupElements:{type:_e.ofType(q0e)},showAttachments:{type:Boolean},mediaInfos:{type:_e.ofType(GC)},description:{type:String},relatedRecordsInfo:{type:UV}})],Ui.prototype,"writeWebMapContent",null),c([p({type:[H0e],json:{write:!0}})],Ui.prototype,"expressionInfos",void 0),c([p({type:[Dk]})],Ui.prototype,"fieldInfos",void 0),c([be("fieldInfos")],Ui.prototype,"writeFieldInfos",null),c([p({type:W0e})],Ui.prototype,"layerOptions",void 0),c([be("layerOptions")],Ui.prototype,"writeLayerOptions",null),c([p({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Ui.prototype,"lastEditInfoEnabled",void 0),c([p()],Ui.prototype,"outFields",void 0),c([p()],Ui.prototype,"overwriteActions",void 0),c([p()],Ui.prototype,"returnGeometry",void 0),c([p({json:{type:String}})],Ui.prototype,"title",void 0),c([be("title")],Ui.prototype,"writeTitle",null),Ui=c([I("esri.PopupTemplate")],Ui);const eg=Ui,qV=new ot({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let X0e=0,im=class extends se{constructor(t){super(t),this.id="sym"+X0e++,this.type=null,this.color=new ye([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};c([p({type:qV.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:qV.write,isRequired:!0}}})],im.prototype,"type",void 0),c([p({type:ye,json:{write:{allowNull:!0}}})],im.prototype,"color",void 0),c([pe("color")],im.prototype,"readColor",null),im=c([I("esri.symbols.Symbol")],im);const Dr=im;var KC;let ic=KC=class extends Dr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const s=r.map(n=>{const o=n.valueExpressionInfo;return o?is(e,t,o.expression):null});await Promise.all(s)}}}clone(){return new KC({data:q(this.data)})}hash(){return CG(JSON.stringify(this.data)).toString()}};c([p({json:{write:!1}})],ic.prototype,"color",void 0),c([p({json:{write:!0}})],ic.prototype,"data",void 0),c([pe("data",["symbol"])],ic.prototype,"readData",null),c([be("data",{})],ic.prototype,"writeData",null),c([Pe({CIMSymbolReference:"cim"},{readOnly:!0})],ic.prototype,"type",void 0),ic=KC=c([I("esri.symbols.CIMSymbol")],ic);const dd=ic;let rm=class extends se{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,i,r){t||(i[r]=t)}};c([p({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],rm.prototype,"enabled",void 0),c([be("enabled")],rm.prototype,"writeEnabled",null),c([p({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],rm.prototype,"type",void 0),rm=c([I("esri.symbols.Symbol3DLayer")],rm);const Ga=rm;function Q0e(e,t){const i=t.transparency!=null?Gb(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new ye([r[0]||0,r[1]||0,r[2]||0,i]):null}function K0e(e,t){t.color=e.toJSON().slice(0,3);const i=YT(e.a);i!==0&&(t.transparency=i)}function hd(e){return{type:ye,nonNullable:e==null?void 0:e.nonNullable,json:{type:[vt],default:null,read:{source:["color","transparency"],reader:Q0e},write:{target:{color:{type:[vt],isRequired:e==null?void 0:e.colorRequiredOnWrite},transparency:{type:vt}},writer:K0e}}}}const za={type:Number,cast:ft,json:{write:!0}};let sh=class extends se{constructor(t){super(t),this.color=new ye([0,0,0,1]),this.extensionLength=0,this.size=Bs(1)}clone(){}cloneProperties(){return{color:q(this.color),size:this.size,extensionLength:this.extensionLength}}};c([p({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],sh.prototype,"type",void 0),c([p(hd({colorRequiredOnWrite:!0}))],sh.prototype,"color",void 0),c([p({...za,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],sh.prototype,"extensionLength",void 0),c([p(za)],sh.prototype,"size",void 0),sh=c([I("esri.symbols.edges.Edges3D")],sh);const zk=sh;var eO;let l2=eO=class extends zk{constructor(e){super(e),this.type="sketch"}clone(){return new eO(this.cloneProperties())}};c([Pe({sketch:"sketch"},{readOnly:!0})],l2.prototype,"type",void 0),l2=eO=c([I("esri.symbols.edges.SketchEdges3D")],l2);const eve=l2;var tO;let u2=tO=class extends zk{constructor(e){super(e),this.type="solid"}clone(){return new tO(this.cloneProperties())}};c([Pe({solid:"solid"},{readOnly:!0})],u2.prototype,"type",void 0),u2=tO=c([I("esri.symbols.edges.SolidEdges3D")],u2);const dY=u2,hY={types:{key:"type",base:zk,typeMap:{solid:dY,sketch:eve}},json:{write:!0}};var iO;let Fs=iO=class extends se{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?ck(this.emissiveFactor):null};return new iO(e)}};c([p(hd())],Fs.prototype,"color",void 0),c([p({type:[Number],json:{write:!1}})],Fs.prototype,"emissiveFactor",void 0),Fs=iO=c([I("esri.symbols.support.Symbol3DMaterial")],Fs);var rO;let rc=rO=class extends Ga{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new rO({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};c([Pe({Extrude:"extrude"},{readOnly:!0})],rc.prototype,"type",void 0),c([p({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],rc.prototype,"size",void 0),c([p({type:Fs,json:{write:!0}})],rc.prototype,"material",void 0),c([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],rc.prototype,"castShadows",void 0),c([p(hY)],rc.prototype,"edges",void 0),rc=rO=c([I("esri.symbols.ExtrudeSymbol3DLayer")],rc);const pY=rc;let c2=class extends se{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};c([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],c2.prototype,"type",void 0),c2=c([I("esri.symbols.patterns.LinePattern3D")],c2);const fY=c2,tve=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var sO;const ive=xr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let hv=sO=class extends fY{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new sO(e)}};c([p({type:["style"],json:{write:{isRequired:!0}}})],hv.prototype,"type",void 0),c([Pe(ive),p({type:tve,json:{write:{isRequired:!0}}})],hv.prototype,"style",void 0),hv=sO=c([I("esri.symbols.patterns.LineStylePattern3D")],hv);const jk=hv;let d2=class extends se{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};c([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],d2.prototype,"type",void 0),d2=c([I("esri.symbols.patterns.Pattern3D")],d2);const mY=d2,rve=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var nO;let pv=nO=class extends mY{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new nO({style:this.style})}};c([p({type:["style"],json:{write:{isRequired:!0}}})],pv.prototype,"type",void 0),c([p({type:rve,json:{read:!0,write:{isRequired:!0}}})],pv.prototype,"style",void 0),pv=nO=c([I("esri.symbols.patterns.StylePattern3D")],pv);const yY=pv,sve={types:{key:"type",base:mY,typeMap:{style:yY}},json:{write:!0}},gY={types:{key:"type",base:fY,typeMap:{style:jk}},json:{write:!0}},gb=new ye("white"),nve=new ye([255,255,255,0]);function ove(e){return e.r===0&&e.g===0&&e.b===0}var oO;let vb=oO=class extends Fs{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?ck(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new oO(e)}};c([Pe({multiply:"multiply",replace:"replace",tint:"tint"})],vb.prototype,"colorMixMode",void 0),vb=oO=c([I("esri.symbols.support.Symbol3DFillMaterial")],vb);function ave(e,t=!1){return e<=EG?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function mFe(e){return(zse(e)?e.byteLength/8:e.length)<=EG?Array.from(e):new Float64Array(e)}function yFe(e,t,i){return Array.isArray(e)?e.slice(t,t+i):e.subarray(t,t+i)}function N_(e=dve){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function Uk(e,t,i,r,s,n,o=N_()){return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function gFe(e,t=N_()){return lve(e,0,e.length/3,t)}function lve(e,t,i,r=N_()){return vY(r,aO),uve(r,e,t,i),r}function vFe(e,t=ave(24)){const[i,r,s,n,o,l]=e;return t[0]=i,t[1]=r,t[2]=s,t[3]=i,t[4]=r,t[5]=l,t[6]=i,t[7]=o,t[8]=s,t[9]=i,t[10]=o,t[11]=l,t[12]=n,t[13]=r,t[14]=s,t[15]=n,t[16]=r,t[17]=l,t[18]=n,t[19]=o,t[20]=s,t[21]=n,t[22]=o,t[23]=l,t}function bFe(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new Jt(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function _Fe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function wFe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function SFe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function uve(e,t,i=0,r=t.length/3){let s=e[0],n=e[1],o=e[2],l=e[3],d=e[4],h=e[5];for(let y=0;y<r;y++)s=Math.min(s,t[i+3*y]),n=Math.min(n,t[i+3*y+1]),o=Math.min(o,t[i+3*y+2]),l=Math.max(l,t[i+3*y]),d=Math.max(d,t[i+3*y+1]),h=Math.max(h,t[i+3*y+2]);e[0]=s,e[1]=n,e[2]=o,e[3]=l,e[4]=d,e[5]=h}function EFe(e,t,i){const r=t.length;let s=e[0],n=e[1],o=e[2],l=e[3],d=e[4],h=e[5];if(i)for(let y=0;y<r;y++){const v=t[y];s=Math.min(s,v[0]),n=Math.min(n,v[1]),o=Math.min(o,v[2]),l=Math.max(l,v[0]),d=Math.max(d,v[1]),h=Math.max(h,v[2])}else for(let y=0;y<r;y++){const v=t[y];s=Math.min(s,v[0]),n=Math.min(n,v[1]),l=Math.max(l,v[0]),d=Math.max(d,v[1])}e[0]=s,e[1]=n,e[2]=o,e[3]=l,e[4]=d,e[5]=h}function TFe(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function F_(e){return e[0]>=e[3]?0:e[3]-e[0]}function V_(e){return e[1]>=e[4]?0:e[4]-e[1]}function z_(e){return e[2]>=e[5]?0:e[5]-e[2]}function $Fe(e){const t=F_(e),i=z_(e),r=V_(e);return Math.sqrt(t*t+i*i+r*r)}function xFe(e,t=[0,0,0]){return t[0]=e[0]+F_(e)/2,t[1]=e[1]+V_(e)/2,t[2]=e[2]+z_(e)/2,t}function MFe(e,t=[0,0,0]){return t[0]=F_(e),t[1]=V_(e),t[2]=z_(e),t}function AFe(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function cve(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function IFe(e,t){return t==null||cve(e,t)}function CFe(e,t,i,r,s=e){return s[0]=e[0]+t,s[1]=e[1]+i,s[2]=e[2]+r,s[3]=e[3]+t,s[4]=e[4]+i,s[5]=e[5]+r,s}function OFe(e,t,i=e){const r=e[0]+F_(e)/2,s=e[1]+V_(e)/2,n=e[2]+z_(e)/2;return i[0]=r+(e[0]-r)*t,i[1]=s+(e[1]-s)*t,i[2]=n+(e[2]-n)*t,i[3]=r+(e[3]-r)*t,i[4]=s+(e[4]-s)*t,i[5]=n+(e[5]-n)*t,i}function LFe(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function RFe(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function PFe(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function vY(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function kFe(e){return e?vY(e,aO):N_(aO)}function DFe(e,t){return t||(t=gs()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function NFe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function FFe(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=s,e[5]=Number.POSITIVE_INFINITY,e}function BV(e){return e.length===6}function VFe(e){return F_(e)===0&&V_(e)===0&&z_(e)===0}function zFe(e,t,i){if(e==null||t==null)return e===t;if(!BV(e)||!BV(t))return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const aO=[1/0,1/0,1/0,-1/0,-1/0,-1/0],dve=[0,0,0,0,0,0];N_();function jFe(e,{isPrimitive:t,width:i,depth:r,height:s}){const n=t?10:1;if(i==null&&s==null&&r==null)return[n*e[0],n*e[1],n*e[2]];const o=Ky(i,r,s);let l;for(let d=0;d<3;d++){const h=o[d];if(h!=null){l=h/e[d];break}}for(let d=0;d<3;d++)o[d]==null&&(o[d]=e[d]*l);return o}const hve=Uk(-.5,-.5,-.5,.5,.5,.5),pve=Uk(-.5,-.5,0,.5,.5,1),fve=Uk(-.5,-.5,0,.5,.5,.5);function UFe(e){switch(e){case"sphere":case"cube":case"diamond":return hve;case"cylinder":case"cone":case"inverted-cone":return pve;case"tetrahedron":return fve;default:return}}const Gk=["butt","square","round"],mve=[...Gk,"none"],bY=["miter","bevel","round"];var lO;let nh=lO=class extends se{constructor(e){super(e),this.color=new ye([0,0,0,1]),this.size=Bs(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new lO(e)}};c([p(hd({colorRequiredOnWrite:!0}))],nh.prototype,"color",void 0),c([p({...za,json:{write:{isRequired:!0}}})],nh.prototype,"size",void 0),c([p(gY)],nh.prototype,"pattern",void 0),c([p({type:Gk,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],nh.prototype,"patternCap",void 0),nh=lO=c([I("esri.symbols.support.Symbol3DOutline")],nh);var h2;let Tl=h2=class extends Ga{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new h2(e)}static fromSimpleFillSymbol(e){var r,s,n;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new jk({style:e.outline.style}):null,i={size:((r=e.outline)==null?void 0:r.width)??0,color:(((s=e.outline)==null?void 0:s.color)??gb).clone(),pattern:t};return t&&((n=e.outline)!=null&&n.cap)&&(i.patternCap=e.outline.cap),new h2({material:new vb({color:(e.color??nve).clone()}),pattern:e.style&&e.style!=="solid"?new yY({style:e.style}):null,outline:i})}};c([Pe({Fill:"fill"},{readOnly:!0})],Tl.prototype,"type",void 0),c([p({type:vb,json:{write:!0}})],Tl.prototype,"material",void 0),c([p(sve)],Tl.prototype,"pattern",void 0),c([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Tl.prototype,"castShadows",void 0),c([p({type:nh,json:{write:!0}})],Tl.prototype,"outline",void 0),c([p(hY)],Tl.prototype,"edges",void 0),Tl=h2=c([I("esri.symbols.FillSymbol3DLayer")],Tl);const Dp=Tl;var uO;const yve=xr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let oh=uO=class extends se{constructor(e){super(e)}readHref(e,t,i){return e?Wc(e,i):t.dataURI}writeHref(e,t,i,r){e&&(Op(e)?t.dataURI=e:(t.href=$_(e,r),yn(t.href)&&(t.href=Bo(t.href))))}clone(){return new uO({href:this.href,primitive:this.primitive})}};c([p({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],oh.prototype,"href",void 0),c([pe("href")],oh.prototype,"readHref",null),c([be("href",{href:{type:String},dataURI:{type:String}})],oh.prototype,"writeHref",null),c([Pe(yve)],oh.prototype,"primitive",void 0),oh=uO=c([I("esri.symbols.support.IconSymbol3DLayerResource")],oh);const gve="circle";var cO;let Gm=cO=class extends Me{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new cO({x:this.x,y:this.y})}};c([p({type:Number})],Gm.prototype,"x",void 0),c([p({type:Number})],Gm.prototype,"y",void 0),Gm=cO=c([I("esri.symbols.support.Symbol3DAnchorPosition2D")],Gm);var dO;let fv=dO=class extends se{constructor(e){super(e),this.color=new ye([0,0,0,1]),this.size=Bs(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new dO(e)}};c([p(hd({colorRequiredOnWrite:!0}))],fv.prototype,"color",void 0),c([p({...za,json:{write:{isRequired:!0}}})],fv.prototype,"size",void 0),fv=dO=c([I("esri.symbols.support.Symbol3DIconOutline")],fv);var sm;const _Y="esri.symbols.IconSymbol3DLayer";let $o=sm=class extends Ga{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new sm({anchor:this.anchor,anchorPosition:q(this.anchorPosition),enabled:this.enabled,material:q(this.material),outline:q(this.outline),resource:q(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||gb,i=HV(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||gb).clone()}:null;return new sm({size:e.size,angle:e.angle,resource:{primitive:bve(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||ove(e.color)?gb:e.color,i=HV(e);return new sm({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new sm({resource:{href:kq({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};c([p({type:Fs,json:{write:!0}})],$o.prototype,"material",void 0),c([p({type:oh,json:{write:!0}})],$o.prototype,"resource",void 0),c([Pe({Icon:"icon"},{readOnly:!0})],$o.prototype,"type",void 0),c([p({...za,json:{write:{isRequired:!0}}})],$o.prototype,"size",void 0),c([Pe({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],$o.prototype,"anchor",void 0),c([p({type:Gm,json:{type:[Number],read:{reader:e=>new Gm({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],$o.prototype,"anchorPosition",void 0),c([p({type:fv,json:{write:!0}})],$o.prototype,"outline",void 0),c([p({type:Number,json:{write:!0,default:0}})],$o.prototype,"angle",void 0),$o=sm=c([I(_Y)],$o);const tp=$o;function HV(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=WV(e.xoffset),s=WV(e.yoffset);return(r||s)&&t&&i?{x:-r/t,y:s/i}:null}function WV(e){return isFinite(e)?e:0}const vve={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function bve(e){return vve[e]||(ae.getLogger(_Y).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const _ve=["begin","end","begin-end"],wY=["arrow","circle","square","diamond","cross","x"];let ah=class extends ut.ClonableMixin(se){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};c([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],ah.prototype,"type",void 0),c([p({type:_ve,json:{default:"begin-end",write:!0}})],ah.prototype,"placement",void 0),c([p({type:wY,json:{default:"arrow",write:!0}})],ah.prototype,"style",void 0),c([p({type:ye,json:{type:[vt],default:null,write:!0}})],ah.prototype,"color",void 0),ah=c([I("esri.symbols.LineStyleMarker3D")],ah);const hO=ah;var p2;let ha=p2=class extends Ga{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Bs(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new p2(e)}static fromSimpleLineSymbol(e){var i;const t={enabled:!0,size:e.width??Bs(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new jk({style:e.style}):null,material:new Fs({color:(e.color||gb).clone()}),marker:e.marker?new hO({placement:e.marker.placement,style:e.marker.style,color:((i=e.marker.color)==null?void 0:i.clone())??null}):null};return new p2(t)}};c([p({type:Fs,json:{write:!0}})],ha.prototype,"material",void 0),c([Pe({Line:"line"},{readOnly:!0})],ha.prototype,"type",void 0),c([p({type:bY,json:{write:!0,default:"miter"}})],ha.prototype,"join",void 0),c([p({type:Gk,json:{write:!0,default:"butt"}})],ha.prototype,"cap",void 0),c([p({...za,json:{write:{isRequired:!0}}})],ha.prototype,"size",void 0),c([p(gY)],ha.prototype,"pattern",void 0),c([p({types:{key:"type",base:hO,typeMap:{style:hO}},json:{write:!0}})],ha.prototype,"marker",void 0),ha=p2=c([I("esri.symbols.LineSymbol3DLayer")],ha);const tg=ha;var pO;const wve=xr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let mv=pO=class extends se{clone(){return new pO({href:this.href,primitive:this.primitive})}};c([p({type:String,json:{read:LP,write:yp}})],mv.prototype,"href",void 0),c([Pe(wve)],mv.prototype,"primitive",void 0),mv=pO=c([I("esri.symbols.support.ObjectSymbol3DLayerResource")],mv);const Sve="sphere";var fO;let Hh=fO=class extends Me{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new fO({x:this.x,y:this.y,z:this.z})}};c([p({type:Number})],Hh.prototype,"x",void 0),c([p({type:Number})],Hh.prototype,"y",void 0),c([p({type:Number})],Hh.prototype,"z",void 0),Hh=fO=c([I("esri.symbols.support.Symbol3DAnchorPosition3D")],Hh);var mO;let Gr=mO=class extends Ga{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,i;return new mO({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};c([p({type:Fs,json:{write:!0}})],Gr.prototype,"material",void 0),c([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Gr.prototype,"castShadows",void 0),c([p({type:mv,json:{write:!0}})],Gr.prototype,"resource",void 0),c([Pe({Object:"object"},{readOnly:!0})],Gr.prototype,"type",void 0),c([p({type:Number,json:{write:!0}})],Gr.prototype,"width",void 0),c([p({type:Number,json:{write:!0}})],Gr.prototype,"height",void 0),c([p({type:Number,json:{write:!0}})],Gr.prototype,"depth",void 0),c([Pe({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Gr.prototype,"anchor",void 0),c([p({type:Hh,json:{type:[Number],read:{reader:e=>new Hh({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Gr.prototype,"anchorPosition",void 0),c([p({type:Number,json:{write:!0}})],Gr.prototype,"heading",void 0),c([p({type:Number,json:{write:!0}})],Gr.prototype,"tilt",void 0),c([p({type:Number,json:{write:!0}})],Gr.prototype,"roll",void 0),c([p({readOnly:!0})],Gr.prototype,"isPrimitive",null),Gr=mO=c([I("esri.symbols.ObjectSymbol3DLayer")],Gr);const qk=Gr;var yO;let us=yO=class extends Ga{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new yO({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};c([p({type:Fs,json:{write:!0}})],us.prototype,"material",void 0),c([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],us.prototype,"castShadows",void 0),c([Pe({Path:"path"},{readOnly:!0})],us.prototype,"type",void 0),c([p({type:["circle","quad"],json:{write:!0,default:"circle"}})],us.prototype,"profile",void 0),c([p({type:bY,json:{write:!0,default:"miter"}})],us.prototype,"join",void 0),c([p({type:mve,json:{write:!0,default:"butt"}})],us.prototype,"cap",void 0),c([p({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],us.prototype,"width",void 0),c([pe("width",["width","size","height"])],us.prototype,"readWidth",null),c([p({type:Number,json:{write:!0}})],us.prototype,"height",void 0),c([pe("height",["height","size","width"])],us.prototype,"readHeight",null),c([p({type:["center","bottom","top"],json:{write:!0,default:"center"}})],us.prototype,"anchor",void 0),c([p({type:["heading","all"],json:{write:!0,default:"all"}})],us.prototype,"profileRotation",void 0),us=yO=c([I("esri.symbols.PathSymbol3DLayer")],us);const Bk=us,Eve=["none","underline","line-through"],Tve=["normal","italic","oblique"],$ve=["normal","lighter","bold","bolder"],SY={type:Number,cast:e=>{const t=ms(e);return t===0?1:_n(t,.1,4)},nonNullable:!0},xve=["left","right","center"],Mve=["baseline","top","middle","bottom"],EY={type:xve,nonNullable:!0},TY={type:Mve,nonNullable:!0},qFe=8;var gO;let $l=gO=class extends se{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return ft(e)}clone(){return new gO({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};c([p({type:Eve,json:{default:"none",write:!0}})],$l.prototype,"decoration",void 0),c([p({type:String,json:{write:!0}})],$l.prototype,"family",void 0),c([p({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],$l.prototype,"size",void 0),c([mt("size")],$l.prototype,"castSize",null),c([p({type:Tve,json:{default:"normal",write:!0}})],$l.prototype,"style",void 0),c([p({type:$ve,json:{default:"normal",write:!0}})],$l.prototype,"weight",void 0),$l=gO=c([I("esri.symbols.Font")],$l);const h$=$l;var vO;let qm=vO=class extends se{constructor(){super(...arguments),this.color=new ye([0,0,0,1]),this.size=0}clone(){const e={color:q(this.color),size:this.size};return new vO(e)}};c([p(hd())],qm.prototype,"color",void 0),c([p(za)],qm.prototype,"size",void 0),qm=vO=c([I("esri.symbols.support.Symbol3DHalo")],qm);let bb=class extends ut.ClonableMixin(se){constructor(t){super(t),this.color=null}};c([p(hd())],bb.prototype,"color",void 0),bb=c([I("esri.symbols.support.Symbol3DTextBackground")],bb);var f2;let Ms=f2=class extends Ga{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const s={...r,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new f2({enabled:this.enabled,font:this.font&&q(this.font),halo:this.halo&&q(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:q(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new f2({font:e.font!=null?e.font.clone():new h$,halo:Ave(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Fs({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new bb({color:e.backgroundColor.clone()}):null})}};function Ave(e,t){return e&&t!=null&&t>0?new qm({color:q(e),size:t}):null}c([p({type:h$,json:{write:!0}})],Ms.prototype,"font",null),c([be("font")],Ms.prototype,"writeFont",null),c([p({type:qm,json:{write:!0}})],Ms.prototype,"halo",void 0),c([p({...EY,json:{default:"center",write:!0}})],Ms.prototype,"horizontalAlignment",void 0),c([p({...SY,json:{default:1,write:!0}})],Ms.prototype,"lineHeight",void 0),c([p({type:Fs,json:{write:!0}})],Ms.prototype,"material",void 0),c([p({type:bb,json:{write:!0}})],Ms.prototype,"background",void 0),c([p(za)],Ms.prototype,"size",null),c([p({type:String,json:{write:!0}})],Ms.prototype,"text",void 0),c([Pe({Text:"text"},{readOnly:!0})],Ms.prototype,"type",void 0),c([p({...TY,json:{default:"baseline",write:!0}})],Ms.prototype,"verticalAlignment",void 0),Ms=f2=c([I("esri.symbols.TextSymbol3DLayer")],Ms);const ig=Ms;var bO;let sc=bO=class extends Ga{constructor(e){super(e),this.color=_O.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new bO({color:q(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};c([p({type:ye,nonNullable:!0,json:{type:[vt],write:(e,t,i)=>t[i]=e.toArray(ye.AlphaMode.UNLESS_OPAQUE),default:()=>_O.clone(),defaultEquals:e=>e.toCss(!0)===_O.toCss(!0)}})],sc.prototype,"color",void 0),c([Pe({Water:"water"},{readOnly:!0})],sc.prototype,"type",void 0),c([p({type:["small","medium","large"],json:{write:!0,default:"medium"}})],sc.prototype,"waterbodySize",void 0),c([p({type:Number,json:{write:!0,default:null}})],sc.prototype,"waveDirection",void 0),c([p({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],sc.prototype,"waveStrength",void 0),sc=bO=c([I("esri.symbols.WaterSymbol3DLayer")],sc);const $Y=sc,_O=new ye([0,119,190]);var wO;let lh=wO=class extends Me{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new wO({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};c([p({type:String})],lh.prototype,"name",void 0),c([p({type:String})],lh.prototype,"styleUrl",void 0),c([p({type:String})],lh.prototype,"styleName",void 0),c([p({type:ts})],lh.prototype,"portal",void 0),lh=wO=c([I("esri.symbols.support.StyleOrigin")],lh);const Xb=lh;var SO;let dp=SO=class extends Me{constructor(){super(...arguments),this.url=""}clone(){return new SO({url:this.url})}};c([p({type:String})],dp.prototype,"url",void 0),dp=SO=c([I("esri.symbols.support.Thumbnail")],dp);const xY={icon:tp,object:qk,line:tg,path:Bk,fill:Dp,extrude:pY,text:ig,water:$Y},Ive=_e.ofType({base:Ga,key:"type",typeMap:xY,errorContext:"symbol-layer"});let pa=class extends Dr{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,s=r||_e;this._set("symbolLayers",new s)}get color(){return null}set color(t){this.constructed&&ae.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){tu(t,this._get("symbolLayers"))}readStyleOrigin(t,i,r){if(t.styleUrl&&t.name){const s=Wc(t.styleUrl,r);return new Xb({styleUrl:s,name:t.name})}if(t.styleName&&t.name)return new Xb({portal:(r==null?void 0:r.portal)||ts.getDefault(),styleName:t.styleName,name:t.name});r!=null&&r.messages&&r.messages.push(new Qn("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:t}))}writeStyleOrigin(t,i,r,s){if(t.styleUrl&&t.name){let n=$_(t.styleUrl,s);yn(n)&&(n=Bo(n)),i.styleOrigin={styleUrl:n,name:t.name}}else t.styleName&&t.name&&(t.portal&&(s!=null&&s.portal)&&!Pq(t.portal.restUrl,s.portal.restUrl)?s!=null&&s.messages&&s.messages.push(new Qn("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Ga||t&&xY[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};c([p({json:{read:!1,write:!1}})],pa.prototype,"color",null),c([p({type:Ive,nonNullable:!0,json:{write:!0}}),mt(Qq)],pa.prototype,"symbolLayers",null),c([p({type:Xb})],pa.prototype,"styleOrigin",void 0),c([pe("styleOrigin")],pa.prototype,"readStyleOrigin",null),c([be("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],pa.prototype,"writeStyleOrigin",null),c([p({type:dp,json:{read:!1}})],pa.prototype,"thumbnail",void 0),c([p({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],pa.prototype,"type",void 0),pa=c([I("esri.symbols.Symbol3D")],pa);const j_=pa;let yv=class extends se{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};c([p({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],yv.prototype,"type",void 0),c([p({readOnly:!0})],yv.prototype,"visible",void 0),yv=c([I("esri.symbols.callouts.Callout3D")],yv);const MY=yv;var EO;let m2=EO=class extends se{constructor(e){super(e),this.color=new ye("white")}clone(){return new EO({color:q(this.color)})}};c([p(hd({colorRequiredOnWrite:!0}))],m2.prototype,"color",void 0),m2=EO=c([I("esri.symbols.callouts.LineCallout3DBorder")],m2);const Cve=m2;var TO;let nc=TO=class extends MY{constructor(e){super(e),this.type="line",this.color=new ye([0,0,0,1]),this.size=Bs(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new TO({color:q(this.color),size:this.size,border:q(this.border)})}};c([Pe({line:"line"})],nc.prototype,"type",void 0),c([p(hd({colorRequiredOnWrite:!0}))],nc.prototype,"color",void 0),c([p({...za,json:{write:{isRequired:!0}}})],nc.prototype,"size",void 0),c([p({type:Cve,json:{write:!0}})],nc.prototype,"border",void 0),c([p({readOnly:!0})],nc.prototype,"visible",null),nc=TO=c([I("esri.symbols.callouts.LineCallout3D")],nc);const AY=nc;function Hk(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function IY(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!(t!=null&&t.visible)&&!!Hk(e)}function ZFe(e){return e.type==="point-3d"||e.type==="label-3d"}function YFe(e){return e.horizontalAlignment==="center"}const CY={types:{key:"type",base:MY,typeMap:{line:AY}},json:{write:!0}};var $O;let nm=$O=class extends se{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new $O({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};c([p({...za,json:{write:{isRequired:!0}}})],nm.prototype,"screenLength",void 0),c([p({type:Number,nonNullable:!0,json:{write:!0,default:0}})],nm.prototype,"minWorldLength",void 0),c([p({type:Number,json:{write:!0}})],nm.prototype,"maxWorldLength",void 0),nm=$O=c([I("esri.symbols.support.Symbol3DVerticalOffset")],nm);const Wk=nm;var y2;const OY=_e.ofType({base:null,key:"type",typeMap:{text:ig}});let oc=y2=class extends j_{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new OY,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return IY(this)}hasVisibleVerticalOffset(){return Hk(this)}clone(){return new y2({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail),callout:q(this.callout),verticalOffset:q(this.verticalOffset)})}static fromTextSymbol(e){return new y2({symbolLayers:new _e([ig.fromTextSymbol(e)])})}};c([p({type:Wk,json:{write:!0}})],oc.prototype,"verticalOffset",void 0),c([p(CY)],oc.prototype,"callout",void 0),c([p({json:{read:!1,write:!1}})],oc.prototype,"styleOrigin",void 0),c([p({type:OY})],oc.prototype,"symbolLayers",void 0),c([Pe({LabelSymbol3D:"label-3d"},{readOnly:!0})],oc.prototype,"type",void 0),oc=y2=c([I("esri.symbols.LabelSymbol3D")],oc);const p$=oc;var g2;const LY=_e.ofType({base:null,key:"type",typeMap:{line:tg,path:Bk}}),Ove=_e.ofType({base:null,key:"type",typeMap:{line:tg,path:Bk}});let gv=g2=class extends j_{constructor(e){super(e),this.symbolLayers=new LY,this.type="line-3d"}clone(){return new g2({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleLineSymbol(e){return new g2({symbolLayers:new _e([tg.fromSimpleLineSymbol(e)])})}};c([p({type:LY,json:{type:Ove}})],gv.prototype,"symbolLayers",void 0),c([Pe({LineSymbol3D:"line-3d"},{readOnly:!0})],gv.prototype,"type",void 0),gv=g2=c([I("esri.symbols.LineSymbol3D")],gv);const Np=gv;var v2;const RY=_e.ofType({base:null,key:"type",typeMap:{fill:Dp}});let vv=v2=class extends j_{constructor(e){super(e),this.symbolLayers=new RY,this.type="mesh-3d"}clone(){return new v2({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleFillSymbol(e){return new v2({symbolLayers:new _e([Dp.fromSimpleFillSymbol(e)])})}};c([p({type:RY})],vv.prototype,"symbolLayers",void 0),c([Pe({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],vv.prototype,"type",void 0),vv=v2=c([I("esri.symbols.MeshSymbol3D")],vv);const U_=vv;let bv=class extends Dr{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};c([Pe({esriSLS:"simple-line"},{readOnly:!0})],bv.prototype,"type",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],bv.prototype,"width",void 0),bv=c([I("esri.symbols.LineSymbol")],bv);const Lve=bv;var xO;let fa=xO=class extends se{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new xO({color:q(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};c([p({type:["begin","end","begin-end"],json:{write:!0}})],fa.prototype,"placement",void 0),c([Pe({"line-marker":"line-marker"},{readOnly:!0}),p({json:{origins:{"web-map":{write:!1}}}})],fa.prototype,"type",void 0),c([p({type:wY})],fa.prototype,"style",void 0),c([be("style")],fa.prototype,"writeStyle",null),c([p({type:ye,value:null,json:{write:{allowNull:!0}}})],fa.prototype,"color",null),c([pe("color")],fa.prototype,"readColor",null),c([be("color")],fa.prototype,"writeColor",null),fa=xO=c([I("esri.symbols.LineSymbolMarker")],fa);const Rve=fa;var MO;const J3=new ot({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let xl=MO=class extends Lve{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,s,n){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),i!=null&&(o.width=ft(i)),r!=null&&(o.cap=r),s!=null&&(o.join=s),n!=null&&(o.miterLimit=ft(n)),o}clone(){var e;return new MO({color:q(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};c([Pe({esriSLS:"simple-line"},{readOnly:!0})],xl.prototype,"type",void 0),c([p({type:J3.apiValues,json:{read:J3.read,write:J3.write}})],xl.prototype,"style",void 0),c([p({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null?void 0:i.origin)==null})}}})],xl.prototype,"cap",void 0),c([p({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null?void 0:i.origin)==null})}}})],xl.prototype,"join",void 0),c([p({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Rve}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],xl.prototype,"marker",void 0),c([p({type:Number,json:{read:!1,write:!1}})],xl.prototype,"miterLimit",void 0),xl=MO=c([I("esri.symbols.SimpleLineSymbol")],xl);const ws=xl;let _v=class extends Dr{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};c([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ws}},json:{default:null,write:!0}})],_v.prototype,"outline",void 0),c([p({type:["simple-fill","picture-fill"],readOnly:!0})],_v.prototype,"type",void 0),_v=c([I("esri.symbols.FillSymbol")],_v);const PY=_v;function Pve(e,t,i){return t.imageData?kq({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):kY(t.url,i)}function kY(e,t){if(!yn(e)){const i=Dve(t);if(i)return Sy(i,"images",e)}return Wc(e,t)}function kve(e,t,i,r){if(Op(e)){const s=Ey(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,i&&i.imageData===t.imageData&&i.url&&yp(i.url,t,"url",r)}else yp(e,t,"url",r)}const DY={json:{read:{source:["imageData","url"],reader:Pve},write:{writer(e,t,i,r){kve(e,t,this.source,r)}}}},NY={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=kY(t.url,i)),r}}}};function Dve(e){var s,n;if(!e)return null;const{origin:t,layer:i}=e;if(t!=="service"&&t!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(s=i.parsedUrl)==null?void 0:s.path:r==="map-image"||r==="tile"?(n=e.url)==null?void 0:n.path:null}var AO;let Dn=AO=class extends PY{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),i!=null&&(s.width=ft(i)),r!=null&&(s.height=ft(r)),s}clone(){const e=new AO({color:q(this.color),height:this.height,outline:q(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",q(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};c([Pe({esriPFS:"picture-fill"},{readOnly:!0})],Dn.prototype,"type",void 0),c([p(DY)],Dn.prototype,"url",void 0),c([p({type:Number,json:{write:!0}})],Dn.prototype,"xscale",void 0),c([p({type:Number,json:{write:!0}})],Dn.prototype,"yscale",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],Dn.prototype,"width",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],Dn.prototype,"height",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],Dn.prototype,"xoffset",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],Dn.prototype,"yoffset",void 0),c([p(NY)],Dn.prototype,"source",void 0),Dn=AO=c([I("esri.symbols.PictureFillSymbol")],Dn);const Zk=Dn;let ac=class extends Dr{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};c([p({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],ac.prototype,"angle",void 0),c([p({type:["simple-marker","picture-marker"],readOnly:!0})],ac.prototype,"type",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],ac.prototype,"xoffset",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],ac.prototype,"yoffset",void 0),c([p({cast:e=>e==="auto"?e:ms(ft(e)),json:{write:!0}})],ac.prototype,"size",void 0),ac=c([I("esri.symbols.MarkerSymbol")],ac);const FY=ac;var IO;let xo=IO=class extends FY{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=ft(t)),i!=null&&(r.height=ft(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new IO({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",q(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};c([p({json:{write:!1}})],xo.prototype,"color",void 0),c([Pe({esriPMS:"picture-marker"},{readOnly:!0})],xo.prototype,"type",void 0),c([p(DY)],xo.prototype,"url",void 0),c([p(NY)],xo.prototype,"source",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],xo.prototype,"height",void 0),c([pe("height",["height","size"])],xo.prototype,"readHeight",null),c([p({type:Number,cast:ft,json:{write:!0}})],xo.prototype,"width",void 0),c([p({json:{write:!1}})],xo.prototype,"size",void 0),xo=IO=c([I("esri.symbols.PictureMarkerSymbol")],xo);const G_=xo;var uh;const VY=_e.ofType({base:null,key:"type",typeMap:{icon:tp,object:qk,text:ig}});let ch=uh=class extends j_{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new VY,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return IY(this)}hasVisibleVerticalOffset(){return Hk(this)}clone(){return new uh({verticalOffset:q(this.verticalOffset),callout:q(this.callout),styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new uh({symbolLayers:new _e([tp.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new uh({symbolLayers:new _e([tp.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var r,s;if(((s=(r=e.data)==null?void 0:r.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const i=e.data.symbol;return new uh(i!=null&&i.callout?{symbolLayers:new _e([tp.fromCIMSymbol(e)]),callout:new AY({size:.5,color:new ye([0,0,0])}),verticalOffset:new Wk({screenLength:40})}:{symbolLayers:new _e([tp.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new uh({symbolLayers:new _e([ig.fromTextSymbol(e)])})}};c([p({type:Wk,json:{write:!0}})],ch.prototype,"verticalOffset",void 0),c([p(CY)],ch.prototype,"callout",void 0),c([p({type:VY,json:{origins:{"web-scene":{write:!0}}}})],ch.prototype,"symbolLayers",void 0),c([Pe({PointSymbol3D:"point-3d"},{readOnly:!0})],ch.prototype,"type",void 0),ch=uh=c([I("esri.symbols.PointSymbol3D")],ch);const Yl=ch;var wv;const zY=_e.ofType({base:null,key:"type",typeMap:{extrude:pY,fill:Dp,icon:tp,line:tg,object:qk,text:ig,water:$Y}});let Sv=wv=class extends j_{constructor(e){super(e),this.symbolLayers=new zY,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&Lb(ae.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&Lb(ae.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(zs(()=>this.symbolLayers,"after-add",({item:t})=>e(t),Na))}clone(){return new wv({styleOrigin:q(this.styleOrigin),symbolLayers:q(this.symbolLayers),thumbnail:q(this.thumbnail)})}static fromJSON(e){var i;const t=new wv;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const r=t.symbolLayers.at(0),s=t.symbolLayers.at(1);!s.enabled||(i=e.symbolLayers)!=null&&i[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:s.size,color:s.material!=null?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new wv({symbolLayers:new _e([Dp.fromSimpleFillSymbol(e)])})}};c([p({type:zY,json:{write:!0}})],Sv.prototype,"symbolLayers",void 0),c([Pe({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Sv.prototype,"type",void 0),Sv=wv=c([I("esri.symbols.PolygonSymbol3D")],Sv);const pd=Sv;var CO;const X3=new ot({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let dh=CO=class extends PY{constructor(...e){super(...e),this.color=new ye([0,0,0,.25]),this.outline=new ws,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new CO({color:q(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};c([p()],dh.prototype,"color",void 0),c([p()],dh.prototype,"outline",void 0),c([Pe({esriSFS:"simple-fill"},{readOnly:!0})],dh.prototype,"type",void 0),c([p({type:X3.apiValues,json:{read:X3.read,write:X3.write}})],dh.prototype,"style",void 0),dh=CO=c([I("esri.symbols.SimpleFillSymbol")],dh);const qa=dh;var OO;const Q3=new ot({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let ma=OO=class extends FY{constructor(...e){super(...e),this.color=new ye([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new ws}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=ft(t)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new OO({angle:this.angle,color:q(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};c([p()],ma.prototype,"color",void 0),c([be("color")],ma.prototype,"writeColor",null),c([Pe({esriSMS:"simple-marker"},{readOnly:!0})],ma.prototype,"type",void 0),c([p()],ma.prototype,"size",void 0),c([p({type:Q3.apiValues,json:{read:Q3.read,write:Q3.write}})],ma.prototype,"style",void 0),c([p({type:String,json:{write:!0}})],ma.prototype,"path",null),c([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ws}},json:{default:null,write:!0}})],ma.prototype,"outline",void 0),ma=OO=c([I("esri.symbols.SimpleMarkerSymbol")],ma);const es=ma;var LO;let ri=LO=class extends Dr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new h$,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return ft(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new LO({angle:this.angle,backgroundColor:q(this.backgroundColor),borderLineColor:q(this.borderLineColor),borderLineSize:this.borderLineSize,color:q(this.color),font:this.font&&this.font.clone(),haloColor:q(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,i;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};c([p({type:ye,json:{write:!0}})],ri.prototype,"backgroundColor",void 0),c([p({type:ye,json:{write:!0}})],ri.prototype,"borderLineColor",void 0),c([p({type:Number,json:{write:!0},cast:ft})],ri.prototype,"borderLineSize",void 0),c([p({type:h$,json:{write:!0}})],ri.prototype,"font",void 0),c([p({...EY,json:{write:!0}})],ri.prototype,"horizontalAlignment",void 0),c([p({type:Boolean,json:{write:!0}})],ri.prototype,"kerning",void 0),c([p({type:ye,json:{write:!0}})],ri.prototype,"haloColor",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],ri.prototype,"haloSize",void 0),c([p({type:Boolean,json:{write:!0}})],ri.prototype,"rightToLeft",void 0),c([p({type:Boolean,json:{write:!0}})],ri.prototype,"rotated",void 0),c([p({type:String,json:{write:!0}})],ri.prototype,"text",void 0),c([Pe({esriTS:"text"},{readOnly:!0})],ri.prototype,"type",void 0),c([p({...TY,json:{write:!0}})],ri.prototype,"verticalAlignment",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],ri.prototype,"xoffset",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],ri.prototype,"yoffset",void 0),c([p({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],ri.prototype,"angle",void 0),c([p({type:Number,json:{write:!0}})],ri.prototype,"width",void 0),c([p({type:Number})],ri.prototype,"lineWidth",void 0),c([be("lineWidth")],ri.prototype,"writeLineWidth",null),c([mt("lineWidth")],ri.prototype,"castLineWidth",null),c([p(SY)],ri.prototype,"lineHeight",void 0),c([be("lineHeight")],ri.prototype,"writeLineHeight",null),ri=LO=c([I("esri.symbols.TextSymbol")],ri);const rg=ri;var RO;let Mo=RO=class extends Dr{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:ts.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new RO({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){const t=e&&"acceptedFormats"in e?e.acceptedFormats:["web"];return this._fetchSymbol({...e,acceptedFormats:t})}async fetchCIMSymbol(e){const t=await this.fetchSymbol({...e,acceptedFormats:["cim"]});if((t==null?void 0:t.type)!=="cim")throw new B("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,i=t?this._fetchCacheKey:null;if(t!=null){const o=i&&t.get(i);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await D(()=>Promise.resolve().then(()=>NPe),void 0);yi(e);const s=r(this,{portal:this.portal},e);s.catch(o=>{ae.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const n=await s;return t!=null&&t.set(i,n.clone()),n}};c([p({json:{write:!1}})],Mo.prototype,"color",void 0),c([p({type:String,json:{write:!0}})],Mo.prototype,"styleName",void 0),c([p({type:ts,json:{write:!1}})],Mo.prototype,"portal",void 0),c([p({type:String,json:{read:LP,write:yp}})],Mo.prototype,"styleUrl",void 0),c([p({type:dp,json:{read:!1}})],Mo.prototype,"thumbnail",void 0),c([p({type:String,json:{write:!0}})],Mo.prototype,"name",void 0),c([Pe({styleSymbolReference:"web-style"},{readOnly:!0})],Mo.prototype,"type",void 0),c([p()],Mo.prototype,"_fetchCacheKey",null),Mo=RO=c([I("esri.symbols.WebStyleSymbol")],Mo);const Kc=Mo;function f$(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Ba(e){switch(e==null?void 0:e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Nc={base:Dr,key:"type",typeMap:{"simple-fill":qa,"picture-fill":Zk,"picture-marker":G_,"simple-line":ws,"simple-marker":es,text:rg,"label-3d":p$,"line-3d":Np,"mesh-3d":U_,"point-3d":Yl,"polygon-3d":pd,"web-style":Kc,cim:dd},errorContext:"symbol"},KFe={base:Dr,key:"type",typeMap:{"picture-marker":G_,"simple-marker":es,"point-3d":Yl,cim:dd},errorContext:"symbol"},e8e={base:Dr,key:"type",typeMap:{"simple-line":ws,"line-3d":Np,cim:dd},errorContext:"symbol"},t8e={base:Dr,key:"type",typeMap:{"simple-fill":qa,"picture-fill":Zk,"polygon-3d":pd,cim:dd},errorContext:"symbol"},Nve={base:Dr,key:"type",typeMap:{"picture-marker":G_,"simple-marker":es,text:rg,"web-style":Kc,cim:dd},errorContext:"symbol"},Fve=By({types:Nc}),jY={base:Dr,key:"type",typeMap:{"simple-fill":qa,"picture-fill":Zk,"picture-marker":G_,"simple-line":ws,"simple-marker":es,text:rg,"line-3d":Np,"mesh-3d":U_,"point-3d":Yl,"polygon-3d":pd,"web-style":Kc,cim:dd},errorContext:"symbol"},Vve={base:Dr,key:"type",typeMap:{text:rg,"label-3d":p$},errorContext:"symbol"},ZV={base:Dr,key:"type",typeMap:{"line-3d":Np,"mesh-3d":U_,"point-3d":Yl,"polygon-3d":pd,"web-style":Kc,cim:dd},errorContext:"symbol"},zve={base:Dr,key:"type",typeMap:{"label-3d":p$},errorContext:"symbol"},UY=Yo(Nc);var PO;function jve(e){if(!e)return null;const t={};for(const i in e){const r=$p(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function Uve(e){if(e==null)return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let As=PO=class extends ut.ClonableMixin(se){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:LS(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&Kse(ae.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new PO({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[t,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:Uve(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:se.isSerializable(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const i={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,t,i,r){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:i};e==="origin-transform"&&(s.action=r),e==="attributes"&&(s.attributeName=r),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([qs(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),qs(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};c([p({value:null,json:{read:jve}})],As.prototype,"aggregateGeometries",null),c([p({value:null})],As.prototype,"attributes",null),c([p({value:null,types:R_,json:{read:$p}})],As.prototype,"geometry",null),c([p({type:Boolean})],As.prototype,"isAggregate",void 0),c([p({clonable:"reference"})],As.prototype,"layer",void 0),c([p({clonable:"reference"})],As.prototype,"origin",void 0),c([p({type:eg})],As.prototype,"popupTemplate",void 0),c([p({clonable:"reference"})],As.prototype,"sourceLayer",void 0),c([p({value:null,types:Nc})],As.prototype,"symbol",null),c([p({clonable:!1,json:{read:!1,write:!1}})],As.prototype,"_version",void 0),c([p({type:Boolean,value:!0})],As.prototype,"visible",null),As=PO=c([I("esri.Graphic")],As);const ed=As;let _b=class extends mb{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};c([kP({Type:ed,ensureType:Zi(ed)})],_b.prototype,"itemType",void 0),_b=c([I("esri.support.GraphicsCollection")],_b);let lc=class extends Me{constructor(t){super(t),this.view=null,this.baseLayerViews=new _e,this.referenceLayerViews=new _e,this._loadingHandle=ve(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},yt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){var t;return((t=this.view)==null?void 0:t.suspended)??!0}get updating(){var i,r,s;if((i=this.view)!=null&&i.suspended)return!1;const t=(s=(r=this.view)==null?void 0:r.map)==null?void 0:s.basemap;return!!(t!=null&&t.loaded)&&(this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};c([p({constructOnly:!0})],lc.prototype,"view",void 0),c([p({readOnly:!0})],lc.prototype,"baseLayerViews",void 0),c([p({readOnly:!0})],lc.prototype,"referenceLayerViews",void 0),c([p({readOnly:!0})],lc.prototype,"suspended",null),c([p({type:Boolean,readOnly:!0})],lc.prototype,"updating",null),lc=c([I("esri.views.BasemapView")],lc);const Gve=lc;function qve(e){return"tryRecycleWith"in e}function Bve(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let Hve=class{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=bn(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Jn(this._controller.signal,()=>{const s=new B("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}tryRecycle(t){if(!this.done||!this.layerView||!qve(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let s=0;s<t.length;s++){const n=t[s];if(n.type!==i)continue;const o=this.layerView.tryRecycleWith(n,{signal:r});if(o){t.splice(s,1),this.layer=n;const l=this.layerView,d=l.view;return this.promise=Promise.race([o.then(()=>(yi(this._controller.signal),n.emit("layerview-destroy",{view:d,layerView:l}),d.emit("layerview-destroy",{view:d,layerView:l}),n.emit("layerview-create",{view:d,layerView:l}),d.emit("layerview-create",{view:d,layerView:l}),l)),new Promise((h,y)=>Jn(this._controller.signal,()=>y(Yt())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var s,n;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let o,l;if(await i.load({signal:t}),i.prefetchResources&&await i.prefetchResources({signal:t}),Zve(i))o=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new B("layer:view-not-supported","No layerview implementation was found");const y=await this.layerViewImporter.importLayerView(i);yi(t),o="default"in y?new y.default({layer:i,view:r}):new y({layer:i,view:r})}const d=()=>{l=ui(l),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};l=Jn(t,d),yi(t);try{await o.when()}catch(y){throw d(),y}if(!((n=(s=this._map)==null?void 0:s.allLayers)==null?void 0:n.includes(i)))return d(),void this._deferred.reject(new B("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=o,i.emit("layerview-create",{view:r,layerView:o}),r.emit("layerview-create",{layer:i,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){i.emit("layerview-create-error",{view:r,error:o}),r.emit("layerview-create-error",{layer:i,error:o}),this.done=!0,this._deferred.reject(new B("layerview:create-error","layerview creation failed",{layer:i,error:o}))}}},Nn=class extends Me{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new cp,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const s of i)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=bn(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(w_(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var d,h,y;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,s=[],n=this.view.ready,o=v=>{if(v!=null){for(const b of v)if(b){r.add(b);const w=this._layerLayerViewInfoMap.get(b);w&&n?w.start():w||this._recyclingInfoMap.has(b)||s.push(b),"layers"in b&&b.layers&&o(b.layers)}}};for(const v of this._rootCollectionNames)o(ys(this,v));for(const[v,b]of this._layerLayerViewInfoMap)if(!r.has(v)){this._layerLayerViewInfoMap.delete(b.layer);const w=b.tryRecycle(s);w?(this.notifyChange("updating"),this._recyclingInfoMap.set(b.layer,b),w.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(b.layer),this._layerLayerViewInfoMap.set(b.layer,b),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(b.layer),b.destroy(),this._reschedule()})):b.destroy()}for(const[v,b]of this._recyclingInfoMap)r.has(v)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(b.layer),b.destroy());for(const v of s)this._createLayerView(v);this._refreshCollections();const l=[(d=i==null?void 0:i.ground)==null?void 0:d.layers,(h=i==null?void 0:i.basemap)==null?void 0:h.baseLayers,(y=i==null?void 0:i.basemap)==null?void 0:y.referenceLayers,i==null?void 0:i.layers].filter(v=>!!v);r.forEach(v=>"layers"in v&&l.push(v.layers)),this.addHandles(l.map(v=>this._watchUpdatingTracking.addOnCollectionChange(()=>v,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([zs(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ve(()=>{const t=this.view,i=t==null?void 0:t.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,t==null?void 0:t.ready]},()=>this._reschedule(),ks)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),N3(this._recyclingInfoMap),N3(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Yt()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||loe(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++t;return t}clear(){this.destroyed||(N3(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new B("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,i){var n;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(t);if(!(r!=null&&r.done))return!0;const s=r.layerView;return!(!s||!i||s.parent===i)||!!(r.done&&s&&"layers"in t&&((n=t.layers)!=null&&n.length))&&t.layers.some(o=>this.isCreatingLayerViewsForLayer(o,s))}_refreshCollections(){for(const[t,i]of this._layersToLayerViews)this._populateLayerViewsOwners(ys(this,t),ys(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,i,r){if(!t||!i)return void(i&&i.removeAll());let s=0;for(const n of t){const o=this._layerLayerViewInfoMap.get(n);if(!(o!=null&&o.layerView))continue;const l=o.layerView;l.layer=n,l.parent=r,i.at(s)!==l&&i.splice(s,0,l),"layers"in n&&Bve(l)&&this._populateLayerViewsOwners(n.layers,l.layerViews,l),s+=1}s<i.length&&i.splice(s,i.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const i=new Hve(t,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(rs(r)||r.name==="cancelled:layerview-create")||ae.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([p()],Nn.prototype,"_workPromise",void 0),c([p({readOnly:!0})],Nn.prototype,"_watchUpdatingTracking",void 0),c([p({readOnly:!0})],Nn.prototype,"_layersToLayerViews",null),c([p({readOnly:!0})],Nn.prototype,"_rootCollectionNames",null),c([p()],Nn.prototype,"layerViewImporter",void 0),c([p()],Nn.prototype,"supportsGround",void 0),c([p({readOnly:!0})],Nn.prototype,"updating",null),c([p({readOnly:!0})],Nn.prototype,"updatingRemaining",null),c([p({constructOnly:!0})],Nn.prototype,"view",void 0),Nn=c([I("esri.views.LayerViewManager")],Nn);const Wve=Nn;function Zve(e){return e.createLayerView!==pk.prototype.createLayerView}let on=class extends Me{constructor(t){super(t),this.factor=1.5,this.offset=Er(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([p({type:Number})],on.prototype,"factor",void 0),c([p({nonNullable:!0})],on.prototype,"offset",void 0),c([p()],on.prototype,"position",void 0),c([p({type:Number,range:{min:0}})],on.prototype,"size",void 0),c([p()],on.prototype,"maskUrl",void 0),c([p()],on.prototype,"maskEnabled",void 0),c([p()],on.prototype,"overlayUrl",void 0),c([p()],on.prototype,"overlayEnabled",void 0),c([p({readOnly:!0})],on.prototype,"version",null),c([p({type:Boolean})],on.prototype,"visible",void 0),on=c([I("esri.views.Magnifier")],on);const GY=on;let dy=class{constructor(t){this._observable=new x_,this._map=new Map(t)}get size(){return Fe(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const i=this._map.delete(t);return i&&this._observable.notify(),i}entries(){return Fe(this._observable),this._map.entries()}forEach(t,i){Fe(this._observable),this._map.forEach((r,s)=>t.call(i,r,s,this),i)}get(t){return Fe(this._observable),this._map.get(t)}has(t){return Fe(this._observable),this._map.has(t)}keys(){return Fe(this._observable),this._map.keys()}set(t,i){return this._map.set(t,i),this._observable.notify(),this}values(){return Fe(this._observable),this._map.values()}[Symbol.iterator](){return Fe(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var kO;let ip=kO=class extends se{constructor(e){super(e),this.name=null,this.code=null}clone(){return new kO({name:this.name,code:this.code})}};c([p({type:String,json:{write:{isRequired:!0}}})],ip.prototype,"name",void 0),c([p({type:[String,Number],json:{write:{isRequired:!0}}})],ip.prototype,"code",void 0),ip=kO=c([I("esri.layers.support.CodedValue")],ip);const Yve=new ot({inherited:"inherited",codedValue:"coded-value",range:"range"});let Ev=class extends se{constructor(t){super(t),this.name=null,this.type=null}};c([p({type:String,json:{write:!0}})],Ev.prototype,"name",void 0),c([Pe(Yve),p({json:{write:{isRequired:!0}}})],Ev.prototype,"type",void 0),Ev=c([I("esri.layers.support.Domain")],Ev);const m$=Ev;var DO;let Tv=DO=class extends m${constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new DO({codedValues:q(this.codedValues),name:this.name})}};c([p({type:[ip],json:{write:{isRequired:!0}}})],Tv.prototype,"codedValues",void 0),c([Pe({codedValue:"coded-value"})],Tv.prototype,"type",void 0),Tv=DO=c([I("esri.layers.support.CodedValueDomain")],Tv);const y$=Tv;var NO;let b2=NO=class extends m${constructor(e){super(e),this.type="inherited"}clone(){return new NO}};c([Pe({inherited:"inherited"})],b2.prototype,"type",void 0),b2=NO=c([I("esri.layers.support.InheritedDomain")],b2);const qY=b2;var FO;let om=FO=class extends m${constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new FO({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};c([p({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var i;return(i=t.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]},isRequired:!0}}})],om.prototype,"maxValue",void 0),c([p({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var i;return(i=t.range)==null?void 0:i[0]}},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]},isRequired:!0}}})],om.prototype,"minValue",void 0),c([Pe({range:"range"})],om.prototype,"type",void 0),om=FO=c([I("esri.layers.support.RangeDomain")],om);const BY=om,HY={key:"type",base:m$,typeMap:{range:BY,"coded-value":y$,inherited:qY}};function g$(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return BY.fromJSON(e);case"codedValue":return y$.fromJSON(e);case"inherited":return qY.fromJSON(e)}return null}const Jve=new ot({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var VO;const Xve=new ot({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let qr=VO=class extends se{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return(i==null?void 0:i.value)??null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?Xve.fromJSON(i.fieldValueType):null}clone(){var e;return new VO({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};c([p({type:String,json:{write:!0}})],qr.prototype,"alias",void 0),c([p({type:[String,Number],json:{write:{allowNull:!0}}})],qr.prototype,"defaultValue",void 0),c([p()],qr.prototype,"description",void 0),c([pe("description")],qr.prototype,"readDescription",null),c([p({types:HY,json:{read:{reader:g$},write:!0}})],qr.prototype,"domain",void 0),c([p({type:Boolean,json:{write:!0}})],qr.prototype,"editable",void 0),c([p({type:vt,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],qr.prototype,"length",void 0),c([p({type:String,json:{write:!0}})],qr.prototype,"name",void 0),c([p({type:Boolean,json:{write:!0}})],qr.prototype,"nullable",void 0),c([Pe(Jve)],qr.prototype,"type",void 0),c([p()],qr.prototype,"valueType",void 0),c([pe("valueType",["description"])],qr.prototype,"readValueType",null),c([p({type:Boolean,json:{read:!1}})],qr.prototype,"visible",void 0),qr=VO=c([I("esri.layers.support.Field")],qr);const Yk=qr;var zO;let am=zO=class extends se{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new zO({mapLayerId:e,gdbVersion:t})}};c([Pe({mapLayer:"map-layer"}),p({json:{write:{isRequired:!0}}})],am.prototype,"type",void 0),c([p({type:vt,json:{write:{isRequired:!0}}})],am.prototype,"mapLayerId",void 0),c([p({type:String,json:{write:!0}})],am.prototype,"gdbVersion",void 0),am=zO=c([I("esri.layers.support.source.MapLayerSource")],am);var jO;let Ml=jO=class extends se{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:s}=this,n={workspaceId:e,query:t,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:s};return new jO(n)}};c([Pe({queryTable:"query-table"}),p({json:{write:{isRequired:!0}}})],Ml.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],Ml.prototype,"workspaceId",void 0),c([p({type:String,json:{write:!0}})],Ml.prototype,"query",void 0),c([p({type:String,json:{write:!0}})],Ml.prototype,"oidFields",void 0),c([p({type:tt,json:{write:!0}})],Ml.prototype,"spatialReference",void 0),c([Pe(Ufe)],Ml.prototype,"geometryType",void 0),Ml=jO=c([I("esri.layers.support.source.QueryTableDataSource")],Ml);var UO;let lm=UO=class extends se{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new UO({workspaceId:e,dataSourceName:t})}};c([Pe({raster:"raster"}),p({json:{write:{isRequired:!0}}})],lm.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],lm.prototype,"dataSourceName",void 0),c([p({type:String,json:{write:!0}})],lm.prototype,"workspaceId",void 0),lm=UO=c([I("esri.layers.support.source.RasterDataSource")],lm);var GO;let hh=GO=class extends se{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new GO({workspaceId:e,gdbVersion:t,dataSourceName:i})}};c([Pe({table:"table"}),p({json:{write:{isRequired:!0}}})],hh.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],hh.prototype,"workspaceId",void 0),c([p({type:String,json:{write:!0}})],hh.prototype,"gdbVersion",void 0),c([p({type:String,json:{write:!0}})],hh.prototype,"dataSourceName",void 0),hh=GO=c([I("esri.layers.support.source.TableDataSource")],hh);var qO,BO;const Qve=xr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let an=qO=class extends se{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return YV()(e,t,i)}castLeftTableSource(e){return Yo(HO(),e)}readRightTableSource(e,t,i){return YV()(e,t,i)}castRightTableSource(e){return Yo(HO(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:s}=this,n={leftTableKey:e,rightTableKey:t,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:s};return new qO(n)}};c([Pe({joinTable:"join-table"}),p({json:{write:{isRequired:!0}}})],an.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],an.prototype,"leftTableKey",void 0),c([p({type:String,json:{write:!0}})],an.prototype,"rightTableKey",void 0),c([p({json:{write:!0}})],an.prototype,"leftTableSource",void 0),c([pe("leftTableSource")],an.prototype,"readLeftTableSource",null),c([mt("leftTableSource")],an.prototype,"castLeftTableSource",null),c([p({json:{write:!0}})],an.prototype,"rightTableSource",void 0),c([pe("rightTableSource")],an.prototype,"readRightTableSource",null),c([mt("rightTableSource")],an.prototype,"castRightTableSource",null),c([Pe(Qve)],an.prototype,"joinType",void 0),an=qO=c([I("esri.layers.support.source.JoinTableDataSource")],an);let K3=null;function YV(){return K3||(K3=By({types:HO()})),K3}let eA=null;function HO(){return eA||(eA={key:"type",base:null,typeMap:{"data-layer":Fo,"map-layer":am}}),eA}const Kve={key:"type",base:null,typeMap:{"join-table":an,"query-table":Ml,raster:lm,table:hh}};let Fo=BO=class extends se{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new BO({fields:e,dataSource:t})}};c([Pe({dataLayer:"data-layer"}),p({json:{write:{isRequired:!0}}})],Fo.prototype,"type",void 0),c([p({type:[Yk],json:{write:!0}})],Fo.prototype,"fields",void 0),c([p({types:Kve,json:{write:!0}})],Fo.prototype,"dataSource",void 0),Fo=BO=c([I("esri.layers.support.source.DataLayerSource")],Fo),Fo.from=Zi(Fo);let ph=class extends ut.ClonableMixin(se){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};c([p({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],ph.prototype,"onFields",void 0),c([p({type:String,json:{write:!0}})],ph.prototype,"operator",void 0),c([p({type:String,json:{write:!0}})],ph.prototype,"searchTerm",void 0),c([p({type:String,json:{write:!0}})],ph.prototype,"searchType",void 0),ph=c([I("esri.rest.support.FullTextSearch")],ph);const ebe=ph;var WO;const JV=new ot({upperLeft:"upper-left",lowerLeft:"lower-left"});let fh=WO=class extends se{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new WO(q({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};c([p({type:Jt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],fh.prototype,"extent",void 0),c([p({type:["view","edit"],json:{write:!0}})],fh.prototype,"mode",void 0),c([p({type:String,json:{read:JV.read,write:JV.write}})],fh.prototype,"originPosition",void 0),c([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],fh.prototype,"tolerance",void 0),fh=WO=c([I("esri.rest.support.QuantizationParameters")],fh);const WY=fh,tbe=new ot({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var ZO;const XV=new ot({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Ao=ZO=class extends se{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=q(e))}clone(){return new ZO({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:q(this.statisticParameters)})}};c([p({type:Number,json:{write:!0}})],Ao.prototype,"maxPointCount",void 0),c([p({type:Number,json:{write:!0}})],Ao.prototype,"maxRecordCount",void 0),c([p({type:Number,json:{write:!0}})],Ao.prototype,"maxVertexCount",void 0),c([p({type:String,json:{write:!0}})],Ao.prototype,"onStatisticField",void 0),c([p({type:String,json:{write:!0}})],Ao.prototype,"outStatisticFieldName",void 0),c([p({type:String,json:{read:{source:"statisticType",reader:XV.read},write:{target:"statisticType",writer:XV.write}}})],Ao.prototype,"statisticType",void 0),c([p({type:Object})],Ao.prototype,"statisticParameters",void 0),c([be("statisticParameters")],Ao.prototype,"writeStatisticParameters",null),Ao=ZO=c([I("esri.rest.support.StatisticDefinition")],Ao);const ibe=Ao;var _2;const rbe=new ot({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ne=_2=class extends se{static from(e){return T_(_2,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const s=e[r];Array.isArray(s)?i[r]=s.map(n=>n instanceof Date?n.getTime():n):s instanceof Date?i[r]=s.getTime():i[r]=s}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new _2(q({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Ne.MAX_MAX_RECORD_COUNT_FACTOR=5,c([p({json:{write:!0}})],Ne.prototype,"aggregateIds",void 0),c([p({type:Boolean,json:{write:!0}})],Ne.prototype,"cacheHint",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],Ne.prototype,"compactGeometryEnabled",void 0),c([p({json:{write:!0}})],Ne.prototype,"datumTransformation",void 0),c([mt("datumTransformation")],Ne.prototype,"castDatumTransformation",null),c([p({type:Boolean,json:{default:!1,write:!0}})],Ne.prototype,"defaultSpatialReferenceEnabled",void 0),c([p({type:Number,json:{write:!0}})],Ne.prototype,"distance",void 0),c([p({type:Fo,json:{write:!0}})],Ne.prototype,"dynamicDataSource",void 0),c([p({type:String,json:{write:!0}})],Ne.prototype,"formatOf3DObjects",void 0),c([p({type:[ebe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Ne.prototype,"fullText",void 0),c([p({type:String,json:{write:!0}})],Ne.prototype,"gdbVersion",void 0),c([p({types:R_,json:{read:$p,write:!0}})],Ne.prototype,"geometry",void 0),c([p({type:Number,json:{write:!0}})],Ne.prototype,"geometryPrecision",void 0),c([p({type:[String],json:{write:!0}})],Ne.prototype,"groupByFieldsForStatistics",void 0),c([p({type:String,json:{write:!0}})],Ne.prototype,"having",void 0),c([p({type:Date})],Ne.prototype,"historicMoment",void 0),c([be("historicMoment")],Ne.prototype,"writeHistoricMoment",null),c([p({type:Number,json:{write:!0}})],Ne.prototype,"maxAllowableOffset",void 0),c([p({type:Number,cast:e=>e<1?1:e>Ne.MAX_MAX_RECORD_COUNT_FACTOR?Ne.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],Ne.prototype,"maxRecordCountFactor",void 0),c([p({type:["xyFootprint"],json:{write:!0}})],Ne.prototype,"multipatchOption",void 0),c([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Ne.prototype,"num",void 0),c([p({json:{write:!0}})],Ne.prototype,"objectIds",void 0),c([p({type:[String],json:{write:!0}})],Ne.prototype,"orderByFields",void 0),c([p({type:[String],json:{write:!0}})],Ne.prototype,"outFields",void 0),c([p({type:tt,json:{name:"outSR",write:!0}})],Ne.prototype,"outSpatialReference",void 0),c([p({type:[ibe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Ne.prototype,"outStatistics",void 0),c([p({json:{write:!0}})],Ne.prototype,"parameterValues",void 0),c([be("parameterValues")],Ne.prototype,"writeParameterValues",null),c([p({type:rt,json:{write:!0}})],Ne.prototype,"pixelSize",void 0),c([p({type:WY,json:{write:!0}})],Ne.prototype,"quantizationParameters",void 0),c([p({type:[Object],json:{write:!0}})],Ne.prototype,"rangeValues",void 0),c([p({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Ne.prototype,"relationParameter",void 0),c([p({type:String,json:{write:!0}})],Ne.prototype,"resultType",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],Ne.prototype,"returnCentroid",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],Ne.prototype,"returnDistinctValues",void 0),c([p({type:Boolean,json:{default:!0,write:!0}})],Ne.prototype,"returnExceededLimitFeatures",void 0),c([p({type:Boolean,json:{write:!0}})],Ne.prototype,"returnGeometry",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],Ne.prototype,"returnQueryGeometry",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],Ne.prototype,"returnM",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ne.prototype,"returnZ",void 0),c([p({type:Boolean,json:{write:!0}})],Ne.prototype,"returnTrueCurves",void 0),c([p({type:tt,json:{write:!0}})],Ne.prototype,"sourceSpatialReference",void 0),c([Pe(tbe,{ignoreUnknown:!1,name:"spatialRel"})],Ne.prototype,"spatialRelationship",void 0),c([p({type:Number,json:{read:{source:"resultOffset"}}})],Ne.prototype,"start",void 0),c([be("start"),be("num")],Ne.prototype,"writeStart",null),c([p({type:String,json:{write:!0}})],Ne.prototype,"sqlFormat",void 0),c([p({type:String,json:{write:!0}})],Ne.prototype,"text",void 0),c([p({type:ru,json:{write:!0}})],Ne.prototype,"timeExtent",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],Ne.prototype,"timeReferenceUnknownClient",void 0),c([Pe(rbe,{ignoreUnknown:!1}),p({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null}}}}})],Ne.prototype,"units",void 0),c([p({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],Ne.prototype,"where",void 0),c([be("where")],Ne.prototype,"writeWhere",null),Ne=_2=c([I("esri.rest.support.Query")],Ne);const su=Ne;function Yw(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let ya=class extends Kn.EventedAccessor{constructor(t){super(t),this._selectionMap=new dy,this._sources=new _e,this._trashCan=[],this._layerEditHandles=new _e,this._vizTaskId=0,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([ve(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),zs(()=>this.sources,"change",i=>{const r=this._selectionMap;for(const s of i.removed)r.delete(s);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new _e;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(i=>"sublayers"in i&&i.sublayers?i.sublayers:null).forEach(i=>{(Yw(i)&&!lhe(i)||Qd(i))&&t.add(i)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(ui)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[i,r]=t;return{layer:i,selection:[...r.selection]}})}get count(){let t=0;for(const i of this._selectionMap.values())t+=i.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){tu(t,this._sources)}async getSelectedFeatures(t,i={},r="layerView"){const{view:s,selections:n}=this,o=(t!==void 0?n.filter(l=>t.includes(l.layer)):n).filter(l=>l.selection.length>0).map(async l=>{const{layer:d,selection:h}=l,y=Qd(d)?d.parent:d;if(y==null||!KV(y))return null;if(r==="layer")return ez(y,h,i);if(QV(y))return null;const v=await s.whenLayerView(y).catch(()=>null);return v?ez(v,h,i):null});return(await Promise.all(o)).filter(l=>l!=null)}updateSelection(t){const i=new Map;for(const[n,o]of this._selectionMap)i.set(n,[...o.selection]);let r=!1;const s=t.current.concat(t.added);for(const n of s){const o=n.sourceLayer,l=n.getObjectId();if(this.sources.includes(o)&&(Yw(o)||Qd(o))&&l!==null){const d=S_(i,o,()=>[]);d.includes(l)||(d.push(l),r=!0)}}for(const n of t.removed){const o=n.sourceLayer,l=n.getObjectId();if(this.sources.includes(o)&&(Yw(o)||Qd(o))&&l!==null){const d=i.get(o),h=d==null?void 0:d.indexOf(l);h!==void 0&&h>=0&&(d==null||d.splice(h,1),r=!0)}}if(r){const{_selectionMap:n,_trashCan:o}=this,l=[];for(const[d,h]of i){const y=n.get(d);y!==void 0&&o.push(y),n.set(d,{selection:h}),l.push({layer:d,selection:h,...nF(y!==void 0?y.selection:[],h)})}this._onSelectionChange(l)}}setSelection(t,i){this._setSelection(t,i)}getSelection(t){const i=this._selectionMap.get(t);return i==null?void 0:i.selection}appendToSelection(t,i){const r=this._selectionMap.get(t),s=r!==void 0?[...r.selection]:[];for(const n of i)s.includes(n)||s.push(n);this._setSelection(t,s)}removeFromSelection(t,i){const r=this._selectionMap.get(t);if(!r)return;const s=[];for(const n of r.selection)i.includes(n)||s.push(n);this._setSelection(t,s)}toggleInSelection(t,i){const r=this._selectionMap.get(t);if(!r||r.selection.length===0)return void this._setSelection(t,i);const s=new Set(r.selection),n=new Set(i),o=Wne(s,n);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const i=[];for(const[r,s]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const l=this._trashCan.pop();(o=l==null?void 0:l.highlightHandle)==null||o.remove()}const{sources:t,view:i,_selectionMap:r,showHighlight:s}=this,n=this._vizTaskId;for(const l of t){const d=r.get(l),h=Qd(l)?l.parent:l;if(h!=null&&KV(h)){if(QV(h))continue;i.whenLayerView(h).then(y=>{var v;(v=d==null?void 0:d.highlightHandle)==null||v.remove(),d!=null&&s&&n===this._vizTaskId&&"highlight"in y&&typeof y.highlight=="function"&&d.selection.length>0&&(d.highlightHandle=y.highlight(d.selection,this.highlightName))}).catch(()=>{var y;(y=d==null?void 0:d.highlightHandle)==null||y.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(ui);for(const t of this.sources){const i=Qd(t)?t.parent:t;if(i!=null&&Yw(i)){const r=i.on("edits",s=>{this._handleEditChanges(s,t)});this._layerEditHandles.push(r)}}}_handleEditChanges(t,i){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(i)){const r=t.deletedFeatures.filter(s=>s.error==null).map(s=>s.objectId).filter(Yr);this.removeFromSelection(i,r)}}_setSelection(t,i){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const r=this._selectionMap.get(t);if(r===void 0||!nbe(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(t,{selection:[...i]});const s={layer:t,selection:[...i],...nF(r!==void 0?r.selection:[],i)};this._onSelectionChange([s])}}};c([p({readOnly:!0,nonNullable:!0})],ya.prototype,"selections",null),c([p({readOnly:!0,nonNullable:!0})],ya.prototype,"count",null),c([p({constructOnly:!0,nonNullable:!0})],ya.prototype,"view",void 0),c([p({readOnly:!0,nonNullable:!0})],ya.prototype,"hasSelection",null),c([p()],ya.prototype,"showHighlight",void 0),c([p()],ya.prototype,"sources",null),c([p()],ya.prototype,"highlightName",void 0),ya=c([I("esri.views.SelectionManager")],ya);const QV=e=>{var t;return Qd(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},sbe=e=>e.layer!==void 0,KV=e=>(e==null?void 0:e.when)!==void 0,nbe=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const i=[...e.selection],r=[...t.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let s=0;s<i.length;s++)if(i[s]!==r[s])return!1}return!0},ez=async(e,t,i={})=>{let r;if(sbe(e)){const s=e;r=s===void 0?null:await s.queryFeatures(new su({...i,objectIds:t})).then(n=>({data:n,layer:e.layer}))}else{const s=e;r=s===void 0?null:await s.queryFeatures(new su({...i,objectIds:t})).then(n=>({data:n,layer:s}))}return r},obe=ya;let $v=class extends ut.ClonableMixin(Me){constructor(t){super(t),this.accentColor=new ye([255,127,0]),this.textColor=new ye([255,255,255])}};c([p({type:ye,nonNullable:!0})],$v.prototype,"accentColor",void 0),c([p({type:ye,nonNullable:!0})],$v.prototype,"textColor",void 0),$v=c([I("esri.views.Theme")],$v);const YO=$v;var tz;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(tz||(tz={}));const ZY=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],YY={};function JY(e){return!!YY[e]}function abe(e){for(const t of e)if(!JY(t))return!1;return!0}ZY.forEach(e=>{YY[e]=!0});let XY=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:r},s)=>{var n;return(n=this.inputManager)==null?void 0:n.installHandlers(s,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,r,s){const n=Array.isArray(t)?t:t.split(",");if(!abe(n))return n.some(JY)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,l;Array.isArray(i)?l=i:(o=i,l=[]),typeof r=="function"?o=r:s=r,s=s??Uc.DEFAULT;const d=this._createUniqueGroupName(),h=new lbe(this.view,n,l,o);this._handlers.set(d,{handler:h,priority:s});for(const y of n){const v=this._handlerCounts.get(y)||0;this._handlerCounts.set(y,v+1)}return this.inputManager&&this.inputManager.installHandlers(d,[h],s),bt(()=>this._removeHandler(d,n))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const r of i){const s=this._handlerCounts.get(r);s===void 0||(s===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},lbe=class extends dr{constructor(t,i,r,s){super(!0),this._latestDragStart=void 0,this.view=t;for(const n of i)switch(n){case"click":this.registerIncoming("click",r,o=>s(dbe(t,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>s(hbe(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>s(pbe(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>s(fbe(t,o)));break;case"hold":this.registerIncoming("hold",r,o=>s(mbe(t,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const l=this._wrapDrag(o);l&&s(l)});break;case"key-down":this.registerIncoming("key-down",r,o=>s(ybe(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>s(gbe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>s(M0(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>s(M0(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>s(M0(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>s(vbe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>s(bbe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>s(M0(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>s(M0(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{s(_be(o))});break;case"focus":this.registerIncoming("focus",r,o=>{s(ube(o))});break;case"blur":this.registerIncoming("blur",r,o=>{s(cbe(o))})}}_wrapDrag(t){const i=t.data,{x:r,y:s}=i.center,{action:n,pointerType:o,button:l}=i;if(n==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const d=i.pointer.native,h=i.buttons,{cancelable:y,timestamp:v}=t,b={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:r,y:s,origin:b,pointerType:o,button:l,buttons:h,radius:i.radius,angle:jH(i.angle),native:d,timestamp:v,cancelable:y,stopPropagation:()=>t.stopPropagation(),async:w=>t.async(w),preventDefault:()=>t.preventDefault()}}};function ube(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function cbe(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function dbe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:l,eventId:d}=t.data,{cancelable:h,timestamp:y}=t;return{type:"click",pointerType:i,button:r,buttons:s,x:n,y:o,native:l,timestamp:y,screenPoint:Er(n,o),mapPoint:q_(e,n,o),eventId:d,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:v=>t.async(v),preventDefault:()=>t.preventDefault()}}function hbe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:l,eventId:d}=t.data,{cancelable:h,timestamp:y}=t;return{type:"double-click",pointerType:i,button:r,buttons:s,x:n,y:o,native:l,timestamp:y,mapPoint:q_(e,n,o),eventId:d,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:v=>t.async(v),preventDefault:()=>t.preventDefault()}}function pbe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:l,eventId:d}=t.data,h=l.pointerId,{cancelable:y,timestamp:v}=t;return{type:"immediate-click",pointerId:h,pointerType:i,button:r,buttons:s,x:n,y:o,native:l,timestamp:v,mapPoint:q_(e,n,o),eventId:d,cancelable:y,stopPropagation:()=>t.stopPropagation(),async:b=>t.async(b),preventDefault:()=>t.preventDefault()}}function fbe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:l,eventId:d}=t.data,h=l.pointerId,{cancelable:y,timestamp:v}=t;return{type:"immediate-double-click",pointerId:h,pointerType:i,button:r,buttons:s,x:n,y:o,native:l,timestamp:v,mapPoint:q_(e,n,o),eventId:d,cancelable:y,stopPropagation:()=>t.stopPropagation(),async:b=>t.async(b),preventDefault:()=>t.preventDefault()}}function mbe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:l}=t.data,{cancelable:d,timestamp:h}=t;return{type:"hold",pointerType:i,button:r,buttons:s,x:n,y:o,native:l,timestamp:h,mapPoint:q_(e,n,o),cancelable:d,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}function q_(e,t,i){return e.toMap(Er(t,i),{exclude:[]})}function ybe(e){const{key:t,repeat:i,native:r}=e.data,{cancelable:s,timestamp:n}=e;return{type:"key-down",key:t,repeat:i,native:r,timestamp:n,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function gbe(e){const{key:t,native:i}=e.data,{cancelable:r,timestamp:s}=e;return{type:"key-up",key:t,native:i,timestamp:s,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:n=>e.async(n),preventDefault:()=>e.preventDefault()}}function M0(e,t){const{x:i,y:r,button:s,buttons:n,native:o,eventId:l}=e.data,d=o.pointerId,h=o.pointerType,{cancelable:y,timestamp:v}=e;return{type:t,x:i,y:r,pointerId:d,pointerType:h,button:s,buttons:n,native:o,timestamp:v,eventId:l,cancelable:y,stopPropagation:()=>e.stopPropagation(),async:b=>e.async(b),preventDefault:()=>e.preventDefault()}}function vbe(e){const{x:t,y:i,buttons:r,native:s,eventId:n}=e.data.currentEvent,{button:o}=e.data.startEvent,l=e.data.startEvent.native.pointerId,d=e.data.startEvent.native.pointerType,h=e.data.action,y={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:v,timestamp:b}=e;return{type:"pointer-drag",x:t,y:i,pointerId:l,pointerType:d,button:o,buttons:r,action:h,origin:y,native:s,timestamp:b,eventId:n,cancelable:v,stopPropagation:()=>e.stopPropagation(),async:w=>e.async(w),preventDefault:()=>e.preventDefault()}}function bbe(e){const{cancelable:t,data:i,timestamp:r}=e,{x:s,y:n,deltaY:o,native:l}=i;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:l,timestamp:r,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}function _be(e){const{action:t,state:i,device:r}=e.data,{cancelable:s,timestamp:n}=e,{buttons:o,axes:l}=i;return{type:"gamepad",device:r,timestamp:n,action:t,buttons:o,axes:l,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}var Qb,iz,rz;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Qb||(Qb={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(iz||(iz={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(rz||(rz={}));function wbe(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return ae.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function JO(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Qb.USER)&&e.getEditableFlag(Qb.MANAGER)}function ga(e){return Er(e.x,e.y)}function QY(e,t){var r;const i=(r=e instanceof HTMLElement?e:e.surface)==null?void 0:r.getBoundingClientRect();return i?Er(t.clientX-i.left,t.clientY-i.top):Er(0,0)}function KY(e,t){return t instanceof Event?QY(e,t):ga(t)}function eJ(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let Sbe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":nz(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!oz(t))break;const s=ga(t),n=Pf(s,t.pointerType,i.forEachTool);if(n==null)break;const o=n.manipulator,l=n.tool;o==null||l==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,i),o!=null&&l!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:l,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!oz(t))break;const s=this._grabbedManipulators.get(t.pointerId),n=s==null?void 0:s.manipulator,o=s==null?void 0:s.tool;if(n==null||o==null)break;const l=ga(t);l.x=_n(l.x,0,i.view.width),l.y=_n(l.y,0,i.view.height);const d=s.start,h=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,h?n.events.emit("drag",{action:"update",start:d,screenPoint:l}):n.events.emit("drag",{action:"start",start:d,screenPoint:l,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:n,start:d}));break;case"end":n.dragging=!1,h&&n.events.emit("drag",{action:"end",start:d,screenPoint:l}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const s=ga(t),n=Pf(s,t.pointerType,i.forEachTool);if(Ebe(t)||i.forEachTool(h=>{if((n==null||n.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let y=!1;h.manipulators.forEach(({manipulator:v})=>{v.selected&&(v.selected=!1,y=!0)}),y&&h.onManipulatorSelectionChanged&&h.onManipulatorSelectionChanged()}}),n==null)break;const{manipulator:o,tool:l}=n;if(!o.interactive)break;o.selectable&&l.automaticManipulatorSelection&&(o.selected=!o.selected,l.onManipulatorSelectionChanged&&l.onManipulatorSelectionChanged());const d=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:d,stopPropagation:r}),tA(o,r);break}case"click":{const s=ga(t),n=Pf(s,t.pointerType,i.forEachTool),o=n==null?void 0:n.manipulator;if(o==null||!o.interactive)break;const l=t.native.shiftKey;o.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:l}),r();break}case"double-click":{const s=ga(t),n=Pf(s,t.pointerType,i.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const l=t.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:r}),tA(o,r);break}case"immediate-double-click":{const s=ga(t),n=Pf(s,t.pointerType,i.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const l=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:r}),t.pointerType==="mouse"&&tA(o,r);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:ga(i)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===t&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(t,i){var s;const r=(s=this._grabbedManipulators.get(t.pointerId))==null?void 0:s.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:ga(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=sz(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=sz(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:s})=>{i.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{r.add(s)}),t(s=>{s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=r.has(s);const n=this._grabbedManipulators.values(),o=ene(n,({tool:l})=>l===s);s.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:r},s=!0,n){const o=(l,d)=>l===t&&(n==null||n===d);this._grabbedManipulators.forEach(({tool:l,manipulator:d,pointerType:h},y)=>{o(l,d)&&(this._grabbedManipulators.delete(y),d.grabbing=!1,d.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:h}))}),this._draggedManipulators.forEach(({tool:l,manipulator:d},h)=>{o(l,d)&&(this._draggedManipulators.delete(h),d.dragging=!1,d.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:l,manipulator:d},h)=>{o(l,d)&&(this._hoveredManipulators.delete(h),d.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Er(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){const r=t.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!nz(t.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(ga(t),t.pointerId,t.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(t,i,r,s){var l;let n=Pf(t,r,s);const o=(l=this._hoveredManipulators.get(i))==null?void 0:l.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(i,n)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:i},r)=>{t===r&&(this._hoveredManipulators.delete(t),i.hovering=!1)})}};function sz(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function Pf(e,t,i){let r=null;return i(s=>{if(s.manipulators==null||!JO(s))return!1;const n=s.manipulators.intersect(e,t);return n!=null&&(r={tool:s,manipulator:n},!0)}),r}function nz(e){return e==="mouse"}function oz(e){return e.pointerType!=="mouse"||e.button===0}function Ebe(e){return!!e.native.shiftKey}function tA(e,t){e!=null&&e.consumesClicks&&t()}const az="attached",iA="tools",Tbe=1e3;let va=class extends Me{constructor(t){super(t),this._updatingHandles=new cp,this._clock=qy,this._manipulatorState=new Sbe,this.tools=new _e,this.cursor=null,this._interacting=!1,this._interactingTimeout=Tbe,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(ZY,t=>{this._handleInputEvent(t)},Uc.TOOL),...wbe(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void ae.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const i=this.activeTool;this._set("activeTool",t),i!=null&&i.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const r of this.tools){this._updateToolEditableFlag(r);const s=JO(r);this.activeTool!=null&&s||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=ui(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([ve(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i)))],az):this.addHandles(ve(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(az),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>t(r,i))})}_handleInputEvent(t){let i=!1;const r={...t,stopPropagation:()=>{i=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(s=>{!i&&s.visible&&s.handleInputEvent(r)}),!i&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(iA),this._forEachTool(t=>{if(t instanceof Me){const i=ve(()=>[t.cursor,t.visible,t.editable],()=>{JO(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,iA)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],iA)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var i;(i=t.setEditableFlag)==null||i.call(t,Qb.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(i=>(t==null||i!==t)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};c([p({constructOnly:!0,nonNullable:!0})],va.prototype,"view",void 0),c([p({value:null})],va.prototype,"activeTool",null),c([p({readOnly:!0,type:_e})],va.prototype,"tools",void 0),c([p({readOnly:!0})],va.prototype,"cursor",void 0),c([p({readOnly:!0})],va.prototype,"updating",null),c([p()],va.prototype,"_interacting",void 0),c([p({readOnly:!0})],va.prototype,"interacting",null),va=c([I("esri.views.ToolViewManager")],va);const $be=new ye("cyan"),xbe=1,Mbe=.25,Abe=new ye("black"),Ibe=.4,Cbe=.2,y8e=.25,tJ="default",Obe="temporary",Lbe=new ye("yellow");var XO;let ln=XO=class extends Me{constructor(e){super(e),this.name=tJ,this.color=$be.clone(),this.haloColor=null,this.haloOpacity=xbe,this.fillOpacity=Mbe,this.shadowColor=Abe.clone(),this.shadowOpacity=Ibe,this.shadowDifference=Cbe,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur&&this.shadowColor.equals(e.shadowColor)&&this.shadowOpacity===e.shadowOpacity&&this.shadowDifference===e.shadowDifference}clone(){var e,t;return new XO({...this,color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),shadowColor:(t=this.shadowColor)==null?void 0:t.clone()})}assignFrom(e){var t;this.color=e.color.clone(),this.haloColor=(t=e.haloColor)==null?void 0:t.clone(),this.haloOpacity=e.haloOpacity,this.fillOpacity=e.fillOpacity,this.shadowColor=e.shadowColor.clone(),this.shadowDifference=e.shadowDifference,this.shadowOpacity=e.shadowOpacity,this.haloBlur=e.haloBlur,this.haloWidth=e.haloWidth}};c([p({type:String,constructOnly:!0,nonNullable:!0})],ln.prototype,"name",void 0),c([p({type:ye,nonNullable:!0})],ln.prototype,"color",void 0),c([p({type:ye})],ln.prototype,"haloColor",void 0),c([p({nonNullable:!0})],ln.prototype,"haloOpacity",void 0),c([p({nonNullable:!0})],ln.prototype,"fillOpacity",void 0),c([p({type:ye,nonNullable:!0})],ln.prototype,"shadowColor",void 0),c([p({nonNullable:!0})],ln.prototype,"shadowOpacity",void 0),c([p({nonNullable:!0})],ln.prototype,"shadowDifference",void 0),c([p({nonNullable:!0})],ln.prototype,"haloWidth",void 0),c([p({nonNullable:!0})],ln.prototype,"haloBlur",void 0),ln=XO=c([I("esri.views.support.HighlightOptions")],ln);const Gc=ln;function Rbe(){return new(_e.ofType(Gc))([new Gc({name:tJ}),new Gc({name:Obe,color:Lbe})])}let um=class extends Me{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":Pbe.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return kbe[this.deviceType]}};c([p({nonNullable:!0,readOnly:!0})],um.prototype,"nativeIndex",void 0),c([p({type:String,readOnly:!0})],um.prototype,"deviceType",null),c([p({type:Number,readOnly:!0})],um.prototype,"axisThreshold",null),um=c([I("esri.views.input.gamepad.GamepadInputDevice")],um);const Jk=um,Pbe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),kbe={standard:.15,spacemouse:.025,unknown:0};let xv=class extends Me{constructor(...t){super(...t),this.devices=new _e,this.enabledFocusMode="document"}};c([p({type:_e.ofType(Jk),readOnly:!0})],xv.prototype,"devices",void 0),c([p({type:["document","view","none"]})],xv.prototype,"enabledFocusMode",void 0),xv=c([I("esri.views.input.gamepad.GamepadSettings")],xv);const Dbe=xv;let w2=class extends Me{constructor(){super(...arguments),this.gamepad=new Dbe}};c([p({readOnly:!0})],w2.prototype,"gamepad",void 0),w2=c([I("esri.views.input.Input")],w2);const Nbe=w2,iJ=()=>It.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,rA=()=>p({type:["pan","rotate","zoom","none"],nonNullable:!0});let mh=class extends Me{constructor(t){super(t),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};c([rA()],mh.prototype,"dragPrimary",void 0),c([rA()],mh.prototype,"dragSecondary",void 0),c([rA()],mh.prototype,"dragTertiary",void 0),c([p({type:["zoom","none"],nonNullable:!0})],mh.prototype,"mouseWheel",void 0),mh=c([I("esri.views.navigation.NavigationActionMap")],mh);const Xk=mh;let uc=class extends Me{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([p({type:Boolean,nonNullable:!0})],uc.prototype,"enabled",void 0),c([p({type:Jk})],uc.prototype,"device",void 0),c([p({type:["pan","zoom"],nonNullable:!0})],uc.prototype,"mode",void 0),c([p({type:["forward-down","forward-up"],nonNullable:!0})],uc.prototype,"tiltDirection",void 0),c([p({type:Number,nonNullable:!0})],uc.prototype,"velocityFactor",void 0),uc=c([I("esri.views.navigation.gamepad.GamepadSettings")],uc);const rJ=uc;let cc=class extends Me{constructor(t){super(t),this.actionMap=new Xk,this.browserTouchPanEnabled=!0,this.gamepad=new rJ,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!iJ()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(t){Qse(ae.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=t?"zoom":"none"}};c([p({type:Xk,nonNullable:!0})],cc.prototype,"actionMap",void 0),c([p({type:Boolean})],cc.prototype,"browserTouchPanEnabled",void 0),c([p({type:rJ,nonNullable:!0})],cc.prototype,"gamepad",void 0),c([p({type:Boolean})],cc.prototype,"momentumEnabled",void 0),c([p({type:Boolean})],cc.prototype,"mouseWheelZoomEnabled",null),cc=c([I("esri.views.navigation.Navigation")],cc);const v$=cc;function E8e(e,t,i){const r=sJ(e),s=t,n=Fbe(r,s,i);if(r){const o=k_.deriveUnitFromSR(r,e.spatialReference).heightUnit;if(!i&&o!==r.heightUnit){const l=new B("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new B("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:l})}}if(!Vbe(e)||n===Ps.Unsupported)return new B("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(n){case Ps.Units:{const o=(r==null?void 0:r.heightUnit)||"unknown",l=(s==null?void 0:s.heightUnit)||"unknown",d=new B("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${l})`,{layerUnit:o,sceneUnit:l});return new B("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:d})}case Ps.HeightModel:{const o=(r==null?void 0:r.heightModel)||"unknown",l=(s==null?void 0:s.heightModel)||"unknown",d=new B("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${l})`,{layerHeightModel:o,sceneHeightModel:l});return new B("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:d})}case Ps.CRS:{const o=(r==null?void 0:r.vertCRS)||"unknown",l=(s==null?void 0:s.vertCRS)||"unknown",d=new B("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${l})`,{layerDatum:o,sceneDatum:l});return new B("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:d})}}return null}function Fbe(e,t,i){if(!lz(e)||!lz(t))return Ps.Unsupported;if(e==null||t==null)return Ps.Ok;if(!i&&e.heightUnit!==t.heightUnit)return Ps.Units;if(e.heightModel!==t.heightModel)return Ps.HeightModel;switch(e.heightModel){case"gravity-related-height":return Ps.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?Ps.Ok:Ps.CRS;default:return Ps.Unsupported}}var Ps;function lz(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function Vbe(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!aJ(e)}function sJ(e){var r;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?Wy(e.url):void 0;return!(((r=e.spatialReference)==null?void 0:r.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&nJ(e)&&e.heightModelInfo?e.heightModelInfo:aJ(e)?k_.deriveUnitFromSR(jbe,e.spatialReference):null}function nJ(e){return"heightModelInfo"in e}function oJ(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function aJ(e){return oJ(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):lJ(e)}function zbe(e){return e.layers!=null||lJ(e)||oJ(e)||nJ(e)}function lJ(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Ps||(Ps={}));const jbe=new k_({heightModel:"gravity-related-height"});var WE;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(WE||(WE={}));let QO,sA=null;async function Ube(e){sA||(sA=D(()=>import("./geometryServiceUtils-g1q3noXf.js"),__vite__mapDeps([179,180])).then(t=>QO=t)),await sA,yi(e)}async function uJ(e,t,i,r){if(!e)return null;const s=e.spatialReference;return ud()||Fa(s,t)?cd(e,t):QO?QO.projectGeometry(e,t,i,r):(await Promise.race([Ube(r),Qc(r)]),uJ(e,t,i,r))}let Gt=class extends Me{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=by(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,s,n,o;const t=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:t==null?void 0:t.basemap,layers:(s=t==null?void 0:t.basemap)==null?void 0:s.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(n=t==null?void 0:t.ground)==null?void 0:n.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,r=>{const s=this._getSupportedSpatialReferences(r);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(t,s);n!=null&&(t=n)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(t);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var n,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(n=this.map)==null?void 0:n.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const s=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers},{layers:t==null?void 0:t.layers}],l=>{var d;return!(!("tileInfo"in l)||!((d=l.tileInfo)!=null&&d.spatialReference.equals(i)))&&(r=l,!0)},l=>"tileInfo"in l);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const i=this._collectLayers(this.mapCollections,s=>{var o,l;const n=sJ(s);return!!n&&(t={heightModelInfo:n,vcsWkid:(o=s.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(l=s.spatialReference)==null?void 0:l.latestVcsWkid},!0)},s=>zbe(s));return{...t,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],i=this._collectLayers(this.mapCollections,r=>{const s="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],o=s.find(l=>l.spatialReference.equals(this.spatialReference))??n;if(o)return t.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const l of s)t.push({extent:l,layer:r});return!1});return{candidates:t,updating:i}}get _extentTask(){const{candidates:t,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(t),s=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=by(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:s.clone(),task:A_(async n=>{try{const o=await uJ(r.extent,s,"portalItem"in r.layer?r.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(vn(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,i){if(t==null)return i;const r=new Array;for(const s of t)for(const n of i){if(!s.spatialReference.equals(n.spatialReference))continue;const o=qbe(s.viewingMode,n.viewingMode);if(o!==!1){r.push({spatialReference:s.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(t){const i=this.defaultSpatialReference;return t==null||t.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&t.length>1&&t.some(({spatialReference:r})=>r.equals(i))&&(t=t.filter(({spatialReference:r})=>r.equals(i))),t.length>1&&t.some(({viewingMode:r})=>r!==WE.Local)&&(t=t.filter(({viewingMode:r})=>r!==WE.Local)),t[0])}_getSupportedSpatialReferences(t){const i="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const s of i){const n=this.getSpatialReferenceSupport(s,t);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:l,viewingMode:d}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!l.equals(this.userSpatialReference)||r.push({spatialReference:l,viewingMode:d})}}return r}_pickExtentCandidate(t){const i=this.spatialReference;return t.find(({extent:r})=>i.equals(r.spatialReference))||t[0]}_collectLayers(t,i,r=()=>!0){var n;switch(this._loadMaybe((n=this.map)==null?void 0:n.call(this))){case"loading":return!0;case"failed":return!1}const s=new Gbe(r,i);for(const o of t)if(this._collectCollection(o,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(t,i){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of t.layers)if(i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(i=>{rs(i)}),"loading"):t.loadStatus:"loaded"}};c([p()],Gt.prototype,"required",void 0),c([p({constructOnly:!0})],Gt.prototype,"map",void 0),c([p({constructOnly:!0})],Gt.prototype,"getSpatialReferenceSupport",void 0),c([p()],Gt.prototype,"defaultSpatialReference",void 0),c([p()],Gt.prototype,"userSpatialReference",void 0),c([p()],Gt.prototype,"sourcePreloadCount",void 0),c([p()],Gt.prototype,"priorityCollection",void 0),c([p()],Gt.prototype,"requiresExtentInSpatialReference",void 0),c([p()],Gt.prototype,"suspended",void 0),c([p({readOnly:!0})],Gt.prototype,"ready",null),c([p({readOnly:!0})],Gt.prototype,"heightModelInfoReady",null),c([p({readOnly:!0})],Gt.prototype,"spatialReference",null),c([p({readOnly:!0})],Gt.prototype,"extent",null),c([p({readOnly:!0})],Gt.prototype,"heightModelInfo",null),c([p({readOnly:!0})],Gt.prototype,"vcsWkid",null),c([p({readOnly:!0})],Gt.prototype,"latestVcsWkid",null),c([p({readOnly:!0})],Gt.prototype,"viewingMode",null),c([p({readOnly:!0})],Gt.prototype,"tileInfo",null),c([p({readOnly:!0})],Gt.prototype,"mapCollections",null),c([p({readOnly:!0})],Gt.prototype,"_spatialReferenceTask",null),c([p({readOnly:!0})],Gt.prototype,"_tileInfoTask",null),c([p({readOnly:!0})],Gt.prototype,"_heightModelInfoTask",null),c([p({readOnly:!0})],Gt.prototype,"_extentCandidatesTask",null),c([p()],Gt.prototype,"_extentTask",null),c([p()],Gt.prototype,"_projectExtentTask",void 0),Gt=c([I("esri.views.support.DefaultsFromMap")],Gt);let Gbe=class{constructor(t,i){this.layerFilter=t,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function qbe(e,t){return e!=null?t!=null?e===t&&e:e:t}let cm=class extends Me{constructor(t){super(t),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};c([p()],cm.prototype,"featureTitleFields",void 0),c([p()],cm.prototype,"utilityNetworkFields",void 0),c([p()],cm.prototype,"globalIdField",void 0),cm=c([I("esri.views.support.RequiredFieldsOptions")],cm);const Bbe=cm;var Mv;let Ce=Mv=class extends Kn.EventedMixin(M_.EsriPromiseMixin(Me)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Gy,this.updatingHandles=new cp,this.allLayerViews=new qb({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:Wbe}),this.groundView=null,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new _b,this.analyses=new UE,this.typeSpecificPreconditionsReady=!0,this.layerViews=new _e,this.magnifier=new GY,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Nbe,this.navigation=new v$,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new XY(this),this.persistableViewModels=new _e,this.requiredFieldsOptions=new Bbe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(ve(()=>this.preconditionsReady,t=>{var r,s;const i=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,Mv.views.add(this)):(this._lockedSpatialReference=null,Mv.views.remove(this)),this.notifyChange("spatialReference"),!t&&i)(r=this.toolViewManager)==null||r.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown();else if(t&&!i){try{this._startup()}catch(n){return void queueMicrotask(()=>{this.fatalError=new B("startup-error",null,n)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},Na))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,JT(()=>this.ready)))),this.basemapView=new Gve({view:this}),this.layerViewManager=new Wve({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new va({view:this}),this.selectionManager=new obe({view:this}),this.addHandles([qs(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{ae.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),ve(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},ks),ve(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Na),ve(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},ks)])}destroy(){var e,t;this.destroyed||(Mv.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Zt(this.graphics),this.analyses=Zt(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Zt(this.analysisViewManager),this.toolViewManager=Zt(this.toolViewManager),this.layerViewManager=Zt(this.layerViewManager),this.selectionManager=Zt(this.selectionManager),this.basemapView=Zt(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=Zt(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return ae.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Gt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??Rbe()}set highlights(e){this._set("highlights",tu(e,this._get("highlights"),_e.ofType(Gc)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||iu.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(ae.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),iu.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,t,i,r;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const s=!("loaded"in this.map)||this.map.loaded,n=this.map.ground.loaded,o=((t=this.map.basemap)==null?void 0:t.loaded)??!0;return s&&o&&n&&!((i=this.map)!=null&&i.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=A_(l=>YG(Y("view-readyState-waiting-delay"),null,l)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(r=this._readyStateWaitingTask)!=null&&r.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=by(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var t,i;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&i.heightModelInfo)){const r=e.clone();return r.vcsWkid=this.defaultsFromMap.vcsWkid,r.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,r}return e}set spatialReference(e){const t=!cr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??ka}set timeZone(e){this._userTimeZone=e,Bde(e)||ae.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new YO}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new B("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&ae.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(qs(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};Ce.views=new _e,c([p()],Ce.prototype,"_userSpatialReference",void 0),c([p()],Ce.prototype,"activeTool",null),c([p({readOnly:!0})],Ce.prototype,"allLayerViews",void 0),c([p()],Ce.prototype,"groundView",void 0),c([p()],Ce.prototype,"animation",null),c([p()],Ce.prototype,"basemapView",void 0),c([p()],Ce.prototype,"center",null),c([p()],Ce.prototype,"defaultsFromMapSettings",null),c([p()],Ce.prototype,"defaultsFromMap",null),c([p()],Ce.prototype,"displayFilterEnabled",void 0),c([p()],Ce.prototype,"fatalError",void 0),c([p({type:Jt})],Ce.prototype,"extent",null),c([p(LV(_b,"graphics"))],Ce.prototype,"graphics",void 0),c([p(LV(UE,"analyses"))],Ce.prototype,"analyses",void 0),c([p({readOnly:!0,type:k_})],Ce.prototype,"heightModelInfo",null),c([p({type:_e.ofType(Gc)})],Ce.prototype,"highlights",null),c([p({readOnly:!0})],Ce.prototype,"interacting",null),c([p({readOnly:!0})],Ce.prototype,"navigating",null),c([p({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Ce.prototype,"preconditionsReady",null),c([p({readOnly:!0})],Ce.prototype,"typeSpecificPreconditionsReady",void 0),c([p({type:_e,readOnly:!0})],Ce.prototype,"layerViews",void 0),c([p()],Ce.prototype,"resolution",null),c([p({type:GY})],Ce.prototype,"magnifier",void 0),c([p({value:null,type:EW})],Ce.prototype,"map",null),c([p()],Ce.prototype,"padding",void 0),c([p({readOnly:!0})],Ce.prototype,"ready",void 0),c([p()],Ce.prototype,"_readyStateWaitingTask",void 0),c([p({readOnly:!0})],Ce.prototype,"readyState",null),c([p({type:tt})],Ce.prototype,"spatialReference",null),c([p()],Ce.prototype,"stationary",null),c([p({readOnly:!0})],Ce.prototype,"supportsGround",void 0),c([p({type:ru})],Ce.prototype,"timeExtent",null),c([p({type:String,nonNullable:!0})],Ce.prototype,"timeZone",null),c([p()],Ce.prototype,"tools",null),c([p()],Ce.prototype,"toolViewManager",void 0),c([p({readOnly:!0})],Ce.prototype,"type",void 0),c([p({type:Number})],Ce.prototype,"scale",void 0),c([p({readOnly:!0})],Ce.prototype,"updating",void 0),c([p({readOnly:!0})],Ce.prototype,"initialExtentRequired",void 0),c([p({readOnly:!0})],Ce.prototype,"initialExtent",null),c([p()],Ce.prototype,"cursor",null),c([p({readOnly:!0})],Ce.prototype,"input",void 0),c([p({type:v$,nonNullable:!0})],Ce.prototype,"navigation",void 0),c([p()],Ce.prototype,"layerViewManager",void 0),c([p()],Ce.prototype,"analysisViewManager",void 0),c([p()],Ce.prototype,"selectionManager",void 0),c([p()],Ce.prototype,"width",void 0),c([p()],Ce.prototype,"height",void 0),c([p({readOnly:!0})],Ce.prototype,"resizing",void 0),c([p({value:null,readOnly:!0})],Ce.prototype,"size",null),c([p({readOnly:!0})],Ce.prototype,"suspended",void 0),c([p({readOnly:!0})],Ce.prototype,"viewEvents",void 0),c([p({readOnly:!0})],Ce.prototype,"persistableViewModels",void 0),c([p()],Ce.prototype,"_isValid",void 0),c([p()],Ce.prototype,"_readyCycleForced",void 0),c([p()],Ce.prototype,"_lockedSpatialReference",void 0),c([p()],Ce.prototype,"_userTimeZone",void 0),c([p()],Ce.prototype,"_lockedTimeZone",void 0),c([p()],Ce.prototype,"_userTimeExtent",void 0),c([p()],Ce.prototype,"_lockedTimeExtent",void 0),c([p({type:YO})],Ce.prototype,"theme",void 0),c([p({readOnly:!0,type:YO})],Ce.prototype,"effectiveTheme",null),Ce=Mv=c([I("esri.views.View")],Ce);const nA=globalThis.$arcgis;nA&&!nA.views&&Object.defineProperty(nA,"views",{configurable:!1,enumerable:!0,writable:!1,value:Ce.views});const Hbe=Ce;function Wbe(e){return e.layerViews}function hy(e,t){return e[0]=t[0],e[1]=t[1],e}function _r(e,t,i){return e[0]=t,e[1]=i,e}function cJ(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function Kb(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function dJ(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function hJ(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function Zbe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Ybe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Jbe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function Xbe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function Qbe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function B_(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function Kbe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function b$(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function ZE(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function YE(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function pJ(e){const t=e[0],i=e[1];return t*t+i*i}function fJ(e,t){return e[0]=-t[0],e[1]=-t[1],e}function e_e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function KO(e,t){const i=t[0],r=t[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function mJ(e,t){return e[0]*t[0]+e[1]*t[1]}function yJ(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function t_e(e,t,i,r){const s=t[0],n=t[1];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e}function i_e(e,t=1){const i=2*QT()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function r_e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s,e[1]=i[1]*r+i[3]*s,e}function Ca(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s+i[4],e[1]=i[1]*r+i[3]*s+i[5],e}function s_e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[3]*s+i[6],e[1]=i[1]*r+i[4]*s+i[7],e}function n_e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[4]*s+i[12],e[1]=i[1]*r+i[5]*s+i[13],e}function o_e(e,t,i,r){const s=t[0]-i[0],n=t[1]-i[1],o=Math.sin(r),l=Math.cos(r);return e[0]=s*l-n*o+i[0],e[1]=s*o+n*l+i[1],e}function a_e(e,t){const i=e[0],r=e[1],s=t[0],n=t[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let l=s*s+n*n;l>0&&(l=1/Math.sqrt(l));const d=(i*s+r*n)*o*l;return d>1?0:d<-1?Math.PI:Math.acos(d)}function l_e(e){return"vec2("+e[0]+", "+e[1]+")"}function u_e(e,t){return e[0]===t[0]&&e[1]===t[1]}function c_e(e,t){const i=e[0],r=e[1],s=t[0],n=t[1],o=bs();return Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-n)<=o*Math.max(1,Math.abs(r),Math.abs(n))}function d_e(e,t,i,r,s){let n=t[0]-i[0],o=t[1]-i[1];const l=(r[0]*n+r[1]*o)*(s-1);return n=r[0]*l,o=r[1]*l,e[0]=t[0]+n,e[1]=t[1]+o,e}const h_e=YE,Qk=Kb,p_e=dJ,f_e=hJ,m_e=b$,y_e=ZE,g_e=pJ;Object.freeze(Object.defineProperty({__proto__:null,add:cJ,angle:a_e,ceil:Zbe,copy:hy,cross:yJ,dist:m_e,distance:b$,div:f_e,divide:hJ,dot:mJ,equals:c_e,exactEquals:u_e,floor:Ybe,inverse:e_e,len:h_e,length:YE,lerp:t_e,max:Xbe,min:Jbe,mul:p_e,multiply:dJ,negate:fJ,normalize:KO,projectAndScale:d_e,random:i_e,rotate:o_e,round:Qbe,scale:B_,scaleAndAdd:Kbe,set:_r,sqrDist:y_e,sqrLen:g_e,squaredDistance:ZE,squaredLength:pJ,str:l_e,sub:Qk,subtract:Kb,transformMat2:r_e,transformMat2d:Ca,transformMat3:s_e,transformMat4:n_e},Symbol.toStringTag,{value:"Module"}));function _i(){return[0,0]}function v_e(e){return[e[0],e[1]]}function H_(e,t){return[e,t]}function b_e(e,t){return[e,t]}function __e(e,t=_i()){const i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function w_e(e,t){return new Float64Array(e,t,2)}function gJ(){return _i()}function vJ(){return H_(1,1)}function bJ(){return H_(1,0)}function _J(){return H_(0,1)}const S_e=gJ(),E_e=vJ(),T_e=bJ(),$_e=_J();Object.freeze(Object.defineProperty({__proto__:null,ONES:E_e,UNIT_X:T_e,UNIT_Y:$_e,ZEROS:S_e,clone:v_e,create:_i,createView:w_e,freeze:b_e,fromArray:__e,fromValues:H_,ones:vJ,unitX:bJ,unitY:_J,zeros:gJ},Symbol.toStringTag,{value:"Module"}));function x_e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function _$(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function M_e(e,t,i,r,s,n,o){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=n,e[5]=o,e}function Kk(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],l=t[5];let d=i*n-r*s;return d?(d=1/d,e[0]=n*d,e[1]=-r*d,e[2]=-s*d,e[3]=i*d,e[4]=(s*l-n*o)*d,e[5]=(r*o-i*l)*d,e):null}function A_e(e){return e[0]*e[3]-e[1]*e[2]}function Wh(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],l=t[4],d=t[5],h=i[0],y=i[1],v=i[2],b=i[3],w=i[4],E=i[5];return e[0]=r*h+n*y,e[1]=s*h+o*y,e[2]=r*v+n*b,e[3]=s*v+o*b,e[4]=r*w+n*E+l,e[5]=s*w+o*E+d,e}function W_(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],l=t[4],d=t[5],h=Math.sin(i),y=Math.cos(i);return e[0]=r*y+n*h,e[1]=s*y+o*h,e[2]=r*-h+n*y,e[3]=s*-h+o*y,e[4]=l,e[5]=d,e}function w$(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],l=t[4],d=t[5],h=i[0],y=i[1];return e[0]=r*h,e[1]=s*h,e[2]=n*y,e[3]=o*y,e[4]=l,e[5]=d,e}function Dy(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],l=t[4],d=t[5],h=i[0],y=i[1];return e[0]=r,e[1]=s,e[2]=n,e[3]=o,e[4]=r*h+n*y+l,e[5]=s*h+o*y+d,e}function wJ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function SJ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function eD(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function I_e(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function C_e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function O_e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function EJ(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function L_e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function R_e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function P_e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function k_e(e,t){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],l=e[5],d=t[0],h=t[1],y=t[2],v=t[3],b=t[4],w=t[5],E=bs();return Math.abs(i-d)<=E*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(r-h)<=E*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(s-y)<=E*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(n-v)<=E*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-b)<=E*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(l-w)<=E*Math.max(1,Math.abs(l),Math.abs(w))}const D_e=Wh,N_e=EJ;Object.freeze(Object.defineProperty({__proto__:null,add:O_e,copy:x_e,determinant:A_e,equals:k_e,exactEquals:P_e,frob:C_e,fromRotation:wJ,fromScaling:SJ,fromTranslation:eD,identity:_$,invert:Kk,mul:D_e,multiply:Wh,multiplyScalar:L_e,multiplyScalarAndAdd:R_e,rotate:W_,scale:w$,set:M_e,str:I_e,sub:N_e,subtract:EJ,translate:Dy},Symbol.toStringTag,{value:"Module"}));function Xl(){return[1,0,0,1,0,0]}function F_e(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function V_e(e,t,i,r,s,n){return[e,t,i,r,s,n]}function z_e(e,t){return new Float64Array(e,t,6)}const j_e=Xl();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:j_e,clone:F_e,create:Xl,createView:z_e,fromValues:V_e},Symbol.toStringTag,{value:"Module"}));const Jw={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new qo({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:tt.WebMercator}),minus180Line:new qo({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:tt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new qo({paths:[[[180,-180],[180,180]]],spatialReference:tt.WGS84}),minus180Line:new qo({paths:[[[-180,-180],[-180,180]]],spatialReference:tt.WGS84})}};function rp(e,t){return Math.ceil((e-t)/(2*t))}function TJ(e,t){const i=wb(e);for(const r of i)for(const s of r)s[0]+=t;return e}function wb(e){return lp(e)?e.rings:e.paths}function M8e(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function U_e(e){return typeof e=="string"?ur(e):q(e)}function G_e(e,t,i){const r={};for(const s in e){if(s==="declaredClass")continue;const n=e[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))r[s]=n.map(o=>G_e(o));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(i==null?void 0:i[s]);r[s]=t?o:JSON.stringify(o)}else r[s]=t?n:JSON.stringify(n);else r[s]=n}return r}async function q_e(e,t,i,r){const s=U_e(e),n=t[0].spatialReference,o={...r,responseType:"json",query:{...s.query,f:"json",sr:lB(n),target:JSON.stringify({geometryType:wk(t[0]),geometries:t}),cutter:JSON.stringify(i)}},l=await Rt(s.path+"/cut",o),{cutIndexes:d,geometries:h=[]}=l.data;return{cutIndexes:d,geometries:h.map(y=>{const v=$p(y);return v.spatialReference=n,v})}}function B_e(e){return{geometryType:wk(e[0]),geometries:e.map(t=>t.toJSON())}}function H_e(e,t,i){const r=jfe(t);return e.map(s=>{const n=r.fromJSON(s);return n.spatialReference=i,n})}async function W_e(e,t,i){const r=typeof e=="string"?ur(e):e,s=t[0].spatialReference,n=wk(t[0]),o={...i,query:{...r.query,f:"json",sr:lB(s),geometries:JSON.stringify(B_e(t))}},{data:l}=await Rt(r.path+"/simplify",o);return H_e(l.geometries,n,s)}const $J=()=>ae.getLogger("esri.geometry.support.normalizeUtils");function Z_e(e){return e.type==="polygon"}function Y_e(e){return e[0].type==="polygon"}function J_e(e){return e[0].type==="polyline"}function uz(e){const t=[];let i=0,r=0;for(let s=0;s<e.length;s++){const n=e[s];let o=null;for(let l=0;l<n.length;l++)o=n[l],t.push(o),l===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&t.push([(i+r)/2,0])}return t}function X_e(e,t){if(!(e instanceof qo||e instanceof Xo)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw $J().error(s),new B(s)}const i=wb(e),r=[];for(const s of i){const n=[];r.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const l=s[o][0],d=s[o][1],h=s[o+1][0],y=s[o+1][1],v=Math.sqrt((h-l)*(h-l)+(y-d)*(y-d)),b=(y-d)/v,w=(h-l)/v,E=v/t;if(E>1){for(let O=1;O<=E-1;O++){const L=O*t,R=w*L+l,N=b*L+d;n.push([R,N])}const T=(v+Math.floor(E-1)*t)/2,$=w*T+l,A=b*T+d;n.push([$,A])}n.push([h,y])}}return Z_e(e)?new Xo({rings:r,spatialReference:e.spatialReference}):new qo({paths:r,spatialReference:e.spatialReference})}function cz(e,t,i){if(t){const r=X_e(e,1e6);e=zm(r,!0)}return i&&(e=TJ(e,i)),e}function dz(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const s=rp(r,t);e[0]=r+s*(-2*t)}else if(r<i){const s=rp(r,i);e[0]=r+s*(-2*i)}}else{const r=e.x;if(r>t){const s=rp(r,t);e=e.clone().offset(s*(-2*t),0)}else if(r<i){const s=rp(r,i);e=e.clone().offset(s*(-2*i),0)}}return e}function Q_e(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const s=t.cutIndexes[r],n=t.geometries[r],o=wb(n);for(let l=0;l<o.length;l++){const d=o[l];d.some(h=>{if(h[0]<180)return!0;{let y=0;for(let b=0;b<d.length;b++){const w=d[b][0];y=w>y?w:y}y=Number(y.toFixed(9));const v=-360*rp(y,180);for(let b=0;b<d.length;b++){const w=n.getPoint(l,b);n.setPoint(l,b,w.clone().offset(v,0))}return!0}})}if(s===i){if(Y_e(e))for(const l of wb(n))e[s]=e[s].addRing(l);else if(J_e(e))for(const l of wb(n))e[s]=e[s].addPath(l)}else i=s,e[s]=n}return e}async function K_e(e,t,i){if(!Array.isArray(e))return K_e([e],t);t&&typeof t!="string"&&$J().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(t==null?void 0:t.url)??It.geometryServiceUrl;let s,n,o,l,d,h,y,v,b=0;const w=[],E=[];for(const R of e)if(R!=null)if(s||(s=R.spatialReference,n=vs(s),o=s.isWebMercator,h=o?102100:4326,l=Jw[h].maxX,d=Jw[h].minX,y=Jw[h].plus180Line,v=Jw[h].minus180Line),n)if(R.type==="mesh")E.push(R);else if(R.type==="point")E.push(dz(R.clone(),l,d));else if(R.type==="multipoint"){const N=R.clone();N.points=N.points.map(j=>dz(j,l,d)),E.push(N)}else if(R.type==="extent"){const N=R.clone()._normalize(!1,!1,n);E.push(N.rings?new Xo(N):N)}else if(R.extent){const N=R.extent,j=rp(N.xmin,d)*(2*l);let V=j===0?R.clone():TJ(R.clone(),j);N.offset(j,0);let{xmin:Z,xmax:ie}=N;Z=Number(Z.toFixed(9)),ie=Number(ie.toFixed(9)),N.intersects(y)&&ie!==l?(b=ie>b?ie:b,V=cz(V,o),w.push(V),E.push("cut")):N.intersects(v)&&Z!==d?(b=ie*(2*l)>b?ie*(2*l):b,V=cz(V,o,360),w.push(V),E.push("cut")):E.push(V)}else E.push(R.clone());else E.push(R);else E.push(R);let T=rp(b,l),$=-90;const A=T,O=new qo;for(;T>0;){const R=360*T-180;O.addPath([[R,$],[R,-1*$]]),$*=-1,T--}if(w.length>0&&A>0){const R=Q_e(w,await q_e(r,w,O,i)),N=[],j=[];for(let ie=0;ie<E.length;ie++){const oe=E[ie];if(oe!=="cut")j.push(oe);else{const ue=R.shift(),me=e[ie];me!=null&&me.type==="polygon"&&me.rings&&me.rings.length>1&&ue.rings.length>=me.rings.length?(N.push(ue),j.push("simplify")):j.push(o?ap(ue):ue)}}if(!N.length)return j;const V=await W_e(r,N,i),Z=[];for(let ie=0;ie<j.length;ie++){const oe=j[ie];oe!=="simplify"?Z.push(oe):Z.push(o?ap(V.shift()):V.shift())}return Z}const L=[];for(let R=0;R<E.length;R++){const N=E[R];if(N!=="cut")L.push(N);else{const j=w.shift();L.push(o===!0?ap(j):j)}}return L}function e1e(e){if(!e)return null;const t=e.extent;if(!t)return null;const i=e.spatialReference&&vs(e.spatialReference);if(!i)return t;const[r,s]=i.valid,n=2*s,{width:o}=t;let l,{xmin:d,xmax:h}=t;if([d,h]=[h,d],e.type==="extent"||o===0||o<=s||o>n||d<r||h>s)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;l=uz(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;l=uz(e.paths);break;case"multipoint":l=e.points}const y=t.clone();for(let v=0;v<l.length;v++){let b=l[v][0];b<0?(b+=s,h=Math.max(b,h)):(b-=s,d=Math.min(b,d))}return y.xmin=d,y.xmax=h,y.width<o?(y.xmin-=s,y.xmax-=s,y):t}function tD(e,t,i){const r=vs(i);if(r==null)return e;const[s,n]=r.valid,o=2*n;let l=0,d=0;t>n?l=Math.ceil(Math.abs(t-n)/o):t<s&&(l=-Math.ceil(Math.abs(t-s)/o)),e>n?d=Math.ceil(Math.abs(e-n)/o):e<s&&(d=-Math.ceil(Math.abs(e-s)/o));let h=e+(l-d)*o;const y=h-t;return y>n?h-=o:y<s&&(h+=o),h}function A8e(e,t){const i=vs(t);if(i){const[r,s]=i.valid,n=s-r;if(e<r)for(;e<r;)e+=n;if(e>s)for(;e>s;)e-=n}return e}const xJ=96,MJ=39.37,t1e=180/Math.PI;function AJ(e){return e.wkid?e:e.spatialReference||tt.WGS84}function iD(e,t){return t.type?_r(e,t.x,t.y):hy(e,t)}function IJ(e){return eo(e)}function S$(e,t,i=0){let r=e.width,s=e.height;if(i!==0){const l=ZT(i),d=Math.abs(Math.cos(l)),h=Math.abs(Math.sin(l));r=e.width*d+e.height*h,s=e.width*h+e.height*d}const n=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(r/n,s/o)*u1e(e.spatialReference)}async function Av(e,t,i,r){var l,d,h;let s,n;if(!e||Array.isArray(e)&&!e.length)return null;if(_e.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const y=e.every(w=>"attributes"in w),v=e.some(w=>!w.geometry);let b=e;if(y&&v&&t&&t.allLayerViews){const w=new Map;for(const A of e){const O=A.layer,L=w.get(O)||[],R=A.attributes[O.objectIdField];R!=null&&L.push(R),w.set(O,L)}const E=[];w.forEach((A,O)=>{var R;const L=(R=t.allLayerViews)==null?void 0:R.find(N=>N.layer.id===O.id);if(L&&"queryFeatures"in L){const N=O.createQuery();N.objectIds=A,N.returnGeometry=!0,E.push(L.queryFeatures(N))}});const T=await Promise.all(E),$=[];for(const A of T)if(A&&A.features&&A.features.length)for(const O of A.features)O.geometry!=null&&$.push(O.geometry);b=$}for(const w of b)r=await Av(w,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new rt(e);else if(e instanceof ou)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const y=e.layer,v=(l=t.allLayerViews)==null?void 0:l.find(b=>b.layer.id===y.id);if(v&&"queryFeatures"in v){const b=y.createQuery();b.objectIds=[e.attributes[y.objectIdField]],b.returnGeometry=!0;const w=await v.queryFeatures(b);s=(h=(d=w==null?void 0:w.features)==null?void 0:d[0])==null?void 0:h.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new Jt({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=e1e(s);break;default:n=s.extent}if(!n)return null;ud()||Fa(n.spatialReference,i)||await Qc();const o=cd(n,i);if(!o)return null;if(r){const y=o.center,v=y.clone();v.x=tD(y.x,r.center.x,i),v.x!==y.x&&o.centerAt(v),r=r.union(o)}else r=o;return r}function i1e(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const i=e.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(e)&&e.length&&e.every(i=>"layer"in i)){let i=0,r=0;for(const s of e){const n=s.layer;n!=null&&n.minScale&&n.maxScale&&(i=n.minScale<i?n.minScale:i,r=n.maxScale>r?n.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function hz(e,t){const i=AJ(e);return cr(i,t)||i.imageCoordinateSystem||t.imageCoordinateSystem?e:cd(e,t)}async function r1e(e,t){var $;if(!e||!t)return new Xn({targetGeometry:new rt,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:s,viewpoint:n,size:o}=t,l=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let d=null;e instanceof Xn?d=e:e.viewpoint?d=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(d=e.target);let h=null;d!=null&&d.targetGeometry?h=d.targetGeometry:e instanceof Jt?h=e:e instanceof ou?h=await Av(e,t,i):e&&(h=await Av(e.center,t,i)||await Av(e.target,t,i)||await Av(e,t,i)),!h&&(n!=null&&n.targetGeometry)?h=n.targetGeometry:!h&&t.extent&&(h=t.extent),i||(i=AJ(t.spatialReference||t.extent||h)),ud()||cr(h.spatialReference,i)||Fa(h.spatialReference,i)||await Qc();const y=hz(h,i),v="center"in y?y.center:y;t.pickClosestTarget!==!1&&v.type==="point"&&(($=n.targetGeometry)==null?void 0:$.type)==="point"&&(v.x=tD(v.x,n.targetGeometry.x,v.spatialReference));let b=0;d?b=d.rotation:e.hasOwnProperty("rotation")?b=e.rotation:n&&(b=n.rotation);let w=0;w=(d==null?void 0:d.targetGeometry)!=null&&d.targetGeometry.type==="point"?d.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(e.zoom):Array.isArray(h)||h.type==="point"||h.type==="extent"&&h.width===0&&h.height===0?n.scale:S$(hz(h.extent,i),l,b);const E=i1e(e.target??e);E&&(E.min&&E.min<w?w=E.min:E.max&&E.max>w&&(w=E.max));let T=new Xn({targetGeometry:v,scale:w,rotation:b});return r&&(T=r.fit(T),r.constrainByGeometry(T),r.rotationEnabled||(T.rotation=n.rotation)),T}function Kr(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function s1e(e,t,i){return i?_r(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):B_(e,t,.5)}const n1e=function(){const e=_i();return function(t,i,r){const s=i.targetGeometry;iD(e,s);const n=.5*sg(i);return t.xmin=e[0]-n*r[0],t.ymin=e[1]-n*r[1],t.xmax=e[0]+n*r[0],t.ymax=e[1]+n*r[1],t.spatialReference=s.spatialReference,t}}();function o1e(e,t,i,r,s){var n;return eL(e,t,i.center),e.scale=S$(i,r),(n=s==null?void 0:s.constraints)==null||n.constrain(e),e}function a1e(e,t,i,r){return nD(e,t,i,r),Kk(e,e)}const CJ=function(){const e=_i();return function(t,i,r){return Qk(t,c1e(t,i),s1e(e,i,r))}}(),l1e=function(){const e=Xl(),t=_i();return function(i,r,s,n){const o=sg(r),l=rD(r);return _r(t,o,o),SJ(e,t),W_(e,e,l),Dy(e,e,CJ(t,s,n)),Dy(e,e,[0,n.top-n.bottom]),_r(i,e[4],e[5])}}();function sg(e){var t;return e.scale*OJ((t=e.targetGeometry)==null?void 0:t.spatialReference)}function OJ(e){return fn(e)?1/(IJ(e)*MJ*xJ):1}function rD(e){return hk(e.rotation)||0}function u1e(e){return fn(e)?IJ(e)*MJ*xJ:1}function c1e(e,t){return B_(e,t,.5)}const sD=function(){const e=_i(),t=_i(),i=_i();return function(r,s,n,o,l,d){return fJ(e,s),B_(t,n,.5*d),_r(i,1/o*d,-1/o*d),eD(r,t),l&&W_(r,r,l),w$(r,r,i),Dy(r,r,e),r}}(),nD=function(){const e=_i();return function(t,i,r,s){const n=sg(i),o=rD(i);return iD(e,i.targetGeometry),sD(t,e,r,n,o,s)}}(),d1e=function(){const e=_i();return function(t,i,r,s){const n=sg(i);return iD(e,i.targetGeometry),sD(t,e,r,n,0,s)}}();function LJ(e){const t=vs(e);return t?t.valid[1]-t.valid[0]:0}function h1e(e,t){return Math.round(LJ(e)/t)}const p1e=function(){const e=_i(),t=_i(),i=[0,0,0];return function(r,s,n){Kb(e,r,s),KO(e,e),Kb(t,r,n),KO(t,t),yJ(i,e,t);let o=Math.acos(mJ(e,t)/(YE(e)*YE(t)))*t1e;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),f1e=function(){const e=_i();return function(t,i,r,s){const n=t.targetGeometry;return Kr(t,i),l1e(e,i,r,s),n.x+=e[0],n.y+=e[1],t}}(),eL=function(e,t,i){Kr(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},m1e=function(){const e=_i();return function(t,i,r,s,n){n||(n="center"),Qk(e,r,s),B_(e,e,.5);const o=e[0],l=e[1];switch(n){case"center":_r(e,0,0);break;case"left":_r(e,-o,0);break;case"top":_r(e,0,l);break;case"right":_r(e,o,0);break;case"bottom":_r(e,0,-l);break;case"top-left":_r(e,-o,l);break;case"bottom-left":_r(e,-o,-l);break;case"top-right":_r(e,o,l);break;case"bottom-right":_r(e,o,-l)}return E$(t,i,e),t}}();function I8e(e,t,i){return Kr(e,t),e.rotation+=i,e}function y1e(e,t,i){return Kr(e,t),e.rotation=i,e}const g1e=function(){const e=_i();return function(t,i,r,s,n){return Kr(t,i),isNaN(r)||r===0||(PJ(e,s,i,n),t.scale=i.scale*r,kJ(e,e,t,n),E$(t,t,_r(e,e[0]-s[0],s[1]-e[1]))),t}}();function pz(e,t,i){return Kr(e,t),e.scale=i,e}const RJ=function(){const e=_i();return function(t,i,r,s,n,o){return Kr(t,i),isNaN(r)||r===0||(PJ(e,n,i,o),t.scale=i.scale*r,t.rotation+=s,kJ(e,e,t,o),E$(t,t,_r(e,e[0]-n[0],n[1]-e[1]))),t}}(),C8e=function(){const e=_i(),t=_i();return function(i,r,s,n,o,l,d){return CJ(t,l,d),cJ(e,o,t),n?RJ(i,r,s,n,e,l):g1e(i,r,s,e,l)}}(),PJ=function(){const e=Xl();return function(t,i,r,s){return Ca(t,i,a1e(e,r,s,1))}}(),kJ=function(){const e=Xl();return function(t,i,r,s){return Ca(t,i,nD(e,r,s,1))}}(),E$=function(){const e=_i(),t=Xl();return function(i,r,s){Kr(i,r);const n=sg(r),o=i.targetGeometry;return wJ(t,rD(r)),w$(t,t,H_(n,n)),Ca(e,s,t),o.x+=e[0],o.y+=e[1],i}}();function JE(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function v1e(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function b1e(e,t,i,r,s,n){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function _1e(e,t){return new Float32Array(e,t,6)}function DJ(e,t,i,r){const s=t[r],n=t[r+1];e[r]=i[0]*s+i[2]*n+i[4],e[r+1]=i[1]*s+i[3]*n+i[5]}function w1e(e,t,i,r=0,s=0,n=2){const o=s||t.length/n;for(let l=r;l<o;l++)DJ(e,t,i,l*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:v1e,create:JE,createView:_1e,fromValues:b1e,transform:DJ,transformMany:w1e},Symbol.toStringTag,{value:"Module"}));function S1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function E1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function NJ(e,t,i,r,s,n,o,l,d,h){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=n,e[5]=o,e[6]=l,e[7]=d,e[8]=h,e}function FJ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function T1e(e,t){if(e===t){const i=t[1],r=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function $1e(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],l=t[5],d=t[6],h=t[7],y=t[8],v=y*o-l*h,b=-y*n+l*d,w=h*n-o*d;let E=i*v+r*b+s*w;return E?(E=1/E,e[0]=v*E,e[1]=(-y*r+s*h)*E,e[2]=(l*r-s*o)*E,e[3]=b*E,e[4]=(y*i-s*d)*E,e[5]=(-l*i+s*n)*E,e[6]=w*E,e[7]=(-h*i+r*d)*E,e[8]=(o*i-r*n)*E,e):null}function x1e(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],l=t[5],d=t[6],h=t[7],y=t[8];return e[0]=o*y-l*h,e[1]=s*h-r*y,e[2]=r*l-s*o,e[3]=l*d-n*y,e[4]=i*y-s*d,e[5]=s*n-i*l,e[6]=n*h-o*d,e[7]=r*d-i*h,e[8]=i*o-r*n,e}function M1e(e){const t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],o=e[5],l=e[6],d=e[7],h=e[8];return t*(h*n-o*d)+i*(-h*s+o*l)+r*(d*s-n*l)}function oD(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],l=t[4],d=t[5],h=t[6],y=t[7],v=t[8],b=i[0],w=i[1],E=i[2],T=i[3],$=i[4],A=i[5],O=i[6],L=i[7],R=i[8];return e[0]=b*r+w*o+E*h,e[1]=b*s+w*l+E*y,e[2]=b*n+w*d+E*v,e[3]=T*r+$*o+A*h,e[4]=T*s+$*l+A*y,e[5]=T*n+$*d+A*v,e[6]=O*r+L*o+R*h,e[7]=O*s+L*l+R*y,e[8]=O*n+L*d+R*v,e}function tL(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],l=t[4],d=t[5],h=t[6],y=t[7],v=t[8],b=i[0],w=i[1];return e[0]=r,e[1]=s,e[2]=n,e[3]=o,e[4]=l,e[5]=d,e[6]=b*r+w*o+h,e[7]=b*s+w*l+y,e[8]=b*n+w*d+v,e}function VJ(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],l=t[4],d=t[5],h=t[6],y=t[7],v=t[8],b=Math.sin(i),w=Math.cos(i);return e[0]=w*r+b*o,e[1]=w*s+b*l,e[2]=w*n+b*d,e[3]=w*o-b*r,e[4]=w*l-b*s,e[5]=w*d-b*n,e[6]=h,e[7]=y,e[8]=v,e}function A1e(e,t,i){const r=i[0],s=i[1],n=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=n*t[6],e[7]=n*t[7],e[8]=n*t[8],e}function I1e(e,t,i){const r=i[0],s=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function C1e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function O1e(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function L1e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function R1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function P1e(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=i+i,l=r+r,d=s+s,h=i*o,y=r*o,v=r*l,b=s*o,w=s*l,E=s*d,T=n*o,$=n*l,A=n*d;return e[0]=1-v-E,e[3]=y-A,e[6]=b+$,e[1]=y+A,e[4]=1-h-E,e[7]=w-T,e[2]=b-$,e[5]=w+T,e[8]=1-h-v,e}function k1e(e,t){const i=t[0],r=t[1],s=t[2],n=t[4],o=t[5],l=t[6],d=t[8],h=t[9],y=t[10],v=y*o-l*h,b=-y*n+l*d,w=h*n-o*d,E=i*v+r*b+s*w;if(!E)return null;const T=1/E;return e[0]=v*T,e[1]=(-y*r+s*h)*T,e[2]=(l*r-s*o)*T,e[3]=b*T,e[4]=(y*i-s*d)*T,e[5]=(-l*i+s*n)*T,e[6]=w*T,e[7]=(-h*i+r*d)*T,e[8]=(o*i-r*n)*T,e}function D1e(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],l=t[5],d=t[6],h=t[7],y=t[8],v=t[9],b=t[10],w=t[11],E=t[12],T=t[13],$=t[14],A=t[15],O=i*l-r*o,L=i*d-s*o,R=i*h-n*o,N=r*d-s*l,j=r*h-n*l,V=s*h-n*d,Z=y*T-v*E,ie=y*$-b*E,oe=y*A-w*E,ue=v*$-b*T,me=v*A-w*T,Te=b*A-w*$;let Ee=O*Te-L*me+R*ue+N*oe-j*ie+V*Z;return Ee?(Ee=1/Ee,e[0]=(l*Te-d*me+h*ue)*Ee,e[1]=(d*oe-o*Te-h*ie)*Ee,e[2]=(o*me-l*oe+h*Z)*Ee,e[3]=(s*me-r*Te-n*ue)*Ee,e[4]=(i*Te-s*oe+n*ie)*Ee,e[5]=(r*oe-i*me-n*Z)*Ee,e[6]=(T*V-$*j+A*N)*Ee,e[7]=($*R-E*V-A*L)*Ee,e[8]=(E*j-T*R+A*O)*Ee,e):null}function N1e(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function F1e(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function V1e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function z1e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function zJ(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function j1e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function U1e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function G1e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function q1e(e,t){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],l=e[5],d=e[6],h=e[7],y=e[8],v=t[0],b=t[1],w=t[2],E=t[3],T=t[4],$=t[5],A=t[6],O=t[7],L=t[8],R=bs();return Math.abs(i-v)<=R*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-b)<=R*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(s-w)<=R*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(n-E)<=R*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(o-T)<=R*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(l-$)<=R*Math.max(1,Math.abs(l),Math.abs($))&&Math.abs(d-A)<=R*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(h-O)<=R*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(y-L)<=R*Math.max(1,Math.abs(y),Math.abs(L))}function B1e(e){const t=bs(),i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],l=e[5],d=e[6],h=e[7],y=e[8];return Math.abs(1-(i*i+n*n+d*d))<=t&&Math.abs(1-(r*r+o*o+h*h))<=t&&Math.abs(1-(s*s+l*l+y*y))<=t}const H1e=oD,W1e=zJ;Object.freeze(Object.defineProperty({__proto__:null,add:z1e,adjoint:x1e,copy:E1e,determinant:M1e,equals:q1e,exactEquals:G1e,frob:V1e,fromMat2d:R1e,fromMat4:S1e,fromQuat:P1e,fromRotation:O1e,fromScaling:L1e,fromTranslation:C1e,identity:FJ,invert:$1e,isOrthoNormal:B1e,mul:H1e,multiply:oD,multiplyScalar:j1e,multiplyScalarAndAdd:U1e,normalFromMat4:D1e,normalFromMat4Legacy:k1e,projection:N1e,rotate:VJ,scale:A1e,scaleByVec2:I1e,set:NJ,str:F1e,sub:W1e,subtract:zJ,translate:tL,transpose:T1e},Symbol.toStringTag,{value:"Module"}));function S2(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function Z1e(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Y1e(e,t,i,r,s,n,o,l,d){const h=new Float32Array(9);return h[0]=e,h[1]=t,h[2]=i,h[3]=r,h[4]=s,h[5]=n,h[6]=o,h[7]=l,h[8]=d,h}function J1e(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:Z1e,create:S2,createView:J1e,fromValues:Y1e},Symbol.toStringTag,{value:"Module"}));function jJ(){return new Float32Array(2)}function X1e(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Ny(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function Q1e(e,t){return new Float32Array(e,t,2)}function UJ(){return jJ()}function GJ(){return Ny(1,1)}function qJ(){return Ny(1,0)}function BJ(){return Ny(0,1)}const K1e=UJ(),ewe=GJ(),twe=qJ(),iwe=BJ();Object.freeze(Object.defineProperty({__proto__:null,ONES:ewe,UNIT_X:twe,UNIT_Y:iwe,ZEROS:K1e,clone:X1e,create:jJ,createView:Q1e,fromValues:Ny,ones:GJ,unitX:qJ,unitY:BJ,zeros:UJ},Symbol.toStringTag,{value:"Module"}));function rwe(e){return e instanceof Float32Array&&e.length>=2}function swe(e){return Array.isArray(e)&&e.length>=2}function oA(e){return rwe(e)||swe(e)}var iL;const dl=[0,0];let Al=iL=class extends se{constructor(e){super(e),this._viewpoint2D={center:_i(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Jt,this.id=0,this.inverseTransform=Xl(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Xl(),this.transformNoRotation=Xl(),this.displayMat3=S2(),this.displayViewMat3=S2(),this.viewMat3=S2(),this.viewMat2d=JE(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=Kr(i,e.viewpoint),this._set("size",hy(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new iL({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return oA(t)?Ca(e,t,this.inverseTransform):(dl[0]=t,dl[1]=i,Ca(e,dl,this.inverseTransform))}toScreen(e,t,i){return oA(t)?Ca(e,t,this.transform):(dl[0]=t,dl[1]=i,Ca(e,dl,this.transform))}toScreenNoRotation(e,t,i){return oA(t)?Ca(e,t,this.transformNoRotation):(dl[0]=t,dl[1]=i,Ca(e,dl,this.transformNoRotation))}wrapMapCoordinate(e,t){hy(e,t);const[i]=t,[r]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:l}=s;if(n.isWrappable){const d=LJ(n)/2;o=Math.max(o,r-d),l=Math.min(l,r+d)}return(i<o||i>l)&&(e[0]=tD(i,r,n)),e}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return sD(e,i,s,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new Xn({targetGeometry:new rt(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",o),!n||!t||!i)return;this.resolution=sg(o),this.rotation=r,this.scale=i,this.spatialReference=t,hy(this.center,e);const l=n[0]!==0?2/n[0]:0,d=n[1]!==0?-2/n[1]:0;NJ(this.displayMat3,l,0,0,0,d,0,-1,1,1);const h=FJ(this.viewMat3),y=Ny(n[0]/2,n[1]/2),v=Ny(-n[0]/2,-n[1]/2),b=hk(r);tL(h,h,y),VJ(h,h,b),tL(h,h,v),oD(this.displayViewMat3,this.displayMat3,h);const w=eD(this.viewMat2d,y);return W_(w,w,b),Dy(w,w,v),n1e(this.extent,o,n),nD(this.transform,o,n,s),Kk(this.inverseTransform,this.transform),d1e(this.transformNoRotation,o,n,s),this.worldScreenWidth=h1e(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};c([p({readOnly:!0})],Al.prototype,"id",void 0),c([p({value:1,json:{write:!0}})],Al.prototype,"pixelRatio",null),c([p({json:{write:!0}})],Al.prototype,"size",null),c([p()],Al.prototype,"spatialReference",void 0),c([p({type:Xn,json:{write:!0}})],Al.prototype,"viewpoint",null),c([p({readOnly:!0})],Al.prototype,"visibleArea",null),Al=iL=c([I("esri.views.2d.ViewState")],Al);const fz=Al;var rL,sL;let Hl=rL=class extends Me{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new rL({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c([p()],Hl.prototype,"left",void 0),c([p()],Hl.prototype,"top",void 0),c([p()],Hl.prototype,"right",void 0),c([p()],Hl.prototype,"bottom",void 0),Hl=rL=c([I("esri.views.2d.PaddedViewState.Padding")],Hl);let dm=sL=class extends fz{constructor(...e){super(...e),this.paddedViewState=new fz,this._updateContent=(()=>{const t=_i();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;_r(t,r.left+r.right,r.top+r.bottom),Kb(t,i,t),hy(s.size,t);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(ve(()=>[this.size,this.padding],()=>this._updateContent(),Na)),this.padding=new Hl,this.size=[0,0]}set padding(e){this._set("padding",e||new Hl)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const i=this._get("padding");i&&(t=f1e(e.clone(),e,this._get("size"),i));const{targetGeometry:r,rotation:s,scale:n}=t,{x:o,y:l,spatialReference:d}=r,h=this._viewpoint2D;h.center[0]=o,h.center[1]=l,h.rotation=s,h.scale=n,h.spatialReference=d,this._update()}}clone(){return new sL({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c([p()],dm.prototype,"paddedViewState",void 0),c([p({type:Hl})],dm.prototype,"padding",null),c([p()],dm.prototype,"viewpoint",null),dm=sL=c([I("esri.views.2d.PaddedViewState")],dm);const aD=dm;var Pr;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(Pr||(Pr={}));const HJ=Symbol("Yield");let nwe=class{constructor(){this._tasks=new Array,this._runningTasks=Ry(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return HJ;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,i,r){return++this._runningTasks.value,new Promise((s,n)=>this._tasks.push(new mz(s,n,t,i,r))).finally(()=>--this._runningTasks.value)}unshift(t,i,r){return++this._runningTasks.value,new Promise((s,n)=>this._tasks.unshift(new mz(s,n,t,i,r))).finally(()=>--this._runningTasks.value)}_process(t){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const s=vn(i.signal);if(s&&!i.abortCallback)i.reject(Yt());else{const n=s?(r=i.abortCallback)==null?void 0:r.call(i,Yt()):i.callback(t);Ua(n)?n.then(i.resolve,i.reject):i.resolve(n)}}catch(s){i.reject(s)}return!0}cancelAll(){const t=Yt();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(t);i.resolve(r)}else i.reject(t);this._tasks.length=0}},mz=class{constructor(t,i,r,s=void 0,n=void 0){this.resolve=t,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=n}},Iv=class extends Me{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};c([p()],Iv.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),c([p()],Iv.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Iv=c([I("esri.views.support.debugFlags")],Iv);const owe=new Iv;function awe(){return new XE.Scheduler}var st;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(st||(st={}));const Gn=0,yz=new Map([[st.RESOURCE_CONTROLLER_IMMEDIATE,Gn],[st.RESOURCE_CONTROLLER,4],[st.SLIDE,Gn],[st.STREAM_DATA_LOADER,Gn],[st.ELEVATION_QUERY,Gn],[st.TERRAIN_SURFACE,1],[st.SURFACE_GEOMETRY_UPDATES,1],[st.LOD_RENDERER,2],[st.GRAPHICS_CORE,2],[st.I3S_CONTROLLER,2],[st.POINT_CLOUD_LAYER,2],[st.FEATURE_TILE_FETCHER,2],[st.CLOUDS_GENERATOR,2],[st.OVERLAY,4],[st.STAGE,4],[st.GRAPHICS_DECONFLICTOR,4],[st.FILTER_VISIBILITY,4],[st.SCALE_VISIBILITY,4],[st.FRUSTUM_VISIBILITY,4],[st.POINT_OF_INTEREST_FREQUENT,6],[st.POINT_OF_INTEREST_INFREQUENT,30],[st.LABELER,8],[st.FEATURE_QUERY_ENGINE,8],[st.FEATURE_TILE_TREE,16],[st.FEATURE_TILE_TREE_ACTIVE,Gn],[st.ELEVATION_ALIGNMENT,12],[st.ELEVATION_ALIGNMENT_SCENE,14],[st.TEXT_TEXTURE_ATLAS,12],[st.TEXTURE_UNLOAD,12],[st.LINE_OF_SIGHT_TOOL,16],[st.LINE_OF_SIGHT_TOOL_INTERACTIVE,Gn],[st.SNAPPING,Gn],[st.SHADOW_ACCUMULATOR,30],[st.MAPVIEW_FETCH_QUEUE,Gn],[st.MAPVIEW_LAYERVIEW_UPDATE,2],[st.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Gn]]);function gz(e){return yz.has(e)?yz.get(e):typeof e=="number"?e:1}const lwe=6.5,vz=1,uwe=30,cwe=1e3/30,dwe=100,bz=.9;var XE,Vd;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(n=>n.needsUpdate)}constructor(){this._updating=Ry(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new ib("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=Pr.INTERACTING,this._tasks=new np,this._runQueue=new np,this._load=0,this._idleStateCallbacks=new np,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=ve(()=>owe.SCHEDULER_LOG_SLOW_TASKS,n=>this._debug=n,yt);for(const n of Object.keys(st))this.performanceInfo.tasks.set(st[n],new ib(st[n]))}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),ui(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(n){this._updatingChanged(),n&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(n,o){const l=new i(this,n,o);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new ib(n)),l}registerIdleStateCallbacks(n,o){const l={idleBegin:n,idleEnd:o};this._idleStateCallbacks.push(l),this.state===Pr.IDLE&&this._idleUpdatesStartFired&&l.idleBegin();const d=this;return{remove:()=>this._removeIdleStateCallbacks(l),set idleBegin(h){d._idleUpdatesStartFired&&(l.idleEnd(),d._state===Pr.IDLE&&h()),l.idleBegin=h},set idleEnd(h){l.idleEnd=h}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==Pr.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}frame(n){this._startFrameTaskTimes();const o=this._updateBudget(n);if(o){const l=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-l)}else this._recordFrameTaskTimes(0);return o}_updateBudget(n){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=lwe,l=n.frameDuration,d=vz;switch(this.state){case Pr.IDLE:o=0,l=Math.max(dwe,n.frameDuration),d=uwe;break;case Pr.INTERACTING:l=Math.max(cwe,n.frameDuration);case Pr.ANIMATING:}return l=l-n.elapsedFrameTime-o,this.state!==Pr.IDLE&&l<vz&&!this._forceTask?(this._forceTask=!0,!1):(l=Math.max(l,d),this._budget.reset(l,this.state),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Pr.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case Pr.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n),this._updatingChanged()}_updateTask(n){this._tasks.forAll(o=>{o.name===n&&o.setPriority(n)})}_getState(n){if(this._runQueue.some(l=>l.name===n))return Vd.SCHEDULED;let o=Vd.IDLE;return this._tasks.forAll(l=>{l.name===n&&l.needsUpdate&&(l.schedulePriority<=1?o=Vd.READY:o!==Vd.READY&&(o=Vd.WAITING))}),o}_getRuntime(n){let o=0;return this._tasks.forAll(l=>{l.name===n&&(o+=l.runtime)}),o}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(l=>{l.needsUpdate&&n.set(l.name,(n.get(l.name)||0)+1)}),n.size===0)return null;let o="";return n.forEach((l,d)=>{o+=l>1?` ${l}x ${d}`:` ${d}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((o,l)=>l.needsUpdate?++o:o,0);this._load=this._load*bz+n*(1-bz)}_schedule(){for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===Gn&&n.needsUpdate&&!this._runQueue.includes(n)&&n.blockFrame!==this._frameNumber&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,o=0;if(this._tasks.forAll(l=>{l.needsUpdate&&l.schedulePriority!==0&&l.basePriority!==Gn&&l.blockFrame!==this._frameNumber&&(n=!0,o=Math.max(o,l.basePriority),l.schedulePriority===1?(l.schedulePriority=0,this._runQueue.push(l)):--l.schedulePriority)}),!n)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const n=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===HJ&&(o.blockFrame=this._frameNumber)}catch(d){ae.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,d),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,st.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const l=this._budget.now()-n;if(o.runtime+=l,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+l),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const n of Object.keys(st))this._frameTaskTimes.set(st[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((o,l)=>this.performanceInfo.tasks.get(l).push(o)),this.performanceInfo.total.push(n)}get test(){return this._test}}e.Scheduler=t;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(n,o,l){this._scheduler=n,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new nwe,this._handles=new Gy,this._basePriority=gz(o),this.schedulePriority=this._basePriority,this._task=Ry(l??this._queue),this._handles.add(qs(()=>this.task.running,d=>n.taskRunningChanged(d)))}remove(){this.processQueue(WJ),this._scheduler.removeTask(this),this.schedule=_z.schedule,this.reschedule=_z.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){if(this.name===n)return;this.name=n;const o=gz(n);this._basePriority!==Gn&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,o,l){return this._queue.push(n,o,l)}reschedule(n,o,l){return this._queue.unshift(n,o,l)}processQueue(n){return this._queue.runTask(n)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Pr.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(n){return!this.done&&(n()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(n){this._enabled=n}reset(n,o){this._begin=this.now(),this._budget=n,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=r})(XE||(XE={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Vd||(Vd={}));const WJ=(()=>{const e=new XE.Budget;return e.enabled=!1,e})();let hwe=class{remove(){}processQueue(){}schedule(t,i,r){try{if(vn(i)){const s=Yt();return r?Promise.resolve(r(s)):Promise.reject(s)}return fI(t(WJ))}catch(s){return Promise.reject(s)}}reschedule(t,i,r){return this.schedule(t,i,r)}};const _z=new hwe;let pwe=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=awe(),this._schedulerHandle=qs(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||Ua(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var l,d,h;if(this._updateRequested=!1,(l=this.view)==null?void 0:l.destroyed)return;const{allLayerViews:r,graphicsView:s,labelManager:n,state:{id:o}}=this.view;r==null||r.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),(d=this.view.graphicsTileStore)==null||d.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=Pr.ANIMATING:this.view.interacting?this._scheduler.state=Pr.INTERACTING:this._scheduler.state=Pr.IDLE,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==Pr.IDLE||((h=this._frameTaskHandle)==null||h.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new aD,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=ve(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=_y(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var s;if(!t.attached)return void this.requestUpdate();const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((s=t.layerViews)==null||s.forEach(this._updateLayerView,this))}},dc=class extends M_{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=bn(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new B("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,i){i||(i=Ua(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",i)}};c([p({readOnly:!0})],dc.prototype,"done",null),c([p({readOnly:!0,type:String})],dc.prototype,"state",void 0),c([p()],dc.prototype,"target",void 0),dc=c([I("esri.views.ViewAnimation")],dc),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(dc||(dc={}));const nL=dc;let E2=class extends Me{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,i){if(!t)return void ae.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new nL;this.view.animation=r,await JT(()=>this.view.ready,i);const s={...i,animate:(i==null?void 0:i.animate)??!iJ(),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:n,spatialReference:o,size:l,viewpoint:d,constraints:h,padding:y,allLayerViews:v}=this.view,b=r1e(t,{extent:n,spatialReference:o,size:l,viewpoint:d,constraints:h,padding:y,allLayerViews:v,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(b),this._gotoTask={},s.animate?this._gotoAnimated(b,s):this._gotoImmediate(b,s)}_gotoImmediate(t,i){const r=this._gotoTask,s=this.view.animation,n=t.then(o=>{if(yi(i),r!==this._gotoTask)throw new B("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(r,s,n,i)}_gotoAnimated(t,i){const r=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=t.then(o=>{if(yi(i),r!==this._gotoTask)throw new B("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,i),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,s,n,i)}_cancellableGoTo(t,i,r,s){const n=()=>t===this._gotoTask;return ZG(r,s).finally(()=>{n()&&(i.done||i.stop())})}};c([p({constructOnly:!0})],E2.prototype,"view",void 0),E2=c([I("esri.views.2d.GoToManager")],E2);function fwe(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let s,n,o,l;const d=[0,0],h=mwe(e);for(let b=0;b<h.length;b++){const w=h[b];for(let E=0;E<w.length-1;E++){ufe(d,r,w,E);const T=b$(r,d);(s==null||T<s)&&(s=T,n=[...d],o=b,l=E)}}if(s==null||!n||o==null||l==null)throw new B("nearest-coordinate:failed","Failed to find the nearest coordinate");const[y,v]=n;return{coordinate:new rt({x:y,y:v,spatialReference:i}),distance:s}}function mwe(e){switch(e.type){case"extent":return[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]];case"polygon":return e.rings;case"polyline":return e.paths}}var oL;let Zh=oL=class extends ld.NumericIdentifiableMixin(Me){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return cd(this.geometry,this.spatialReference)}catch(e){return ae.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?I_(this.normalizedGeometry,i):qP(this.normalizedGeometry,i))return e;const{coordinate:r}=fwe(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new oL({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};c([p({constructOnly:!0})],Zh.prototype,"geometry",void 0),c([p({readOnly:!0})],Zh.prototype,"normalizedGeometry",null),c([p({constructOnly:!0})],Zh.prototype,"spatialReference",void 0),Zh=oL=c([I("esri.views.2d.constraints.GeometryConstraint")],Zh);var aL;let Cv=aL=class extends ld.NumericIdentifiableMixin(Me){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new aL({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([p()],Cv.prototype,"enabled",void 0),c([p()],Cv.prototype,"rotationEnabled",void 0),Cv=aL=c([I("esri.views.2d.constraints.RotationConstraint")],Cv);const ZJ=Cv;var lL;let Is=lL=class extends ld.NumericIdentifiableMixin(Me){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:s,maxZoom:n}=this,o=-1,l=-1,d=!1,h=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(t!=null&&t.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(y=>y.clone()),t.sort((y,v)=>v.scale-y.scale),t.forEach((y,v)=>y.level=v);for(const y of t)!d&&i>0&&i>=y.scale&&(o=y.level,d=!0),!h&&r>0&&r>=y.scale&&(l=e?e.level:-1,h=!0),e=y;s===-1&&(s=i===0?0:o),n===-1&&(n=r===0?t.length-1:l),s=Math.max(s,0),s=Math.min(s,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),s>n&&([s,n]=[n,s]),i=t[s].scale,r=t[n].scale,t.splice(0,s),t.splice(n-s+1,t.length),t.forEach((y,v)=>{this._lodByScale[y.scale]=y,this._scales[v]=y.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=e.targetGeometry,n=t&&t.targetGeometry,o=r!==0&&e.scale<r,l=i!==0&&e.scale>i;if(o||l){const d=l?i:r;if(t&&n){const h=(d-t.scale)/(e.scale-t.scale);s.x=n.x+(s.x-n.x)*h,s.y=n.y+(s.y-n.y)*h}e.scale=d}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.floor(e),r=Math.ceil(e);return t[i]+(e-i)*(t[r]-t[i])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(i=t[s],r=t[s+1],r===e)return s+this.effectiveMinZoom+1;if(i>e&&r<e)return s+this.effectiveMinZoom+1-(e-r)/(i-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new lL({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};c([p({readOnly:!0})],Is.prototype,"effectiveLODs",void 0),c([p({readOnly:!0})],Is.prototype,"effectiveMinZoom",void 0),c([p({readOnly:!0})],Is.prototype,"effectiveMaxZoom",void 0),c([p({readOnly:!0})],Is.prototype,"effectiveMinScale",void 0),c([p({readOnly:!0})],Is.prototype,"effectiveMaxScale",void 0),c([p()],Is.prototype,"lods",void 0),c([p()],Is.prototype,"minZoom",void 0),c([p()],Is.prototype,"maxZoom",void 0),c([p()],Is.prototype,"minScale",void 0),c([p()],Is.prototype,"maxScale",void 0),c([p()],Is.prototype,"snapToZoom",void 0),Is=lL=c([I("esri.views.2d.constraints.ZoomConstraint")],Is);const YJ=Is,ywe={base:null,key:"type",typeMap:{extent:Jt,polygon:Xo}};let Mi=class extends Me{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new _e}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,i,r;return`${(t=this._zoom)==null?void 0:t.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===t.spatialReference?t:new Zh({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new ZJ({rotationEnabled:this.rotationEnabled})}get _zoom(){var d;const t=this._get("_zoom"),i=this.lods||((d=this.view)==null?void 0:d.constraintsInfo.lods),r=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,l=this.snapToZoom;return t&&t.lods===i&&t.minZoom===r&&t.maxZoom===s&&t.minScale===n&&t.maxScale===o&&t.snapToZoom===l?t:new YJ({lods:i,minZoom:r,maxZoom:s,minScale:n,maxScale:o,snapToZoom:l})}canZoomInTo(t){const i=this.effectiveMaxScale;return i===0||t>=i}canZoomOutTo(t){const i=this.effectiveMinScale;return i===0||t<=i}constrain(t,i){return this._zoom.constrain(t,i),this._rotation.constrain(t,i),this._geometry.constrain(t,i),this.customConstraints.forEach(r=>r.constrain(t,i)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};c([p({readOnly:!0})],Mi.prototype,"effectiveLODs",null),c([p({readOnly:!0})],Mi.prototype,"effectiveMinScale",null),c([p({readOnly:!0})],Mi.prototype,"effectiveMaxScale",null),c([p({readOnly:!0})],Mi.prototype,"effectiveMinZoom",null),c([p({readOnly:!0})],Mi.prototype,"effectiveMaxZoom",null),c([p({types:ywe,value:null})],Mi.prototype,"geometry",null),c([p({type:[$c]})],Mi.prototype,"lods",void 0),c([p()],Mi.prototype,"minScale",void 0),c([p()],Mi.prototype,"maxScale",void 0),c([p()],Mi.prototype,"minZoom",void 0),c([p()],Mi.prototype,"maxZoom",void 0),c([p()],Mi.prototype,"rotationEnabled",void 0),c([p()],Mi.prototype,"snapToZoom",void 0),c([p({type:_e})],Mi.prototype,"customConstraints",void 0),c([p()],Mi.prototype,"view",void 0),c([p({readOnly:!0})],Mi.prototype,"version",null),c([p({type:Zh,readOnly:!0})],Mi.prototype,"_geometry",null),c([p({type:ZJ})],Mi.prototype,"_rotation",null),c([p({readOnly:!0,type:YJ})],Mi.prototype,"_zoom",null),Mi=c([I("esri.views.2d.MapViewConstraints")],Mi);const wz=Mi;let Br=class extends Me{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([ve(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Na)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new rt({x:t[0],y:t[1],spatialReference:i})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let i;try{i=this._project(t,this.state.spatialReference)}catch(s){return void ae.getLogger(this).error(new B("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:s}))}const r=this.viewpoint;eL(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void ae.getLogger(this).error(new B("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(t,this.state.spatialReference)}catch(s){return void ae.getLogger(this).error(new B("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const r=this.viewpoint;o1e(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const i=this.viewpoint;y1e(i,i,t),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;pz(i,i,t),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var n;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?r=new B("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(r=new B("mapview:invalid-viewpoint","geometry not defined"))}catch(o){r=new B("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(r)return void ae.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const s=new Xn({targetGeometry:new rt,scale:0,rotation:0});Kr(s,i),(n=this.constraints)==null||n.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var s,n;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const i=((s=this.constraints)==null?void 0:s.zoomToScale(t))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;pz(r,r,i),this.viewpoint=r,this._set("zoom",((n=this.constraints)==null?void 0:n.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),l=this._get("rotation"),d=this._get("viewpoint"),h=this._get("zoom"),y=h!=null&&r!=null&&r.zoomToScale(h)||void 0;let v,b,w;const E=d==null?void 0:d.rotation,T=d==null?void 0:d.targetGeometry;(T==null?void 0:T.type)==="extent"?v=T:(T==null?void 0:T.type)==="point"&&(b=T,w=d==null?void 0:d.scale);const $=n??v;return{center:s??b??($==null?void 0:$.center),rotation:l??E,scale:(o??y??w??($&&S$($,[t[0]-i.left-i.right,t[1]-i.top-i.bottom])))||void 0}}startup(t,i,r,s){var o;const n=t.targetGeometry;try{this._project(t,r)}catch(l){ae.getLogger(this).warn(new Qn("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:r,error:l})),t.targetGeometry=s||new rt({x:0,y:0,spatialReference:r})}(o=this.constraints)==null||o.fit(t),this._set("state",new aD({padding:this.padding,size:i,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,i],spatialReference:r,rotation:s,scale:n}=this.state.paddedViewState,o=new rt({x:t,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(t){var d;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const h=i.viewpoint.clone();h.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=h}const r=i.clone(),[s,n]=i.center;let o=null;try{o=this._project(new rt({x:s,y:n,spatialReference:i.spatialReference}),t)}catch(h){VP()||ae.getLogger(this).warn(new Qn("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:h}))}o||(o=new rt({x:0,y:0,spatialReference:t}));const l=eL(new Xn({targetGeometry:new rt,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=l;try{const y=[i.size[0]/2,i.size[1]/2],v=[y[0]+20,y[1]],b=i.toMap([0,0],v),{x:w,y:E}=this._project(new rt({x:b[0],y:b[1],spatialReference:i.spatialReference}),t);b[0]=w,b[1]=E,r.toScreen(b,b);const T=p1e(y,b,v),$=Math.hypot(b[0]-y[0],b[1]-y[1])/20;!Number.isFinite($)||Math.abs($)>4?(l.rotation=0,l.targetGeometry=new rt({x:0,y:0,spatialReference:t})):(l.scale*=$,l.scale>Y("mapview-srswitch-adjust-rotation-scale-threshold")?l.rotation=0:l.rotation+=Number.isFinite(T)?T:0)}catch{}(d=this._get("constraints"))==null||d.constrain(l,void 0),this._get("state").viewpoint=l}resize(t,i){var o;if(!this.ready)return;const r=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();r.size=[t,i],m1e(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=((o=this.constraints)==null?void 0:o.constrain(s,void 0))??s,this.state.viewpoint=s}toMap(t){if(!this.ready)return null;const i=[0,0],[r,s]=this.state.toMap(i,[t.x,t.y]),n=this.state.spatialReference;return new rt({x:r,y:s,spatialReference:n})}toScreen(t,i){if(!this.ready)return null;const r=this._project(t,this.state.spatialReference),s=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),Er(s[0],s[1])}_project(t,i){var n;const r=(t==null?void 0:t.targetGeometry)||t;if(!i)return t;if(!r)return null;if(i.imageCoordinateSystem||(n=r.spatialReference)!=null&&n.imageCoordinateSystem||cr(i,r.spatialReference))return t;const s=cd(r,i);if(!s)throw new B("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return gwe(t)?(t.targetGeometry=s,t):s}};function gwe(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}c([p({type:rt})],Br.prototype,"center",null),c([p()],Br.prototype,"constraints",void 0),c([p({type:Jt})],Br.prototype,"extent",null),c([p({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Br.prototype,"padding",null),c([p()],Br.prototype,"ready",void 0),c([p()],Br.prototype,"resizeAlign",void 0),c([p({readOnly:!0})],Br.prototype,"resolution",null),c([p({type:Number})],Br.prototype,"rotation",null),c([p({type:Number})],Br.prototype,"scale",null),c([p({readOnly:!0})],Br.prototype,"state",void 0),c([p({type:Xn})],Br.prototype,"viewpoint",null),c([p({readOnly:!0})],Br.prototype,"visibleArea",null),c([p()],Br.prototype,"zoom",null),Br=c([I("esri.views.2d.ViewStateManager")],Br);function JJ(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}function XJ(e,t){return t.some(i=>JJ(e,i))}function Sz(e,{dragPrimary:t,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:t},{key:"secondary",value:i},{key:"tertiary",value:r}].filter(s=>s.value===e).map(s=>s.key)}let Ez=class extends dr{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){JJ(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},vwe=class extends dr{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:s,delta:n}=i,{view:o}=this,{mapViewNavigation:l}=o;switch(s){case"begin":{const{scale:d}=o;this._startScale=d,this._currentScale=d,this._previousDelta=n,l.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const d=1.015**n.y,h=this._startScale*d,y=h/this._currentScale;l.setViewpointImmediate(y),this._currentScale=h;break}case"end":{const{constraints:d}=o,{effectiveLODs:h,snapToZoom:y}=d;if(!y||!h)return void l.end();const v=d.snapScale(this._currentScale),b=(n.y>0?Math.max(v,d.snapToPreviousScale(this._startScale)):Math.min(v,d.snapToNextScale(this._startScale)))/this._currentScale;l.zoom(b).then(()=>{l.end()});break}}}},T$=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var i,r;this._startEvent=t,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},bwe=class extends dr{constructor(t,i,r){super(!0),this.view=t,this.pointerActions=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new T$({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&XJ(r.data,this.pointerActions)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},_we=class extends dr{constructor(t,i,r){super(!0),this._view=t,this.pointerActions=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new T$({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&XJ(o.data,this.pointerActions)}),this.registerIncoming("drag",r,n=>this._dragEventSeparator.handle(n))}};function QJ(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function wwe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Swe(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function Ewe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function KJ(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function eX(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function tX(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function Twe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function $we(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function xwe(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function Mwe(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function Awe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function Iwe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function Cwe(e,t=0,i=1){return e[0]=Math.min(Math.max(e[0],t),i),e[1]=Math.min(Math.max(e[1],t),i),e[2]=Math.min(Math.max(e[2],t),i),e}function Owe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function iX(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function Lwe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function rX(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}function sX(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return i*i+r*r+s*s}function nX(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function Rwe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Pwe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function uL(e,t){const i=t[0],r=t[1],s=t[2];let n=i*i+r*r+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function oX(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function kwe(e,t,i){const r=t[0],s=t[1],n=t[2],o=i[0],l=i[1],d=i[2];return e[0]=s*d-n*l,e[1]=n*o-r*d,e[2]=r*l-s*o,e}function Dwe(e,t,i){const r=t[0],s=t[1],n=t[2],o=i[0],l=i[1],d=i[2],h=s*d-n*l,y=n*o-r*d,v=r*l-s*o,b=Math.sqrt(h*h+y*y+v*v);return e[0]=h/b,e[1]=y/b,e[2]=v/b,e}function Nwe(e,t,i,r){const s=t[0],n=t[1],o=t[2];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e[2]=o+r*(i[2]-o),e}function Fwe(e,t,i,r,s,n){const o=n*n,l=o*(2*n-3)+1,d=o*(n-2)+n,h=o*(n-1),y=o*(3-2*n);return e[0]=t[0]*l+i[0]*d+r[0]*h+s[0]*y,e[1]=t[1]*l+i[1]*d+r[1]*h+s[1]*y,e[2]=t[2]*l+i[2]*d+r[2]*h+s[2]*y,e}function Vwe(e,t,i,r,s,n){const o=1-n,l=o*o,d=n*n,h=l*o,y=3*n*l,v=3*d*o,b=d*n;return e[0]=t[0]*h+i[0]*y+r[0]*v+s[0]*b,e[1]=t[1]*h+i[1]*y+r[1]*v+s[1]*b,e[2]=t[2]*h+i[2]*y+r[2]*v+s[2]*b,e}function zwe(e,t=1){const i=QT,r=2*i()*Math.PI,s=2*i()-1,n=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(r)*n,e[1]=Math.sin(r)*n,e[2]=s*t,e}function jwe(e,t,i){const r=t[0],s=t[1],n=t[2];return e[0]=i[0]*r+i[4]*s+i[8]*n+i[12],e[1]=i[1]*r+i[5]*s+i[9]*n+i[13],e[2]=i[2]*r+i[6]*s+i[10]*n+i[14],e}function Uwe(e,t,i){const r=t[0],s=t[1],n=t[2];return e[0]=r*i[0]+s*i[3]+n*i[6],e[1]=r*i[1]+s*i[4]+n*i[7],e[2]=r*i[2]+s*i[5]+n*i[8],e}function Gwe(e,t,i){const r=i[0],s=i[1],n=i[2],o=i[3],l=t[0],d=t[1],h=t[2],y=s*h-n*d,v=n*l-r*h,b=r*d-s*l,w=s*b-n*v,E=n*y-r*b,T=r*v-s*y,$=2*o;return e[0]=l+y*$+2*w,e[1]=d+v*$+2*E,e[2]=h+b*$+2*T,e}function qwe(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[0],n[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),n[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}function Bwe(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),n[1]=s[1],n[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}function Hwe(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),n[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),n[2]=s[2],e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}function Wwe(e,t){uL(Tz,e),uL($z,t);const i=oX(Tz,$z);return i>1?0:i<-1?Math.PI:Math.acos(i)}const Tz=nd(),$z=nd();function Zwe(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Ywe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Jwe(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],n=t[0],o=t[1],l=t[2],d=bs();return Math.abs(i-n)<=d*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-l)<=d*Math.max(1,Math.abs(s),Math.abs(l))}function Xwe(e,t,i){const r=i[0]-t[0],s=i[1]-t[1],n=i[2]-t[2];let o=r*r+s*s+n*n;return o>0?(o=1/Math.sqrt(o),e[0]=r*o,e[1]=s*o,e[2]=n*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const Qwe=KJ,Kwe=eX,eSe=tX,tSe=rX,iSe=sX,rSe=QJ,sSe=nX;Object.freeze(Object.defineProperty({__proto__:null,abs:xwe,add:Ewe,angle:Wwe,bezier:Vwe,ceil:Twe,clamp:Cwe,copy:wwe,cross:kwe,crossAndNormalize:Dwe,direction:Xwe,dist:tSe,distance:rX,div:eSe,divide:tX,dot:oX,equals:Jwe,exactEquals:Ywe,floor:$we,hermite:Fwe,inverse:Pwe,len:rSe,length:QJ,lerp:Nwe,max:Iwe,min:Awe,mul:Kwe,multiply:eX,negate:Rwe,normalize:uL,random:zwe,rotateX:qwe,rotateY:Bwe,rotateZ:Hwe,round:Owe,scale:iX,scaleAndAdd:Lwe,set:Swe,sign:Mwe,sqrDist:iSe,sqrLen:sSe,squaredDistance:sX,squaredLength:nX,str:Zwe,sub:Qwe,subtract:KJ,transformMat3:Uwe,transformMat4:jwe,transformQuat:Gwe},Symbol.toStringTag,{value:"Module"}));function go(e){let t=e*e;return e<0&&(t*=-1),t}function nSe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function oSe(e,t,i){const r=i,s=e.state,n=e.device,o=t.tiltDirection==="forward-down"?1:-1,l=1;return n.deviceType==="standard"?(r.translation[0]=go(s.axes[0]),r.translation[1]=go(s.axes[1]),r.translation[2]=go(s.buttons[7])-go(s.buttons[6]),r.heading=go(s.axes[2]),r.tilt=go(s.axes[3])):n.deviceType==="spacemouse"&&(r.translation[0]=1.2*go(s.axes[0]),r.translation[1]=1.2*go(s.axes[1]),r.translation[2]=2*-go(s.axes[2]),r.heading=1.2*go(s.axes[5]),r.tilt=1.2*go(s.axes[3])),r.tilt*=o,iX(r.translation,r.translation,l),r}function aSe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let lSe=class extends dr{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Gy,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([ve(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=_y({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},yt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){var r;const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,nSe(this._transformation)):(this._currentDevice=t.data.device,oSe(t.data,this._view.navigation.gamepad,this._transformation)),(r=this._frameTask)==null||r.resume())}_frameUpdate(t){var v;const i=this._transformation;if(aSe(i))return void((v=this._frameTask)==null?void 0:v.pause());const r=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=cSe*s*t;E$(r,r,[i.translation[0]*n,-i.translation[1]*n]);const o=1+i.translation[2]*dSe*t,l=this._view.constraints.rotationEnabled?-i.heading*uSe*t:0,d=this._view.size,h=[d[0]/2,d[1]];RJ(r,r,o,l,h,d);const y=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=y}};const uSe=.06,cSe=.7,dSe=6e-4;function aX(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),bt(()=>document.removeEventListener("visibilitychange",t))}let hSe=class extends dr{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const l=this._timeout===void 0,d=this._pressedKeys.size>0;l||d?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=aX(s=>s?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const i=this._currentDirection!=null;if(t!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},pSe=class extends dr{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=aX(s=>s?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_addKeysMapping(t){this._addKeyMapping(t.clockwise,"clockwise"),this._addKeyMapping(t.counterClockwise,"counterClockwise"),this._addKeyMapping(t.reset,"reset")}_addKeyMapping(t,i){for(const r of t)this._keyToDirection.set(r,i)}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection.get(t.data.key);if(this._pressed=s!=null,this._pressed){if(t.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var Bm;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Bm||(Bm={}));let fSe=class extends dr{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=Bm.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=Bm.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:n}=this.view;let o=null;switch(s){case Bm.IN:o=n.zoomIn();break;case Bm.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),t.stopPropagation()}};const mSe=.6;let ySe=class extends dr{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:s,deltaY:n}=t.data,o=1/mSe**(1/60*n),l=i.zoom(o,[r,s]);l&&(this._canZoom=!1,l.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},gSe=class extends dr{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new T$({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function xz(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value||1:0),axes:t.axes.map(i=>_Se(i,e.axisThreshold))}:{buttons:[],axes:[]}}function vSe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function bSe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function _Se(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}let wSe=class{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,l=o.index,d=this._inputDevices[l];d&&(this._emitGamepadEvent(o,xz(d),!1),this._inputDevices.splice(l,1),this._latestUpdate.splice(l,1),this._input.gamepad.devices.remove(d),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(Mz(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new Jk(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=_y({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;Mz(s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],l=xz(n),d=r||bSe(l);o&&(o.timestamp===s.timestamp||!o.active&&d||vSe(o.state,l))||this._emitGamepadEvent(s,l,!d)})}_emitGamepadEvent(t,i,r){const s=this._latestUpdate[t.index],n=s&&s.active;if(!n&&!r)return;const o=!n&&r?"start":n&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:o})}};function SSe(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function Mz(e){for(const t of navigator.getGamepads())SSe(t)&&e(t)}const Az=Y("edge"),ESe=Y("chrome"),TSe=Y("ff"),$Se=Y("safari"),Iz="esri-view-surface",kf={touchNone:`${Iz}--touch-none`,touchPan:`${Iz}--touch-pan`};let lX=class uX{constructor(t,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new wSe(t,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>this._releasePointerCaptureSafe(t)),this._activePointerCaptures.clear(),this._gamepadSource=Zt(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(aA[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&aA[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(aA[i],r),this._active[i]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1)}setPointerCapture(t,i){i?this._setPointerCaptureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?kf.touchNone:kf.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?kf.touchPan:kf.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(kf.touchNone),this._element.classList.remove(kf.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=QY(this._element,t);return uX.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const{key:r}=i;r&&t==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&Y("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:Az&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}Az?r*=.7:ESe||$Se?r*=.6:TSe&&(r*=1.375);const s=100,n=Math.abs(r);n>s&&(r=r/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,o)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};lX.test={disableSubpixelCoordinates:!1};const aA={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let xSe=class extends dr{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const kr={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function QE(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function MSe(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function ASe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Er()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[L,R]=e,[N,j]=[R.x-L.x,R.y-L.y];return t.radius=Math.sqrt(N*N+j*j)/2,t.center.x=(L.x+R.x)/2,t.center.y=(L.y+R.y)/2,t}let i=0,r=0;for(let L=0;L<e.length;L++)i+=e[L].x,r+=e[L].y;i/=e.length,r/=e.length;const s=e.map(L=>L.x-i),n=e.map(L=>L.y-r);let o=0,l=0,d=0,h=0,y=0,v=0,b=0;for(let L=0;L<s.length;L++){const R=s[L],N=n[L],j=R*R,V=N*N;o+=j,l+=V,d+=R*N,h+=j*R,y+=V*N,v+=R*V,b+=N*j}const w=.5*(h+v),E=.5*(y+b),T=o*l-d*d,$=(w*l-E*d)/T,A=(o*E-d*w)/T,O=Er($+i,A+r);return{radius:Math.sqrt($*$+A*A+(o+l)/e.length),center:O}}function hp(e){const{native:t}=e,{pointerId:i,button:r,pointerType:s}=t;return s==="mouse"?`${i}:${r}`:`${s}`}let ISe=class extends dr{constructor(t=kr.maximumDoubleClickDelay,i=kr.maximumDoubleClickDistance,r=kr.maximumDoubleTouchDelay,s=kr.maximumDoubleTouchDistance,n=qy){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Er(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new T$({start:(o,l)=>this._dragStart(o,l),update:(o,l)=>this._dragUpdate(l),end:(o,l)=>this._dragEnd(l)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=ui(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=ui(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:n}=r;this._dragStartCenter=n;const o=lA("begin",Er(0,0),r);this._doubleTapDrag.emit(o,void 0,s),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,n=lA("update",Er(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,n=lA("end",Er(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=hp(i),s=this._pointerState.get(r),{pointerType:n}=i.native;if(s){const o=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),QE(s.event.data,i)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,s=hp(i),n=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function lA(e,t,i){const{button:r,buttons:s,pointer:n,pointers:o,pointerType:l,timestamp:d}=i;return{action:e,delta:t,button:r,buttons:s,pointer:n,pointers:o,pointerType:l,timestamp:d}}let CSe=class extends dr{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,s){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:OSe(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=Xw(this._activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const n=T2(s,cX(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this._activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=Xw(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=Xw(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=T2(r,i)-t,r.lastAngle=T2(r,i)-t})}_emitEvent(t,i,r){const s=Xw(this._activePointerMap);this._drag.emit(this._createPayload(t,i,s,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,s=t.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function cX(e){const t=[];return e.forEach(i=>{t.push(Er(i.event.x,i.event.y))}),ASe(t)}function Xw(e){const t=cX(e);let i=0;return e.forEach(r=>{let s=T2(r,t),n=s-r.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=r.lastAngle+n,r.lastAngle=s;const o=s-r.initialAngle;i+=o}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function OSe(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function T2(e,t){const i=e.event,r=i.x-t.center.x,s=i.y-t.center.y;return Math.atan2(s,r)}var Cz;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(Cz||(Cz={}));let LSe=class extends dr{constructor(t=kr.maximumDoubleClickDelay,i=kr.maximumDoubleClickDistance,r=kr.maximumDoubleTouchDelay,s=kr.maximumDoubleTouchDistance,n=qy){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=hp(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,r=hp(i),s=this._pointerState.get(r);if(s&&s.downButton===i.native.button){const n=s.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),QE(n,t.data)>o?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,n.modifiers),this._removeState(i))):QE(s,t.data)>o?this._removeState(i):this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){const i=hp(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},RSe=class extends dr{constructor(t=kr.maximumClickDelay,i=kr.movementUntilMouseDrag,r=kr.movementUntilPenDrag,s=kr.movementUntilTouchDrag,n=kr.holdDelay,o=qy){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=s,this._holdDelay=n,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",l=>this._handlePointerDown(l)),this.registerIncoming("pointer-up",l=>this._handlePointerLoss(l,"pointer-up")),this.registerIncoming("pointer-capture-lost",l=>this._handlePointerLoss(l,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",l=>this._handlePointerLoss(l,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",l=>this._handlePointerMove(l)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=ui(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const l=o.previousEvent;this._pointerHold.emit(l,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const n={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,n),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(Qw("update",s,i),void 0,s.modifiers):MSe(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),s.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(Qw("start",s,i)):this._pointerDrag.emit(Qw("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,s=r.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(Qw("end",n,i==="pointer-up"?r:n.previousEvent),void 0,n.modifiers):i==="pointer-up"&&n.downButton===r.native.button&&t.timestamp-n.startTimestamp<=this._maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function Qw(e,t,i){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:i}}let PSe=class extends dr{constructor(t=kr.maximumDoubleClickDelay,i=kr.maximumDoubleClickDistance,r=kr.maximumDoubleTouchDelay,s=kr.maximumDoubleTouchDistance,n=qy){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",o=>this._handleImmediateClick(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=ui(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimer=ui(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const i=t.data,{pointerType:r}=i.native,s=kSe(i);if(!this._pointerState.has(s))return void this._startClick(t);const n=this._pointerState.get(s),{data:o,modifiers:l}=n.event,d=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;QE(o,i)>d?(this._clearDoubleClickTimer(s,!0),this._startClick(t)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,l))}_handlePointerDown(t){const i=hp(t.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:r}}=i,s=hp(i),n=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function kSe(e){const{pointerId:t,pointerType:i,button:r}=e.native;return i==="mouse"?`${t}:${r}`:`${i}`}const Kw={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},Oz=Symbol("handles");let yh=class extends Me{initialize(){const t=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([qs(()=>!t(),()=>this._disconnect()),qs(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(Oz),this._inputManager=Zt(this._inputManager)}_connect(){const t=this.view.surface,i=new lX(t,this.view.input),r=[new LSe,new RSe,new PSe,new CSe(this.view.navigation),new ISe],s=new Pn({eventSource:i,recognizers:r}),n=new bwe(this.view,["primary"]),o=new _we(this.view,["secondary"]);s.installHandlers("prevent-context-menu",[new xSe],Uc.INTERNAL),s.installHandlers("navigation",[new gSe(this.view),new lSe(this.view),new ySe(this.view),new Ez(this.view),new Ez(this.view,[Kw.counter]),n,new hSe(this.view,Kw.pan),new fSe(this.view,Kw.zoom),new pSe(this.view,Kw.rotate),o,new vwe(this.view,"touch")],Uc.INTERNAL),this.view.viewEvents.connect(s),this._source=i,this._inputManager=s,this.addHandles([ve(()=>{var l,d;return(d=(l=this.view)==null?void 0:l.navigation)==null?void 0:d.browserTouchPanEnabled},l=>{this._source&&(this._source.browserTouchPanningEnabled=!l)},yt),ve(()=>{const{actionMap:l}=this.view.navigation;return{panActions:Sz("pan",l),rotateActions:Sz("rotate",l)}},({panActions:l,rotateActions:d})=>{n.pointerActions=l,o.pointerActions=d},ks)],Oz)}get test(){}};c([p()],yh.prototype,"view",void 0),c([p()],yh.prototype,"latestPointerType",null),c([p()],yh.prototype,"latestPointerLocation",null),c([p()],yh.prototype,"multiTouchActive",null),yh=c([I("esri.views.2d.input.MapViewInputManager")],yh);const DSe=yh,Lz=160;let Ov=class extends Me{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=Lz&&this.clear()},Lz))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};c([p()],Ov.prototype,"_timer",void 0),c([p()],Ov.prototype,"stationary",null),Ov=c([I("esri.views.2d.support.StationaryManager")],Ov);const NSe=e=>{let t=class extends e{constructor(...i){super(...i),this.fullOpacity=1,this.stateManager=new Br({constraints:new wz({view:this})}),this.goToManager=new E2({view:this}),this.stationaryManager=new Ov,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new pwe(this),this.inputManager=new DSe({view:this}),this.viewEvents=new XY(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([ve(()=>this.viewpoint,()=>this.stationaryManager.flip(),Na),this.on("resize",r=>this.stateManager.resize(r.width,r.height))])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var i;return((i=this.stateManager)==null?void 0:i.extent)??null}set extent(i){this.stateManager.extent=i}get state(){return this.stateManager.state}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}set animation(i){const r=this._get("animation");if(i===r)return;if(r&&r.stop(),i!==this.animationManager.animation&&this.animationManager.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i);const s=()=>{var n;this.destroyed||i===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame())};i.when(s,s)}get constraints(){var i;return(i=this.stateManager)==null?void 0:i.constraints}set constraints(i){i.view=this;const r=this.stateManager.constraints;this.stateManager.constraints=i,r==null||r.destroy()}get padding(){var i;return(i=this.stateManager)==null?void 0:i.padding}set padding(i){this.stateManager&&(this.stateManager.padding=i)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(i){this.stateManager.resizeAlign=i}get rotation(){return this.stateManager.rotation??0}set rotation(i){const{rotationEnabled:r}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=i,this.constraints.rotationEnabled=r}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(i){this.stateManager.viewpoint=i,this.frameTask.requestFrame()}on(i,r,s,n){return this.inputManager&&this.viewEvents.on(i,r,s,n)||super.on(i,r)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}goTo(i,r){return this.goToManager.goTo(i,r)}};return c([p({readOnly:!0})],t.prototype,"animationManager",void 0),c([p({readOnly:!0})],t.prototype,"fullOpacity",void 0),c([p()],t.prototype,"stateManager",void 0),c([p()],t.prototype,"constraintsInfo",null),c([p()],t.prototype,"extent",null),c([p()],t.prototype,"goToManager",void 0),c([p({readOnly:!0})],t.prototype,"state",null),c([p({readOnly:!0})],t.prototype,"mapViewNavigation",void 0),c([p()],t.prototype,"renderingOptions",void 0),c([p({readOnly:!0})],t.prototype,"interacting",null),c([p()],t.prototype,"stationary",null),c([p()],t.prototype,"animation",null),c([p({type:wz})],t.prototype,"constraints",null),c([p({readOnly:!0})],t.prototype,"inputManager",void 0),c([p()],t.prototype,"padding",null),c([p()],t.prototype,"resizeAlign",null),c([p()],t.prototype,"rotation",null),c([p({readOnly:!0})],t.prototype,"viewEvents",void 0),c([p({type:Xn})],t.prototype,"viewpoint",null),t=c([I("esri.views.Viewport2DMixin")],t),t};let Rz=class{constructor(t){this._view=t,this.viewpoint=new Xn({targetGeometry:new rt,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,i]=this._view.size;return Math.sqrt(t*t+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return OJ(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,i){i.pan=wB(this.center,t.center);let r=Math.abs(t.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=ZT(r),i.sourceZoom=this.scale,i.targetZoom=t.scale}interpolate(t,i,r){const{pan:s,rotate:n,zoom:o,zoomOffset:l}=r,{center:d}=this;d.spatialReference=t.center.spatialReference,d.x=X0(t.center.x,i.center.x,s),d.y=X0(t.center.y,i.center.y,s),this.viewpoint.scale=X0(t.scale,i.scale+l,o);let h=t.rotation;const y=i.rotation;Math.abs(y-h)>=180&&(h+=360*(h<y?1:-1)),this.viewpoint.rotation=X0(h,y,n)}copyFrom(t){Kr(this.viewpoint,t.viewpoint),this._view=t.view}};function A0(e,t,i,r){const s=3*e,n=3*(i-e)-s,o=1-s-n,l=3*t,d=3*(r-t)-l,h=1-l-d;function y(E){return((o*E+n)*E+s)*E}function v(E){return((h*E+d)*E+l)*E}function b(E){return(3*o*E+2*n)*E+s}function w(E,T){let $,A,O,L,R,N;for(O=E,N=0;N<8;N++){if(L=y(O)-E,Math.abs(L)<T)return O;if(R=b(O),Math.abs(R)<1e-6)break;O-=L/R}if($=0,A=1,O=E,O<$)return $;if(O>A)return A;for(;$<A;){if(L=y(O),Math.abs(L-E)<T)return O;E>L?$=O:A=O,O=.5*(A-$)+$}return O}return function(E,T=1e-6){return v(w(E,T))}}const qn={};qn.ease=A0(.25,.1,.25,1),qn.linear=A0(0,0,1,1),qn.easeIn=qn["ease-in"]=A0(.42,0,1,1),qn.easeOut=qn["ease-out"]=A0(0,0,.58,1),qn.easeInOut=qn["ease-in-out"]=A0(.42,0,.58,1);const FSe=e=>e,$$=e=>e*e,lD=e=>1-$$(1-e),VSe=e=>e<.5?$$(2*e)/2:(lD(2*(e-.5))+1)/2,uD=e=>e*e*e,dX=e=>1-uD(1-e),zSe=e=>e<.5?uD(2*e)/2:(dX(2*(e-.5))+1)/2,cD=e=>e*e*e*e,hX=e=>1-cD(1-e),jSe=e=>e<.5?cD(2*e)/2:(hX(2*(e-.5))+1)/2,dD=e=>e*e*e*e*e,pX=e=>1-dD(1-e),USe=e=>e<.5?dD(2*e)/2:(pX(2*(e-.5))+1)/2,hD=e=>1-Math.cos(e*Math.PI/2),fX=e=>1-hD(1-e),GSe=e=>e<.5?hD(2*e)/2:(fX(2*(e-.5))+1)/2,pD=e=>2**(10*(e-1)),fD=e=>1-pD(1-e),qSe=e=>e<.5?pD(2*e)/2:(fD(2*(e-.5))+1)/2,mD=e=>-(Math.sqrt(1-e*e)-1),mX=e=>1-mD(1-e),BSe=e=>e<.5?mD(2*e)/2:(mX(2*(e-.5))+1)/2;function to(e){const t=2*(e-Math.sqrt((e-1)*e)),i=t/2/e;return r=>r<i?e*r*r:t*r-t+1}function io(e,t){return(i,r)=>i<t?t*e(i/t,r):1-e((1-i)/(1-t),r)*(1-t)}const HSe=io(to(1),1),WSe=io(to(1),0),cL=io(to(1),.5),ZSe=io(to(2),1),YSe=io(to(2),0),JSe=io(to(2),.5),XSe=io(to(3),1),QSe=io(to(3),0),KSe=io(to(3),.5),e2e=io(to(4),1),t2e=io(to(4),0),i2e=io(to(4),.5),Pz={linear:FSe,"in-quad":$$,"out-quad":lD,"in-out-quad":VSe,"in-coast-quad":HSe,"out-coast-quad":WSe,"in-out-coast-quad":cL,"in-cubic":uD,"out-cubic":dX,"in-out-cubic":zSe,"in-coast-cubic":ZSe,"out-coast-cubic":YSe,"in-out-coast-cubic":JSe,"in-quart":cD,"out-quart":hX,"in-out-quart":jSe,"in-coast-quart":XSe,"out-coast-quart":QSe,"in-out-coast-quart":KSe,"in-quint":dD,"out-quint":pX,"in-out-quint":USe,"in-coast-quint":e2e,"out-coast-quint":t2e,"in-out-coast-quint":i2e,"in-sine":hD,"out-sine":fX,"in-out-sine":GSe,"in-expo":pD,"out-expo":fD,"in-out-expo":qSe,"in-circ":mD,"out-circ":mX,"in-out-circ":BSe,ease:e=>qn.ease(e),"ease-in":e=>qn.easeIn(e),"ease-out":e=>qn.easeOut(e),"ease-in-out":e=>qn.easeInOut(e)};let r2e=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const KE={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},yX={maxDuration:4e3};let s2e=class gX{constructor(t){this._createCamera=t,this.compared=new r2e,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:KE.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new gX(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,i,r){this.source!==t&&this.source.copyFrom(t),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??KE.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const i=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>bs()}get hasFov(){return Math.abs(this.compared.fov)>bs()}get hasRotate(){return this.compared.rotate>bs()}},n2e=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},o2e=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,i)=>t+i.time,0)}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),t*=this.time;let r=0,s=0;const n=this.definition,o=this.segments.reduce((l,d)=>l||d.definition.hasZoom,!1);for(let l=0;l<this.segments.length;l++){const d=this.segments[l],h=d.definition;if(t<=d.time||l===this.segments.length-1){if(this.segmentInterpolateComponentsAt(d,d.time===0?0:t/d.time,i),n.hasPan&&!isNaN(i.pan)&&isFinite(n.compared.pan)?i.pan=(r+h.compared.pan*i.pan)/n.compared.pan:i.pan=1,n.hasRotate&&!isNaN(i.rotate)&&isFinite(n.compared.rotate)?i.rotate=(s+h.compared.rotate*i.rotate)/n.compared.rotate:i.rotate=1,o&&!isNaN(i.zoom)&&isFinite(h.compared.targetZoom)){const{sourceZoom:y,targetZoom:v}=h.compared,b=i.zoom*(v-y)+y,w=this.segments[0].definition.compared.sourceZoom,E=this.segments[this.segments.length-1].definition.compared.targetZoom,T=Math.abs(v-w)>Math.abs(y-w)?v:y;i.zoomOffset=T-E,i.zoom=(b-w)/(T-w)}else i.zoom=1;return i}t-=d.time,r+=h.compared.pan,s+=h.compared.rotate}}segmentInterpolateComponentsAt(t,i,r){t.interpolateComponentsAt(i,r)}},uA=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,i=t.compared,r=i.sourceZoom,s=i.targetZoom;this._zoomSign=r>s?1:-1,this._panPixelsAtSource=i.pan*t.source.pixelsPerPanAtZoom(r);const n=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*n}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:s,hasRotate:n}=this.definition;let o=0,l=0;r&&(s&&(o=(i/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(l=this._zoomSign*(Math.log(t/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const d=this.definition.desiredPixelFlow;if(r&&s&&n){const h=o+l+o*l;this._zoomPixelFlow=o*l/h*d,this._panPixelFlow=l/h*d,this._rotatePixelFlow=o/h*d}else if(r&&s){const h=1+o;this._zoomPixelFlow=o/h*d,this._panPixelFlow=1/h*d}else if(r&&n){const h=1+l;this._zoomPixelFlow=l/h*d,this._rotatePixelFlow=1/h*d}else if(s&&n){const h=this._panPixelsAtSource/this._rotatePixels,y=1+h;this._panPixelFlow=h/y*d,this._rotatePixelFlow=1/y*d}else s?this._panPixelFlow=d:r?this._zoomPixelFlow=d:n&&(this._rotatePixelFlow=d);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const h=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=h,this._panPixelFlow/=h,this._rotatePixelFlow/=h}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/a2e:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=t*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-t-i)/(r-i)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+t*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*t*this._time)-1))/(i*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),i.zoom=this._interpolateComponentsZoom(t),i.pan=this._interpolateComponentsPan(t),i.rotate=this._interpolateComponentsRotate(t),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(t)}};const a2e=ZT(45);function l2e(e,t,i){const r=t-e.compared.sourceZoom,s=e.halfWindowPanAtZoom(r);return-e.halfWindowSize*(i.ascensionFactor*Math.LN2*e.compared.pan+s)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*s)}function u2e(e,t,i){const r=1/t,s=Math.log(e.compared.sourceZoom*r),n=1/e.desiredPixelFlow,o=1/Math.LN2,l=t-e.compared.sourceZoom,d=1/l,h=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(l))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*r*n*o*d*h-e.halfWindowSize*s*n*o*d+e.halfWindowSize*s*n*o*h/(l*l)}function c2e(e,t,i){const r=t-e.compared.sourceZoom,s=1/r,n=1/t,o=Math.log(e.compared.sourceZoom*n),l=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(r))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*l+2*s*o+2*n-2*o*l/(r*r)-l/(t*t))/(e.desiredPixelFlow*Math.LN2)}function d2e(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function h2e(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function p2e(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function f2e(e,t,i){return-e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function m2e(e,t,i){return e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function y2e(e,t,i){return-2*e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function g2e(e,t,i){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function v2e(e,t,i){const r=Math.log(t/e.compared.targetZoom),s=1/e.desiredPixelFlow,n=1/Math.LN2,o=-t+e.compared.targetZoom,l=1/o,d=(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*r*s*n*l+e.halfWindowSize*r*s*n*d/(o*o)+e.halfWindowSize*s*n*l*d/t}function b2e(e,t,i){const r=t-e.compared.targetZoom,s=1/r,n=1/t,o=Math.log(t/e.compared.targetZoom),l=(e.halfWindowPanAtZoom(t)+i.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*l-2*s*o+2*n+2*o*l/(r*r)-l/(t*t))/(e.desiredPixelFlow*Math.LN2)}function _2e(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function w2e(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function S2e(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function E2e(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const i=Math.LN2*e.compared.pan,r=t,s=e.halfWindowPanAtZoom(r),n=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*s);return e.compared.sourceZoom<=e.compared.targetZoom?n*(i-s):n*(i+s)}function T2e(e,t){let i=$2e(e,t);const r={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},s=r.ascensionFactor===0,n=r.descensionFactor===0,o=s?d2e:l2e,l=s?h2e:u2e,d=s?p2e:c2e,h=n?_2e:g2e,y=n?w2e:v2e,v=n?S2e:b2e,b=R=>o(e,R,r)+f2e(e,R,r)+h(e,R,r),w=R=>l(e,R,r)+m2e(e,R,r)+y(e,R,r),E=R=>d(e,R,r)+y2e(e,R,r)+v(e,R,r);let T=b(i);const $=E2e(e);let A;const O=t.maximumIterations||20,L=t.maximumDistance!=null?t.maximumDistance:1/0;for(A=0;A<O;A++){const R=t.desiredSlope??1e-6;let N=w(i);Math.abs(N)>R&&(N+=R);const j=N/E(i);if(isNaN(j)||i>=L&&j<0){if(!isFinite(L))return null;i=L,T=b(i);break}if(i-=j,i<e.compared.sourceZoom||i<e.compared.targetZoom)return null;const V=b(i);if(Math.abs(V-T)/T<=.005)break;T=V}return T>$*(1-.3)||i<e.compared.sourceZoom||i<e.compared.targetZoom?null:i}function $2e(e,t){const i=Math.max(e.compared.sourceZoom,e.compared.targetZoom),r=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return r<i?t.maximumDistance!=null?i+(t.maximumDistance-i)/2:1.5*i:t.maximumDistance?Math.min(t.maximumDistance,r):r}let x2e=class extends o2e{constructor(t,i){super(),this._preallocSegments=[new uA,new uA,new uA],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,i)}update(t,i){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const r=i!=null&&i.apex?T2e(t,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,i,r){t.interpolateComponentsAt(i,r),t===this._ascensionSegment?r.zoom=lD(r.zoom):t===this._descensionSegment&&(r.zoom=$$(r.zoom))}_updateWithApex(t,i){const[r,s,n]=this._preallocSegments,o=(i==null?void 0:i.ascensionFactor)??.5,l=Math.min(1-o,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),d=1-o-l;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=t,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),d>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=t,s.definition.compared.targetZoom=t,s.definition.compared.pan=this.definition.compared.pan*d,s.definition.compared.rotate=this.definition.compared.rotate*d,s.definition.segmentStart=r.definition.segmentEnd,s.definition.segmentEnd=r.definition.segmentEnd+d,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=t,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=o+d,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const M2e=new n2e;let A2e=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=cL,this.definition=new s2e(t),this.path=new x2e}update(t,i,r){this.definition.update(t,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(Rne(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?cL:fD)}cameraAt(t,i){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const r=this.path.interpolateComponentsAt(t,M2e);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(t){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(t,this._time)-i)/(r-i)}_applyTimeSettings(t,i){const r=i.speedFactor!=null?i.speedFactor:1,s=i.minDuration??KE.minDuration/r,n=i.maxDuration??KE.maxDuration/r;return t=i.duration!=null?i.duration:Math.min(Math.max(t/r,s),n)}};const I2e=2e3,C2e=64;let O2e=class{constructor(t){this._view=t,this._animation=new A2e(()=>new Rz(this._view)),this._current=new Rz(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,i,r={}){Kr(this._current.viewpoint,t),Kr(this._source.viewpoint,t),Kr(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(t,i){this._animation.cameraAt(i,this._current),Kr(t,this._current.viewpoint)}},hm=class extends Me{constructor(t){super(t),this._animation=null,this._destinationViewState=new aD,this.updateFunction=null,this.easing=Pz.ease,this.viewpoint=new Xn({targetGeometry:new rt,scale:0,rotation:0}),this._updateTask=_y({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new O2e(t.view)}destroy(){this._updateTask=ui(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,i,r){this.stop();const s=this.viewpoint;Kr(s,i);const n=t.target;this._transition.update(this.viewpoint,n,{apex:{maximumDistance:Math.min(Math.min(i.scale,n.scale)*C2e,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??yX.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:(typeof(r==null?void 0:r.easing)=="string"?Pz[r.easing]:r==null?void 0:r.easing)||this.easing}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=n,L2e(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,n,{duration:0}));const o=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const r=new nL({target:t.clone()}),s=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var r,s;const i=this.animation;if(i&&i.state!==nL.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const n=performance.now()-this._startTime,o=this._transition.duration,l=o>0?n/o:1,d=l>=1;this._transition.applyRatio(this.viewpoint,l),d&&((s=this.animation)==null||s.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function L2e(e,t,i,r){if((t==null?void 0:t.duration)!=null)return!0;const{time:s,isLinear:n}=e,o=(t==null?void 0:t.speedFactor)||1;if(s>((t==null?void 0:t.maxDuration)??yX.maxDuration/o))return!1;if(n){const d=_i(),h=Er(...r.toScreen(d,...i.center)),y=Er(...i.toScreen(d,...r.center)),v=y!=null&&y.x>-1*i.size[0]&&y.x<(1.5+.5)*i.size[0]&&y.y>-1*i.size[1]&&y.y<(1.5+.5)*i.size[1],b=h!=null&&h.x>-1*r.size[0]&&h.x<(1.5+.5)*r.size[0]&&h.y>-1*r.size[1]&&h.y<(1.5+.5)*r.size[1];if(s>I2e/o&&!v&&!b)return!1}return!0}c([p()],hm.prototype,"easing",void 0),c([p()],hm.prototype,"view",void 0),c([p()],hm.prototype,"viewpoint",void 0),hm=c([I("esri.views.2d.AnimationManager")],hm);const R2e=hm;function ei(){return Promise.all([D(()=>import("./webglDeps-NIshmyIl.js"),__vite__mapDeps([181,156,7,182,183,184])),D(()=>import("./mapViewDeps-BgTWW0Dx.js"),__vite__mapDeps([185,89,186,87,88,28,7,90,91,92,93,85,96,187,182,156,183,160,136,86,57,188,84,114,189,143,142,100,32,27,33,94,102,190,97,98,99,191,18,141,181,184,192,109,193,83,30,24,37,36,194,149,150,134,158,195,73,196,101,197,198,95,199,62,106,81,200,201,202,203,152,204,205]))])}const I0=()=>ei().then(()=>D(()=>import("./TileLayerView2D-C6-uilRT.js"),__vite__mapDeps([206,92,86,90,87,88,89,28,7,91,93,85,191,18,189,188,84,57,183,156,114,143,142,100,32,27,33,141,192,187,182,160,136,186,96,94,102,109,193,83,30,24,37,36,73,97,98,99,149,150,134,199,62,106,81,207,208,203,209,174,210,201,202,211,212,213,214]))),zd=()=>ei().then(()=>D(()=>import("./FeatureLayerView2D-BjRroi5m.js").then(e=>e.F),__vite__mapDeps([215,32,27,7,28,33,216,217,218,30,24,40,209,189,174,202,86,84,85,57,182,156,203,188,183,114,143,142,100,186,87,88,89,90,91,92,93,96,187,160,136,94,102,109,190,219,108,214,211]))),kz={"base-dynamic":()=>ei().then(()=>D(()=>import("./BaseDynamicLayerView2D-CCsV96Wm.js"),__vite__mapDeps([220,221,188,84,85,57,183,156,7,114,189,143,142,100,32,27,28,33,208,187,182,160,136,96,209,174,222,211]))),"base-tile":I0,"bing-maps":I0,catalog:()=>ei().then(()=>D(()=>import("./CatalogLayerView2D-D4raCNfR.js"),__vite__mapDeps([223,209,189,174]))),"catalog-dynamic-group":()=>ei().then(()=>D(()=>import("./CatalogDynamicGroupLayerView2D-BiTdc1bd.js"),__vite__mapDeps([224,209,189,174]))),"catalog-footprint":()=>ei().then(()=>D(()=>import("./CatalogFootprintLayerView2D-BGoxViOC.js"),__vite__mapDeps([225,215,32,27,7,28,33,216,217,218,30,24,40,209,189,174,202,86,84,85,57,182,156,203,188,183,114,143,142,100,186,87,88,89,90,91,92,93,96,187,160,136,94,102,109,190,219,108,214,211]))),csv:zd,"geo-rss":()=>ei().then(()=>D(()=>import("./GeoRSSLayerView2D-BFSnII-n.js"),__vite__mapDeps([226,209,189,174,200,201,202,86,84,85,57,182,156,7,203,188,183,114,143,142,100,32,27,28,33,186,87,88,89,90,91,92,93,96,187,160,136,94,102,199,191,18,83,30,24,37,36,62,106,81]))),feature:zd,geojson:zd,parquet:zd,graphics:()=>ei().then(()=>D(()=>import("./GraphicsLayerView2D-DUIcrXzW.js"),__vite__mapDeps([227,209,189,174,200,201,202,86,84,85,57,182,156,7,203,188,183,114,143,142,100,32,27,28,33,186,87,88,89,90,91,92,93,96,187,160,136,94,102,199,191,18,83,30,24,37,36,62,106,81]))),group:()=>ei().then(()=>D(()=>import("./GroupLayerView2D-CZ3kBI6m.js"),__vite__mapDeps([228,209,189,174]))),imagery:()=>ei().then(()=>D(()=>import("./ImageryLayerView2D-rRV4UNJ7.js"),__vite__mapDeps([229,230,156,7,57,120,188,84,85,183,114,189,143,142,100,32,27,28,33,209,174,199,87,88,89,90,91,92,93,191,18,83,86,30,24,37,36,186,96,187,182,160,136,94,102,62,106,81,210,201,202,203,221,208,222,123,216,214,211]))),"imagery-tile":()=>ei().then(()=>D(()=>import("./ImageryTileLayerView2D-DN6DVyeA.js"),__vite__mapDeps([231,232,230,156,7,57,120,188,84,85,183,114,189,143,142,100,32,27,28,33,209,174,233,197,99,182,203,234,123,216,214,211]))),kml:()=>ei().then(()=>D(()=>import("./KMLLayerView2D-BEEuUVVp.js"),__vite__mapDeps([235,236,208,189,187,182,156,7,183,160,136,96,221,188,84,85,57,114,143,142,100,32,27,28,33,209,174,200,201,202,86,203,186,87,88,89,90,91,92,93,94,102,199,191,18,83,30,24,37,36,62,106,81,123,197,99,194,181,184,149,150,134,193,158,233]))),"knowledge-graph":()=>ei().then(()=>D(()=>import("./KnowledgeGraphLayerView2D-CXL_0NGf.js"),__vite__mapDeps([237,209,189,174]))),"link-chart":()=>ei().then(()=>D(()=>import("./KnowledgeGraphLayerView2D-CXL_0NGf.js"),__vite__mapDeps([237,209,189,174]))),"knowledge-graph-sublayer":zd,"map-image":()=>ei().then(()=>D(()=>import("./MapImageLayerView2D-B06Ww192.js"),__vite__mapDeps([238,221,188,84,85,57,183,156,7,114,189,143,142,100,32,27,28,33,208,187,182,160,136,96,209,174,199,87,88,89,90,91,92,93,191,18,83,86,30,24,37,36,186,94,102,62,106,81,210,201,202,203,222,216,211,212,213,214]))),"map-notes":()=>ei().then(()=>D(()=>import("./MapNotesLayerView2D-O6YRqaBS.js"),__vite__mapDeps([239,209,189,174,200,201,202,86,84,85,57,182,156,7,203,188,183,114,143,142,100,32,27,28,33,186,87,88,89,90,91,92,93,96,187,160,136,94,102,199,191,18,83,30,24,37,36,62,106,81]))),media:()=>ei().then(()=>D(()=>import("./MediaLayerView2D-C1EU5o2I.js"),__vite__mapDeps([240,241,106,62,92,86,90,87,88,89,28,7,91,93,85,191,18,189,188,84,57,183,156,114,143,142,100,32,27,33,141,192,187,182,160,136,186,96,94,102,109,193,83,30,24,37,36,73,97,98,99,149,150,134,199,81,196,101,242,198,209,174]))),"ogc-feature":()=>ei().then(()=>D(()=>import("./OGCFeatureLayerView2D-DLfqkI1V.js"),__vite__mapDeps([243,215,32,27,7,28,33,216,217,218,30,24,40,209,189,174,202,86,84,85,57,182,156,203,188,183,114,143,142,100,186,87,88,89,90,91,92,93,96,187,160,136,94,102,109,190,219,108,214,211]))),"open-street-map":I0,"oriented-imagery":zd,route:()=>ei().then(()=>D(()=>import("./RouteLayerView2D-BIdDHVQH.js"),__vite__mapDeps([244,245,246,209,189,174,200,201,202,86,84,85,57,182,156,7,203,188,183,114,143,142,100,32,27,28,33,186,87,88,89,90,91,92,93,96,187,160,136,94,102,199,191,18,83,30,24,37,36,62,106,81]))),stream:()=>ei().then(()=>D(()=>import("./StreamLayerView2D-BRc7ps9A.js"),__vite__mapDeps([247,215,32,27,7,28,33,216,217,218,30,24,40,209,189,174,202,86,84,85,57,182,156,203,188,183,114,143,142,100,186,87,88,89,90,91,92,93,96,187,160,136,94,102,109,190,219,108,214,211]))),"subtype-group":()=>ei().then(()=>D(()=>import("./SubtypeGroupLayerView2D-C-udo2cf.js"),__vite__mapDeps([248,215,32,27,7,28,33,216,217,218,30,24,40,209,189,174,202,86,84,85,57,182,156,203,188,183,114,143,142,100,186,87,88,89,90,91,92,93,96,187,160,136,94,102,109,190,219,108,214,211]))),tile:I0,"vector-tile":()=>ei().then(()=>D(()=>import("./VectorTileLayerView2D-BwE8QlbJ.js"),__vite__mapDeps([249,141,93,73,7,91,92,90,156,142,188,84,85,57,183,114,189,143,100,32,27,28,33,203,43,144,145,209,174,211]))),video:()=>ei().then(()=>D(()=>import("./VideoLayerView2D-DYpyqkJ0.js"),__vite__mapDeps([250,251,252,242,114,188,84,85,57,183,156,7,189,143,142,100,32,27,28,33,186,87,88,89,90,91,92,93,96,187,182,160,136,86,94,102,198,209,174,200,201,202,203,199,191,18,83,30,24,37,36,62,106,81]))),wcs:()=>ei().then(()=>D(()=>import("./ImageryTileLayerView2D-DN6DVyeA.js"),__vite__mapDeps([231,232,230,156,7,57,120,188,84,85,183,114,189,143,142,100,32,27,28,33,209,174,233,197,99,182,203,234,123,216,214,211]))),"web-tile":I0,wfs:zd,wms:()=>ei().then(()=>D(()=>import("./WMSLayerView2D-C5i_7CJq.js"),__vite__mapDeps([253,221,188,84,85,57,183,156,7,114,189,143,142,100,32,27,28,33,208,187,182,160,136,96,209,174,222,211,254,216]))),wmts:()=>ei().then(()=>D(()=>import("./WMTSLayerView2D-CrPEMbhf.js"),__vite__mapDeps([255,207,208,189,187,182,156,7,183,160,136,96,188,84,85,57,114,143,142,100,32,27,28,33,203,209,174,211]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function P2e(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new B(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const Dz={hasLayerViewModule:e=>kz[e.type]!=null,importLayerView:e=>{const t=kz[e.type];if(t==null)throw P2e(e);return t(e)}};let td=class gh{static getId(t,i,r,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${s}`}constructor(t,i,r,s){this.set(t,i,r,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,s){this.set(t,i,r,s)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}containsChild(t){const i=t.level-this.level;return i>0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new gh(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[n,o,l,d]=t.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(l),this.world=parseFloat(d)}else this.level=+t,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new gh(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,i,r){const s=this.clone();return s.col+=t,s.row+=i,r.normalizeKey(s),s}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new gh(t,i,r,s),new gh(t,i,r+1,s),new gh(t,i+1,r,s),new gh(t,i+1,r+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};td.pool=new Cp(td,null,null,25,50);function Df(e,t){return[e,t]}function jd(e,t,i){return e[0]=t,e[1]=i,e}function k2e(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}const vo=new td("0/0/0/0");let D2e=class vX{static create(t,i,r=null){const s=vs(t.spatialReference),n=i.origin||Df(t.origin.x,t.origin.y),o=Df(t.size[0]*i.resolution,t.size[1]*i.resolution),l=Df(-1/0,-1/0),d=Df(1/0,1/0),h=Df(1/0,1/0);r!=null&&(jd(l,Math.max(0,Math.floor((r.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymax)/o[1]))),jd(d,Math.max(0,Math.floor((r.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymin)/o[1]))),jd(h,d[0]-l[0]+1,d[1]-l[1]+1));const{cols:y,rows:v}=i;let b,w,E,T;return!r&&y&&v&&(jd(l,y[0],v[0]),jd(d,y[1],v[1]),jd(h,y[1]-y[0]+1,v[1]-v[0]+1)),t.isWrappable?(b=Df(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/t.size[0]),h[1]),w=!0,E=s.origin,T=s.valid):(b=h,w=!1),new vX(i.level,i.resolution,i.scale,n,l,d,h,o,b,w,E,T)}constructor(t,i,r,s,n,o,l,d,h,y,v,b){this.level=t,this.resolution=i,this.scale=r,this.origin=s,this.first=n,this.last=o,this.size=l,this.norm=d,this.worldSize=h,this.wrap=y,this._spatialReferenceOrigin=v,this._spatialReferenceValid=b}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}normalizeKey(t){if(!this.wrap)return;const i=this.worldSize[0],r=t.col;r<0?(t.col=r+i,t.world-=1):r>=i&&(t.col=r-i,t.world+=1)}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const i=this.origin[0]+t*this.norm[0],r=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&r&&s?i===r[0]?s[0]:this.origin[0]===r[0]&&t===this.worldSize[0]?s[1]:i:i}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){vo.set(i);const s=r?vo.col:this.denormalizeCol(vo.col,vo.world),n=vo.row;return k2e(t,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),t}getTileCoords(t,i,r=!1){vo.set(i);const s=r?vo.col:this.denormalizeCol(vo.col,vo.world);return Array.isArray(t)?jd(t,this.getXForColumn(s),this.getYForRow(vo.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(vo.row)),t}},e_=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:i,colFrom:r,colTo:s}of this.spans)for(let n=r;n<=s;n++){const o=t.getWorldForColumn(n);yield new td(t.level,i,t.normalizeCol(n),o)}}forEach(t,i){const{spans:r,lodInfo:s}=this,{level:n}=s;if(r.length!==0)for(const{row:o,colFrom:l,colTo:d}of r)for(let h=l;h<=d;h++)t.call(i,n,o,s.normalizeCol(h),s.getWorldForColumn(h))}};e_.pool=new Cp(e_);let cA=class{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}};const ii=new td("0/0/0/0");let N2e=class bX{static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,s]=t,[n,o]=i,l=n-r,d=o-s,h=d!==0?l/d:0,y=(Math.ceil(s)-s)*h,v=(Math.floor(s)-s)*h;return new bX(r,Math.floor(s),Math.ceil(o),h,l<0?y:v,l<0?v:y,l<0?n:r,l<0?r:n)}constructor(t,i,r,s,n,o,l,d){this.x=t,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=l,this.rightBound=d}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const tn=[[0,0],[0,0],[0,0],[0,0]],F2e=1e-6;let V2e=class{constructor(t,i=null,r=t.lods[0].level,s=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=t.lods.filter(l=>l.level>=r&&l.level<=s);this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map(l=>D2e.create(t,l,i));n.forEach((l,d)=>{this._infoByLevel[l.level]=o[d],this._infoByScale[l.scale]=o[d],this.scales[d]=l.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){ii.set(i);const s=this._infoByLevel[ii.level];return s?s.getTileBounds(t,ii,r):t}getTileCoords(t,i,r=!1){ii.set(i);const s=this._infoByLevel[ii.level];return s?s.getTileCoords(t,ii,r):t}getTileCoverage(t,i=192,r=!0,s="closest"){if(!r&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=e_.pool.acquire(n),l=this._wrap;let d,h,y,v=1/0,b=-1/0;const w=o.spans;tn[0][0]=tn[0][1]=tn[1][1]=tn[3][0]=-i,tn[1][0]=tn[2][0]=t.size[0]+i,tn[2][1]=tn[3][1]=t.size[1]+i;for(const A of tn)t.toMap(A,A),A[0]=n.getColumnForX(A[0]),A[1]=n.getRowForY(A[1]);const E=[];let T=3;for(let A=0;A<4;A++){if(tn[A][1]===tn[T][1]){T=A;continue}const O=N2e.create(tn[A],tn[T]);v=Math.min(O.ymin,v),b=Math.max(O.ymax,b),E[O.ymin]===void 0&&(E[O.ymin]=[]),E[O.ymin].push(O),T=A}if(v==null||b==null||b-v>100)return null;let $=[];for(d=v;d<b;){E[d]!=null&&($=$.concat(E[d])),h=1/0,y=-1/0;for(let A=$.length-1;A>=0;A--){const O=$[A];h=Math.min(h,O.getLeftCol()),y=Math.max(y,O.getRightCol())}if(h=Math.floor(h),y=Math.floor(y),d>=n.first[1]&&d<=n.last[1])if(l)if(n.size[0]<n.worldSize[0]){const A=Math.floor(y/n.worldSize[0]);for(let O=Math.floor(h/n.worldSize[0]);O<=A;O++)w.push(new cA(d,Math.max(n.getFirstColumnForWorld(O),h),Math.min(n.getLastColumnForWorld(O),y)))}else w.push(new cA(d,h,y));else h>n.last[0]||y<n.first[0]||(h=Math.max(h,n.first[0]),y=Math.min(y,n.last[0]),w.push(new cA(d,h,y)));d+=1;for(let A=$.length-1;A>=0;A--){const O=$[A];O.ymax>=d?O.incrRow():$.splice(A,1)}}return o}getTileParentId(t){ii.set(t);const i=this._infoByLevel[ii.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(ii,this._lodInfos[r],ii),ii.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){ii.set(i);const r=this._infoByLevel[ii.level],s=t.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(ii,s,ii);const o=s.denormalizeCol(ii.col,ii.world);for(const l of t.spans)if(l.row===ii.row&&l.colFrom<=o&&l.colTo>=o)return!0}if(s.resolution<r.resolution){const[o,l,d,h]=t.spans.reduce((T,$)=>(T[0]=Math.min(T[0],$.row),T[1]=Math.max(T[1],$.row),T[2]=Math.min(T[2],$.colFrom),T[3]=Math.max(T[3],$.colTo),T),[1/0,-1/0,1/0,-1/0]),y=r.denormalizeCol(ii.col,ii.world),v=s.getColumnForX(r.getXForColumn(y)),b=s.getRowForY(r.getYForRow(ii.row)),w=s.getColumnForX(r.getXForColumn(y+1))-1,E=s.getRowForY(r.getYForRow(ii.row+1))-1;return!(v>h||w<d||b>l||E<o)}const n=s.denormalizeCol(ii.col,ii.world);return t.spans.some(o=>o.row===ii.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const s=vs(this.tileInfo.spatialReference),n=-r*(s.valid[1]-s.valid[0]);t[0]+=n,t[2]+=n}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+F2e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,s)=>Math.abs(s-t)<Math.abs(r-t)?s:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,i,r){const s=this._infoByLevel[r.level];return t.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(t.level=i.level,t.col=Math.floor(r.col*s.resolution/i.resolution+.01),t.row=Math.floor(r.row*s.resolution/i.resolution+.01)),t)}},z2e=class{constructor(t,i){this.item=t,this.controller=i,this.promise=null}},j2e=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new dy,this._controllers=new dy,this._processingItems=new dy,this._pausedSignal=Ry(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new kE(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&i&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=ui(this._schedule),this._task=ui(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const s=new AbortController;let n=null;i&&(n=Jn(i,()=>s.abort()));const o=()=>{const y=this._processingItems.get(t);y&&y.controller.abort(),l(),h.reject(Yt())},l=()=>{d.remove(),n!=null&&n.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},d=fP(s.signal,o),h=bn();return this._deferreds.set(t,h),this._controllers.set(t,s),h.promise.then(l,l),this._queue.push(t),this._scheduleNext(),h.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var i;const t=this._queue.popLast();return t&&((i=this._deferreds.get(t))==null||i.reject(Yt()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=w_(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let i;const r=new AbortController,s=new z2e(t,r);this._processingItems.set(t,s);try{i=this.process(t,r.signal)}catch(n){this._processError(s,n)}Ua(i)?(s.promise=i,i.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,i)}get test(){}};const Nz=[0,0];let Il=class extends Me{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:i,scheduler:r,priority:s}=this;this._queue=new j2e({concurrency:t,scheduler:r,priority:s,process:(n,o)=>{const l=this._keyToItem.get(n);return i(l,{signal:o})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=Zt(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const i=typeof t=="string"?t:t.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const i=t.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),s=this.tileInfoView.getTileScale(t.key),n=S_(this._tilesByScale,s,()=>new Set),o=()=>{n.delete(t.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(i)};return n.add(t.key),this._keyToItem.set(i,t),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const i=new Set;for(const o of t)i.add(this._keyToItem.get(o).key);const r=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[o,l]of this._tilesByScale)if(KG(l,d=>i.has(d))){const d=Math.abs(o-r);d<n&&(s=l,n=d)}return this._getClosestTileKey(s,t).id}_getClosestTileKey(t,i){const r=this.tileInfoView,s=this.state.center;let n,o=Number.POSITIVE_INFINITY;for(const l of t)if(i.has(l.id)){r.getTileCoords(Nz,l);const d=b$(Nz,s);d<o&&(o=d,n=l)}return n}};c([p({constructOnly:!0})],Il.prototype,"concurrency",void 0),c([p({constructOnly:!0})],Il.prototype,"priority",void 0),c([p({constructOnly:!0})],Il.prototype,"process",void 0),c([p({constructOnly:!0})],Il.prototype,"scheduler",void 0),c([p()],Il.prototype,"state",void 0),c([p({constructOnly:!0})],Il.prototype,"tileInfoView",void 0),Il=c([I("esri.views.2d.tiling.TileQueue")],Il);const wVe=Il;let U2e=class{constructor(t,i,r){this.maxSize=t,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const r=i.key.level,s=this._tileKeysPerLevel[r];Fz(this._tilePerId,t);for(let n=0;n<s.length;n++)if(s[n].id===t){s.splice(n,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(t,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==t&&(s=this._pruneAroundCenterTile(s,i,r,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,t))}_pruneAroundCenterTile(t,i,r,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return t;const{size:o,origin:l}=this._tileInfoView.tileInfo,d=r*o[0],h=r*o[1],y=[0,0],v=[0,0];for(n.sort((b,w)=>(y[0]=l.x+d*(b.col+.5),y[1]=l.y-h*(b.row+.5),v[0]=l.x+d*(w.col+.5),v[1]=l.y-h*(w.row+.5),ZE(y,i)-ZE(v,i)));n.length>0;){const b=n.pop();if(this._removeTile(b.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),Fz(this._tilePerId,t)}};function Fz(e,t){e.delete(t)}const Ud=new td(0,0,0,0),hl=new Map,C0=[],dA=[];let EVe=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new U2e(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){var A,O;const{resampling:i,tileIndex:r}=this,{scale:s,center:n,resolution:o}=t.state,{minScale:l,maxScale:d}=this.tileInfoView,h=!t.stationary&&s>this._previousScale;if(this._previousScale=s,!i&&(s>l||s<d))return this.tiles.length=0,void this.clear();const y=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!y)return this.tiles.length=0,void this.clear();const{spans:v,lodInfo:b}=y,{level:w}=b;this.tiles.length=0,r.forEach(L=>L.visible=!0);let E=0,T=0;if(v.length>0)for(const{row:L,colFrom:R,colTo:N}of v)for(let j=R;j<=N;j++){E++;const V=Ud.set(w,L,b.normalizeCol(j),b.getWorldForColumn(j)).id;let Z=r.get(V);if(Z)Z.isReady?(hl.set(V,Z),T++):h||this._addParentTile(V,hl);else{if((A=this._tileCache)!=null&&A.has(V)){if(Z=this._tileCache.pop(V),this.tileIndex.set(V,Z),Z.isReady){hl.set(V,Z),T++;continue}}else Z=this.acquireTile(Ud),this.tileIndex.set(V,Z);h||this._addParentTile(V,hl)}}const $=T===E;for(const[L,R]of r){if(hl.has(L))continue;Ud.set(L);const N=this.tileInfoView.intersects(y,Ud),j=this.cachePolicy==="purge"?Ud.level!==w:Ud.level>w;!N||!h&&$?!j&&N||C0.push(R):R.isReady?j&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Ud,w)?C0.push(R):dA.push(R):j&&C0.push(R)}for(const L of dA)L.isReady&&hl.set(L.key.id,L);for(const L of C0)this._tileCache?this._tileCache.add(L):this.releaseTile(L),r.delete(L.key.id);for(const L of hl.values())this.tiles.push(L);for(const L of r.values())hl.has(L.key.id)||(L.visible=!1);(O=this._tileCache)==null||O.prune(w,n,o),e_.pool.release(y),dA.length=0,C0.length=0,hl.clear()}clear(){const{tileIndex:t}=this;for(const i of t.values())this.releaseTile(i);t.clear()}refresh(t){var i;for(const r of this.tileIndex.values())t(r);(i=this._tileCache)==null||i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){var n;let r=t,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s==null?void 0:s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if((n=this._tileCache)!=null&&n.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s==null?void 0:s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(t,i){const r=gs();this.tileInfoView.getTileBounds(r,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<t.level){const n=gs();if(this.tileInfoView.getTileBounds(n,s.key,!0),$fe(n,r))return!0}return!1}};function G2e(e,t,i,r,s){_X(e,t,i||0,r||e.length-1,s||q2e)}function _X(e,t,i,r,s){for(;r>i;){if(r-i>600){var n=r-i+1,o=t-i+1,l=Math.log(n),d=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*d*(n-d)/n)*(o-n/2<0?-1:1);_X(e,t,Math.max(i,Math.floor(t-o*d/n+h)),Math.min(r,Math.floor(t+(n-o)*d/n+h)),s)}var y=e[t],v=i,b=r;for(O0(e,i,t),s(e[r],y)>0&&O0(e,i,r);v<b;){for(O0(e,v,b),v++,b--;s(e[v],y)<0;)v++;for(;s(e[b],y)>0;)b--}s(e[i],y)===0?O0(e,i,b):O0(e,++b,r),b<=t&&(i=b+1),t<=b&&(r=b-1)}}function O0(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function q2e(e,t){return e<t?-1:e>t?1:0}function eT(e,t){if(!(this instanceof eT))return new eT(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function B2e(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function Nf(e,t){Lv(e,0,e.children.length,t,e)}function Lv(e,t,i,r,s){s||(s=pm(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=t;o<i;o++)n=e.children[o],Rv(s,e.leaf?r(n):n);return s}function Rv(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Vz(e,t){return e.minX-t.minX}function zz(e,t){return e.minY-t.minY}function hA(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function eS(e){return e.maxX-e.minX+(e.maxY-e.minY)}function H2e(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function W2e(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,n-r)}function pA(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function tS(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function pm(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function jz(e,t,i,r,s){for(var n,o=[t,i];o.length;)(i=o.pop())-(t=o.pop())<=r||(n=t+Math.ceil((i-t)/r/2)*r,G2e(e,n,t,i,s),o.push(t,n,n,i))}eT.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!tS(e,t))return i;for(var s,n,o,l,d=[];t;){for(s=0,n=t.children.length;s<n;s++)o=t.children[s],tS(e,l=t.leaf?r(o):o)&&(t.leaf?i.push(o):pA(e,l)?this._all(o,i):d.push(o));t=d.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!tS(e,t))return!1;for(var r,s,n,o,l=[];t;){for(r=0,s=t.children.length;r<s;r++)if(n=t.children[r],tS(e,o=t.leaf?i(n):n)){if(t.leaf||pA(e,o))return!0;l.push(n)}t=l.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=pm([]),this},remove:function(e,t){if(e==null)return this;for(var i,r,s,n,o=this.data,l=this.toBBox(e),d=[],h=[];o||d.length;){if(o||(o=d.pop(),r=d[d.length-1],i=h.pop(),n=!0),o.leaf&&(s=B2e(e,o.children,t))!==-1)return o.children.splice(s,1),d.push(o),this._condense(d),this;n||o.leaf||!pA(o,l)?r?(i++,o=r.children[i],n=!1):o=null:(d.push(o),h.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:Vz,compareMinY:zz,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var s,n=i-t+1,o=this._maxEntries;if(n<=o)return Nf(s=pm(e.slice(t,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,r-1))),(s=pm([])).leaf=!1,s.height=r;var l,d,h,y,v=Math.ceil(n/o),b=v*Math.ceil(Math.sqrt(o));for(jz(e,t,i,b,this.compareMinX),l=t;l<=i;l+=b)for(jz(e,l,h=Math.min(l+b-1,i),v,this.compareMinY),d=l;d<=h;d+=v)y=Math.min(d+v-1,h),s.children.push(this._build(e,d,y,r-1));return Nf(s,this.toBBox),s},_chooseSubtree:function(e,t,i,r){for(var s,n,o,l,d,h,y,v;r.push(t),!t.leaf&&r.length-1!==i;){for(y=v=1/0,s=0,n=t.children.length;s<n;s++)d=hA(o=t.children[s]),(h=H2e(e,o)-d)<v?(v=h,y=d<y?d:y,l=o):h===v&&d<y&&(y=d,l=o);t=l||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,s=i?e:r(e),n=[],o=this._chooseSubtree(s,this.data,t,n);for(o.children.push(e),Rv(o,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)},_split:function(e,t){var i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),o=pm(i.children.splice(n,i.children.length-n));o.height=i.height,o.leaf=i.leaf,Nf(i,this.toBBox),Nf(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(e,t){this.data=pm([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Nf(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,s,n,o,l,d,h,y;for(d=h=1/0,r=t;r<=i-t;r++)o=W2e(s=Lv(e,0,r,this.toBBox),n=Lv(e,r,i,this.toBBox)),l=hA(s)+hA(n),o<d?(d=o,y=r,h=l<h?l:h):o===d&&l<h&&(h=l,y=r);return y},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:Vz,s=e.leaf?this.compareMinY:zz;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,s)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s,n,o=this.toBBox,l=Lv(e,0,t,o),d=Lv(e,i-t,i,o),h=eS(l)+eS(d);for(s=t;s<i-t;s++)n=e.children[s],Rv(l,e.leaf?o(n):n),h+=eS(l);for(s=i-t-1;s>=t;s--)n=e.children[s],Rv(d,e.leaf?o(n):n),h+=eS(d);return h},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)Rv(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():Nf(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function Z2e(e,{timeZone:t,timeExtent:i}){return{$view:{scale:e,timeZone:t,timeProperties:{currentStart:i==null?void 0:i.start,currentEnd:i==null?void 0:i.end}}}}let Uz=class wX{constructor(t,i){this.key=new td(0,0,0,0),this.bounds=gs(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=t.zoomToScale(r.level-1),this.maxScale=t.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Efe(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return Z2e(this.scale,t)}createChildTiles(){const t=this.key.getChildKeys(),i=fs.acquire();for(let r=0;r<t.length;r++)i[r]=new wX(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return WY.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Gd={added:[],removed:[]},fA=new Set,Y2e=new td(0,0,0,0);function J2e(e,t){const i=vs(t);if(!i)return null;const[r,s]=i.valid;return e[2]>s?[gs([e[0],e[1],s,e[3]]),gs([r,e[1],r+e[2]-s,e[3]])]:e[0]<r?[gs([r,e[1],e[2],e[3]]),gs([s-(r-e[0]),e[1],s,e[3]])]:null}let X2e=class extends Kn{constructor(t){super(),this._tiles=new Map,this._index=eT(9,Y("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||mk(t)===0||yk(t)===0)return[];const i=J2e(t,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const s=new Uz(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of t.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:n}=s;if(r.length>0)for(const{row:o,colFrom:l,colTo:d}of r)for(let h=l;h<=d;h++){const y=Y2e.set(n,o,s.normalizeCol(h),s.getWorldForColumn(h)).id;if(fA.add(y),!this.has(y)){const v=new Uz(this.tileScheme,y);this._tiles.set(y,v),this._index.insert(v),this.tiles.push(v),Gd.added.push(v)}}for(let o=this.tiles.length-1;o>=0;o--){const l=this.tiles[o];fA.has(l.id)||(this._tiles.delete(l.id),this.tiles.splice(o,1),this._index.remove(l),Gd.removed.push(l))}(Gd.added.length||Gd.removed.length)&&this.emit("update",Gd),e_.pool.release(i),fA.clear(),Gd.added.length=0,Gd.removed.length=0}};const xVe=1e-30,Gz=512,iS=16777216,MVe=8,AVe=29,IVe=24,CVe=4,OVe=0,LVe=0,RVe=0,PVe=1,kVe=2,DVe=3,NVe=4,FVe=5,VVe=6,zVe=12,jVe=13,UVe=5,Q2e=6,GVe=5,qVe=6;var qz;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(qz||(qz={}));const SX=6,K2e=1<<SX,BVe=K2e<<1,HVe=1.05,WVe=3,ZVe=1,YVe=3,JVe=3,XVe=5,QVe=6,KVe=1.15,eEe=4,eze=128,tEe=256,tze=tEe-2*eEe,ize=2,rze=128,sze=1,nze=10,oze=1024,aze=128,lze=4,uze=1,cze=1<<20,dze=.75,hze=10,pze=.75,fze=256,mze=32,yze=512,gze=0,vze=1,iEe=1,bze=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],_ze=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L0=256;var Bz,Hz,Wz,Zz,dL,Yz,Jz,$a,hL,Sb,or,tT,Wn,ti,Le,t_,jl,Xz,Qz,Kz;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(Bz||(Bz={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Hz||(Hz={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(Wz||(Wz={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(Zz||(Zz={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(dL||(dL={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(Yz||(Yz={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(Jz||(Jz={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}($a||($a={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(hL||(hL={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(Sb||(Sb={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(or||(or={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(tT||(tT={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(Wn||(Wn={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(ti||(ti={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(Le||(Le={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(t_||(t_={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(jl||(jl={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(Xz||(Xz={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(Qz||(Qz={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(Kz||(Kz={}));const wze=33984;var iT,ej,tj;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(iT||(iT={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(ej||(ej={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(tj||(tj={}));const Sze=33306;var br,ij,rj,sj,nj,oj,aj;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(br||(br={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(ij||(ij={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(rj||(rj={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(sj||(sj={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(nj||(nj={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(oj||(oj={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(aj||(aj={}));const rEe=()=>ae.getLogger("esri.views.webgl.checkWebGLError");function sEe(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const EX=!!Y("enable-feature:webgl-debug");function TX(){return EX}function Eze(){return EX}function Ff(e){if(TX()){const t=e.getError();if(t){const i=sEe(e,t),r=new Error().stack;rEe().error(new B("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}var pL;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(pL||(pL={}));function nEe(e){switch(e){case $a.BYTE:case $a.UNSIGNED_BYTE:return 1;case $a.SHORT:case $a.UNSIGNED_SHORT:case $a.HALF_FLOAT:return 2;case $a.FLOAT:case $a.INT:case $a.UNSIGNED_INT:return 4}}function oEe(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function Tze(e,t,i,r,s=0){var o;const n=e.gl;e.bindBuffer(i);for(const l of r){const d=t.get(l.name);if(d==null){console.warn(`There is no location for vertex attribute '${l.name}' defined.`);continue}const h=s*l.stride;if(l.count<=4)n.vertexAttribPointer(d,l.count,l.type,l.normalized,l.stride,l.offset+h),n.enableVertexAttribArray(d),l.divisor>0&&e.gl.vertexAttribDivisor(d,l.divisor);else if(l.count===9)for(let y=0;y<3;y++)n.vertexAttribPointer(d+y,3,l.type,l.normalized,l.stride,l.offset+12*y+h),n.enableVertexAttribArray(d+y),l.divisor>0&&e.gl.vertexAttribDivisor(d+y,l.divisor);else if(l.count===16)for(let y=0;y<4;y++)n.vertexAttribPointer(d+y,4,l.type,l.normalized,l.stride,l.offset+16*y+h),n.enableVertexAttribArray(d+y),l.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(d+y,l.divisor));else console.error("Unsupported vertex attribute element count: "+l.count);if(TX()){const y=oEe(e),v=nEe(l.type),b=l.offset,w=Math.round(v/b)!==v/b?`. Offset not a multiple of stride. DataType requires ${v} bytes, but descriptor has an offset of ${b}`:"";y&&console.error(`Unable to bind vertex attribute "${l.name}" with baseInstanceOffset ${h}${w}:`,y,l)}}}function $ze(e,t,i,r){var n,o,l;const s=e.gl;e.bindBuffer(i);for(const d of r){const h=t.get(d.name);if(d.count<=4)s.disableVertexAttribArray(h),d.divisor&&d.divisor>0&&((n=e.gl)==null||n.vertexAttribDivisor(h,0));else if(d.count===9)for(let y=0;y<3;y++)s.disableVertexAttribArray(h+y),d.divisor&&d.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(h+y,0));else if(d.count===16)for(let y=0;y<4;y++)s.disableVertexAttribArray(h+y),d.divisor&&d.divisor>0&&((l=e.gl)==null||l.vertexAttribDivisor(h+y,0));else console.error("Unsupported vertex attribute element count: "+d.count)}e.unbindBuffer(dL.ARRAY_BUFFER)}function aEe(e){switch(e){case ti.ALPHA:case ti.LUMINANCE:case ti.RED:case ti.RED_INTEGER:case Le.R8:case Le.R8I:case Le.R8UI:case Le.R8_SNORM:case jl.STENCIL_INDEX8:return 1;case ti.LUMINANCE_ALPHA:case ti.RG:case ti.RG_INTEGER:case Le.RGBA4:case Le.R16F:case Le.R16I:case Le.R16UI:case Le.RG8:case Le.RG8I:case Le.RG8UI:case Le.RG8_SNORM:case Le.RGB565:case Le.RGB5_A1:case jl.DEPTH_COMPONENT16:return 2;case ti.DEPTH_COMPONENT:case ti.RGB:case ti.RGB_INTEGER:case Le.RGB8:case Le.RGB8I:case Le.RGB8UI:case Le.RGB8_SNORM:case Le.SRGB8:case jl.DEPTH_COMPONENT24:return 3;case ti.DEPTH_STENCIL:case ti.DEPTH24_STENCIL8:case ti.RGBA:case ti.RGBA_INTEGER:case Le.RGBA8:case Le.R32F:case Le.R11F_G11F_B10F:case Le.RG16F:case Le.R32I:case Le.R32UI:case Le.RG16I:case Le.RG16UI:case Le.RGBA8I:case Le.RGBA8UI:case Le.RGBA8_SNORM:case Le.SRGB8_ALPHA8:case Le.RGB9_E5:case Le.RGB10_A2UI:case Le.RGB10_A2:case jl.DEPTH_STENCIL:case jl.DEPTH_COMPONENT32F:case jl.DEPTH24_STENCIL8:return 4;case jl.DEPTH32F_STENCIL8:return 5;case Le.RGB16F:case Le.RGB16I:case Le.RGB16UI:return 6;case Le.RG32F:case Le.RG32I:case Le.RG32UI:case Le.RGBA16F:case Le.RGBA16I:case Le.RGBA16UI:return 8;case Le.RGB32F:case Le.RGB32I:case Le.RGB32UI:return 12;case Le.RGBA32F:case Le.RGBA32I:case Le.RGBA32UI:return 16;case br.COMPRESSED_RGB_S3TC_DXT1_EXT:case br.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case br.COMPRESSED_RGBA_S3TC_DXT3_EXT:case br.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case br.COMPRESSED_R11_EAC:case br.COMPRESSED_SIGNED_R11_EAC:case br.COMPRESSED_RGB8_ETC2:case br.COMPRESSED_SRGB8_ETC2:case br.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case br.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case br.COMPRESSED_RG11_EAC:case br.COMPRESSED_SIGNED_RG11_EAC:case br.COMPRESSED_RGBA8_ETC2_EAC:case br.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let $X=class{constructor(t=0,i=t){this.width=t,this.height=i,this.target=Wn.TEXTURE_2D,this.pixelFormat=ti.RGBA,this.dataType=t_.UNSIGNED_BYTE,this.samplingMode=or.LINEAR,this.wrapMode=tT.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.shouldCompress=!1,this.depth=1,this.isImmutable=!1}};function lEe(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*e.depth*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:aEe(e.internalFormat))*(e.target===Wn.TEXTURE_CUBE_MAP?6:1))}const uEe=()=>ae.getLogger("esri/views/webgl/textureUtils");function rS(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&uEe().error("Negative dimension parameters are not allowed!")}function cEe(e){return e in Le}function dEe(e){return e in br}function fm(e){return e!=null&&"type"in e&&e.type==="compressed"}function hEe(e){return e!=null&&"byteLength"in e}function lj(e){return e!=null&&!fm(e)&&!hEe(e)}function Vf(e){return e===Wn.TEXTURE_3D||e===Wn.TEXTURE_2D_ARRAY}function uj(e,t,i,r=1){let s=Math.max(t,i);return e===Wn.TEXTURE_3D&&(s=Math.max(s,r)),Math.floor(Math.log2(s))+1}function sS(e){if(e.internalFormat!=null)return e.internalFormat===ti.DEPTH_STENCIL?ti.DEPTH24_STENCIL8:e.internalFormat;switch(e.dataType){case t_.FLOAT:switch(e.pixelFormat){case ti.RGBA:return Le.RGBA32F;case ti.RGB:return Le.RGB32F;default:throw new B("Unable to derive format")}case t_.UNSIGNED_BYTE:switch(e.pixelFormat){case ti.RGBA:return Le.RGBA8;case ti.RGB:return Le.RGB8}}return e.internalFormat=e.pixelFormat===ti.DEPTH_STENCIL?ti.DEPTH24_STENCIL8:e.pixelFormat}function pEe(e){let t="width"in e?e.width:e.codedWidth,i="height"in e?e.height:e.codedHeight;return e instanceof HTMLVideoElement&&(t=e.videoWidth,i=e.videoHeight),{width:t,height:i,depth:1}}let fEe=class xX extends $X{constructor(t,i){switch(super(),this.context=t,Object.assign(this,i),this.internalFormat){case Le.R16F:case Le.R16I:case Le.R16UI:case Le.R32F:case Le.R32I:case Le.R32UI:case Le.R8_SNORM:case Le.R8:case Le.R8I:case Le.R8UI:this.pixelFormat=ti.RED}}static validate(t,i){return new xX(t,i)}};const Bu=()=>ae.getLogger("esri/views/webgl/Texture");let fL=class cs{constructor(t,i=null,r=null){if(this.type=pL.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,this._compressionAbortController=Ry(null),"context"in t)this._descriptor=t,r=i;else{const s=fEe.validate(t,i);if(!s)throw new B("Texture descriptor invalid");this._descriptor=s}this._descriptor.target===Wn.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return lEe(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}get isCompressing(){return this._compressionAbortController.value!==null}dispose(){this.abortCompression(),this._glName&&this._descriptor.context.instanceCounter.decrement(iT.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,i){const r=this._descriptor;if(r.width!==t||r.height!==i){if(this._wasImmutablyAllocated)throw new B("Immutable textures can't be resized!");r.width=t,r.height=i,this._descriptor.target===Wn.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(t){this._descriptor.shouldCompress=t}setData(t){this.abortCompression(),!fm(t)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in br&&(this._descriptor.internalFormat=void 0),this._setData(t),!fm(t)&&this._descriptor.shouldCompress&&this._compressOnWorker(t)}updateData(t,i,r,s,n,o,l=0){o||Bu().error("An attempt to use uninitialized data!"),this._glName||Bu().error("An attempt to update uninitialized texture!");const d=this._descriptor;d.internalFormat=sS(d);const{context:h,pixelFormat:y,dataType:v,target:b,isImmutable:w}=d;if(w&&!this._wasImmutablyAllocated)throw new B("Cannot update immutable texture before allocation!");const E=h.bindTexture(this,cs.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+s>d.width||r+n>d.height)&&Bu().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:T}=h;l&&(s&&n||Bu().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),T.pixelStorei(T.UNPACK_SKIP_ROWS,l)),lj(o)?T.texSubImage2D(b,t,i,r,s,n,y,v,o):fm(o)?T.compressedTexSubImage2D(b,t,i,r,s,n,d.internalFormat,o.levels[t]):T.texSubImage2D(b,t,i,r,s,n,y,v,o),l&&T.pixelStorei(T.UNPACK_SKIP_ROWS,0),h.bindTexture(E,cs.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,i,r,s,n,o,l,d){d||Bu().error("An attempt to use uninitialized data!"),this._glName||Bu().error("An attempt to update an uninitialized texture!");const h=this._descriptor;h.internalFormat=sS(h);const{context:y,pixelFormat:v,dataType:b,isImmutable:w,target:E}=h;if(w&&!this._wasImmutablyAllocated)throw new B("Cannot update immutable texture before allocation!");Vf(E)||Bu().warn("Attempting to set 3D texture data on a non-3D texture");const T=y.bindTexture(this,cs.TEXTURE_UNIT_FOR_UPDATES);y.setActiveTexture(cs.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||s<0||i+n>h.width||r+o>h.height||s+l>h.depth)&&Bu().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:$}=y;if(fm(d))d=d.levels[t],$.compressedTexSubImage3D(E,t,i,r,s,n,o,l,h.internalFormat,d);else{const A=d;$.texSubImage3D(E,t,i,r,s,n,o,l,v,b,A)}y.bindTexture(T,cs.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(t.width===0||t.height===0)return;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new B("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,rS(t)}t.samplingMode===or.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=or.LINEAR_MIPMAP_NEAREST):t.samplingMode===or.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=or.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,cs.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(cs.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(i,cs.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new B("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,rS(t)}t.samplingMode===or.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=or.LINEAR):t.samplingMode===or.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=or.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,rS(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1)}abortCompression(){this.isCompressing&&(this._compressionAbortController.value=by(this._compressionAbortController.value))}_setData(t,i){var d;const r=this._descriptor,s=(d=r.context)==null?void 0:d.gl;if(!s)return;Ff(s),this._glName||(this._glName=s.createTexture(),this._glName&&r.context.instanceCounter.increment(iT.Texture,this)),rS(r);const n=r.context.bindTexture(this,cs.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(cs.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),Ff(s);const o=i??r.target,l=Vf(o);if(lj(t))this._setDataFromTexImageSource(t,o);else{const{width:h,height:y,depth:v}=r;if(h==null||y==null)throw new B("Width and height must be specified!");if(l&&v==null)throw new B("Depth must be specified!");if(r.internalFormat=sS(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,h,y,v),fm(t)){if(!dEe(r.internalFormat))throw new B("Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(t,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,h,y,v,t),Ff(s),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),Ff(s),r.context.bindTexture(n,cs.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(t=null){for(let i=Wn.TEXTURE_CUBE_MAP_POSITIVE_X;i<=Wn.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(t,i)}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:s}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,i),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_setDataFromTexImageSource(t,i){const{gl:r}=this._descriptor.context,s=this._descriptor;s.internalFormat=sS(s);const n=Vf(i),{width:o,height:l,depth:d}=pEe(t);s.width&&s.height,s.width||(s.width=o),s.height||(s.height=l),n&&s.depth,n&&(s.depth=d),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,s.internalFormat,s.hasMipmap,o,l,d),this._texImage(i,0,s.internalFormat,o,l,d,t),Ff(r),s.hasMipmap&&(this.generateMipmap(),Ff(r))}_setDataFromCompressedSource(t,i,r){const s=this._descriptor,{width:n,height:o,depth:l}=s,d=t.levels,h=uj(r,n,o,l),y=Math.min(h,d.length)-1;this._descriptor.context.gl.texParameteri(s.target,s.context.gl.TEXTURE_MAX_LEVEL,y),this._forEachMipmapLevel((v,b,w,E)=>{const T=d[Math.min(v,d.length-1)];this._compressedTexImage(r,v,i,b,w,E,T)},y)}_texStorage(t,i,r,s,n,o){const{gl:l}=this._descriptor.context;if(!cEe(i))throw new B("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const d=r?uj(t,s,n,o):1;if(Vf(t)){if(o==null)throw new B("Missing depth dimension for 3D texture upload");l.texStorage3D(t,d,i,s,n,o)}else l.texStorage2D(t,d,i,s,n);this._wasImmutablyAllocated=!0}_texImage(t,i,r,s,n,o,l){const d=this._descriptor.context.gl,h=Vf(t),{isImmutable:y,pixelFormat:v,dataType:b}=this._descriptor;if(y){if(l!=null){const w=l;if(h){if(o==null)throw new B("Missing depth dimension for 3D texture upload");d.texSubImage3D(t,i,0,0,0,s,n,o,v,b,w)}else d.texSubImage2D(t,i,0,0,s,n,v,b,w)}}else{const w=l;if(h){if(o==null)throw new B("Missing depth dimension for 3D texture upload");d.texImage3D(t,i,r,s,n,o,0,v,b,w)}else d.texImage2D(t,i,r,s,n,0,v,b,w)}}_compressedTexImage(t,i,r,s,n,o,l){const d=this._descriptor.context.gl,h=Vf(t);if(this._descriptor.isImmutable){if(l!=null)if(h){if(o==null)throw new B("Missing depth dimension for 3D texture upload");d.compressedTexSubImage3D(t,i,0,0,0,s,n,o,r,l)}else d.compressedTexSubImage2D(t,i,0,0,s,n,r,l)}else if(h){if(o==null)throw new B("Missing depth dimension for 3D texture upload");d.compressedTexImage3D(t,i,r,s,n,o,0,l)}else d.compressedTexImage2D(t,i,r,s,n,0,l)}async _compressOnWorker(t){var s,n;if(!cs.compressionWorkerHandle||!cs.compressionWorkerHandle.isCompressible(t))return;const i=(s=this._descriptor.context)==null?void 0:s.gl.getExtension("WEBGL_compressed_texture_etc"),r=(n=this._descriptor.context)==null?void 0:n.gl.getExtension("WEBGL_compressed_texture_s3tc");if(i||r){const o=new AbortController;this._compressionAbortController.value=o;const l={data:await createImageBitmap(t),flipped:this.descriptor.flipped,width:t.width,height:t.height,hasMipmap:this._descriptor.hasMipmap,hasETC:!!i,hasS3TC:!!r};cs.compressionWorkerHandle.invoke(l,this._compressionAbortController.value.signal).then(d=>{d&&this.isCompressing&&this.glName&&(this._descriptor.internalFormat=d.internalFormat,this._setData(d.compressedTexture)),o===this._compressionAbortController.value&&(this._compressionAbortController.value=null)}).catch(d=>{rs(d)||o!==this._compressionAbortController.value||(this._compressionAbortController.value=null)})}}_forEachMipmapLevel(t,i=1/0){let{width:r,height:s,depth:n,hasMipmap:o,target:l}=this._descriptor;const d=l===Wn.TEXTURE_3D;if(r==null||s==null||d&&n==null)throw new B("Missing texture dimensions for mipmap calculation");for(let h=0;t(h,r,s,n),o&&(r!==1||s!==1||d&&n!==1)&&!(h>=i);++h)r=Math.max(1,r>>1),s=Math.max(1,s>>1),d&&(n=Math.max(1,n>>1))}_applySamplingMode(){var n;const t=this._descriptor,i=(n=t.context)==null?void 0:n.gl;let r=t.samplingMode,s=t.samplingMode;r===or.LINEAR_MIPMAP_NEAREST||r===or.LINEAR_MIPMAP_LINEAR?(r=or.LINEAR,t.hasMipmap||(s=or.LINEAR)):r!==or.NEAREST_MIPMAP_NEAREST&&r!==or.NEAREST_MIPMAP_LINEAR||(r=or.NEAREST,t.hasMipmap||(s=or.NEAREST)),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,s)}_applyWrapMode(){var r;const t=this._descriptor,i=(r=t.context)==null?void 0:r.gl;typeof t.wrapMode=="number"?(i.texParameteri(t.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,t.wrapMode)):(i.texParameteri(t.target,i.TEXTURE_WRAP_S,t.wrapMode.s),i.texParameteri(t.target,i.TEXTURE_WRAP_T,t.wrapMode.t))}_applyAnisotropicFilteringParameters(){const t=this._descriptor,i=t.context.capabilities.textureFilterAnisotropic;i&&t.context.gl.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}};fL.TEXTURE_UNIT_FOR_UPDATES=0,fL.compressionWorkerHandle=null;const mA=()=>ae.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function mEe(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const yEe=[0,0,0,0];let MX=class{constructor(){this.type="single",this._highlightOptions=new Gc,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*L0),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,i){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,Q2e),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<SX)-1,activeGradient:this}]}_updateGradientTexture(t){const i=gEe(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,mEe(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,s=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,n=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,l=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,d=Math.sqrt(Math.PI/2)*iEe,h=Math.abs(s)>d?Math.round(10*(Math.abs(s)-d))/10:0,y=Math.abs(l)>d?Math.round(10*(Math.abs(l)-d))/10:0;let v;h&&!y?mA().error("The outer rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!h&&y?mA().error("The inner rim of the highlight is "+y+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):h&&y&&mA().error("The highlight is "+Math.max(h,y)+"px away from the edge of the feature; consider reducing some width values.");const b=[void 0,void 0,void 0,void 0];function w(T,$,A){b[0]=(1-A)*T[0]+A*$[0],b[1]=(1-A)*T[1]+A*$[1],b[2]=(1-A)*T[2]+A*$[2],b[3]=(1-A)*T[3]+A*$[3]}const{_texelData:E}=this;for(let T=0;T<L0;++T)v=s+T/(L0-1)*(l-s),v<s?(b[0]=0,b[1]=0,b[2]=0,b[3]=0):v<n?w(yEe,r.outlineColor,(v-s)/(n-s)):v<o?[b[0],b[1],b[2],b[3]]=r.outlineColor:v<l?w(r.outlineColor,r.fillColor,(v-o)/(l-o)):[b[0],b[1],b[2],b[3]]=r.fillColor,E[4*T]=255*b[0],E[4*T+1]=255*b[1],E[4*T+2]=255*b[2],E[4*T+3]=255*b[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=l,!this._shadeTex){const T=new $X;T.wrapMode=tT.CLAMP_TO_EDGE,T.width=L0,T.height=1,this._shadeTex=new fL(t,T)}this._shadeTex.updateData(0,0,0,L0,1,this._texelData)}};function gEe(e){return`${e.color};${e.haloColor};${e.haloOpacity};${e.fillOpacity};${e.haloWidth};${e.haloBlur}`}let vEe=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let i=0;i<t.length;i++)this.gradients[i]||(this.gradients[i]=new MX),this.gradients[i].setHighlightOptions(t[i]);for(let i=t.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const i=[];for(let r=0;r<this.gradients.length;r++){const s=this.gradients[r];i.push({activeReasons:t,activeGradient:s}),t<<=1}return i}};var cj,dj,hj,pj,fj,mj,rT,yj,gj;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(cj||(cj={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(dj||(dj={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(hj||(hj={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(pj||(pj={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(fj||(fj={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(mj||(mj={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(rT||(rT={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(yj||(yj={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(gj||(gj={}));const AX={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:hL.EQUAL,mask:255,op:{fail:Sb.KEEP,zFail:Sb.KEEP,zPass:Sb.REPLACE}}}},bEe={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},_Ee={...AX,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function wEe({pixelRatio:e,state:t,displayLevel:i,requiredLevel:r},s){const n=1/2**(i-s.key.level),o=1/2**(r-s.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[s.x,s.y],currentScale:t.scale,currentZoom:i,metersPerSRUnit:eo(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function IX(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function CX(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function SEe(e){if(!CX(e))return null;const{position:t,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}=e.passOptions;return{position:t,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}}function EEe(e){if(!IX(e))return null;const{activeReasons:t,highlightAll:i}=e.passOptions;return{activeReasons:t,highlightAll:i?1:0}}function Ize(e,t,i){const r={};for(const s in i)i[s]instanceof Function?r[s]=i[s](e,t):r[s]=i[s];return r}function Cze(e,t){const{attributeView:i,context:r}=e;return{storage:i.getUniforms(r),view:wEe(e,t),hittestRequest:SEe(e),highlight:EEe(e)}}function Oze(e){return{inside:e.selection===rT.InsideEffect,outside:e.selection===rT.OutsideEffect}}function TEe(e){return CX(e)?bEe:IX(e)&&e.passOptions.stepType==="clear"?_Ee:AX}function Lze(e){const{row:t,col:i}=e.key,r=i*Gz,s=t*Gz;return{tileOffsetFromLocalOrigin:[r%iS,s%iS],maxIntsToLocalOrigin:[Math.floor(r/iS),Math.floor(s/iS)]}}const $Ee=new ot({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function Rze(e){return $Ee.toJSON(e)}function Pze(e){const{bandCount:t,attributeTable:i,colormap:r,pixelType:s}=e.raster.rasterInfo;return t===1&&(i!=null||r!=null||s==="u8"||s==="s8")}function xEe(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new vEe:new MX),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function kze(e,t,i,r){const{painter:s,highlightGradient:n}=e,{highlight:o}=s.effects;if(!n)return;const l=e.passOptions,d=n.getReasonsWithGradients();for(let h=0;h<d.length;h++){const y={...e,passOptions:{type:"highlight",activeGradient:d[h].activeGradient,activeReasons:d[h].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(y),i(y),h<d.length-1){let b=0;for(let w=h+1;w<d.length;w++)b|=d[w].activeReasons;i({...e,passOptions:{type:"highlight",activeGradient:d[h].activeGradient,activeReasons:b,stepType:"clear",highlightAll:t}})}const v={...e,passOptions:{type:"highlight",activeGradient:d[h].activeGradient,activeReasons:d[h].activeReasons,stepType:"draw",highlightAll:t}};s.setPipelineState(TEe(e)),s.updatePipelineState(e.context),o.draw(v),o.unbind()}e.passOptions=l}function Dze(e){if(!e)return[];let t=Rge(e)?[e]:_e.isCollection(e)?e.toArray():Array.isArray(e)?e:[];return t=t==null?void 0:t.filter(Yr),((t==null?void 0:t.length)??0)===0?[]:t}const nS=e=>parseFloat(e)/100;function MEe(e,t,i){const r=typeof e.left=="string"?nS(e.left)*t:e.left,s=typeof e.right=="string"?nS(e.right)*t:e.right,n=typeof e.top=="string"?nS(e.top)*i:e.top,o=typeof e.bottom=="string"?nS(e.bottom)*i:e.bottom,l=n;return{xmin:r,xmax:Math.max(t-s,r),ymin:l,ymax:Math.max(i-o,n)}}function OX(e,t,i,r){switch(t.type){case"rect":{const{width:s,height:n}=e,{xmin:o,xmax:l,ymin:d,ymax:h}=MEe(t,s,n),{x:y,y:v}=i;return y>o&&y<l&&v>d&&v<h}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||BP(t.path,[i.x,i.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?qP(t.geometry,r):I_(t.geometry,r))}}function AEe(e){if(!e.highlights)return null;const t=e.highlights.findIndex(i=>i.name==="default");return t===-1?null:e.highlights.items[t]}function IEe(e,t){if(!e.highlights){if(!t)return;e.highlights=new _e([new Gc])}const i=e.highlights.findIndex(r=>r.name==="default");t?e.highlights.items[i].assignFrom(t):(e.highlights.removeAt(i),e.highlights.length===0&&(e.highlights=null))}async function CEe(e,t,i){const r=eJ(t)?KY(e,t):t;if(!e.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let s=new Set;const n=new Set;let o=!1,l=null,d=null;i!=null&&i.include?bj(i.include,vj(e,b=>{s.add(b),yA(b,w=>n.add(w))},(b,w)=>{n.add(b),s.add(w)},b=>{l||(l=new Set),l.add(b)},b=>s.add(b),()=>o=!0)):(o=!0,s=new Set(e.allLayerViews),s.forEach(b=>{yA(b,w=>n.add(w))})),i!=null&&i.exclude&&bj(i.exclude,vj(e,b=>{s.delete(b),yA(b,w=>n.delete(w))},b=>n.delete(b),b=>{d||(d=new Set),d.add(b)}));const h=e.toMap(r),y=e.allLayerViews.filter(b=>!b.suspended&&s.has(b)&&b.clips.every(w=>OX(e,w,r,h))).reverse();let v=[...o?e.graphicsView.hitTest(h).map(b=>({type:"graphic",graphic:b,layer:null,mapPoint:h})):[],...await Promise.all(y.map(b=>b.hitTest(h,r)).toArray())].filter(Yr).flat().filter(Yr);return v=v.filter(b=>{var w;return b.type!=="graphic"||((w=b.layer)==null?void 0:w.type)!=="subtype-group"||n.has(b.graphic.layer)}),l&&(v=v.filter(b=>!("graphic"in b)||!b.graphic||(l==null?void 0:l.has(mL(b.graphic))))),d&&(v=v.filter(b=>!("graphic"in b)||!b.graphic||!(d!=null&&d.has(mL(b.graphic))))),{screenPoint:r,results:v}}function vj(e,t,i,r,s,n){return o=>{if(o instanceof ed){if(o.layer===e)n==null||n();else{const l=e.allLayerViews.find(d=>d.layer===o.layer);l&&(s==null||s(l))}r(mL(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const l=e.allLayerViews.find(d=>d.layer===o.parent);l&&i(o,l)}else{const l=e.allLayerViews.find(d=>d.layer===o);l&&t(l)}}}function bj(e,t){if(e)if(K2(e))for(const i of e)if(K2(i))for(const r of i)t(r);else t(i);else t(e)}function mL(e){var i,r;const t=e.getObjectId();return t?`${((i=e.layer)==null?void 0:i.uid)??((r=e.sourceLayer)==null?void 0:r.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function yA({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(i=>{t(i)})}let R0=null,sT=!0;function OEe(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(sT)try{return new ImageData(e,t)}catch{sT=!1}return LX(e,t,i)}function Nze(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(sT)try{return new ImageData(e,t,i)}catch{sT=!1}const s=LX(t,i,r);return s.data.set(e,0),s}function LEe(){return R0||(R0=document.createElement("canvas"),R0.width=1,R0.height=1),R0}function LX(e,t,i){return i||(i=LEe()),i.getContext("2d").createImageData(e,t)}async function REe(e,t){const i=window.URL.createObjectURL(e);try{const{data:r}=await Rt(i,{...t,responseType:"image"});return r}catch(r){throw rs(r)?r:new B("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function Fze(e,t){const{arrayBuffer:i,mediaType:r}=await PEe(e,t),s=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:n,parseGif:o}=await D(()=>import("./gif-BJJUOEv0.js"),[]);if(n(i))return o(i,t)}if(s){const{isAnimatedPNG:n,parseApng:o}=await D(()=>import("./apng-BmJvEp3D.js"),__vite__mapDeps([256,1]));if(n(i))return o(i,t)}return REe(new Blob([i],{type:r}),t)}async function PEe(e,t){var s;const i=Ey(e);if(i!=null&&i.isBase64)return{arrayBuffer:Iq(i.data),mediaType:i.mediaType};const r=await Rt(e,{responseType:"array-buffer",...t});return{arrayBuffer:r.data,mediaType:((s=r.getHeader)==null?void 0:s.call(r,"Content-Type"))??""}}function RX(e,t,i){const{ctx:r,canvas:s}=kX(e,i),n=r.getImageData(0,0,e.width,e.height),o=NX(s,t);return DX(s),{dataUrl:o,data:n}}function PX(e,t){const{ctx:i,canvas:r}=kX(e,t),s=i.getImageData(0,0,e.width,e.height);return DX(r),s}function kX(e,t){const i=kEe();t.premultipliedAlpha&&VEe(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(e,0,0),t.flipY&&FEe(r),{ctx:r,canvas:i}}function DX(e){e.width=0,e.height=0}function kEe(){return gA==null&&(gA=document.createElement("canvas")),gA}let gA=null;function NX(e,t){const i=zEe[t.format],r=t.quality/100;return e.toDataURL(i,r)}function FX(e,t){const i=NEe(e),r=UEe[i];return{format:i,quality:_n(t??r,0,100)}}function VX(e,t){return t/Math.max(e[0],e[1])}function DEe(e,t,i,r=0,s=0,n=e.width-r,o=e.height-s,l=!1){const{data:d}=e,{width:h,height:y,data:v}=t,b=n/h,w=o/y,E=Math.ceil(b/2),T=Math.ceil(w/2),$=e.width;for(let A=0;A<y;A++)for(let O=0;O<h;O++){const L=4*(O+(l?y-A-1:A)*h);let R=0,N=0,j=0,V=0,Z=0,ie=0;const oe=(A+.5)*w;for(let ue=Math.floor(A*w);ue<(A+1)*w;ue++){const me=Math.abs(oe-(ue+.5))/T,Te=(O+.5)*b,Ee=me*me;for(let Ye=Math.floor(O*b);Ye<(O+1)*b;Ye++){const te=Math.abs(Te-(Ye+.5))/E,fe=Math.sqrt(Ee+te*te);if(fe>=1)continue;let we=2*fe*fe*fe-3*fe*fe+1;const Je=4*(r+Ye+(s+ue)*$);ie+=we*d[Je+3],N+=we,!i&&d[Je+3]<255&&(we=we*d[Je+3]/255),j+=we*d[Je],V+=we*d[Je+1],Z+=we*d[Je+2],R+=we}}v[L]=j/R,v[L+1]=V/R,v[L+2]=Z/R,v[L+3]=ie/N}return t}function NEe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return jEe}}function FEe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function VEe(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const s=t[r+3];if(s!==255&&s>0){const n=255/s;t[r]=t[r]*n,t[r+1]=t[r+1]*n,t[r+2]=t[r+2]*n}}}const zEe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},_j=98,jEe="png",UEe={png:100,jpg:_j,jpeg:_j},Vze=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:OEe,encode:RX,encodeData:PX,getFormatAndQuality:FX,getMaximumResolutionScale:VX,resampleHermite:DEe,toDataUrl:NX},Symbol.toStringTag,{value:"Module"})),zX={flipY:!0,premultipliedAlpha:!0};async function GEe(e,t){const i=await jX(e,t),{format:r,quality:s}=FX(t==null?void 0:t.format,t==null?void 0:t.quality);return RX(i,{format:r,quality:s},zX)}async function qEe(e,t){const i=await jX(e,t);return PX(i,zX)}function jX(e,t){const i=WEe(t||{},HEe(e.stage,e.size),e.size,e.padding),r=BEe(t,e.allLayerViews);return e.stage.takeScreenshot(i,r,e.backgroundColor,t==null?void 0:t.rotation)}function BEe(e={},t){if(!e.layers)return;const i=[];return e.layers.forEach(r=>{const s=t.find(n=>n.layer.id===r.id);s!=null&&s.container&&i.push(s.container)}),i}function HEe(e,t){return Math.min(4,VX(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function WEe(e,t,i,r){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let s=null;e.width!=null&&e.height!=null?s=[e.width,e.height]:e.width==null&&e.height!=null?s=[e.height,e.height]:e.width!=null&&e.height==null?s=[e.width,e.width]:e.width==null&&e.height==null&&(s=null);const n=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let l,d,h=e.area||{x:0,y:0,width:n,height:o};if(s){const y=n/o,v=s[0]/s[1];if(v>y){const b=h.width/v;h={x:h.x,y:Math.round(h.y+(h.height-b)/2),width:h.width,height:Math.round(b)}}else{const b=h.height*v;h={x:Math.round(h.x+(h.width-b)/2),y:h.y,width:Math.round(b),height:h.height}}}else s=[h.width,h.height];return s[0]>h.width?(l=Math.min(s[0]/h.width,t),d=s[0]/h.width/l):(l=1,d=s[0]/h.width),{cropArea:{x:Math.round((h.x+r.left)*l),y:Math.round((h.y+r.top)*l),width:Math.round(h.width*l),height:Math.round(h.height*l)},outputScale:d,resolutionScale:l}}const ZEe=e=>e.includes("Brush");let UX=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),ZEe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function YEe(e,t){const i=t.debugRendererInfo&&e.getExtension("WEBGL_debug_renderer_info");return i?{getUnmaskedRendererWebGL:()=>e.getParameter(i.UNMASKED_RENDERER_WEBGL)}:null}let wj;function JEe(){return wj??(wj=KEe()),wj}let XEe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function QEe(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let i=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=t.getContext("webgl2"),i!=null&&(e.majorPerformanceCaveat=!0)),i==null)return i;e.available=!0,e.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(e.supportsHighPrecisionFragment=r.precision>0),i}function KEe(){var i;const e=new XEe,t=QEe(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null,e.unmaskedRenderer=((i=YEe(t,{debugRendererInfo:!0}))==null?void 0:i.getUnmaskedRendererWebGL())??"unknown"),e}function eTe(e){const t=JEe();return t.available?e==="3d"&&t.majorPerformanceCaveat?new B("webgl:major-performance-caveat-detected",`Your WebGL implementation (${t.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new B("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new B("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new B("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function tTe(e){return e&&"nodeType"in e}function iTe(e){return e&&typeof e.render=="function"}const Sj={component:"esri-component"};let vh=class extends Me{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,i;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((i=this.node)==null?void 0:i.id)}set id(t){this._set("id",t)}set node(t){const i=this._get("node");t!==i&&(t&&t.classList.add(Sj.component),i&&i.classList.remove(Sj.component),this._set("node",t))}castNode(t){var i;return(i=this.widget)==null||i.destroy(),t?typeof t=="string"||tTe(t)?(this._set("widget",null),Mk(t)):(iTe(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};c([p()],vh.prototype,"id",null),c([p()],vh.prototype,"node",null),c([mt("node")],vh.prototype,"castNode",null),c([p({readOnly:!0})],vh.prototype,"widget",void 0),vh=c([I("esri.views.ui.Component")],vh);const $2=vh,GX="calcite-mode-";function rTe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function qX(){return rTe().startsWith("dark")}function sTe(){return`${GX}${qX()?"dark":"light"}`}function nTe(e){oTe(e),e.classList.add(sTe())}function oTe(e){Array.from(e.classList).forEach(t=>{t.startsWith(GX)&&e.classList.remove(t)})}const aTe={left:0,top:0,bottom:0,right:0},BX={bottom:30,top:15,right:15,left:15},pl="esri-ui",xs={ui:pl,corner:`${pl}-corner`,innerContainer:`${pl}-inner-container`,manualContainer:`${pl}-manual-container`,cornerContainer:`${pl}-corner-container`,topLeft:`${pl}-top-left`,topRight:`${pl}-top-right`,bottomLeft:`${pl}-bottom-left`,bottomRight:`${pl}-bottom-right`};function lTe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function oS(e){return e===0?"0":`${e}px`}function vA(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function bA(e,{top:t,bottom:i,left:r,right:s}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=s}let ba=class extends Kn.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Vs(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&bA(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&bA(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ve(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,yt),ve(()=>this.padding,this._applyUIPadding,yt),ve(()=>[this.container,this._locale],([t,i])=>{t&&t.setAttribute("lang",i)},yt),HP(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const i=this._get("container");t!==i&&(t&&(t.classList.add(xs.ui),nTe(t),this._attachContainers(t)),i&&(i.classList.remove(xs.ui),bA(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",t))}get height(){var n;const t=((n=this.view)==null?void 0:n.height)??0;if(t===0)return t;const i=this._getViewPadding(),{top:r,bottom:s}=i;return Math.max(t-r-s,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...BX,...t}}get width(){var n;const t=((n=this.view)==null?void 0:n.width)??0;if(t===0)return t;const i=this._getViewPadding(),{left:r,right:s}=i;return Math.max(t-r-s,0)}add(t,i){let r,s,n;if(Array.isArray(t))return void t.forEach(l=>this.add(l,i));const o=vA(t);o&&({index:r,position:i,component:t,key:s}=o),i&&typeof i=="object"&&({index:r,key:s,position:i,internal:n}=i),!t||i&&!this._isValidPosition(i)||this._add(t,i,r,s,n)}remove(t,i){var s,n;if(!t)return;if(Array.isArray(t))return t.map(o=>this.remove(o,i));const r=this._find(t);if(r){if(this._componentMap.has(r)&&((s=this._componentMap.get(r))==null?void 0:s.key)!==i)return;const o=this._components.indexOf(r),l=r.node.parentNode;return l==null||l.removeChild(r.node),this._componentMap.delete(r),(n=r.widget)==null||n.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(o,1)[0]}}empty(t,i={removeInternal:!1}){if(Array.isArray(t)){for(const n of t)this.empty(n,i);return}const r=this._positionNameToContainerLookup[t??"manual"],s=Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(n=>{var o;return n==null?!1:!(((o=this._componentMap.get(n))==null?void 0:o.internal)??!1)||i.removeInternal});for(const n of s)this.remove(n)}move(t,i){if(Array.isArray(t)&&t.forEach(o=>this.move(o,i)),!t)return;let r;const s=vA(t)||vA(i);if(s&&(r=s.index,i=s.position,t=s.component||t),i&&!this._isValidPosition(i))return;const n=this.remove(t);n&&this.add(n,{position:i,index:r})}find(t){if(!t)return null;const i=this._findById(t);return i&&(i.widget||i.node)}getComponents(t,i={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(t,i):this._components.filter(r=>{var s;return i.includeInternal||!((s=this._componentMap.get(r))!=null&&s.internal)}).map(({widget:r,node:s})=>r??s)}getPosition(t){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(t))return i;return null}_add(t,i,r,s,n){t instanceof $2||(t=new $2({node:t}));const{widget:o}=t;o!=null&&o instanceof Me&&o.addHandles(bt(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:i,index:r}),this._components.push(t),this._componentMap.set(t,{key:s,internal:n})}_find(t){return t?t instanceof $2?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??aTe}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(xs.innerContainer,xs.cornerContainer);const i=document.createElement("div");i.classList.add(xs.innerContainer,xs.manualContainer);const r=document.createElement("div");r.classList.add(xs.topLeft,xs.corner),t.appendChild(r);const s=document.createElement("div");s.classList.add(xs.topRight,xs.corner),t.appendChild(s);const n=document.createElement("div");n.classList.add(xs.bottomLeft,xs.corner),t.appendChild(n);const o=document.createElement("div");o.classList.add(xs.bottomRight,xs.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=i;const l=n$();this._cornerNameToContainerLookup={"top-left":r,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":l?s:r,"top-trailing":l?r:s,"bottom-leading":l?o:n,"bottom-trailing":l?n:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var h,y;const i=t.position??"manual",{component:r,index:s}=t,n=this._positionNameToContainerLookup[i],o=s!=null&&s>-1;if(lTe(r.widget)&&r.widget.startup(),!o)return void n.appendChild(r.node);const l=Array.from(n.children);if(s===0){const{firstChild:v}=n;return void(v?(h=v.parentNode)==null?void 0:h.insertBefore(r.node,v):n.appendChild(r.node))}if(s>=l.length)return void n.appendChild(r.node);const d=l[s];(y=d.parentNode)==null||y.insertBefore(r.node,d)}_toPixelPosition(t){return{top:oS(t.top),left:oS(t.left),right:oS(t.right),bottom:oS(t.bottom)}}_findByComponent(t){return this._components.find(i=>i===t)??null}_findById(t){return this._components.find(({id:i})=>i===t)??null}_findByNode(t){return this._components.find(({node:i})=>i===t)??null}_getComponentsAtPosition(t,i){const r=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(Yr).filter(s=>{var n;return i.includeInternal||!((n=this._componentMap.get(s))!=null&&n.internal)}).map(({widget:s,node:n})=>s??n)}};c([p()],ba.prototype,"_locale",void 0),c([p()],ba.prototype,"container",null),c([p()],ba.prototype,"height",null),c([p({value:BX})],ba.prototype,"padding",null),c([mt("padding")],ba.prototype,"castPadding",null),c([p()],ba.prototype,"view",void 0),c([p()],ba.prototype,"width",null),ba=c([I("esri.views.ui.UI")],ba);const uTe=ba,cTe="randomUUID"in crypto;function x$(){if(cTe)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function qze(){return`{${x$().toUpperCase()}}`}function dTe(){return`{${x$()}}`}function hTe(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const pTe={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},fTe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}},mTe=e=>({...fTe,...e}),yTe=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},gTe=(e,t)=>e.find(t),Ej=(e,t,i=!1)=>{let r=e;return t.forEach((s,n)=>{const o=r!=null&&r.children?gTe(r.children,l=>l.domNode===s):void 0;i&&!o&&n!==t.length-1||(r=o)}),r},vTe=e=>{let t;const i={...pTe,...e},r=mTe(i),s=r.performanceLogger;let n,o=!0,l=!1;const d=[],h=[],y=(b,w,E)=>{var A;let T;r.eventHandlerInterceptor=(O,L,R,N)=>function(j){let V;s("domEvent",j);const Z=yTe(j.currentTarget,T.domNode),ie=Z.some(ue=>{var me;return customElements.get((me=ue==null?void 0:ue.tagName)==null?void 0:me.toLowerCase())});if(j.eventPhase===Event.CAPTURING_PHASE||!ie)Z.reverse(),V=Ej(T.getLastRender(),Z);else{const ue=j.composedPath(),me=ue.slice(ue.indexOf(j.currentTarget),ue.indexOf(T.domNode)).reverse();V=Ej(T.getLastRender(),me,!0)}let oe;return V&&(oe=i.handleInterceptedEvent(t,V,this,j)),s("domEventProcessed",j),oe},(A=i.postProcessProjectionOptions)==null||A.call(i,r);const $=E();T=b(w,$,r),r.eventHandlerInterceptor=void 0,d.push(T),h.push(E),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(T,$)};let v=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let b=0;b<d.length;b++){const w=h[b]();s("rendered",void 0);try{d[b].update(w)}catch(E){console.error(E)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(v=i.modifyDoRenderImplementation(v,d,h)),t={renderNow:v,scheduleRender:()=>{n||l||(n=requestAnimationFrame(v))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),l=!0},resume:()=>{l=!1,o=!0,t.scheduleRender()},append:(b,w)=>{y(Dc.append,b,w)},insertBefore:(b,w)=>{y(Dc.insertBefore,b,w)},merge:(b,w)=>{y(Dc.merge,b,w)},replace:(b,w)=>{y(Dc.replace,b,w)},detach:b=>{for(let w=0;w<h.length;w++)if(h[w]===b)return h.splice(w,1),d.splice(w,1)[0];throw new Error("renderFunction was not found")}},t};var bTe=";",_A=",",_Te=":",Mp=class{resolve(e){}reject(e){}constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};function wTe(e,t){let i=e;for(;i;){if(i===t)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1}function STe(e,t,i){const{subscribe:r}=ETe(t);return r(s=>{s.some(o=>wTe(e,o.target))&&i()})}var wA={};function ETe(e){const t=e.join(","),i=wA[t];if(i!==void 0)return i;const r=new Set,s=new MutationObserver(o=>r.forEach(l=>l(o)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const n={subscribe(o){return r.add(o),()=>{r.delete(o),r.size===0&&(s.disconnect(),wA[t]=void 0)}}};return wA[t]=n,n}function TTe(e,t){var r,s;let i=e;for(;i;){const n=(r=i.closest)==null?void 0:r.call(i,t);if(n)return n;const o=(s=i.getRootNode)==null?void 0:s.call(i);if(o===globalThis.document)return null;i=o.host}return null}function $Te(e,t,i){const r=TTe(e,`[${t}]`);return(r==null?void 0:r.getAttribute(t))??i}function fi(e,t,...i){try{return e==null?void 0:e.call(t,...i)}catch(r){console.error(r,e)}}async function yL(e,t,...i){try{const r=e==null?void 0:e.call(t,...i);return r instanceof Promise?await r:r}catch(r){console.error(r,e)}}var xTe=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],MTe=new Set(xTe),nT="en",ATe={pt:"pt-PT",nb:"no",zh:"zh-CN"};async function ITe(e,t,i=""){const r=`${t}/${i}`,s=`${r}${e}.json`;return SA[s]??(SA[s]=HX(e,r)),await SA[s]}var SA={};async function HX(e,t){const i=`${t}${e}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return e===nT?{}:await HX(nT,t)}function WX(e){var i;const t=$Te(e,"lang",((i=globalThis.navigator)==null?void 0:i.language)||nT);return{lang:t,t9nLocale:ZX(t)}}function ZX(e){const[t,i]=e.split("-"),r=t.toLowerCase();let s=r;return i&&(s=`${r}-${i.toUpperCase()}`),s=ATe[s]??s,MTe.has(s)?s:i?ZX(r):nT}function CTe(e,t,i,r){let s;const n=()=>void OTe(e,t(),r).then(o=>{((s==null?void 0:s.lang)!==o.lang||s.t9nLocale!==o.t9nLocale||s.t9nStrings!==o.t9nStrings)&&i(o),s=o}).catch(console.error);return queueMicrotask(n),STe(e,["lang"],n)}async function OTe(e,t,i=e.tagName.toLowerCase().split("-").slice(1).join("-")){const{lang:r,t9nLocale:s}=WX(e),n=`${t}/${i}/t9n`,l=i===null?{}:await ITe(s,n,"messages.");return{lang:r,t9nLocale:s,t9nStrings:l}}var YX=e=>e.replace(LTe,(t,i)=>`${i===0?"":"-"}${t.toLowerCase()}`),LTe=/[A-Z]+(?![a-z])|[A-Z]/gu;function RTe(e,t){const i=t/PTe;let r=0;const s=setInterval(()=>{r+=i,r>=t&&(clearInterval(s),e())},i);return s}var PTe=4;function kTe(e){return e!==void 0}function JX(e){var i,r;let t=e;for(;t=t.parentNode??t.host;)if((i=t==null?void 0:t.constructor)!=null&&i.lumina){const s=t;return(r=s.manager)!=null&&r.loadedCalled||s._offspring.push(e),s._postLoad.promise}return!1}var DTe=(e,t)=>function(r,s){if(!globalThis.customElements)return;const o=(s??r??{}).resourcesUrl;o&&e.setAssetPath(o),Object.entries(t).forEach(NTe)};function NTe([e,[t,i=""]]){var h;if(customElements.get(e))return;const[r,s,n]=i.split(bTe),o=r?r==null?void 0:r.split(_A).map(XX):void 0,l=o==null?void 0:o.map(([y])=>y),d=(h=class extends VTe{constructor(){!d._loadPromise&&(d._loadPromise=t(),d._initializePrototype()),super()}},h.observedAttributes=o==null?void 0:o.map(([,v])=>v).filter(v=>v!==""),h._properties=l,h._asyncMethods=s?s==null?void 0:s.split(_A):void 0,h._syncMethods=n==null?void 0:n.split(_A),h._name=e,h);customElements.define(e,d)}var x2=Object.defineProperty;function XX(e){const t=e.split(_Te);return t.length===1?[t[0],YX(t[0])]:t}var FTe=globalThis.HTMLElement??XX,vy,VTe=(vy=class extends FTe{constructor(){super(),this._store={},this._pendingAttributes=[],this._postLoad=new Mp,this._postLoaded=new Mp,this._offspring=[],this._saveInstanceProperties();const t=this.constructor;t._LitConstructor?this._initializeComponent({a:t._LitConstructor}):t._loadPromise.then(this._initializeComponent.bind(this)).catch(i=>{this._postLoaded.reject(i),setTimeout(()=>{throw i})})}static _initializePrototype(){var t,i,r;(t=this._properties)==null||t.forEach(this._bindProp,this),(i=this._asyncMethods)==null||i.forEach(this._bindAsync,this),(r=this._syncMethods)==null||r.forEach(this._bindSync,this)}static _bindProp(t){x2(this.prototype,t,{configurable:!0,enumerable:!0,get(){return this._store[t]},set(i){this._store[t]=i}})}static _bindAsync(t){x2(this.prototype,t,{async value(...i){return this._litElement||await this._postLoaded.promise,await this._litElement[t](...i)},configurable:!0})}static _bindSync(t){x2(this.prototype,t,{value(...i){return this._litElement[t](...i)},configurable:!0})}get manager(){var t;return(t=this._litElement)==null?void 0:t.manager}_saveInstanceProperties(){var r;const t=this.constructor,i=this;(r=t._properties)==null||r.forEach(s=>{Object.hasOwn(this,s)&&(this._store[s]=i[s],delete i[s])})}attributeChangedCallback(t,i,r){var s;(s=this._litElement)==null||s.attributeChangedCallback(t,i,r),this._litElement||this._pendingAttributes.push(t)}connectedCallback(){var t,i;this._litElement?(i=(t=this._litElement).connectedCallback)==null||i.call(t):queueMicrotask(()=>{this._ancestorLoad=JX(this)})}disconnectedCallback(){var t,i;(i=(t=this._litElement)==null?void 0:t.disconnectedCallback)==null||i.call(t)}async componentOnReady(){return await this._postLoaded.promise,this}_initializeComponent(t){var v;const i=this.constructor,r=i._name,s=this._store,n=Object.values(t).find(b=>b.tagName===r),o=`${r}--lazy`;let l=n;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);jTe(l),!i._LitConstructor&&(i._LitConstructor=n,customElements.define(o,n)),n.lazy=this;const h=document.createElement(o);n.lazy=void 0,this._litElement=h,this._store=h,this._pendingAttributes.forEach(b=>{const w=this.getAttribute(b);h.attributeChangedCallback(b,null,w)}),Object.entries(s).forEach(zTe,h);const y=this.isConnected;(y||this._ancestorLoad)&&((v=h.connectedCallback)==null||v.call(h),y||h.disconnectedCallback())}addController(){}requestUpdate(){var t;(t=this._litElement)==null||t.requestUpdate()}},vy.lumina=!0,vy);function zTe([e,t]){this[e]=t}function jTe(e){const t=e.prototype,i=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(s,n){i.setAttribute.call(this.el,s,n)},t.removeAttribute=function(s){i.removeAttribute.call(this.el,s)},x2(t,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))}var Tj={};function UTe(e,t){var i;if(t){const r=e.constructor.elementProperties;e.manager.internals.members=Object.fromEntries(Array.from(r,([s,n])=>n.noAccessor?void 0:[s,[(n.readOnly?2048:0)|(n.state?32:16)]]).filter(kTe))}else{const r=e.constructor,s=((i=r.__registerControllers)==null?void 0:i.call(r,e))??void 0;if(r.__registerControllers=void 0,typeof s!="object")throw new Error("Failed to retrieve component meta");e.manager.internals.members=Object.fromEntries(Object.entries(s).filter(([n,[o]])=>(o&63)!==0))}}function GTe(e,t=8){return e==null||typeof e=="object"||typeof e=="function"?e:(t&4)!==0?e==="false"?!1:e===""||!!e:(t&2)!==0?Number.parseFloat(e):(t&1)!==0?String(e):e}var qTe=(e,t)=>{var i,r;return(r=(i=e.manager.internals.members)==null?void 0:i[t])==null?void 0:r[0]},yD=Symbol.for("controller"),BTe=e=>typeof e=="object"&&e!==null&&(yD in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e),Pv;function Hm(e){Pv!==e&&(Pv=e,queueMicrotask(()=>{Pv===e&&(Pv=void 0)}))}function M$(e){return Pv}var bh=[];function QX(e){if(e===void 0){bh=[];return}const t=bh.indexOf(e);bh=t===-1?[...bh,e]:bh.slice(0,t+1),queueMicrotask(()=>{bh=[]})}function KX(){return bh}var Wm;function HTe(e){Wm!==e&&(Wm=e,queueMicrotask(()=>{Wm===e&&(Wm=void 0)}))}function WTe(){const e=Wm;return Wm=void 0,e}var ZTe=async(e,t)=>{const i=gD(e);if(i===void 0)return e;if(await i.ready,typeof t=="function"){const r=i.watchExports(s=>t(s,r))}return i.exports},YTe=async e=>{const t=gD(e);return await t.ready,t},gD=e=>{const i=M$().manager.internals.resolveExports(e);if(i!==void 0)return i;if(BTe(e))return e;const r=WTe();if(r!==void 0)return r},gL={readOnly:!1},oT=new WeakMap,eQ;eQ=yD;var vD=class{constructor(e){this._callbacks={hostConnected:[],hostDisconnected:[],hostLoad:[],hostLoaded:[],hostUpdate:[],hostUpdated:[],hostDestroy:[],hostLifecycle:[]},this._ready=new Mp,this._lifecycleCleanups=[],this.connectedCalled=!1,this._loadCalled=!1,this.loadedCalled=!1,this[eQ]=!0,this.ready=this._ready.promise,this._exports=xj(this),this._exportWatchers=new Set;const t=e??M$();this.component=t,this.component.addController(this),this.component.manager===void 0||(QX(this),queueMicrotask(()=>this.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=this.component;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e._loadCalled&&this.triggerLoad().then(()=>{e.loadedCalled&&this.triggerLoaded()}).catch(console.error)}get exports(){return this._exports}set exports(e){const t=this._exports;t!==e&&(this._exports=e,this._exportWatchers.forEach(fi),this.connectedCalled&&this.assignedProperty!==!1&&this.component.requestUpdate(this.assignedProperty,t)),this._ready.resolve(e)}setProvisionalExports(e,t=!0){this._exports=t?xj(e):e,this._exportWatchers.forEach(fi)}watchExports(e){const t=()=>e(this._exports);return this._exportWatchers.add(t),()=>void this._exportWatchers.delete(t)}get use(){return Hm(this.component),ZTe}get useRef(){return Hm(this.component),YTe}get useRefSync(){return Hm(this.component),gD}controllerRemoved(){this.component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this._callbacks.hostConnected.push(e)}onDisconnected(e){this._callbacks.hostDisconnected.push(e)}onLoad(e){this._callbacks.hostLoad.push(e)}onLoaded(e){this._callbacks.hostLoaded.push(e)}onUpdate(e){this._callbacks.hostUpdate.push(e)}onUpdated(e){this._callbacks.hostUpdated.push(e)}onDestroy(e){this._callbacks.hostDestroy.push(e)}onLifecycle(e){this._callbacks.hostLifecycle.push(e),this.connectedCalled&&this.component.el.isConnected&&this._callLifecycle(e)}triggerConnected(){const e=this;e.hostConnected&&fi(e.hostConnected,e),this._callbacks.hostConnected.forEach(fi),this.triggerLifecycle(),this.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&fi(e.hostDisconnected,e),this._callbacks.hostDisconnected.forEach(fi),this._lifecycleCleanups.forEach(fi),this._lifecycleCleanups=[]}async triggerLoad(){if(this._loadCalled)return;this._loadCalled=!0;const e=this;e.hostLoad&&await yL(e.hostLoad,e),this._callbacks.hostLoad.length>0&&await Promise.allSettled(this._callbacks.hostLoad.map(yL)),this._ready.resolve(this._exports)}triggerLoaded(){if(this.loadedCalled)return;const e=this;e.hostLoaded&&fi(e.hostLoaded,e),this._callbacks.hostLoaded.forEach(fi),this.loadedCalled=!0}triggerUpdate(e){const t=this;t.hostUpdate&&fi(t.hostUpdate,t,e),this._callbacks.hostUpdate.forEach($j,e)}triggerUpdated(e){const t=this;t.hostUpdated&&fi(t.hostUpdated,t,e),this._callbacks.hostUpdated.forEach($j,e)}triggerDestroy(){const e=this;e.hostDestroy&&fi(e.hostDestroy,e),this._callbacks.hostDestroy.forEach(fi)}triggerLifecycle(){const e=this;e.hostLifecycle&&this._callLifecycle(()=>e.hostLifecycle()),this._callbacks.hostLifecycle.forEach(this._callLifecycle,this)}_callLifecycle(e){Hm(this.component);const t=fi(e);(Array.isArray(t)?t:[t]).forEach(r=>{typeof r=="function"?this._lifecycleCleanups.push(r):typeof r=="object"&&typeof r.remove=="function"&&this._lifecycleCleanups.push(r.remove)})}};function $j(e){fi(e,void 0,this)}var JTe=vD;function xj(e){if(typeof e!="object"&&typeof e!="function"||e===null)return e;const t=new Proxy(e,{get(i,r,s){if(!(XTe.has(r)&&r in i&&i[r]===t)&&(r in i||r in Promise.prototype||typeof r=="symbol"))return typeof i=="function"?i[r]:Reflect.get(i,r,s)},set:(i,r,s,n)=>Reflect.set(i,r,s,n)});return t}var XTe=new Set(["exports","_exports"]);function QTe(e,t,i){const r=Object.keys(e),s=r.length;Zl===void 0&&queueMicrotask(bD),Zl??(Zl=new Map);let n=Zl.get(e);return n===void 0&&(n={callbacks:[],keyCount:s},Zl.set(e,n)),n.keyCount!==s&&(n.callbacks.forEach(o=>o(r)),n.callbacks=[],n.keyCount=s),n.callbacks.push(o=>{const l=h=>fi(t,null,h),d=o[s];d===void 0?l(void 0):e[d]===i?l(d):l(void 0)}),i}var Zl=void 0;function bD(){Array.from((Zl==null?void 0:Zl.entries())??[]).forEach(([e,{callbacks:t}])=>{const i=Object.keys(e);t.forEach(r=>r(i))}),Zl=void 0}function _D(e,t,i){var r;const s=t,n=e.manager.internals;(r=n.allWatchers)[s]??(r[s]=[]);const o=n.allWatchers[s],l=i,d=(h,y,v)=>fi(l,null,h,y,v);return o.push(d),()=>{const h=o.indexOf(d);h!==-1&&o.splice(h,1)}}var KTe=class{constructor(e){this.enabledWatchers={},this.allWatchers={},this.enableReadonly=()=>{if(this.enableReadonly=void 0,!this.component.manager.isLit)return;const t=this.component.manager.internals;Object.entries(t.members).forEach(([i,[r]])=>{var s;r&2048&&((s=t.setters)[i]??(s[i]=[]),t.setters[i].push(t.readonlySetter))})},this.trackedValue=vL,this.keyTrackers=[],this.getters={},this.setters={},this.accessorGetter={},this.accessorSetter={},this._exports=new WeakMap,this.readonlySetter=(t,i,r)=>{if(gL.readOnly)return t;throw new Error(`Cannot assign to read-only property "${r}" of ${this.component.el.tagName.toLowerCase()}. Trying to assign "${String(t)}"`)},this.component=e}firePropTrackers(e,t){const i=this.keyTrackers;this.trackedValue=vL,this.keyTrackers=[],i.forEach(r=>r(e,t))}getSetProxy(e){const t=this.component,i=t.constructor.prototype;if(this._getSetProxy(i,e,"class"),t.manager.isLit)return;const r=t.el.constructor.prototype;i!==r&&this._getSetProxy(r,e,"html")}_getSetProxy(e,t,i){const r=this.component,s=qTe(r,t);let n;do n=Object.getOwnPropertyDescriptor(e,t);while(!n&&(e=Object.getPrototypeOf(e)));if(!n)return;const o=n.get,l=n.set,d=aS in o,h=aS in l;if(d&&h)return;const y=!d,v=!h,b=y?function(){let T=o.call(this);const $=oT.get(this);if($===void 0)return T;const A=$.manager.internals;T=A.accessorGetter[t](T,t);const O=A.getters[t]??Mj;for(let L=0;L<O.length;L++)T=O[L](T,t);return T}:o,w=v?function(T){var R;const $=o.call(this),A=oT.get(this);if(A===void 0){l.call(this,T);return}let O=A.manager.isLit?T??void 0:GTe(T,s);const L=A.manager.internals;if(O===$)l.call(this,O);else{const N=L.setters[t]??Mj;for(let j=0;j<N.length&&(O=N[j](O,$,t),O!==$);j++);O=L.accessorSetter[t](O,$,t),l.call(this,O),O!==$&&((R=L.enabledWatchers[t])==null||R.forEach(j=>j(O,$,t)))}L.keyTrackers.length>0&&(L==null||L.firePropTrackers(t,T))}:l;y&&(b[aS]=!0),v&&(w[aS]=!0),Object.defineProperty(e,t,{...n,get:b,set:w})}markExports(e,t){(typeof t=="object"&&t!==null||typeof t=="function")&&this._exports.set(t,e)}resolveExports(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this._exports.get(e)}},Mj=[],aS=Symbol(),vL=Symbol();function e$e(e,t,i){const r=e.manager.internals;return r.trackedValue!==vL&&r.trackedValue!==i&&r.firePropTrackers(void 0,void 0),r.keyTrackers.length===0&&queueMicrotask(()=>r.firePropTrackers(void 0,void 0)),r.trackedValue=i,r.keyTrackers.push((s,n)=>fi(t,void 0,i===n?s:void 0)),i}function tQ(e=[M$(),...KX()],t,i){const r=Array.isArray(e)?e:[e];let s=r.length+1;const n=l=>{s-=1,l!==void 0&&(s=Math.min(s,0)),s===0&&t(l)};r.forEach(l=>QTe(l,d=>n(d===void 0?void 0:{key:d,host:l,isReactive:!1}),i));const o=r.find(l=>"manager"in l&&typeof l.manager=="object"&&l.manager.component===l);return o&&e$e(o,l=>n(l===void 0?void 0:{key:l,host:o,isReactive:!0}),i),i}function t$e(e){gL.readOnly=!0;try{return e()}finally{gL.readOnly=!1}}var i$e=e=>(...t)=>{const i=KX(),r=new e(...t),s=r.exports;QX(i.at(-1));const n=r.component.manager.internals;n.markExports(r,s),r.watchExports(l=>n.markExports(r,l)),HTe(r);const o=[r.component,...i].reverse();return tQ(o,l=>l===void 0?void 0:r$e(r,l,s),s)};function r$e(e,{host:t,key:i,isReactive:r},s){const n=t,o=n[i]!==e.exports,l=n[i]!==s,d=s!==e.exports;if(o&&!l&&d&&(n[i]=e.exports),t===e.component){if(r){const y=e.component.manager.internals;l&&y.markExports(e,n[i]),_D(e.component,i,v=>{v!==e.exports&&y.markExports(e,v)})}e.assignedProperty=r?void 0:i}e.watchExports(()=>{var b;if(n[i]===e.exports)return;const y=e.component.manager;((b=y.internals.setters[i])==null?void 0:b.includes(y.internals.readonlySetter))?t$e(()=>{n[i]=e.exports}):n[i]=e.exports})}var s$e=(e,t)=>new n$e(e,t),n$e=class extends JTe{constructor(e,t){const i="addController"in e,r=new Set;function s(d){var h;r.add(d),!(yD in d)&&e.renderRoot&&e.el.isConnected&&((h=d.hostConnected)==null||h.call(d))}function n(d){var h;r.delete(d),(h=d.controllerRemoved)==null||h.call(d)}const o=e;if(o.addController=s,o.removeController=n,!i){const d=t??e.constructor.__forceUpdate;o.requestUpdate=()=>d(e)}super(e),this.internals=new KTe(this.component),this.destroyed=!1,this._updatePromise=new Mp,this._originalLifecycles={},this.isLit=i,this.component.manager=this,UTe(e,i),this._controllers=r,this.exports=void 0,this.hasDestroy=EA in this.component&&typeof this.component.destroy=="function",this._bindLifecycleMethods();const l=this.internals;Object.keys(l.members).forEach(d=>{l.accessorGetter[d]=Aj,l.accessorSetter[d]=Aj,l.getSetProxy(d)}),i?this.internals.enabledWatchers=this.internals.allWatchers:Object.defineProperty(e,"updateComplete",{get:async()=>await this._updatePromise.promise}),queueMicrotask(l.enableReadonly),Hm(e),oT.set(e.el,e),oT.set(e,e)}_bindLifecycleMethods(){const e=this.component,t=this.isLit,i=e.el===e;this._originalLifecycles={_connectedCallback:t||i?void 0:e.connectedCallback,_disconnectedCallback:t||i?void 0:e.disconnectedCallback,_load:t?e.load:e.componentWillLoad,_loaded:t?e.loaded:e.componentDidLoad,_willUpdate:t?void 0:e.componentWillUpdate,_updated:t?void 0:e.componentDidUpdate,_destroy:e.destroy};const r=this._connectedCallback.bind(this),s=this._disconnectedCallback.bind(this),n=this._update.bind(this),o=this._updated.bind(this);t?e.constructor.prototype.addController.call(e,{hostConnected:r,hostDisconnected:s,hostUpdate:n,hostUpdated:o}):(e.connectedCallback=r,e.disconnectedCallback=s,e.componentWillLoad=this._load.bind(this),e.componentDidLoad=this._loaded.bind(this),e.componentWillUpdate=n,e.componentDidUpdate=o),this.hasDestroy&&(e.destroy=this.destroy.bind(this))}_connectedCallback(){var t,i;if(this.destroyed){const r=this.component.el.tagName.toLowerCase();throw this.component.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${EA} prop.`)}this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout);const e=this.internals;e.enabledWatchers=e.allWatchers,bD(),(t=e.enableReadonly)==null||t.call(e),this._controllers.forEach(a$e),(i=this._originalLifecycles._connectedCallback)==null||i.call(this.component)}_disconnectedCallback(){var e;this.destroyed||(this._controllers.forEach(l$e),(e=this._originalLifecycles._disconnectedCallback)==null||e.call(this.component),this.hasDestroy&&this._setAutoDestroyTimeout())}async _load(){var e;await Promise.allSettled(Array.from(this._controllers,u$e)),await((e=this._originalLifecycles._load)==null?void 0:e.call(this.component)),this.hasDestroy&&_D(this.component,EA,()=>this._setAutoDestroyTimeout())}_loaded(){var e;this._controllers.forEach(c$e),(e=this._originalLifecycles._loaded)==null||e.call(this.component)}_update(){var t;const e=this.component;return this._controllers.forEach(d$e,e.$changes),(t=this._originalLifecycles._willUpdate)==null?void 0:t.call(this.component)}_updated(){var t;const e=this.component;if(this._controllers.forEach(h$e,e.$changes),(t=this._originalLifecycles._updated)==null||t.call(this.component),this.isLit)e.$changes=new Map;else{const i=this._updatePromise;this._updatePromise=new Mp,i.resolve(!0)}}async destroy(){var e;if(!this.destroyed){if(this.component.el.isConnected){this.hasDestroy=!1;try{this.component.el.remove()}finally{this.hasDestroy=!0}}this._autoDestroyTimeout=void 0,this.destroyed=!0,this._controllers.forEach(p$e),this._controllers.clear(),await((e=this._originalLifecycles._destroy)==null?void 0:e.call(this.component))}}_setAutoDestroyTimeout(){if(this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout),!this.component.el.isConnected&&!this.component.autoDestroyDisabled){const e=()=>void this.destroy().catch(console.error);this._autoDestroyTimeout=RTe(e,o$e)}}},EA="autoDestroyDisabled",o$e=1e3,Aj=e=>e;function a$e(e){"triggerConnected"in e?e.triggerConnected():fi(e.hostConnected,e)}function l$e(e){"triggerDisconnected"in e?e.triggerDisconnected():fi(e.hostDisconnected,e)}async function u$e(e){"triggerLoad"in e?await e.triggerLoad():await yL(e.hostLoad,e)}function c$e(e){"triggerLoaded"in e?e.triggerLoaded():fi(e.hostLoaded,e)}function d$e(e){"triggerUpdate"in e?e.triggerUpdate(this):fi(e.hostUpdate,e,this)}function h$e(e){"triggerUpdated"in e?e.triggerUpdated(this):fi(e.hostUpdated,e,this)}function p$e(e){"triggerDestroy"in e?e.triggerDestroy():fi(e.hostDestroy,e)}var f$e=e=>iQ(void 0,e),Bze=e=>t=>iQ(t,e),m$e=class extends vD{constructor(e,t){super(e);const i=this.exports;try{Hm(this.component);const r=t(this.component,this),s=this.exports!==i;if(r instanceof Promise){s||this.setProvisionalExports(r);const n=r.then(o=>{this.exports=o,super.catchUpLifecycle()}).catch(o=>{this._ready.reject(o),console.error(o)});this.onLoad(async()=>await n)}else(!s||r!==void 0)&&(this.exports=r),queueMicrotask(()=>super.catchUpLifecycle())}catch(r){this._ready.reject(r),console.error(r)}}catchUpLifecycle(){}},iQ=i$e(m$e),Hze=(e,t)=>new y$e(e,t),y$e=class extends vD{constructor(e,t){super(),this._attributes=e,this._callback=t,this._observer=new MutationObserver(i=>{i.forEach(r=>{e.includes(r.attributeName)&&t.call(this.component,this.component.el.getAttribute(r.attributeName),r.oldValue,r.attributeName)})})}hostConnected(){this._attributes.forEach(e=>{this.component.el.hasAttribute(e)&&this._callback.call(this.component,null,this.component.el.getAttribute(e),e)}),this._observer.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this._attributes})}hostDisconnected(){this._observer.disconnect()}},Wze=e=>(t={})=>f$e((i,r)=>{const s=WX(i.el),n={_lang:s.lang,_t9nLocale:s.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>CTe(i.el,()=>e("./assets"),({t9nLocale:d,t9nStrings:h,lang:y})=>{const v={...h,_lang:y,_t9nLocale:d,_loading:!1};r.exports=v;const b=h.componentLabel;typeof b=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=b)),l(o.messageOverrides)},t.name));function l(d){const h=r.exports,y=h._original??h,v=rQ(y,d);d&&(v._original=y),r.exports=v}return"messageOverrides"in o&&r.onLifecycle(()=>_D(o,"messageOverrides",l)),t.blocking?(r.setProvisionalExports(n,!1),r.ready):n});function rQ(e,t){if(!t)return e;const i={...e};return Object.entries(t).forEach(([r,s])=>{typeof s=="object"?i[r]=rQ(e[r],s):i[r]=s??e[r]}),i}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const M2=globalThis,wD=M2.ShadowRoot&&(M2.ShadyCSS===void 0||M2.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,SD=Symbol(),Ij=new WeakMap;let sQ=class{constructor(t,i,r){if(this._$cssResult$=!0,r!==SD)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=i}get styleSheet(){let t=this.o;const i=this.t;if(wD&&t===void 0){const r=i!==void 0&&i.length===1;r&&(t=Ij.get(i)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&Ij.set(i,t))}return t}toString(){return this.cssText}};const g$e=e=>new sQ(typeof e=="string"?e:e+"",void 0,SD),Yze=(e,...t)=>{const i=e.length===1?e[0]:t.reduce((r,s,n)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+e[n+1],e[0]);return new sQ(i,e,SD)},v$e=(e,t)=>{if(wD)e.adoptedStyleSheets=t.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of t){const r=document.createElement("style"),s=M2.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=i.cssText,e.appendChild(r)}},Cj=wD?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let i="";for(const r of t.cssRules)i+=r.cssText;return g$e(i)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:b$e,defineProperty:_$e,getOwnPropertyDescriptor:w$e,getOwnPropertyNames:S$e,getOwnPropertySymbols:E$e,getPrototypeOf:T$e}=Object,qc=globalThis,Oj=qc.trustedTypes,$$e=Oj?Oj.emptyScript:"",TA=qc.reactiveElementPolyfillSupport,Eb=(e,t)=>e,bL={toAttribute(e,t){switch(t){case Boolean:e=e?$$e:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=e!==null;break;case Number:i=e===null?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch{i=null}}return i}},nQ=(e,t)=>!b$e(e,t),Lj={attribute:!0,type:String,converter:bL,reflect:!1,useDefault:!1,hasChanged:nQ};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),qc.litPropertyMetadata??(qc.litPropertyMetadata=new WeakMap);let mm=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,i=Lj){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(t,i),!i.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(t,r,i);s!==void 0&&_$e(this.prototype,t,s)}}static getPropertyDescriptor(t,i,r){const{get:s,set:n}=w$e(this.prototype,t)??{get(){return this[i]},set(o){this[i]=o}};return{get:s,set(o){const l=s==null?void 0:s.call(this);n==null||n.call(this,o),this.requestUpdate(t,l,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??Lj}static _$Ei(){if(this.hasOwnProperty(Eb("elementProperties")))return;const t=T$e(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(Eb("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Eb("properties"))){const i=this.properties,r=[...S$e(i),...E$e(i)];for(const s of r)this.createProperty(s,i[s])}const t=this[Symbol.metadata];if(t!==null){const i=litPropertyMetadata.get(t);if(i!==void 0)for(const[r,s]of i)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const s=this._$Eu(i,r);s!==void 0&&this._$Eh.set(s,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const i=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const s of r)i.unshift(Cj(s))}else t!==void 0&&i.push(Cj(t));return i}static _$Eu(t,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(i=>this.enableUpdating=i),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(i=>i(this))}addController(t){var i;(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((i=t.hostConnected)==null||i.call(t))}removeController(t){var i;(i=this._$EO)==null||i.delete(t)}_$E_(){const t=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return v$e(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(i=>{var r;return(r=i.hostConnected)==null?void 0:r.call(i)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(i=>{var r;return(r=i.hostDisconnected)==null?void 0:r.call(i)})}attributeChangedCallback(t,i,r){this._$AK(t,r)}_$ET(t,i){var n;const r=this.constructor.elementProperties.get(t),s=this.constructor._$Eu(t,r);if(s!==void 0&&r.reflect===!0){const o=(((n=r.converter)==null?void 0:n.toAttribute)!==void 0?r.converter:bL).toAttribute(i,r.type);this._$Em=t,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(t,i){var n,o;const r=this.constructor,s=r._$Eh.get(t);if(s!==void 0&&this._$Em!==s){const l=r.getPropertyOptions(s),d=typeof l.converter=="function"?{fromAttribute:l.converter}:((n=l.converter)==null?void 0:n.fromAttribute)!==void 0?l.converter:bL;this._$Em=s,this[s]=d.fromAttribute(i,l.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(t,i,r){var s;if(t!==void 0){const n=this.constructor,o=this[t];if(r??(r=n.getPropertyOptions(t)),!((r.hasChanged??nQ)(o,i)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(t))&&!this.hasAttribute(n._$Eu(t,r))))return;this.C(t,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(t,i,{useDefault:r,reflect:s,wrapped:n},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(t)&&(this._$Ej.set(t,o??i??this[t]),n!==!0||o!==void 0)||(this._$AL.has(t)||(this.hasUpdated||r||(i=void 0),this._$AL.set(t,i)),s===!0&&this._$Em!==t&&(this._$Eq??(this._$Eq=new Set)).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[n,o]of this._$Ep)this[n]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[n,o]of s){const{wrapped:l}=o,d=this[n];l!==!0||this._$AL.has(n)||d===void 0||this.C(n,void 0,o,d)}}let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(r=this._$EO)==null||r.forEach(s=>{var n;return(n=s.hostUpdate)==null?void 0:n.call(s)}),this.update(i)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(i)}willUpdate(t){}_$AE(t){var i;(i=this._$EO)==null||i.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&(this._$Eq=this._$Eq.forEach(i=>this._$ET(i,this[i]))),this._$EM()}updated(t){}firstUpdated(t){}};mm.elementStyles=[],mm.shadowRootOptions={mode:"open"},mm[Eb("elementProperties")]=new Map,mm[Eb("finalized")]=new Map,TA==null||TA({ReactiveElement:mm}),(qc.reactiveElementVersions??(qc.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Tb=globalThis,aT=Tb.trustedTypes,Rj=aT?aT.createPolicy("lit-html",{createHTML:e=>e}):void 0,oQ="$lit$",Oc=`lit$${Math.random().toFixed(9).slice(2)}$`,aQ="?"+Oc,x$e=`<${aQ}>`,Ap=document,i_=()=>Ap.createComment(""),r_=e=>e===null||typeof e!="object"&&typeof e!="function",ED=Array.isArray,lQ=e=>ED(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",$A=`[ 	
\f\r]`,P0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Pj=/-->/g,kj=/>/g,qd=RegExp(`>|${$A}(?:([^\\s"'>=/]+)(${$A}*=${$A}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Dj=/'/g,Nj=/"/g,uQ=/^(?:script|style|textarea|title)$/i,cQ=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),Xze=cQ(1),Qze=cQ(2),nu=Symbol.for("lit-noChange"),lr=Symbol.for("lit-nothing"),Fj=new WeakMap,sp=Ap.createTreeWalker(Ap,129);function dQ(e,t){if(!ED(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return Rj!==void 0?Rj.createHTML(t):t}const M$e=(e,t)=>{const i=e.length-1,r=[];let s,n=t===2?"<svg>":t===3?"<math>":"",o=P0;for(let l=0;l<i;l++){const d=e[l];let h,y,v=-1,b=0;for(;b<d.length&&(o.lastIndex=b,y=o.exec(d),y!==null);)b=o.lastIndex,o===P0?y[1]==="!--"?o=Pj:y[1]!==void 0?o=kj:y[2]!==void 0?(uQ.test(y[2])&&(s=RegExp("</"+y[2],"g")),o=qd):y[3]!==void 0&&(o=qd):o===qd?y[0]===">"?(o=s??P0,v=-1):y[1]===void 0?v=-2:(v=o.lastIndex-y[2].length,h=y[1],o=y[3]===void 0?qd:y[3]==='"'?Nj:Dj):o===Nj||o===Dj?o=qd:o===Pj||o===kj?o=P0:(o=qd,s=void 0);const w=o===qd&&e[l+1].startsWith("/>")?" ":"";n+=o===P0?d+x$e:v>=0?(r.push(h),d.slice(0,v)+oQ+d.slice(v)+Oc+w):d+Oc+(v===-2?l:w)}return[dQ(e,n+(e[i]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),r]};let _L=class hQ{constructor({strings:t,_$litType$:i},r){let s;this.parts=[];let n=0,o=0;const l=t.length-1,d=this.parts,[h,y]=M$e(t,i);if(this.el=hQ.createElement(h,r),sp.currentNode=this.el.content,i===2||i===3){const v=this.el.content.firstChild;v.replaceWith(...v.childNodes)}for(;(s=sp.nextNode())!==null&&d.length<l;){if(s.nodeType===1){if(s.hasAttributes())for(const v of s.getAttributeNames())if(v.endsWith(oQ)){const b=y[o++],w=s.getAttribute(v).split(Oc),E=/([.?@])?(.*)/.exec(b);d.push({type:1,index:n,name:E[2],strings:w,ctor:E[1]==="."?A$e:E[1]==="?"?I$e:E[1]==="@"?C$e:I$}),s.removeAttribute(v)}else v.startsWith(Oc)&&(d.push({type:6,index:n}),s.removeAttribute(v));if(uQ.test(s.tagName)){const v=s.textContent.split(Oc),b=v.length-1;if(b>0){s.textContent=aT?aT.emptyScript:"";for(let w=0;w<b;w++)s.append(v[w],i_()),sp.nextNode(),d.push({type:2,index:++n});s.append(v[b],i_())}}}else if(s.nodeType===8)if(s.data===aQ)d.push({type:2,index:n});else{let v=-1;for(;(v=s.data.indexOf(Oc,v+1))!==-1;)d.push({type:7,index:n}),v+=Oc.length-1}n++}}static createElement(t,i){const r=Ap.createElement("template");return r.innerHTML=t,r}};function Ip(e,t,i=e,r){var o,l;if(t===nu)return t;let s=r!==void 0?(o=i._$Co)==null?void 0:o[r]:i._$Cl;const n=r_(t)?void 0:t._$litDirective$;return(s==null?void 0:s.constructor)!==n&&((l=s==null?void 0:s._$AO)==null||l.call(s,!1),n===void 0?s=void 0:(s=new n(e),s._$AT(e,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=s:i._$Cl=s),s!==void 0&&(t=Ip(e,s._$AS(e,t.values),s,r)),t}let pQ=class{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:r}=this._$AD,s=((t==null?void 0:t.creationScope)??Ap).importNode(i,!0);sp.currentNode=s;let n=sp.nextNode(),o=0,l=0,d=r[0];for(;d!==void 0;){if(o===d.index){let h;d.type===2?h=new A$(n,n.nextSibling,this,t):d.type===1?h=new d.ctor(n,d.name,d.strings,this,t):d.type===6&&(h=new mQ(n,this,t)),this._$AV.push(h),d=r[++l]}o!==(d==null?void 0:d.index)&&(n=sp.nextNode(),o++)}return sp.currentNode=Ap,s}p(t){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,i),i+=r.strings.length-2):r._$AI(t[i])),i++}},A$=class fQ{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,i,r,s){this.type=2,this._$AH=lr,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=Ip(this,t,i),r_(t)?t===lr||t==null||t===""?(this._$AH!==lr&&this._$AR(),this._$AH=lr):t!==this._$AH&&t!==nu&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):lQ(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==lr&&r_(this._$AH)?this._$AA.nextSibling.data=t:this.T(Ap.createTextNode(t)),this._$AH=t}$(t){var n;const{values:i,_$litType$:r}=t,s=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=_L.createElement(dQ(r.h,r.h[0]),this.options)),r);if(((n=this._$AH)==null?void 0:n._$AD)===s)this._$AH.p(i);else{const o=new pQ(s,this),l=o.u(this.options);o.p(i),this.T(l),this._$AH=o}}_$AC(t){let i=Fj.get(t.strings);return i===void 0&&Fj.set(t.strings,i=new _L(t)),i}k(t){ED(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,s=0;for(const n of t)s===i.length?i.push(r=new fQ(this.O(i_()),this.O(i_()),this,this.options)):r=i[s],r._$AI(n),s++;s<i.length&&(this._$AR(r&&r._$AB.nextSibling,s),i.length=s)}_$AR(t=this._$AA.nextSibling,i){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,i);t&&t!==this._$AB;){const s=t.nextSibling;t.remove(),t=s}}setConnected(t){var i;this._$AM===void 0&&(this._$Cv=t,(i=this._$AP)==null||i.call(this,t))}},I$=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,r,s,n){this.type=1,this._$AH=lr,this._$AN=void 0,this.element=t,this.name=i,this._$AM=s,this.options=n,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=lr}_$AI(t,i=this,r,s){const n=this.strings;let o=!1;if(n===void 0)t=Ip(this,t,i,0),o=!r_(t)||t!==this._$AH&&t!==nu,o&&(this._$AH=t);else{const l=t;let d,h;for(t=n[0],d=0;d<n.length-1;d++)h=Ip(this,l[r+d],i,d),h===nu&&(h=this._$AH[d]),o||(o=!r_(h)||h!==this._$AH[d]),h===lr?t=lr:t!==lr&&(t+=(h??"")+n[d+1]),this._$AH[d]=h}o&&!s&&this.j(t)}j(t){t===lr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},A$e=class extends I${constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===lr?void 0:t}},I$e=class extends I${constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==lr)}},C$e=class extends I${constructor(t,i,r,s,n){super(t,i,r,s,n),this.type=5}_$AI(t,i=this){if((t=Ip(this,t,i,0)??lr)===nu)return;const r=this._$AH,s=t===lr&&r!==lr||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,n=t!==lr&&(r===lr||s);s&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i;typeof this._$AH=="function"?this._$AH.call(((i=this.options)==null?void 0:i.host)??this.element,t):this._$AH.handleEvent(t)}},mQ=class{constructor(t,i,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){Ip(this,t)}};const ym={R:pQ,D:lQ,V:Ip,I:A$,F:mQ},xA=Tb.litHtmlPolyfillSupport;xA==null||xA(_L,A$),(Tb.litHtmlVersions??(Tb.litHtmlVersions=[])).push("3.3.0");const yQ=(e,t,i)=>{const r=(i==null?void 0:i.renderBefore)??t;let s=r._$litPart$;if(s===void 0){const n=(i==null?void 0:i.renderBefore)??null;r._$litPart$=s=new A$(t.insertBefore(i_(),n),n,void 0,i??{})}return s._$AI(e),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pp=globalThis;let py=class extends mm{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const t=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=t.firstChild),t}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=yQ(i,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return nu}};var fG;py._$litElement$=!0,py.finalized=!0,(fG=pp.litElementHydrateSupport)==null||fG.call(pp,{LitElement:py});const MA=pp.litElementPolyfillSupport;MA==null||MA({LitElement:py});(pp.litElementVersions??(pp.litElementVersions=[])).push("4.2.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Yh={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},gQ=e=>(...t)=>({_$litDirective$:e,values:t});let vQ=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,i,r){this._$Ct=t,this._$AM=i,this._$Ci=r}_$AS(t,i){return this.update(t,i)}update(t,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const O$e=gQ(class extends vQ{constructor(e){var t;if(super(e),e.type!==Yh.ATTRIBUTE||e.name!=="class"||((t=e.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){var r,s;if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(n=>n!=="")));for(const n in t)t[n]&&!((r=this.nt)!=null&&r.has(n))&&this.st.add(n);return this.render(t)}const i=e.element.classList;for(const n of this.st)n in t||(i.remove(n),this.st.delete(n));for(const n in t){const o=!!t[n];o===this.st.has(n)||(s=this.nt)!=null&&s.has(n)||(o?(i.add(n),this.st.add(n)):(i.remove(n),this.st.delete(n)))}return nu}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bQ="important",L$e=" !"+bQ,R$e=gQ(class extends vQ{constructor(e){var t;if(super(e),e.type!==Yh.ATTRIBUTE||e.name!=="style"||((t=e.strings)==null?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,i)=>{const r=e[i];return r==null?t:t+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(e,[t]){const{style:i}=e.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(const r of this.ft)t[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in t){const s=t[r];if(s!=null){this.ft.add(r);const n=typeof s=="string"&&s.endsWith(L$e);r.includes("-")||n?i.setProperty(r,n?s.slice(0,-11):s,n?bQ:""):i[r]=s}}return nu}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:P$e}=ym,k$e=e=>e===null||typeof e!="object"&&typeof e!="function",D$e=(e,t)=>(e==null?void 0:e._$litType$)!==void 0,N$e=e=>{var t;return((t=e==null?void 0:e._$litType$)==null?void 0:t.h)!=null},F$e=e=>e.strings===void 0,Vj=()=>document.createComment(""),aje=(e,t,i)=>{var n;const r=e._$AA.parentNode,s=t===void 0?e._$AB:t._$AA;if(i===void 0){const o=r.insertBefore(Vj(),s),l=r.insertBefore(Vj(),s);i=new P$e(o,l,e,e.options)}else{const o=i._$AB.nextSibling,l=i._$AM,d=l!==e;if(d){let h;(n=i._$AQ)==null||n.call(i,e),i._$AM=e,i._$AP!==void 0&&(h=e._$AU)!==l._$AU&&i._$AP(h)}if(o!==s||d){let h=i._$AA;for(;h!==o;){const y=h.nextSibling;r.insertBefore(h,s),h=y}}}return i},lje=(e,t,i=e)=>(e._$AI(t,i),e),V$e={},uje=(e,t=V$e)=>e._$AH=t,cje=e=>e._$AH,dje=e=>{var r;(r=e._$AP)==null||r.call(e,!1,!0);let t=e._$AA;const i=e._$AB.nextSibling;for(;t!==i;){const s=t.nextSibling;t.remove(),t=s}};var _Q=(e="",t={},i=M$())=>{const r={emit:s=>{e===""&&bD();const n=new CustomEvent(e,{detail:s,cancelable:!0,bubbles:!0,composed:!0,...t});return i.el.dispatchEvent(n),n}};return e===""&&tQ(void 0,s=>{e=s.key},r),r},hje=_Q.bind(null,""),z$e=()=>{},fp,j$e=(fp=class extends py{constructor(){var i,r,s;super(),this.el=this.constructor.lazy??this,this.manager=s$e(this),this._postLoad=((i=this.constructor.lazy)==null?void 0:i._postLoad)??new Mp,this._offspring=((r=this.constructor.lazy)==null?void 0:r._offspring)??[],this._postLoaded=((s=this.constructor.lazy)==null?void 0:s._postLoaded)??new Mp,this._enableUpdating=this.enableUpdating,this.enableUpdating=z$e;const t=fp.prototype.shouldUpdate;this.shouldUpdate!==t&&(this._originalShouldUpdate=this.shouldUpdate,this.shouldUpdate=t)}static finalizeStyles(t){var s;const i=super.finalizeStyles(t),r=this.shadowRootOptions===Tj;return((s=this.runtime)==null?void 0:s.commonStyles)===void 0||r?i:[this.runtime.commonStyles,...i]}static createProperty(t,i){const r=typeof i=="number"?i:Array.isArray(i)?i[0]:0,s=Array.isArray(i)?i[1]:void 0;super.createProperty(t,{attribute:r&1&&typeof t=="string"?YX(t):!1,reflect:!!(r&2),type:r&4?Boolean:r&8?Number:void 0,state:!!(r&16),readOnly:!!(r&32),noAccessor:!!(r&64),...s})}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const t=!this.manager.connectedCalled;super.connectedCallback(),t&&queueMicrotask(()=>this._load().catch(i=>{this._postLoaded.reject(i),setTimeout(()=>{throw i})}))}createRenderRoot(){const t=this.el.shadowRoot,i=this.constructor,r=i.shadowRootOptions,n=t??(r===Tj?this.el:this.el.attachShadow(r));if(Object.defineProperty(this,"shadowRoot",{value:n}),t)return py.prototype.createRenderRoot.call(this),t;if(this.isConnected){const o=n.getRootNode();o.adoptedStyleSheets=[...o.adoptedStyleSheets,...i.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return n}async _load(){const t=this.el._ancestorLoad??JX(this.el);t&&await t,await this.manager._load(),this._enableUpdating(!0),this.performUpdate(),this._postLoad.resolve(),await Promise.resolve();const i=this._offspring.filter(r=>{var s;return!((s=r.manager)!=null&&s.loadedCalled)});i.length&&await Promise.allSettled(i.map(async r=>await r.componentOnReady())),this._offspring.length=0,this.el.setAttribute(this.constructor.runtime.hydratedAttribute,""),this.manager._loaded(),this._postLoaded.resolve()}shouldUpdate(t){var i;return this.$changes=t,((i=this._originalShouldUpdate)==null?void 0:i.call(this,t))??!0}listen(t,i,r){const s=(i==null?void 0:i.bind(this))??i;this.manager.onLifecycle(()=>(this.el.addEventListener(t,s,r),()=>this.el.removeEventListener(t,s,r)))}listenOn(t,i,r,s){const n=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(t.addEventListener(i,n,s),()=>t.removeEventListener(i,n,s)))}async componentOnReady(){return await this._postLoaded.promise,this}},fp.lumina=!0,fp);j$e.$createEvent=_Q;function U$e(e){let t;const i=s=>{var n;t=new URL(s,((n=globalThis.location)==null?void 0:n.href)||void 0).href},r={...e,getAssetPath(s){var o;const n=new URL(s,t);return n.origin!==((o=globalThis.location)==null?void 0:o.origin)?n.href:n.pathname},setAssetPath:i,customElement(s,n){n.runtime=r,n.tagName=s,customElements.get(s)||customElements.define(s,n)}};return i(e.defaultAssetPath),r}var pje=e=>typeof e=="object"&&e!=null?O$e(e):e,fje=e=>typeof e=="object"&&e!=null?R$e(e):e,mje=lr;function yje(e,t,i){i==null?e.removeAttribute(t):e.setAttribute(t,i)}var gje={toAttribute:e=>e===!0?"":e===!1?null:e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.1.0 */const wQ="calcite-mode-auto",SQ="calcite-mode-dark",G$e="calcite-mode-light",vje={autoMode:wQ,darkMode:SQ,lightMode:G$e,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left"},bje={filter:250,nextTick:0,resize:150,reposition:100};function zj(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(SQ)||e.contains(wQ)&&t?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&r(o),n=o};let n=i();r(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const Ql=globalThis.calciteConfig,_je=(Ql==null?void 0:Ql.focusTrapStack)||[],wje=(Ql==null?void 0:Ql.logLevel)||"info",jj="3.1.0",q$e="2025-03-26",B$e="d5f75fd64";function H$e(){if(Ql&&Ql.version)return;console.info(`Using Calcite Components ${jj} [Date: ${q$e}, Revision: ${B$e}]`);const e=Ql||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:jj,writable:!1}),globalThis.calciteConfig=e}const EQ=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;function W$e(){return navigator.userAgentData}function Sje(){if(!EQ())return"";const e=W$e();return e!=null&&e.brands?e.brands.map(({brand:t,version:i})=>`${t}/${i}`).join(" "):navigator.userAgent}function Z$e(){EQ()&&(document.readyState==="interactive"?zj():document.addEventListener("DOMContentLoaded",()=>zj(),{once:!0})),H$e()}Z$e();const TQ=U$e({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.1.0/",hydratedAttribute:"calcite-hydrated"}),{customElement:Eje,getAssetPath:Tje,setAssetPath:Y$e}=TQ;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.1.0 */let $Q=!1;const J$e=e=>{$Q=!0,Y$e(e)};let xQ;function X$e(){$Q||J$e(Hn(oi(xQ)))}function ng(e){var i;const t=[];for(const r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push((i=e[r])==null?void 0:i.call(e));return t.length>0?Promise.all(t):null}xQ="components/assets";const MQ=Symbol("widget"),AQ=Symbol("widget-test-data"),Q$e=[],K$e={},lT=new WeakMap;function IQ(e,t){let i=t.children;if(i!=null&&i.length)for(let s=0;s<i.length;++s)i[s]=IQ(e,i[s]);else i=Q$e;const r=t.vnodeSelector;if(uT(r)){const s=t.properties||K$e,n=s.key||r,o={key:n,afterCreate:exe,afterUpdate:txe,afterRemoved:CQ,parentWidget:e,widgetConstructor:r,widgetProperties:{...s,key:n,children:i}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function exe(e,t,i,{parentWidget:r,widgetConstructor:s,widgetProperties:n}){var l;const o=new s(n);o.container=e,lT.set(e,o),(l=o.afterCreate)==null||l.call(o,o,e),r.addHandles(bt(()=>CQ(e))),queueMicrotask(()=>{o[AQ].projector.renderNow()})}function txe(e,t,i,{widgetProperties:r}){var n;const s=lT.get(e);s&&(s.set(r),(n=s.afterUpdate)==null||n.call(s,s,e))}function CQ(e){var i;const t=lT.get(e);t&&((i=t.afterRemoved)==null||i.call(t,t,e),t.destroy(),lT.delete(e))}function uT(e){return typeof e=="function"&&e[MQ]}const Uj=new Set;function ixe(e){Uj.add(e),e.finally(()=>Uj.delete(e))}var OQ;const rxe="esri.widgets.Widget";let sxe=0;function LQ(e,t){const i=Object.prototype.hasOwnProperty;for(const r in t)i.call(t,r)&&i.call(e,r)&&(e[r]!=null&&t[r]!=null&&typeof e[r]=="object"&&typeof t[r]=="object"?LQ(e[r],t[r]):e[r]=t[r]);return e}const nxe=vTe({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,s,n,o)=>{const l=t==null?void 0:t(r,s,n,o),d=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in n)||d){const h=r[2].toLowerCase()+r.slice(3),y=w=>l==null?void 0:l.call(n,w);n.addEventListener(h,y,d);const v=()=>n.removeEventListener(h,y,d),b=o.afterRemoved;o.afterRemoved=w=>{b==null||b(w),v()}}return l}},handleInterceptedEvent(e,t,i,r){const{eventPhase:s,type:n}=r,o=s===Event.CAPTURING_PHASE;let l=`on${n}${o?"capture":""}`;const d=t.properties;(d&&l in d||(l=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,d&&l in d))&&(MZ(),e.scheduleRender(),d[l].call(d.bind||i,r))}});let AA=!1,Gi=class extends M_.EsriPromiseMixin(Kn.EventedAccessor){constructor(t,i){super(t,i),this._attached=!1,this._projector=nxe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=IT(async()=>{var d;if((d=this._messageBundleProps)!=null&&d.length){const h=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:y,propertyName:v})=>{if(this.destroyed)return;let b=await YP(y);this.uiStrings&&Object.keys(this.uiStrings)&&(b=LQ(q(b),this.uiStrings)),this[v]=b}));if(this.destroyed)return;for(const y of h)y.status==="rejected"&&ae.getLogger(this).error("widget-intl:locale-error",this.declaredClass,y.reason)}await this.loadLocale()}),X$e();const r="esri-widget-uid-"+x$(),s=this.render.bind(this);this._trackingTarget=new CT(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const n=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var v,b;if(!this._readyForTrueRender||this.destroyed)return null;const d=s()??n(),h=d.properties??(d.properties={});if(h.key??(h.key=r),uT(d.vnodeSelector)){if(!this.visible)return n()}else this.visible?h.styles||(h.styles={}):(h.class="",h.styles={display:"none"}),(v=h.styles).display??(v.display="");let y=0;return(b=d.children)==null||b.forEach(w=>{var E;uT(w.vnodeSelector)||(w.properties??(w.properties={}),(E=w.properties).key??(E.key=`${this.id}--${y++}`))}),IQ(this,d)};this.render=()=>{if(AA)return o();let d=qye(this)??null;if(d)return d;this._trackingTarget.clear(),AA=!0;try{d=eu(this._trackingTarget,o)}catch(h){throw ae.getLogger(this).error(h),h}finally{AA=!1}return d&&Bye(this,d),d};const l=this.beforeFirstRender();l?this._resourcesFetch=l.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),ixe(this._resourcesFetch)}normalizeCtorArgs(t,i){const r={...t};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const t=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(EF):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Zt(this._trackingTarget),Zt(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,G3(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return Mk(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+sxe++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(OQ=MQ,AQ)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(G3(this),this._projector.scheduleRender())}classes(...t){return Um.apply(this,t)}renderNow(){G3(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(ve(()=>this.viewModel,(r,s)=>{s&&this.removeHandles("delegated-events"),r&&AT(r)&&this.addHandles(this._delegatedEventNames.map(n=>b_(r,n,o=>{this.emit(n,o)})),"delegated-events")},ks)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(EF),this.scheduleRender()};this.addHandles([HP(t),ve(()=>this.uiStrings,t),qs(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=t==null?void 0:t.parentNode)==null||i.removeChild(t)}};Gi[OQ]=!0,Gi.vnodeSelector="div",c([p()],Gi.prototype,"_readyForTrueRender",void 0),c([p({value:null})],Gi.prototype,"container",null),c([mt("container")],Gi.prototype,"castContainer",null),c([p()],Gi.prototype,"icon",null),c([p()],Gi.prototype,"id",null),c([p()],Gi.prototype,"label",null),c([p()],Gi.prototype,"renderable",null),c([p()],Gi.prototype,"uiStrings",void 0),c([p()],Gi.prototype,"viewModel",void 0),c([p({value:!0})],Gi.prototype,"visible",null),c([p()],Gi.prototype,"key",void 0),c([p()],Gi.prototype,"children",void 0),c([p()],Gi.prototype,"afterCreate",void 0),c([p()],Gi.prototype,"afterUpdate",void 0),c([p()],Gi.prototype,"afterRemoved",void 0),Gi=c([I(rxe)],Gi);const Ji=Gi,oxe=new Map;function axe(e){return oxe.get(e)}function Gj(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function lxe(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function k0(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function uxe(e){return e.type==="bing-maps"}const fl=[];let gm=class extends Me{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new _e,this.view=null,this._allLayerViewsChange=i=>{var s;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(s=this.view)==null?void 0:s.allLayerViews;r&&(this.addHandles(r.map(n=>ve(()=>{var o;return[n.suspended,(o=n.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(n=>{n.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(n.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i!=null&&i.removed&&i.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.addHandles([zs(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),qs(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var t;return(t=this.view)!=null&&t.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,i=t==null?void 0:t.allLayerViews;if(fl.length=0,!t||!i)return void this._clear();i.forEach(s=>{var l,d;if(s.suspended||!((l=s.layer)!=null&&l.attributionVisible))return;const n=s.layer;if(Gj(n,"user"))return void k0(fl,s,n.copyright);if(n.hasAttributionData){if(this._fetchedAttributionData.has(s)){const h=this._fetchedAttributionData.get(s);return void(h?k0(fl,s,this._getDynamicAttribution(h,t,n)):Gj(n)&&k0(fl,s,n.copyright))}return void this._fetchAttributionData(s)}const o="portalItem"in n?(d=n.portalItem)==null?void 0:d.accessInformation:void 0;k0(fl,s,o||n.copyright)});const r=i.find(s=>{var n;return((n=s.layer)==null?void 0:n.type)==="integrated-mesh-3dtiles"});if(this.view&&r){const s=axe(this.view);if(s){const n=s.getAttributionText();for(let o=0;o<n.length;++o)k0(fl,r,n[o])}}lxe(this.items,fl)&&(this.items.removeAll(),this.items.addMany(fl)),fl.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const i=await DT(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const r=i.ok?this._createContributionIndex(i.value,uxe(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,r)}this._updateAttributionItems()}_createContributionIndex(t,i){const r=t.contributors,s={};if(!r)return s;for(let n=0;n<r.length;n++){const o=r[n],l=o.coverageAreas;if(!l)return;for(const d of l){const h=d.bbox,y=d.zoomMin-(i&&d.zoomMin?1:0),v=d.zoomMax-(i&&d.zoomMax?1:0),b=new Jt({xmin:h[1],ymin:h[0],xmax:h[3],ymax:h[2],spatialReference:tt.WGS84}),w={extent:ap(b),attribution:o.attribution||"",score:d.score!=null?d.score:100,id:n};for(let E=y;E<=v;E++)s[E]??(s[E]=[]),s[E].push(w)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(t,i,r){var y;const{extent:s,scale:n}=i;let o=((y=r.tileInfo)==null?void 0:y.scaleToZoom(n))??0;if(o=Math.min(t.maxKey??0,Math.round(o)),!s||o==null||o<=-1)return"";const l=t[o],d=VT(s.center.clone().normalize(),tt.WebMercator),h=new Set;return l?l.filter(v=>{const b=v.id,w=!h.has(b)&&d&&v.extent&&I_(v.extent,d);return w&&h.add(b),w}).sort((v,b)=>b.score-v.score||v.objectId-b.objectId).map(v=>v.attribution).join(", "):""}};c([p({readOnly:!0,type:_e})],gm.prototype,"items",void 0),c([p({readOnly:!0})],gm.prototype,"state",null),c([p()],gm.prototype,"view",void 0),gm=c([I("esri.widgets.Attribution.AttributionViewModel")],gm);const RQ=gm,Tr={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",heading:"esri-widget__heading",hidden:"esri-hidden",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function cxe(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:hxe(e[t])}}}function dxe(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function hxe(e){return function(t,...i){dxe(t)?Yye(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function ja(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var pxe=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},PQ=function(e,t){for(var i=0,r=e.length;i<r;i++){var s=e[i];Array.isArray(s)?PQ(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=pxe(s)),t.push(s))}},fxe=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var s=[];return PQ(i,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function k(e,t,...i){return typeof e!="function"||uT(e)?fxe(e,t??null,...i):e(t,...i)}function Mje(...e){return e}const zf="esri-attribution",jf={base:zf,poweredBy:`${zf}__powered-by`,sources:`${zf}__sources`,open:`${zf}--open`,sourcesOpen:`${zf}__sources--open`,link:`${zf}__link`};let ds=class extends Ji{constructor(t,i){super(t,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new RQ}initialize(){this.addHandles(zs(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,i)=>(t.includes(i.text)||t.push(i.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[jf.open]:this._isOpen};return k("div",{bind:this,class:this.classes(jf.base,Tr.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return k("div",{class:jf.poweredBy},"Powered by"," ",k("a",{class:jf.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:s}=this,n={[jf.sourcesOpen]:t,[Tr.interactive]:i};return k("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(jf.sources,n),innerHTML:s,tabIndex:r})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let i=!1;const{clientHeight:r,clientWidth:s,scrollWidth:n}=t,o=n>s,l=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,l&&(i=!0),this._isOpen){const d=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,d&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([p()],ds.prototype,"_isOpen",void 0),c([p()],ds.prototype,"_isInteractive",null),c([p()],ds.prototype,"_attributionTextOverflowed",void 0),c([p()],ds.prototype,"_prevSourceNodeHeight",void 0),c([p({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],ds.prototype,"attributionText",null),c([p()],ds.prototype,"icon",null),c([p()],ds.prototype,"itemDelimiter",void 0),c([p()],ds.prototype,"label",null),c([p(),ja("esri/widgets/Attribution/t9n/Attribution")],ds.prototype,"messages",void 0),c([p()],ds.prototype,"view",null),c([p({type:RQ})],ds.prototype,"viewModel",void 0),c([cxe()],ds.prototype,"_toggleState",null),ds=c([I("esri.widgets.Attribution")],ds);const mxe=ds;function yxe(){const e=Y("mapview-essential-goto-duration");return e==null?e:e}function gxe(e){var t,i;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((i=e==null?void 0:e.spatialReference)==null?void 0:i.isGeographic)||!1}const vxe=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return m_(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return c([p()],t.prototype,"goToOverride",void 0),c([p()],t.prototype,"view",void 0),t=c([I("esri.widgets.support.GoTo")],t),t};let _h=class extends vxe(Me){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(yt)}destroy(){this.view=null}get canShowNorth(){return gxe(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,i;(t=this.view)!=null&&t.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:yxe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const i=-t.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(t){this.removeAllHandles(),this._watchForView(),t&&this.addHandles(t.type==="2d"?ve(()=>t==null?void 0:t.rotation,this._updateForRotation,yt):ve(()=>t==null?void 0:t.camera,this._updateForCamera,yt))}_watchForView(t){this.addHandles(ve(()=>this.view,this._updateRotationWatcher,t))}};c([p({readOnly:!0})],_h.prototype,"canShowNorth",null),c([p({readOnly:!0})],_h.prototype,"orientation",void 0),c([p({readOnly:!0})],_h.prototype,"state",null),c([p()],_h.prototype,"view",void 0),_h=c([I("esri.widgets.Compass.CompassViewModel")],_h);const kQ=_h,qj="esri-compass",Bj={base:qj,iconContainer:`${qj}__icon-container`};let Cl=class extends Ji{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new kQ,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return ng({button:()=>D(()=>import("./index-BnkLrfPs.js"),__vite__mapDeps([257,258,259,260,261,262,263,264,265,266,267,268,269,270,271])),icon:()=>D(()=>import("./index-DZcWOJe1.js").then(t=>t.i),__vite__mapDeps([261,262,259,263,264]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:i}=this.viewModel,{messages:r}=this;return k("div",{class:this.classes(Bj.base,Tr.widget)},k("calcite-button",{class:Tr.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},k("div",{"aria-hidden":"true",class:Bj.iconContainer,title:r.reset},k("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};c([p()],Cl.prototype,"goToOverride",null),c([p()],Cl.prototype,"icon",null),c([p()],Cl.prototype,"label",null),c([p(),ja("esri/widgets/Compass/t9n/Compass")],Cl.prototype,"messages",void 0),c([p()],Cl.prototype,"view",null),c([p({type:kQ})],Cl.prototype,"viewModel",void 0),Cl=c([I("esri.widgets.Compass")],Cl);const bxe=Cl,Hj="esri-navigation-toggle",Wj={base:Hj,isLayoutHorizontal:`${Hj}--horizontal`};let vm=class extends Me{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(qs(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.navigation)==null?void 0:i.actionMap},()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){var t,i;return(t=this.view)!=null&&t.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var r,s;const t=(s=(r=this.view)==null?void 0:r.navigation)==null?void 0:s.actionMap;if(!t)return;const i=this._navigationMode==="pan";t.dragPrimary=i?"pan":"rotate",t.dragSecondary=i?"rotate":"pan"}};c([p({readOnly:!0})],vm.prototype,"state",null),c([p()],vm.prototype,"_navigationMode",void 0),c([p()],vm.prototype,"view",void 0),vm=c([I("esri.widgets.NavigationToggle.NavigationToggleViewModel")],vm);const DQ=vm;let Ol=class extends Ji{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new DQ,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var s;const r=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan"?this._rotateButton:this._panButton;pb(r),this.toggle()}}loadDependencies(){return ng({button:()=>D(()=>import("./index-BnkLrfPs.js"),__vite__mapDeps([257,258,259,260,261,262,263,264,265,266,267,268,269,270,271]))})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var s,n;const t=((s=this.viewModel)==null?void 0:s.state)==="disabled",i=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan",r=this.messages.toggle;return k("div",{class:this.classes(Wj.base,Tr.widget,{[Wj.isLayoutHorizontal]:this.layout==="horizontal"})},k("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:i?"outline-fill":"solid",class:Tr.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),k("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:i?"solid":"outline-fill",class:Tr.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};c([p()],Ol.prototype,"icon",null),c([p()],Ol.prototype,"label",null),c([p({value:"vertical"})],Ol.prototype,"layout",null),c([p(),ja("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Ol.prototype,"messages",void 0),c([p()],Ol.prototype,"view",null),c([p({type:DQ})],Ol.prototype,"viewModel",void 0),Ol=c([I("esri.widgets.NavigationToggle")],Ol);const _xe=Ol;let wh=class extends Me{get canZoomIn(){var r,s,n;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(n=(s=this.view)==null?void 0:s.constraints)==null?void 0:n.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var s;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const r=(s=t.constraints)==null?void 0:s.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,s;const t=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(t&&"then"in t||t==null?void 0:t.scale)??((s=this.view)==null?void 0:s.scale)??0}};c([p({readOnly:!0})],wh.prototype,"canZoomIn",null),c([p({readOnly:!0})],wh.prototype,"canZoomOut",null),c([p()],wh.prototype,"view",void 0),c([p()],wh.prototype,"_scale",null),wh=c([I("esri.widgets.Zoom.ZoomConditions2D")],wh);const wxe=wh;let bm=class extends Me{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};c([p({readOnly:!0})],bm.prototype,"canZoomIn",null),c([p({readOnly:!0})],bm.prototype,"canZoomOut",null),c([p()],bm.prototype,"view",void 0),bm=c([I("esri.widgets.Zoom.ZoomConditions3D")],bm);const Sxe=bm;let hc=class extends Me{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new wxe({view:t}):t.type==="3d"&&(this._zoomConditions=new Sxe({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){const t=this.view;this.canZoomIn&&t&&(t.type==="2d"?t.mapViewNavigation.zoomIn():Rb(t.goTo({zoomFactor:2})))}zoomOut(){const t=this.view;this.canZoomOut&&t&&(t.type==="2d"?t.mapViewNavigation.zoomOut():Rb(t.goTo({zoomFactor:.5})))}};c([p()],hc.prototype,"_zoomConditions",void 0),c([p()],hc.prototype,"canZoomIn",null),c([p()],hc.prototype,"canZoomOut",null),c([p({readOnly:!0})],hc.prototype,"state",null),c([p()],hc.prototype,"view",null),hc=c([I("esri.widgets.Zoom.ZoomViewModel")],hc);const NQ=hc,Zj={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Ll=class extends Ji{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new NQ,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return ng({button:()=>D(()=>import("./index-BnkLrfPs.js"),__vite__mapDeps([257,258,259,260,261,262,263,264,265,266,267,268,269,270,271]))})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[Zj.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return k("div",{class:this.classes(Zj.base,Tr.widget,t)},k("calcite-button",{class:Tr.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),k("calcite-button",{class:Tr.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};c([p()],Ll.prototype,"icon",null),c([p()],Ll.prototype,"label",null),c([p({value:"vertical"})],Ll.prototype,"layout",null),c([p(),ja("esri/widgets/Zoom/t9n/Zoom")],Ll.prototype,"messages",void 0),c([p()],Ll.prototype,"view",null),c([p({type:NQ})],Ll.prototype,"viewModel",void 0),Ll=c([I("esri.widgets.Zoom")],Ll);const Exe=Ll;function Txe(e){return(e==null?void 0:e.view)!==void 0}let A2=class extends uTe{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const s=this._find(r),n=s==null?void 0:s.widget;Txe(n)&&(n.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([ve(()=>this.components,this._componentsWatcher,yt),ve(()=>this.view,this._updateViewAwareWidgets,yt)])}_add(t,i,r,s,n){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,i,r,s,n)}_removeComponents(t){t.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(t){this.constructed&&t.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(t){const i=this._createWidget(t);return new $2({id:t,node:i})}_createWidget(t){const i=this.view;switch(t){case"attribution":return new mxe({view:i});case"compass":return new bxe({view:i});case"navigation-toggle":return new _xe({view:i});case"zoom":return new Exe({view:i})}}};c([p()],A2.prototype,"components",void 0),A2=c([I("esri.views.ui.DefaultUI")],A2);const FQ=A2;let I2=class extends FQ{constructor(t){super(t),this.components=["attribution","zoom"]}};c([p()],I2.prototype,"components",void 0),I2=c([I("esri.views.ui.2d.DefaultUI2D")],I2);const VQ=I2;let zQ=class wL{constructor(t,i,r=""){this.major=t,this.minor=i,this._context=r}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}greaterEqual(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new B(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new wL(this.major,this.minor,this._context)}static parse(t,i=""){const[r,s]=t.split("."),n=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!n.test(r))throw new B((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(s!=null&&s.match)||!n.test(s))throw new B((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(r,10),l=parseInt(s,10);return new wL(o,l,i)}},$xe=class extends zQ{constructor(t,i){super(t,i,"webmap")}};function IA(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}new $xe(2,33);var SL;let C2=SL=class extends se{constructor(e){super(e),this.color=new ye([0,0,0,1])}clone(){return new SL(q({color:this.color}))}};c([p({type:ye,json:{write:!0}})],C2.prototype,"color",void 0),C2=SL=c([I("esri.webmap.background.ColorBackground")],C2);const xxe=C2;let jQ,UQ,GQ,qQ,BQ,HQ,WQ;async function Mxe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,GridView2D:n,Stage:o}]=await Promise.all([D(()=>import("./webglDeps-NIshmyIl.js"),__vite__mapDeps([181,156,7,182,183,184])),D(()=>import("./mapViewDeps-BgTWW0Dx.js"),__vite__mapDeps([185,89,186,87,88,28,7,90,91,92,93,85,96,187,182,156,183,160,136,86,57,188,84,114,189,143,142,100,32,27,33,94,102,190,97,98,99,191,18,141,181,184,192,109,193,83,30,24,37,36,194,149,150,134,158,195,73,196,101,197,198,95,199,62,106,81,200,201,202,203,152,204,205]))]);UQ=e,GQ=t,qQ=i,BQ=r,HQ=s,WQ=n,jQ=o}let lt=class extends NSe(Xme(Tge(cge(Hbe)))){constructor(t){super(t),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new qb({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new v$({actionMap:new Xk({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new _e,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new UX,this.type="2d",this.view2dType=null,this.ui=new VQ,this.test={takeScreenshot:async i=>qEe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},hme()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Zt(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new X2e(this.featuresTilingScheme)}get constraintsInfo(){var r,s;const t=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(s=t==null?void 0:t.spatialReference)!=null&&s.equals(i)?t.lods:null,spatialReference:i}}get initialExtentRequired(){var l;if(!this.stateManager)return!1;const{scale:t,constraints:i,center:r,viewpoint:s,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((l=this.map.initialViewProperties)!=null&&l.viewpoint))&&!n&&(i!=null&&i.effectiveLODs||(o=-1),(!r||t===0&&o===-1)&&((s==null?void 0:s.targetGeometry)==null||s.targetGeometry.type!=="extent"&&!s.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const i=t.targetGeometry,r=this.spatialReference;return sZ(i.spatialReference,r)}get background(){return IA(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get highlightOptions(){return AEe(this)}set highlightOptions(t){IEe(this,t)}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){var t;return((t=this.stage)==null?void 0:t.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get tileInfo(){var t;return(t=this.featuresTilingScheme)==null?void 0:t.tileInfo}get updating(){var r,s,n,o;const t=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(l=>!l.destroyed&&!("layerViews"in l)&&l.updating===!0)||t);if(Y("esri-2d-log-updating")){const l=this.allLayerViews.reduce((d,h)=>({...d,[`${h.layer.id}(${h.layer.type})`]:!h.destroyed&&!("layerViews"in h)&&h.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(s=this.layerViewManager)==null?void 0:s.updating}
-> labelManager.updating: ${(n=this.labelManager)==null?void 0:n.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(l)}
-> updatingMagnifier: ${t}
`)}return i}get visibleArea(){const t=this.stateManager.visibleArea;return t&&new Xo({rings:[t.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){var t;return((t=this.mapViewNavigation)==null?void 0:t.interacting)??!1}async hitTest(t,i){return CEe(this,t,i)}async takeScreenshot(t){return GEe(this._getScreenshotView(t),t)}toMap(t){if(!this.ready)return null;const i=eJ(t)?KY(this,t):t;return this.stateManager.toMap(i)}toScreen(t,i){return this.stateManager.toScreen(t,i)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((t=this.defaultsFromMap)==null?void 0:t.spatialReference)||null}getDefaultTimeZone(){return IA(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return IA(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(t){return Dz.hasLayerViewModule(t)}importLayerView(t){return Dz.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(ae.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(t){var h;const i=this.toMap(t),r=await this.hitTest(t),s=this.allLayerViews.toArray().filter(y=>y.clips.every(v=>OX(this,v,t,i))).reverse(),n=new globalThis.Map(s.map(y=>[y.layer.uid,y])),o=[];let l=0,d=0;for(;l<r.results.length||d<s.length;){const y=r.results.at(l);if(y&&y.type!=="graphic"){++l;continue}const v=n.get((h=(y==null?void 0:y.layer)??(y==null?void 0:y.graphic.layer))==null?void 0:h.uid);if((!y||v)&&d<s.length&&s.at(d)!==v){const b=s.at(d);"fetchPopupFeaturesAtLocation"in b&&o.push({mapPoint:i,layerView:b}),++d}else y&&(o.push({graphic:y.graphic,layerView:v}),++l)}return{hits:o,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=eTe(this.type);if(Y("safari")&&Y("safari")<9&&(t=new B("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:Y("safari")})),t!=null)throw ae.getLogger(this).warn("#validate()",t.message),t}loadAsyncDependencies(){return Mxe()}_getDefaultViewpoint(){var $;const{constraints:t,initialExtent:i,map:r,padding:s,size:n}=this;if(!t)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,l=this.stateManager.getUserStartupOptions(this.size),d=o==null?void 0:o.viewpoint,h=(($=d==null?void 0:d.targetGeometry)==null?void 0:$.extent)??i,y=h==null?void 0:h.center,v=(d==null?void 0:d.rotation)??0,b=(d==null?void 0:d.scale)||h&&S$(h,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),w=l.center??y,E=l.rotation??v,T=l.scale??b;return w&&T?new Xn({targetGeometry:w,scale:T,rotation:E}):null}_startup(){var l;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(l=this.defaultsFromMap.extent)==null?void 0:l.center),this.graphics.owner=this;const i=new jQ(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=i,this._magnifierView=new HQ,this._magnifierView.magnifier=this.magnifier,this._gridView=new WQ;const r=new qQ({view:this});this._set("labelManager",r);const s=new R2e({view:this});this._set("animationManager",s);const n=new BQ({view:this,animationManager:s});this._set("mapViewNavigation",n),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",d=>this.fatalError=d.error),ve(()=>this.stationary,d=>i.stationary=d,ks),ve(()=>this.background,d=>{i.backgroundColor=d==null?void 0:d.color,this._magnifierView.backgroundColor=d==null?void 0:d.color},ks),ve(()=>this.magnifier,d=>this._magnifierView.magnifier=d,ks),ve(()=>this.grid,d=>this._gridView.grid=d,ks),ve(()=>this.renderingOptions,d=>i.renderingOptions=d,ks),ve(()=>this.highlights.items.map(d=>({name:d.name,options:{fillColor:d.color,haloColor:d.haloColor,fillOpacity:d.fillOpacity,haloOpacity:d.haloOpacity,haloWidth:d.haloWidth,haloBlur:d.haloBlur}})),()=>{i.highlightGradient=xEe(i.highlightGradient,this.highlights.items)},ks),ve(()=>this.state.id,()=>i.state=this.state,ks)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(d=>d(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const t=new V2e(Yme.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const i=new UQ({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new GQ(t)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){var o;const{allLayerViews:i,padding:r,size:s,stage:n}=this;return{allLayerViews:i,backgroundColor:t!=null&&t.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:r,size:s,stage:n}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};lt.type="2d",c([p({constructOnly:!0})],lt.prototype,"deactivatedWebGLExtensions",void 0),c([p({constructOnly:!0})],lt.prototype,"debugWebGLExtensions",void 0),c([p({readOnly:!0})],lt.prototype,"featuresTilingScheme",void 0),c([p({readOnly:!0})],lt.prototype,"graphicsTileStore",null),c([p()],lt.prototype,"graphicsView",void 0),c([p()],lt.prototype,"constraintsInfo",null),c([p()],lt.prototype,"initialExtentRequired",null),c([p()],lt.prototype,"labelManager",void 0),c([p({type:v$,nonNullable:!0})],lt.prototype,"navigation",void 0),c([p({constructOnly:!0})],lt.prototype,"renderCanvas",void 0),c([p()],lt.prototype,"renderingOptions",void 0),c([p({constructOnly:!0})],lt.prototype,"supersampleScreenshotsEnabled",void 0),c([p({readOnly:!0})],lt.prototype,"supportsGround",void 0),c([p()],lt.prototype,"defaultsFromMapSettings",null),c([p({readOnly:!0})],lt.prototype,"typeSpecificPreconditionsReady",null),c([p({type:xxe})],lt.prototype,"background",null),c([p()],lt.prototype,"center",null),c([p({type:_e})],lt.prototype,"floors",void 0),c([p()],lt.prototype,"grid",void 0),c([p({type:Gc})],lt.prototype,"highlightOptions",null),c([p()],lt.prototype,"map",void 0),c([p()],lt.prototype,"padding",null),c([p({readOnly:!0})],lt.prototype,"rendering",null),c([p({readOnly:!0})],lt.prototype,"resolution",null),c([p()],lt.prototype,"scale",null),c([p({constructOnly:!0})],lt.prototype,"spatialReferenceLocked",void 0),c([p({readOnly:!0})],lt.prototype,"tileInfo",null),c([p({type:UX,readOnly:!0})],lt.prototype,"timeline",void 0),c([p({readOnly:!0})],lt.prototype,"type",void 0),c([p({readOnly:!0})],lt.prototype,"updating",null),c([p({readOnly:!0})],lt.prototype,"view2dType",void 0),c([p({readOnly:!0})],lt.prototype,"visibleArea",null),c([p()],lt.prototype,"zoom",null),c([p({readOnly:!0})],lt.prototype,"navigating",null),c([p(),mt(e=>e instanceof FQ?e:T_(VQ,e))],lt.prototype,"ui",void 0),lt=c([I("esri.views.View2D")],lt);const Axe=lt;let O2=class extends Axe{constructor(t){super(t),this.view2dType="map"}};c([p({readOnly:!0})],O2.prototype,"view2dType",void 0),O2=c([I("esri.views.MapView")],O2);const Ixe=O2;let Cxe=class ZQ{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(hI),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new ZQ,r=this._originStores[He.DEFAULTS];r&&r.forEach((s,n)=>{i.set(n,q(s),He.DEFAULTS)});for(let s=He.SERVICE;s<hI;s++){const n=this._originStores[s];n&&n.forEach((o,l)=>{t&&t.has(l)||i.set(l,q(o),s)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=He.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const n=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),n!==i}return!1}delete(t,i=He.USER){const r=this._originStores[i];if(!r)return;const s=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let n=i-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,n);break}}}return s}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],s=r==null?void 0:r.get(t),n=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,i),n!==s}originOf(t){return this._propertyOriginMap.get(t)||He.DEFAULTS}forEach(t){this._values.forEach(t)}};const YQ=e=>{let t=class extends e{constructor(...i){super(...i);const r=Us(this),s=r.store,n=new Cxe;r.store=n,Sq(r,s,n)}read(i,r){Tq(this,i,r)}getAtOrigin(i,r){const s=CA(this),n=Rc(r);if(typeof i=="string")return s.get(i,n);const o={};return i.forEach(l=>{o[l]=s.get(l,n)}),o}originOf(i){return tE(this.originIdOf(i))}originIdOf(i){return CA(this).originOf(i)}revert(i,r){const s=CA(this),n=Rc(r),o=Us(this);let l;l=typeof i=="string"?i==="*"?s.keys(n):[i]:i,l.forEach(d=>{o.invalidate(d),s.revert(d,n),o.commit(d)})}};return t=c([I("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function CA(e){return Us(e).store}let Yj=class extends YQ(Me){};Yj=c([I("esri.core.ReadOnlyMultiOriginJSONSupport")],Yj);const Oxe=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return OA(this).delete(i,Rc(r))}write(i,r){return xq(this,i=i||{},r),i}setAtOrigin(i,r,s){Us(this).setAtOrigin(i,r,Rc(s))}removeOrigin(i){const r=OA(this),s=Rc(i),n=r.keys(s);for(const o of n)r.originOf(o)===s&&r.set(o,r.get(o,s),He.USER)}updateOrigin(i,r){const s=OA(this),n=Rc(r),o=ys(this,i);for(let l=n+1;l<hI;++l)s.delete(i,l);s.set(i,o,n)}toJSON(i){return this.write({},i)}};return t=c([I("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function OA(e){return Us(e).store}const JQ=e=>{let t=class extends Oxe(YQ(e)){constructor(...i){super(...i)}};return t=c([I("esri.core.MultiOriginJSONSupport")],t),t};let Jj=class extends JQ(Me){};Jj=c([I("esri.core.MultiOriginJSONSupport")],Jj);const ci=(e=>e)(["operational-layers","basemap","ground"]);var EL;let Sh=EL=class extends se{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new EL({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([p({type:String,json:{write:!0}})],Sh.prototype,"expression",void 0),c([p({type:String,json:{write:!0}})],Sh.prototype,"name",void 0),c([p({type:["boolean","date","number","string"],json:{write:!0}})],Sh.prototype,"returnType",void 0),c([p({type:String,json:{write:!0}})],Sh.prototype,"title",void 0),Sh=EL=c([I("esri.form.ExpressionInfo")],Sh);const Lxe=Sh;let Eh=class extends se{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};c([p({type:String,json:{write:!0}})],Eh.prototype,"description",void 0),c([p({type:String,json:{write:!0}})],Eh.prototype,"label",void 0),c([p()],Eh.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],Eh.prototype,"visibilityExpression",void 0),Eh=c([I("esri.form.elements.Element")],Eh);const id=Eh;let L2=class extends ut.ClonableMixin(se){constructor(t){super(t),this.type=null}};c([p()],L2.prototype,"type",void 0),L2=c([I("esri.form.elements.inputs.attachments.Input")],L2);const rd=L2,C$=["any","capture","upload"];let _m=class extends rd{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};c([p({type:["audio"],readOnly:!0,json:{write:!0}})],_m.prototype,"type",void 0),c([p({type:C$,json:{write:!0}})],_m.prototype,"inputMethod",void 0),c([p({type:Number,json:{write:!0}})],_m.prototype,"maxDuration",void 0),_m=c([I("esri.form.elements.inputs.attachments.AudioInput")],_m);const Xj=_m;let kv=class extends rd{constructor(t){super(t),this.type="document",this.maxFileSize=null}};c([p({type:["document"],readOnly:!0,json:{write:!0}})],kv.prototype,"type",void 0),c([p({type:Number,json:{write:!0}})],kv.prototype,"maxFileSize",void 0),kv=c([I("esri.form.elements.inputs.attachments.DocumentInput")],kv);const Qj=kv;let wm=class extends rd{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};c([p({type:["image"],readOnly:!0,json:{write:!0}})],wm.prototype,"type",void 0),c([p({type:C$,json:{write:!0}})],wm.prototype,"inputMethod",void 0),c([p({type:Number,json:{write:!0}})],wm.prototype,"maxImageSize",void 0),wm=c([I("esri.form.elements.inputs.attachments.ImageInput")],wm);const Kj=wm;let Dv=class extends rd{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};c([p({type:["signature"],readOnly:!0,json:{write:!0}})],Dv.prototype,"type",void 0),c([p({type:C$,json:{write:!0}})],Dv.prototype,"inputMethod",void 0),Dv=c([I("esri.form.elements.inputs.attachments.SignatureInput")],Dv);const eU=Dv;let Sm=class extends rd{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};c([p({type:["video"],readOnly:!0,json:{write:!0}})],Sm.prototype,"type",void 0),c([p({type:C$,json:{write:!0}})],Sm.prototype,"inputMethod",void 0),c([p({type:Number,json:{write:!0}})],Sm.prototype,"maxDuration",void 0),Sm=c([I("esri.form.elements.inputs.attachments.VideoInput")],Sm);const tU=Sm;function XQ(e){return{nestableTypes:{base:rd,key:"type",typeMap:{audio:Xj,document:Qj,image:Kj,signature:eU,video:tU}},allTypes:{base:rd,key:"type",typeMap:{attachment:e,audio:Xj,document:Qj,image:Kj,signature:eU,video:tU}}}}function Rxe(e,t,i){return e?e.map(r=>Yo(t.nestableTypes,r)):null}function Pxe(e,t,i){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function kxe(e,t,i){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}let xa=class extends rd{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return Rxe(t,LA)}readInputs(t,i){return Pxe(i.inputTypes,LA)}writeInputs(t,i){i.inputTypes=kxe(t,LA)}};c([p({type:["attachment"],readOnly:!0,json:{write:!0}})],xa.prototype,"type",void 0),c([p({type:["any","exact","exactOrNone"],json:{write:!0}})],xa.prototype,"attachmentAssociationType",void 0),c([p({json:{write:{isRequired:!0}}})],xa.prototype,"inputTypes",void 0),c([mt("inputTypes")],xa.prototype,"castInputs",null),c([pe("inputTypes")],xa.prototype,"readInputs",null),c([be("inputTypes")],xa.prototype,"writeInputs",null),xa=c([I("esri.form.elements.inputs.attachments.AttachmentInput")],xa);const LA=XQ(xa),Dxe=xa;var TL;const Nxe=XQ(Dxe);let un=TL=class extends id{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var e;return new TL({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(e=this.input)==null?void 0:e.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};c([p({type:Boolean,json:{write:!0}})],un.prototype,"allowUserRename",void 0),c([p({type:String,json:{write:{isRequired:!0}}})],un.prototype,"attachmentKeyword",void 0),c([p({type:Boolean,json:{write:!0}})],un.prototype,"displayFilename",void 0),c([p({type:String,json:{write:!0}})],un.prototype,"editableExpression",void 0),c([p({type:String,json:{write:!0}})],un.prototype,"filenameExpression",void 0),c([p({types:Nxe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],un.prototype,"input",void 0),c([p({type:Number,json:{write:!0}})],un.prototype,"maxAttachmentCount",void 0),c([p({type:Number,json:{write:!0}})],un.prototype,"minAttachmentCount",void 0),c([p({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],un.prototype,"type",void 0),c([p({type:Boolean,json:{write:!0}})],un.prototype,"useOriginalFilename",void 0),un=TL=c([I("esri.form.elements.AttachmentElement")],un);const iU=un;let R2=class extends se{constructor(t){super(t),this.type=null}};c([p()],R2.prototype,"type",void 0),R2=c([I("esri.form.elements.inputs.Input")],R2);const lu=R2;let Nv=class extends lu{constructor(t){super(t),this.maxLength=null,this.minLength=0}};c([p({type:Number,json:{write:!0}})],Nv.prototype,"maxLength",void 0),c([p({type:Number,json:{write:!0}})],Nv.prototype,"minLength",void 0),Nv=c([I("esri.form.elements.inputs.TextInput")],Nv);const TD=Nv;var $L;let P2=$L=class extends TD{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new $L({maxLength:this.maxLength,minLength:this.minLength})}};c([p({type:["barcode-scanner"],json:{read:!1,write:!0}})],P2.prototype,"type",void 0),P2=$L=c([I("esri.form.elements.inputs.BarcodeScannerInput")],P2);const Fxe=P2;var xL;let Em=xL=class extends lu{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new xL({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};c([p({type:String,json:{write:!0}})],Em.prototype,"noValueOptionLabel",void 0),c([p({type:Boolean,json:{write:!0}})],Em.prototype,"showNoValueOption",void 0),c([p({type:["combo-box"],json:{read:!1,write:!0}})],Em.prototype,"type",void 0),Em=xL=c([I("esri.form.elements.inputs.ComboBoxInput")],Em);const Vxe=Em;var ML;function rU(e){return e??null}function sU(e){return e??null}let _a=ML=class extends lu{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return rU(t.max)}writeMax(e,t){t.max=sU(e)}readMin(e,t){return rU(t.min)}writeMin(e,t){t.min=sU(e)}clone(){return new ML({max:this.max,min:this.min})}};c([p({type:String,json:{type:String,write:!0}})],_a.prototype,"max",void 0),c([pe("max")],_a.prototype,"readMax",null),c([be("max")],_a.prototype,"writeMax",null),c([p({type:String,json:{type:String,write:!0}})],_a.prototype,"min",void 0),c([pe("min")],_a.prototype,"readMin",null),c([be("min")],_a.prototype,"writeMin",null),c([p({type:["date-picker"],json:{read:!1,write:!0}})],_a.prototype,"type",void 0),_a=ML=c([I("esri.form.elements.inputs.DatePickerInput")],_a);const zxe=_a;var AL;function RA(e){return e??null}function PA(e){return e??null}let Cs=AL=class extends lu{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return RA(t.max)}writeMax(e,t){t.max=PA(e)}readMin(e,t){return RA(t.min)}writeMin(e,t){t.min=PA(e)}readTimeResolution(e,t){return RA(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=PA(e)}clone(){return new AL({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};c([p({type:Boolean,json:{write:!0}})],Cs.prototype,"includeTimeOffset",void 0),c([p({type:String,json:{type:String,write:!0}})],Cs.prototype,"max",void 0),c([pe("max")],Cs.prototype,"readMax",null),c([be("max")],Cs.prototype,"writeMax",null),c([p({type:String,json:{type:String,write:!0}})],Cs.prototype,"min",void 0),c([pe("min")],Cs.prototype,"readMin",null),c([be("min")],Cs.prototype,"writeMin",null),c([p({type:String,json:{type:String,write:!0}})],Cs.prototype,"timeResolution",void 0),c([pe("timeResolution")],Cs.prototype,"readTimeResolution",null),c([be("timeResolution")],Cs.prototype,"writeTimeResolution",null),c([p({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Cs.prototype,"type",void 0),Cs=AL=c([I("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Cs);const jxe=Cs;var IL;function nU(e){return e!=null?new Date(e):null}function oU(e){return e?e.getTime():null}let Io=IL=class extends lu{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return nU(t.max)}writeMax(e,t){t.max=oU(e)}readMin(e,t){return nU(t.min)}writeMin(e,t){t.min=oU(e)}clone(){return new IL({includeTime:this.includeTime,max:this.max,min:this.min})}};c([p({type:Boolean,json:{write:!0}})],Io.prototype,"includeTime",void 0),c([p({type:Date,json:{type:Number,write:!0}})],Io.prototype,"max",void 0),c([pe("max")],Io.prototype,"readMax",null),c([be("max")],Io.prototype,"writeMax",null),c([p({type:Date,json:{type:Number,write:!0}})],Io.prototype,"min",void 0),c([pe("min")],Io.prototype,"readMin",null),c([be("min")],Io.prototype,"writeMin",null),c([p({type:["datetime-picker"],json:{read:!1,write:!0}})],Io.prototype,"type",void 0),Io=IL=c([I("esri.form.elements.inputs.DateTimePickerInput")],Io);const Uxe=Io;var CL;let Tm=CL=class extends lu{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new CL({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};c([p({type:String,json:{write:!0}})],Tm.prototype,"noValueOptionLabel",void 0),c([p({type:Boolean,json:{write:!0}})],Tm.prototype,"showNoValueOption",void 0),c([p({type:["radio-buttons"],json:{read:!1,write:!0}})],Tm.prototype,"type",void 0),Tm=CL=c([I("esri.form.elements.inputs.RadioButtonsInput")],Tm);const Gxe=Tm;var OL;let $m=OL=class extends lu{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new OL({offValue:this.offValue,onValue:this.onValue})}};c([p({type:[String,Number],json:{write:!0}})],$m.prototype,"offValue",void 0),c([p({type:[String,Number],json:{write:!0}})],$m.prototype,"onValue",void 0),c([p({type:["switch"],json:{read:!1,write:!0}})],$m.prototype,"type",void 0),$m=OL=c([I("esri.form.elements.inputs.SwitchInput")],$m);const qxe=$m;var LL;let k2=LL=class extends TD{constructor(e){super(e),this.type="text-area"}clone(){return new LL({maxLength:this.maxLength,minLength:this.minLength})}};c([p({type:["text-area"],json:{read:!1,write:!0}})],k2.prototype,"type",void 0),k2=LL=c([I("esri.form.elements.inputs.TextAreaInput")],k2);const Bxe=k2;var RL;let D2=RL=class extends TD{constructor(e){super(e),this.type="text-box"}clone(){return new RL({maxLength:this.maxLength,minLength:this.minLength})}};c([p({type:["text-box"],json:{read:!1,write:!0}})],D2.prototype,"type",void 0),D2=RL=c([I("esri.form.elements.inputs.TextBoxInput")],D2);const Hxe=D2;var PL;function kA(e){return e??null}function DA(e){return e??null}let cn=PL=class extends lu{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return kA(t.max)}writeMax(e,t){t.max=DA(e)}readMin(e,t){return kA(t.min)}writeMin(e,t){t.min=DA(e)}readTimeResolution(e,t){return kA(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=DA(e)}clone(){return new PL({max:this.max,min:this.min,timeResolution:this.timeResolution})}};c([p({type:String,json:{type:String,write:!0}})],cn.prototype,"max",void 0),c([pe("max")],cn.prototype,"readMax",null),c([be("max")],cn.prototype,"writeMax",null),c([p({type:String,json:{type:String,write:!0}})],cn.prototype,"min",void 0),c([pe("min")],cn.prototype,"readMin",null),c([be("min")],cn.prototype,"writeMin",null),c([p({type:String,json:{type:String,write:!0}})],cn.prototype,"timeResolution",void 0),c([pe("timeResolution")],cn.prototype,"readTimeResolution",null),c([be("timeResolution")],cn.prototype,"writeTimeResolution",null),c([p({type:["time-picker"],json:{read:!1,write:!0}})],cn.prototype,"type",void 0),cn=PL=c([I("esri.form.elements.inputs.TimePickerInput")],cn);const Wxe=cn,Zxe={base:lu,key:"type",typeMap:{"barcode-scanner":Fxe,"combo-box":Vxe,"date-picker":zxe,"datetime-picker":Uxe,"datetimeoffset-picker":jxe,"radio-buttons":Gxe,switch:qxe,"text-area":Bxe,"text-box":Hxe,"time-picker":Wxe}};var kL;let Fn=kL=class extends id{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new kL({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};c([p({types:HY,json:{read:{reader:g$},write:!0}})],Fn.prototype,"domain",void 0),c([p({type:Boolean,json:{write:!0}})],Fn.prototype,"editable",void 0),c([p({type:String,json:{write:!0}})],Fn.prototype,"editableExpression",void 0),c([p({type:String,json:{write:!0}})],Fn.prototype,"fieldName",void 0),c([p({type:String,json:{write:!0}})],Fn.prototype,"hint",void 0),c([p({types:Zxe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Fn.prototype,"input",void 0),c([p({type:String,json:{write:!0}})],Fn.prototype,"requiredExpression",void 0),c([p({type:String,json:{read:!1,write:!0}})],Fn.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],Fn.prototype,"valueExpression",void 0),Fn=kL=c([I("esri.form.elements.FieldElement")],Fn);const aU=Fn;var DL;let Rl=DL=class extends id{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new DL({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:q(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};c([p({type:Number,json:{write:!0}})],Rl.prototype,"displayCount",void 0),c([p({type:["list"],json:{write:!0}})],Rl.prototype,"displayType",void 0),c([p({type:String,json:{write:!0}})],Rl.prototype,"editableExpression",void 0),c([p({type:[Fk],json:{write:!0}})],Rl.prototype,"orderByFields",void 0),c([p({type:Number,json:{write:!0}})],Rl.prototype,"relationshipId",void 0),c([p({type:["relationship"],json:{read:!1,write:!0}})],Rl.prototype,"type",void 0),Rl=DL=c([I("esri.form.elements.RelationshipElement")],Rl);const lU=Rl;var NL;let xm=NL=class extends id{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new NL({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};c([p({type:String,json:{write:!0}})],xm.prototype,"text",void 0),c([p({type:String,json:{write:!0}})],xm.prototype,"textFormat",void 0),c([p({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],xm.prototype,"type",void 0),xm=NL=c([I("esri.form.elements.TextElement")],xm);const uU=xm;let Mm=class extends ut.ClonableMixin(id){constructor(t){super(t),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};c([p({type:[aY],json:{write:{isRequired:!0}}})],Mm.prototype,"associationTypes",void 0),c([p({type:String,json:{write:!0}})],Mm.prototype,"editableExpression",void 0),c([p({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],Mm.prototype,"type",void 0),Mm=c([I("esri.form.elements.UtilityNetworkAssociationsElement")],Mm);const cU=Mm,Yxe=e=>e.type==="field",Jxe=e=>e.type==="group",Xxe=e=>e.type==="text";function QQ(e){return{typesWithGroup:{base:id,key:"type",typeMap:{attachment:iU,field:aU,group:e,relationship:lU,text:uU,utilityNetworkAssociations:cU}},typesWithoutGroup:{base:id,key:"type",typeMap:{attachment:iU,field:aU,relationship:lU,text:uU,utilityNetworkAssociations:cU}}}}function KQ(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function eK(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function tK(e,t,i=!0){return e?e.map(r=>Yo(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var FL;let Ma=FL=class extends id{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return tK(e,NA,!1)}readElements(e,t){return KQ(t.formElements,NA,!1)}writeElements(e,t){t.formElements=eK(e,NA,!1)}clone(){return new FL({description:this.description,elements:q(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};c([p({json:{write:!0}})],Ma.prototype,"elements",void 0),c([mt("elements")],Ma.prototype,"castElements",null),c([pe("elements",["formElements"])],Ma.prototype,"readElements",null),c([be("elements")],Ma.prototype,"writeElements",null),c([p({type:["collapsed","expanded"],json:{write:!0}})],Ma.prototype,"initialState",void 0),c([p({type:String,json:{read:!1,write:!0}})],Ma.prototype,"type",void 0),Ma=FL=c([I("esri.form.elements.GroupElement")],Ma);const NA=QQ(Ma),Qxe=Ma;var VL;const FA=QQ(Qxe);let Co=VL=class extends se{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return tK(e,FA)}readElements(e,t){return KQ(t.formElements,FA)}writeElements(e,t){t.formElements=eK(e,FA)}clone(){return new VL({description:this.description,expressionInfos:q(this.expressionInfos),elements:q(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const i=new Set,{description:r,elements:s,expressionInfos:n,title:o}=this;if($b(i,e,r),$b(i,e,o),!s)return[];const l=Kxe(s,n).map(d=>is(i,e,d));await Promise.all(l);for(const d of s)iK(i,{fieldsIndex:e,relationships:t},d);return Array.from(i).sort()}};function iK(e,t,i){var s;const{fieldsIndex:r}=t;if(!r||r.fields.length!==e.size)switch($b(e,r,i.label),$b(e,r,i.description),i.type){case"field":_s(e,r,i.fieldName);break;case"group":i.elements.forEach(n=>iK(e,t,n));break;case"relationship":if(t.relationships){const n=t.relationships.find(o=>o.id===i.relationshipId);n&&_s(e,r,n.keyField)}xp(e,r,(s=i.orderByFields)==null?void 0:s.map(n=>n.field));break;case"text":$b(e,r,i.text)}}function Kxe(e,t){if(!t||t.length===0)return[];const i=rK(e),r=[];for(const s of t)i.has(s.name)&&r.push(s.expression);return r}function rK(e){const t=new Set;for(const i of e)if($F(t,i.visibilityExpression),!Xxe(i)){if(Jxe(i))oE(t,rK(i.elements));else if($F(t,i.editableExpression),Yxe(i)){const{requiredExpression:r,valueExpression:s}=i;oE(t,[r,s])}}return t}function $b(e,t,i){xp(e,t,kk(i))}c([p({type:String,json:{write:!0}})],Co.prototype,"description",void 0),c([p({json:{write:!0}})],Co.prototype,"elements",void 0),c([mt("elements")],Co.prototype,"castElements",null),c([pe("elements",["formElements"])],Co.prototype,"readElements",null),c([be("elements")],Co.prototype,"writeElements",null),c([p({type:[Lxe],json:{write:!0}})],Co.prototype,"expressionInfos",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],Co.prototype,"preserveFieldValuesWhenHidden",void 0),c([p({type:String,json:{write:!0}})],Co.prototype,"title",void 0),Co=VL=c([I("esri.form.FormTemplate")],Co);const eMe=Co;function dU(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const s of r)s.length>2&&(s[2]*=i)}function tMe(e,t,i){if(!e&&!t||!i)return;const r=TE(i);hU(e,i,r),hU(t,i,r)}function hU(e,t,i){if(e)for(const r of e)iMe(r.geometry,t,i)}function iMe(e,t,i){if(!(e!=null&&e.spatialReference)||cr(e.spatialReference,t))return;const r=TE(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)dU(e,e.rings,r);else if("paths"in e)dU(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=r)}}function pU(e,t,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=iZ(i.geometryType,t,e.outSpatialReference);if(r!=null)for(const s of i.features)r(s.geometry)}var zL;const jL=new ot({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let yr=zL=class extends se{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,ed)}writeGeometryType(e,t,i,r){if(e)return void jL.write(e,t,i,r);const{features:s}=this;if(s){for(const n of s)if((n==null?void 0:n.geometry)!=null)return void jL.write(n.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=$p(e);return r&&!i&&t.spatialReference&&(r.spatialReference=tt.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new zL(this.cloneProperties())}cloneProperties(){return q({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const s=e==null?void 0:e[i];r.geometry=(s==null?void 0:s.toJSON())||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,s]}=e,n=h=>Math.round((h-r)/t),o=h=>Math.round((s-h)/i),l=this.features,d=this._getQuantizationFunction(this.geometryType,n,o);for(let h=0,y=l.length;h<y;h++)d!=null&&d(l[h].geometry)||(l.splice(h,1),h--,y--);return this.transform=e,this}unquantize(){var b,w;const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[n,o]}=i,l=E=>E*n+r,d=E=>s-E*o;let h=null,y=null;if(this.hasZ&&((b=i==null?void 0:i.scale)==null?void 0:b[2])!=null){const{translate:[,,E],scale:[,,T]}=i;h=$=>$*T+E}if(this.hasM&&((w=i==null?void 0:i.scale)==null?void 0:w[3])!=null){const{translate:[,,,E],scale:[,,,T]}=i;y=$=>$==null?$:$*T+E}const v=this._getHydrationFunction(e,l,d,h,y);for(const{geometry:E}of t)E!=null&&v&&v(E);return this.transform=null,this}readFeaturesWithClass(e,t,i){var n;const r=tt.fromJSON(t.spatialReference),s=[];for(let o=0;o<e.length;o++){const l=e[o],d=i.fromJSON(l),h=(n=l.geometry)==null?void 0:n.spatialReference;d.geometry==null||h||(d.geometry.spatialReference=r);const y=l.aggregateGeometries,v=d.aggregateGeometries;if(y&&v!=null)for(const b in v){const w=v[b],E=y[b],T=E==null?void 0:E.spatialReference;w==null||T||(w.spatialReference=r)}s.push(d)}return s}_quantizePoints(e,t,i){let r,s;const n=[];for(let o=0,l=e.length;o<l;o++){const d=e[o];if(o>0){const h=t(d[0]),y=i(d[1]);h===r&&y===s||(n.push([h-r,y-s]),r=h,s=y)}else r=t(d[0]),s=i(d[1]),n.push([r,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const s=lp(r)?r.rings:r.paths,n=[];for(let o=0,l=s.length;o<l;o++){const d=s[o],h=this._quantizePoints(d,t,i);h&&n.push(h)}return n.length>0?(lp(r)?r.rings=n:r.paths=n,r):null}:e==="multipoint"?r=>{const s=this._quantizePoints(r.points,t,i);return s&&s.length>0?(r.points=s,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i,r,s){return e==="point"?n=>{n.x=t(n.x),n.y=i(n.y),r&&(n.z=r(n.z))}:e==="polyline"||e==="polygon"?n=>{const o=lp(n)?n.rings:n.paths;let l,d;for(let h=0,y=o.length;h<y;h++){const v=o[h];for(let b=0,w=v.length;b<w;b++){const E=v[b];b>0?(l+=E[0],d+=E[1]):(l=E[0],d=E[1]),E[0]=t(l),E[1]=i(d)}}if(r&&s)for(let h=0,y=o.length;h<y;h++){const v=o[h];for(let b=0,w=v.length;b<w;b++){const E=v[b];E[2]=r(E[2]),E[3]=s(E[3])}}else if(r)for(let h=0,y=o.length;h<y;h++){const v=o[h];for(let b=0,w=v.length;b<w;b++){const E=v[b];E[2]=r(E[2])}}else if(s)for(let h=0,y=o.length;h<y;h++){const v=o[h];for(let b=0,w=v.length;b<w;b++){const E=v[b];E[2]=s(E[2])}}}:e==="extent"?n=>{n.xmin=t(n.xmin),n.ymin=i(n.ymin),n.xmax=t(n.xmax),n.ymax=i(n.ymax),r&&n.zmax!=null&&n.zmin!=null&&(n.zmax=r(n.zmax),n.zmin=r(n.zmin)),s&&n.mmax!=null&&n.mmin!=null&&(n.mmax=s(n.mmax),n.mmin=s(n.mmin))}:e==="multipoint"?n=>{const o=n.points;let l,d;for(let h=0,y=o.length;h<y;h++){const v=o[h];h>0?(l+=v[0],d+=v[1]):(l=v[0],d=v[1]),v[0]=t(l),v[1]=i(d)}if(r&&s)for(let h=0,y=o.length;h<y;h++){const v=o[h];v[2]=r(v[2]),v[3]=s(v[3])}else if(r)for(let h=0,y=o.length;h<y;h++){const v=o[h];v[2]=r(v[2])}else if(s)for(let h=0,y=o.length;h<y;h++){const v=o[h];v[2]=s(v[2])}}:null}};c([p({type:String,json:{write:!0}})],yr.prototype,"displayFieldName",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],yr.prototype,"exceededTransferLimit",void 0),c([p({type:[ed],json:{write:!0}})],yr.prototype,"features",void 0),c([pe("features")],yr.prototype,"readFeatures",null),c([p({type:[Yk],json:{write:!0}})],yr.prototype,"fields",void 0),c([p({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:jL.read}}})],yr.prototype,"geometryType",void 0),c([be("geometryType")],yr.prototype,"writeGeometryType",null),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],yr.prototype,"hasM",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],yr.prototype,"hasZ",void 0),c([p({types:R_,json:{write:!0}})],yr.prototype,"queryGeometry",void 0),c([pe("queryGeometry")],yr.prototype,"readQueryGeometry",null),c([p({type:tt,json:{write:!0}})],yr.prototype,"spatialReference",void 0),c([be("spatialReference")],yr.prototype,"writeSpatialReference",null),c([p({json:{write:!0}})],yr.prototype,"transform",void 0),yr=zL=c([I("esri.rest.support.FeatureSet")],yr),yr.prototype.toJSON.isDefaultToJSON=!0;const sK=yr;let rMe=0,Ul=class extends iu.LoadableMixin(M_.EsriPromiseMixin(_e)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var i;const t=(i=this.layer)==null?void 0:i.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);pU(t,this.layer.spatialReference,r);const s=sK.fromJSON(r);if(!this._requiresClientGraphicMapping())return s;const n=this.layer.objectIdField;for(const o of s.features){const l=o.attributes[n],d=this._idToClientGraphic.get(l);d&&(o.geometry=d.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(t,i={}){if(this._requiresClientGraphicMapping())throw new B("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);return pU(t,this.layer.spatialReference,r),r}queryFeatureCount(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,i))}queryObjectIds(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,i))}queryExtent(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,i)).then(r=>({count:r.count,extent:Jt.fromJSON(r.extent)}))}querySnapping(t,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",t,i))}async queryAttributeBins(t,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",t==null?void 0:t.toJSON(),i)}async _applyEdits(t){if(!this._connection)throw new B("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const s=[],n=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=y=>"objectId"in y&&y.objectId!=null?y.objectId:"attributes"in y&&y.attributes[i]!=null?y.attributes[i]:null;if(t.addFeatures&&(r=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const y of t.deleteFeatures){const v=o(y);v!=null&&s.push(v)}const l=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const y of t.updateFeatures)if(n.push(this._serializeFeature(y)),l){const v=o(y);v!=null&&l.set(v,y)}}tMe(r?r.features:null,n,this.layer.spatialReference);const{fullExtent:d,featureEditResults:h}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:n,deletes:s});return this.fullExtent=d,r&&r.finish(h.uidToObjectId),this._updateClientGraphicIds(l,h),this._createEditsResult(h)}async _prepareClientMapping(t,i){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const r=[];for(const{geometry:s}of t)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||r.push(s.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(t,i){if(this._idToClientGraphic){if(t)for(const r of i.updateResults){if(!r.success)continue;const s=t.get(r.objectId);s!=null&&this._addIdToClientGraphic(s)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const i=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:i?new B("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(t){const i=new Map,r=new Array(t.length);let s=null;for(let o=0;o<t.length;o++){const l=t[o],d=this._serializeFeature(l);s||l.geometry==null||(s=l.geometry.type),r[o]=d,i.set(`${d.uid}`,l)}const n=this;return{features:r,inferredGeometryType:s,finish(o){const l=n.sourceJSON.objectIdField;for(const d in o){const h=o[d],y=i.get(d);y&&(y.attributes||(y.attributes={}),h===-1?delete y.attributes[l]:y.attributes[l]=h,n._addIdToClientGraphic(y))}}}}_addIdToClientGraphic(t){var s;if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=(s=t.attributes)==null?void 0:s[i];r!=null&&this._idToClientGraphic.set(r,t)}get _layerOrSourceGeometryType(){var t,i;return((t=this.layer)==null?void 0:t.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:i}=t,r=this._geometryForSerialization(t),s=(rMe++).toString();return r?{uid:s,geometry:r.toJSON(),attributes:i}:{uid:s,attributes:i}}_geometryForSerialization(t){const{geometry:i}=t;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?Xo.fromExtent(i.extent):null:i}async _startWorker(t){this._connection=await pme("MemorySourceWorker",{strategy:Y("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:s,hasM:n,hasZ:o,timeInfo:l,dateFieldsTimeZone:d}=this.layer,h=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const y=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",E=>{ae.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),E.preventDefault()}));const v={features:y.features,fields:i==null?void 0:i.map(E=>E.toJSON()),geometryType:K8.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&n,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:h?null:r&&r.toJSON(),timeInfo:(l==null?void 0:l.toJSON())??null,dateFieldsTimeZone:d},b=await this._connection.invoke("load",v,{signal:t});for(const E of b.warnings)ae.getLogger(this.layer).warn("#load()",`${E.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:E});b.featureErrors.length&&ae.getLogger(this.layer).warn("#load()",`Encountered ${b.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:b.featureErrors});const w=b.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(y.inferredGeometryType)&&(w.geometryType=K8.toJSON(y.inferredGeometryType)),this.sourceJSON=w,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),y.finish(b.assignedObjectIds)}};c([kP({Type:ed,ensureType:Zi(ed)})],Ul.prototype,"itemType",void 0),c([p()],Ul.prototype,"type",void 0),c([p({constructOnly:!0})],Ul.prototype,"layer",void 0),c([p({readOnly:!0})],Ul.prototype,"_workerGeometryType",null),c([p()],Ul.prototype,"sourceJSON",void 0),Ul=c([I("esri.layers.graphics.sources.MemorySource")],Ul);function sMe(e){return"portalItem"in e}const nMe=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):sMe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return c([p({type:String})],t.prototype,"apiKey",null),t=c([I("esri.layers.mixins.APIKeyMixin")],t),t},oMe=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Wy(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",Nae(i,ae.getLogger(this)))}};return c([p()],t.prototype,"title",null),c([p({type:String})],t.prototype,"url",null),t=c([I("esri.layers.mixins.ArcGISService")],t),t};function aMe(e,t){function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i}function fy(e,t,i,r){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,fy.prototype),s.expected=t,s.found=i,s.location=r,s.name="SyntaxError",s}function VA(e,t,i){return i=i||" ",e.length>t?e:(t-=e.length,e+(i+=i.repeat(t)).slice(0,t))}function lMe(e,t){var i,r={},s=(t=t!==void 0?t:{}).grammarSource,n={start:Li},o=Li,l="none",d=")",h=",",y="(",v="%",b="px",w="cm",E="mm",T="in",$="pt",A="pc",O="deg",L="rad",R="grad",N="turn",j="#",V=".",Z="e",ie=/^[ \t\n\r]/,oe=/^[a-z\-]/,ue=/^[0-9a-fA-F]/,me=/^[+\-]/,Te=/^[0-9]/,Ee=Ws("none"),Ye=Fi("none",!1),te=Fi(")",!1),fe=Fi(",",!1),we=Ws("whitespace"),Je=du([" ","	",`
`,"\r"],!1,!1),z=Ws("function"),de=Fi("(",!1),Ae=Ws("identifier"),Se=du([["a","z"],"-"],!1,!1),ze=Ws("percentage"),dt=Fi("%",!1),We=Ws("length"),Xi=Fi("px",!1),_t=Fi("cm",!1),Hs=Fi("mm",!1),cu=Fi("in",!1),Ha=Fi("pt",!1),ro=Fi("pc",!1),Qo=Ws("angle"),cg=Fi("deg",!1),Z$=Fi("rad",!1),Y$=Fi("grad",!1),wn=Fi("turn",!1),J$=Ws("number"),e1=Ws("color"),t1=Fi("#",!1),md=du([["0","9"],["a","f"],["A","F"]],!1,!1),i1=du(["+","-"],!1,!1),so=du([["0","9"]],!1,!1),X$=Fi(".",!1),Q$=Fi("e",!1),yd=function(){return[]},ss=function(P,re){return{type:"function",name:P,parameters:re||[]}},Ko=function(P,re){return re.length>0?gg(P,re,3):[P]},ns=function(P){return{type:"quantity",value:P.value,unit:P.unit}},K$=function(P){return{type:"color",colorType:P.type,value:P.value}},ex=function(P){return P},tx=function(){return qp()},jp=function(P){return{value:P,unit:"%"}},Up=function(P){return{value:P,unit:"px"}},Wa=function(P){return{value:P,unit:"cm"}},Gp=function(P){return{value:P,unit:"mm"}},gd=function(P){return{value:P,unit:"in"}},ix=function(P){return{value:P,unit:"pt"}},r1=function(P){return{value:P,unit:"pc"}},s1=function(P){return{value:P,unit:"deg"}},dg=function(P){return{value:P,unit:"rad"}},vd=function(P){return{value:P,unit:"grad"}},rx=function(P){return{value:P,unit:"turn"}},n1=function(P){return{value:P,unit:null}},o1=function(){return{type:"hex",value:qp()}},hg=function(P){return{type:"function",value:P}},pg=function(){return{type:"named",value:qp()}},a1=function(){return parseFloat(qp())},ee=0|t.peg$currPos,wt=ee,gi=[{line:1,column:1}],Xt=ee,no=t.peg$maxFailExpected||[],Oe=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in n))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=n[t.startRule]}function qp(){return e.substring(wt,ee)}function Fi(P,re){return{type:"literal",text:P,ignoreCase:re}}function du(P,re,he){return{type:"class",parts:P,inverted:re,ignoreCase:he}}function bd(){return{type:"end"}}function Ws(P){return{type:"other",description:P}}function Za(P){var re,he=gi[P];if(he)return he;if(P>=gi.length)re=gi.length-1;else for(re=P;!gi[--re];);for(he={line:(he=gi[re]).line,column:he.column};re<P;)e.charCodeAt(re)===10?(he.line++,he.column=1):he.column++,re++;return gi[P]=he,he}function Ya(P,re,he){var Ue=Za(P),Nt=Za(re);return{source:s,start:{offset:P,line:Ue.line,column:Ue.column},end:{offset:re,line:Nt.line,column:Nt.column}}}function Ge(P){ee<Xt||(ee>Xt&&(Xt=ee,no=[]),no.push(P))}function hu(P,re,he){return new fy(fy.buildMessage(P,re),P,re,he)}function Li(){var P;return(P=l1())===r&&(P=u1()),P}function l1(){var P,re;return Oe++,P=ee,Ri(),e.substr(ee,4)===l?(re=l,ee+=4):(re=r,Oe===0&&Ge(Ye)),re!==r?(Ri(),wt=P,P=yd()):(ee=P,P=r),Oe--,P===r&&Oe===0&&Ge(Ee),P}function u1(){var P,re;if(P=[],(re=oo())!==r)for(;re!==r;)P.push(re),re=oo();else P=r;return P}function oo(){var P,re,he,Ue;return P=ee,Ri(),(re=c1())!==r?(Ri(),(he=pu())===r&&(he=null),Ri(),e.charCodeAt(ee)===41?(Ue=d,ee++):(Ue=r,Oe===0&&Ge(te)),Ue!==r?(Ri(),wt=P,P=ss(re,he)):(ee=P,P=r)):(ee=P,P=r),P}function pu(){var P,re,he,Ue,Nt,Bt,Ei,Ki;if(P=ee,(re=fg())!==r){for(he=[],Ue=ee,Nt=Ri(),e.charCodeAt(ee)===44?(Bt=h,ee++):(Bt=r,Oe===0&&Ge(fe)),Bt===r&&(Bt=null),Ei=Ri(),(Ki=fg())!==r?Ue=Nt=[Nt,Bt,Ei,Ki]:(ee=Ue,Ue=r);Ue!==r;)he.push(Ue),Ue=ee,Nt=Ri(),e.charCodeAt(ee)===44?(Bt=h,ee++):(Bt=r,Oe===0&&Ge(fe)),Bt===r&&(Bt=null),Ei=Ri(),(Ki=fg())!==r?Ue=Nt=[Nt,Bt,Ei,Ki]:(ee=Ue,Ue=r);wt=P,P=Ko(re,he)}else ee=P,P=r;return P}function fg(){var P,re;return P=ee,(re=Bp())===r&&(re=Hp())===r&&(re=ao())===r&&(re=mg()),re!==r&&(wt=P,re=ns(re)),(P=re)===r&&(P=ee,(re=h1())!==r&&(wt=P,re=K$(re)),P=re),P}function Ri(){var P,re;for(Oe++,P=[],re=e.charAt(ee),ie.test(re)?ee++:(re=r,Oe===0&&Ge(Je));re!==r;)P.push(re),re=e.charAt(ee),ie.test(re)?ee++:(re=r,Oe===0&&Ge(Je));return Oe--,re=r,Oe===0&&Ge(we),P}function c1(){var P,re,he;return Oe++,P=ee,(re=d1())!==r?(e.charCodeAt(ee)===40?(he=y,ee++):(he=r,Oe===0&&Ge(de)),he!==r?(wt=P,P=ex(re)):(ee=P,P=r)):(ee=P,P=r),Oe--,P===r&&(re=r,Oe===0&&Ge(z)),P}function d1(){var P,re,he;if(Oe++,P=ee,re=[],he=e.charAt(ee),oe.test(he)?ee++:(he=r,Oe===0&&Ge(Se)),he!==r)for(;he!==r;)re.push(he),he=e.charAt(ee),oe.test(he)?ee++:(he=r,Oe===0&&Ge(Se));else re=r;return re!==r&&(wt=P,re=tx()),Oe--,(P=re)===r&&(re=r,Oe===0&&Ge(Ae)),P}function Bp(){var P,re,he;return Oe++,P=ee,Ri(),(re=Qi())!==r?(e.charCodeAt(ee)===37?(he=v,ee++):(he=r,Oe===0&&Ge(dt)),he!==r?(wt=P,P=jp(re)):(ee=P,P=r)):(ee=P,P=r),Oe--,P===r&&Oe===0&&Ge(ze),P}function Hp(){var P,re,he;return Oe++,P=ee,Ri(),(re=Qi())!==r?(e.substr(ee,2)===b?(he=b,ee+=2):(he=r,Oe===0&&Ge(Xi)),he!==r?(wt=P,P=Up(re)):(ee=P,P=r)):(ee=P,P=r),P===r&&(P=ee,Ri(),(re=Qi())!==r?(e.substr(ee,2)===w?(he=w,ee+=2):(he=r,Oe===0&&Ge(_t)),he!==r?(wt=P,P=Wa(re)):(ee=P,P=r)):(ee=P,P=r),P===r&&(P=ee,Ri(),(re=Qi())!==r?(e.substr(ee,2)===E?(he=E,ee+=2):(he=r,Oe===0&&Ge(Hs)),he!==r?(wt=P,P=Gp(re)):(ee=P,P=r)):(ee=P,P=r),P===r&&(P=ee,Ri(),(re=Qi())!==r?(e.substr(ee,2)===T?(he=T,ee+=2):(he=r,Oe===0&&Ge(cu)),he!==r?(wt=P,P=gd(re)):(ee=P,P=r)):(ee=P,P=r),P===r&&(P=ee,Ri(),(re=Qi())!==r?(e.substr(ee,2)===$?(he=$,ee+=2):(he=r,Oe===0&&Ge(Ha)),he!==r?(wt=P,P=ix(re)):(ee=P,P=r)):(ee=P,P=r),P===r&&(P=ee,Ri(),(re=Qi())!==r?(e.substr(ee,2)===A?(he=A,ee+=2):(he=r,Oe===0&&Ge(ro)),he!==r?(wt=P,P=r1(re)):(ee=P,P=r)):(ee=P,P=r)))))),Oe--,P===r&&Oe===0&&Ge(We),P}function ao(){var P,re,he;return Oe++,P=ee,(re=Qi())!==r?(e.substr(ee,3)===O?(he=O,ee+=3):(he=r,Oe===0&&Ge(cg)),he!==r?(wt=P,P=s1(re)):(ee=P,P=r)):(ee=P,P=r),P===r&&(P=ee,(re=Qi())!==r?(e.substr(ee,3)===L?(he=L,ee+=3):(he=r,Oe===0&&Ge(Z$)),he!==r?(wt=P,P=dg(re)):(ee=P,P=r)):(ee=P,P=r),P===r&&(P=ee,(re=Qi())!==r?(e.substr(ee,4)===R?(he=R,ee+=4):(he=r,Oe===0&&Ge(Y$)),he!==r?(wt=P,P=vd(re)):(ee=P,P=r)):(ee=P,P=r),P===r&&(P=ee,(re=Qi())!==r?(e.substr(ee,4)===N?(he=N,ee+=4):(he=r,Oe===0&&Ge(wn)),he!==r?(wt=P,P=rx(re)):(ee=P,P=r)):(ee=P,P=r)))),Oe--,P===r&&(re=r,Oe===0&&Ge(Qo)),P}function mg(){var P,re;return Oe++,P=ee,Ri(),(re=Qi())!==r?(wt=P,P=n1(re)):(ee=P,P=r),Oe--,P===r&&Oe===0&&Ge(J$),P}function h1(){var P,re,he,Ue;if(Oe++,P=ee,e.charCodeAt(ee)===35?(re=j,ee++):(re=r,Oe===0&&Ge(t1)),re!==r){if(he=[],Ue=e.charAt(ee),ue.test(Ue)?ee++:(Ue=r,Oe===0&&Ge(md)),Ue!==r)for(;Ue!==r;)he.push(Ue),Ue=e.charAt(ee),ue.test(Ue)?ee++:(Ue=r,Oe===0&&Ge(md));else he=r;he!==r?(wt=P,P=o1()):(ee=P,P=r)}else ee=P,P=r;return P===r&&(P=ee,(re=oo())!==r&&(wt=P,re=hg(re)),(P=re)===r&&(P=ee,(re=d1())!==r&&(wt=P,re=pg()),P=re)),Oe--,P===r&&(re=r,Oe===0&&Ge(e1)),P}function Qi(){var P,re,he,Ue,Nt,Bt,Ei,Ki;for(P=ee,re=e.charAt(ee),me.test(re)?ee++:(re=r,Oe===0&&Ge(i1)),re===r&&(re=null),he=ee,Ue=[],Nt=e.charAt(ee),Te.test(Nt)?ee++:(Nt=r,Oe===0&&Ge(so));Nt!==r;)Ue.push(Nt),Nt=e.charAt(ee),Te.test(Nt)?ee++:(Nt=r,Oe===0&&Ge(so));if(e.charCodeAt(ee)===46?(Nt=V,ee++):(Nt=r,Oe===0&&Ge(X$)),Nt!==r){if(Bt=[],Ei=e.charAt(ee),Te.test(Ei)?ee++:(Ei=r,Oe===0&&Ge(so)),Ei!==r)for(;Ei!==r;)Bt.push(Ei),Ei=e.charAt(ee),Te.test(Ei)?ee++:(Ei=r,Oe===0&&Ge(so));else Bt=r;Bt!==r?he=Ue=[Ue,Nt,Bt]:(ee=he,he=r)}else ee=he,he=r;if(he===r)if(he=[],Ue=e.charAt(ee),Te.test(Ue)?ee++:(Ue=r,Oe===0&&Ge(so)),Ue!==r)for(;Ue!==r;)he.push(Ue),Ue=e.charAt(ee),Te.test(Ue)?ee++:(Ue=r,Oe===0&&Ge(so));else he=r;if(he!==r){if(Ue=ee,e.charCodeAt(ee)===101?(Nt=Z,ee++):(Nt=r,Oe===0&&Ge(Q$)),Nt!==r){if(Bt=e.charAt(ee),me.test(Bt)?ee++:(Bt=r,Oe===0&&Ge(i1)),Bt===r&&(Bt=null),Ei=[],Ki=e.charAt(ee),Te.test(Ki)?ee++:(Ki=r,Oe===0&&Ge(so)),Ki!==r)for(;Ki!==r;)Ei.push(Ki),Ki=e.charAt(ee),Te.test(Ki)?ee++:(Ki=r,Oe===0&&Ge(so));else Ei=r;Ei!==r?Ue=Nt=[Nt,Bt,Ei]:(ee=Ue,Ue=r)}else ee=Ue,Ue=r;Ue===r&&(Ue=null),wt=P,P=a1()}else ee=P,P=r;return P}function yg(P,re){return P.map(function(he){return he[re]})}function gg(P,re,he){return[P].concat(yg(re,he))}if(i=o(),t.peg$library)return{peg$result:i,peg$currPos:ee,peg$FAILED:r,peg$maxFailExpected:no,peg$maxFailPos:Xt};if(i!==r&&ee===e.length)return i;throw i!==r&&ee<e.length&&Ge(bd()),hu(no,Xt<e.length?e.charAt(Xt):null,Xt<e.length?Ya(Xt,Xt+1):Ya(Xt,Xt))}function $D(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=fU(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new B("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:fU(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!gW(t[i].effects,t[i+1].effects))throw new B("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});vW(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function fU(e){let t;if(!e)return[];try{t=lMe(e)}catch(i){throw new B("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>uMe(i))}function uMe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return cMe(e);case"opacity":return dMe(e);case"hue-rotate":return hMe(e);case"blur":return pMe(e);case"drop-shadow":return fMe(e);case"bloom":return mMe(e)}}catch(t){throw t.details.filter=e,t}throw new B("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function cMe(e){let t=1;return og(e.parameters,1),e.parameters.length===1&&(t=Vo(e.parameters[0])),new dC(e.name,t)}function dMe(e){let t=1;return og(e.parameters,1),e.parameters.length===1&&(t=Vo(e.parameters[0])),new mW(t)}function hMe(e){let t=0;return og(e.parameters,1),e.parameters.length===1&&(t=wMe(e.parameters[0])),new pW(t)}function pMe(e){let t=0;return og(e.parameters,1),e.parameters.length===1&&(t=AD(e.parameters[0]),Z_(t,e.parameters[0])),new lW(t)}function fMe(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new B("effect:type-error","Accepts only one color",{});i=SMe(r)}else{const s=AD(r);if(Object.isFrozen(t))throw new B("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&Z_(s,r)}if(t.length<2||t.length>3)throw new B("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new dW(t[0],t[1],t[2]||0,i||nK("black"))}function mMe(e){let t=1,i=0,r=0;return og(e.parameters,3),e.parameters[0]&&(t=Vo(e.parameters[0])),e.parameters[1]&&(i=AD(e.parameters[1]),Z_(i,e.parameters[1])),e.parameters[2]&&(r=Vo(e.parameters[2])),new oW(t,i,r)}function og(e,t){if(e.length>t)throw new B("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function O$(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in MD)return"<length>";if(e.unit in xD)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Z_(e,t){if(e<0)throw new B("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function yMe(e){if(e.type!=="quantity"||e.unit!==null)throw new B("effect:type-error",`Expected <double>, Actual: ${O$(e)}`,{term:e})}function gMe(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new B("effect:type-error",`Expected <double> or <percentage>, Actual: ${O$(e)}`,{term:e})}aMe(fy,Error),fy.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var i,r=null;for(i=0;i<e.length;i++)if(e[i].source===this.location.source){r=e[i].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,n=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,o=this.location.source+":"+n.line+":"+n.column;if(r){var l=this.location.end,d=VA("",n.line.toString().length," "),h=r[s.line-1],y=(s.line===l.line?l.column:h.length+1)-s.column||1;t+=`
 --> `+o+`
`+d+` |
`+n.line+" | "+h+`
`+d+" | "+VA("",s.column-1," ")+VA("",y,"^")}else t+=`
 at `+o}return t},fy.buildMessage=function(e,t){var i={literal:function(h){return'"'+s(h.text)+'"'},class:function(h){var y=h.parts.map(function(v){return Array.isArray(v)?n(v[0])+"-"+n(v[1]):n(v)});return"["+(h.inverted?"^":"")+y.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(h){return h.description}};function r(h){return h.charCodeAt(0).toString(16).toUpperCase()}function s(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+r(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+r(y)})}function n(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+r(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+r(y)})}function o(h){return i[h.type](h)}function l(h){var y,v,b=h.map(o);if(b.sort(),b.length>0){for(y=1,v=1;y<b.length;y++)b[y-1]!==b[y]&&(b[v]=b[y],v++);b.length=v}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function d(h){return h?'"'+s(h)+'"':"end of input"}return"Expected "+l(e)+" but "+d(t)+" found."};const xD={deg:1,grad:.9,rad:180/Math.PI,turn:360};function vMe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&xD[e.unit]!=null))throw new B("effect:type-error",`Expected <angle>, Actual: ${O$(e)}`,{term:e})}const MD={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function bMe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&MD[e.unit]!=null))throw new B("effect:type-error",`Expected <length>, Actual: ${O$(e)}`,{term:e})}function Vo(e){gMe(e);const t=e.value;return Z_(t,e),e.unit==="%"?.01*t:t}function _Me(e){return yMe(e),Z_(e.value,e),e.value}function wMe(e){return vMe(e),e.value*xD[e.unit]||0}function AD(e){return bMe(e),e.value*MD[e.unit]||0}function SMe(e){switch(e.colorType){case"hex":return Ehe(e.value);case"named":return nK(e.value);case"function":return $Me(e.value)}}function nK(e){if(!VH(e))throw new B("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return She(e)}const EMe=/^rgba?/i,TMe=/^hsla?/i;function $Me(e){if(og(e.parameters,4),EMe.test(e.name))return[Vo(e.parameters[0]),Vo(e.parameters[1]),Vo(e.parameters[2]),e.parameters[3]?Vo(e.parameters[3]):1];if(TMe.test(e.name))return zH(_Me(e.parameters[0]),Vo(e.parameters[1]),Vo(e.parameters[2]),e.parameters[3]?Vo(e.parameters[3]):1);throw new B("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function s_(e,t,i){var r;try{return MMe(e)}catch(s){(r=i==null?void 0:i.messages)==null||r.push(s)}return null}function n_(e,t,i,r){try{const s=xMe(e);$r(i,s,t)}catch(s){r.messages&&r.messages.push(s)}}function xMe(e){const t=$D(e);return t?Hpe(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function MMe(e){if(!e||e.length===0)return null;if(AMe(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:cT(i.value)});return t}return cT(e)}function AMe(e){const t=e[0];return!!t&&"scale"in t}function cT(e){if(!(e!=null&&e.length))return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[ml(i,"amount")];break;case"blur":r=[ml(i,"radius","pt")];break;case"hue-rotate":r=[ml(i,"angle","deg")];break;case"drop-shadow":r=[ml(i,"xoffset","pt"),ml(i,"yoffset","pt"),ml(i,"blurRadius","pt"),IMe(i,"color")];break;case"bloom":r=[ml(i,"strength"),ml(i,"radius","pt"),ml(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;$D(s),t.push(s)}return t.join(" ")}function ml(e,t,i){if(e[t]==null)throw new B("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function IMe(e,t){if(e[t]==null)throw new B("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const CMe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:ci}},"portal-item":{read:!0,write:{layerContainerTypes:ci}}}}},mU={read:{reader:s_},write:{allowNull:!0,writer:n_,layerContainerTypes:ci}},OMe={json:{read:!1,write:!1,origins:{"web-map":mU,"portal-item":mU}}},LMe=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return c([p(CMe)],t.prototype,"blendMode",void 0),c([p(OMe)],t.prototype,"effect",void 0),t=c([I("esri.layers.mixins.BlendLayer")],t),t},RMe=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return c([p({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=c([I("esri.layers.mixins.CustomParametersMixin")],t),t},oK=96;function iUe(e,t){const i=e.extent,r=e.width,s=eo(i==null?void 0:i.spatialReference);return i&&r?i.width/r*s*pB*oK:0}function rUe(e,t){return e/(eo(t)*pB*oK)}function PMe(e,t,i){return kMe(e,t)&&DMe(e,i)}function kMe(e,t){return t===0||Wo(e,t)||e<t}function DMe(e,t){return t===0||Wo(e,t)||e>t}function NMe(e,t){return Wo(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}const yU={write:{overridePolicy:(e,t,i)=>({enabled:!i||i.filterMode==="scale"})}};let pc=class extends ut.ClonableMixin(se){constructor(t){super(t),this.id=x$(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};c([p({type:String,json:{write:!0}})],pc.prototype,"id",void 0),c([p({type:Number,json:yU})],pc.prototype,"maxScale",void 0),c([p({type:Number,json:yU})],pc.prototype,"minScale",void 0),c([p({type:String,json:{write:!0}})],pc.prototype,"title",void 0),c([p({type:String,json:{write:!0}})],pc.prototype,"where",void 0),pc=c([I("esri.layers.support.DisplayFilter")],pc);const aK=pc;function FMe(e,t){return{...t,filterMode:e.mode}}function VMe(e,t){return lK(e,t).next().value??null}function nUe(e,t,i){const r=zMe(e);if(r&&(UH(t,r[0])||aC(i,r[1])))return"";const s=Array.from(lK(e,t,i)),n=jMe(s,t,i)?"1=1":s.map(o=>o.where||"1=1").reduce((o,l)=>Ige(o,l),"");return n&&n!=="1=1"?n:""}function zMe(e){if(uK(e)==="manual")return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of e.filters)t[0]=Math.max(t[0],o_(i)),t[1]=Math.min(t[1],dT(r));return t}function*lK(e,t,i){if(uK(e)==="manual"){const r=e.filters.find(s=>s.id===e.activeFilterId);r&&(yield r)}else{typeof t=="object"&&(t=t.scale);for(const r of e.filters)UMe(r.minScale,r.maxScale,t,i)&&(yield r)}}function jMe(e,t,i){var n,o;if(e.length===0)return!0;const r=o_((n=e.at(0))==null?void 0:n.minScale),s=dT((o=e.at(-1))==null?void 0:o.maxScale);if(aC(r,t)||UH(s,i))return!0;for(let l=0;l<e.length-1;l++){const d=e[l],h=e[l+1];if(aC(o_(h.minScale),dT(d.maxScale)))return!0}return!1}function UMe(e,t,i,r){return e=o_(e),i=o_(i),t=dT(t),!(!Wo(i,e)&&(r??i)>e)&&!$he(t,i)&&(r===void 0||!Wo(r,e))}function uK(e){return"mode"in e?e.mode:e.filterMode}function o_(e){return e||Number.POSITIVE_INFINITY}function dT(e){return e||0}let Th=class extends ut.ClonableMixin(se){constructor(t){super(t),this.activeFilterId=null,this.filters=new(_e.ofType(aK)),this.mode="manual"}writeFilters(t,i,r,s){const n=t.toArray();this.mode==="scale"&&n.sort((o,l)=>{const d=NMe(l.minScale,o.minScale),h=o.maxScale-l.maxScale;return d===0?h:d}),i[r]=n.map(o=>o.toJSON(s))}write(t,i){return super.write(t,FMe(this,i))}};c([p({type:String,json:{write:{overridePolicy:(e,t,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],Th.prototype,"activeFilterId",void 0),c([p({type:_e.ofType(aK),nonNullable:!0,json:{write:!0}})],Th.prototype,"filters",void 0),c([be("filters")],Th.prototype,"writeFilters",null),c([p({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],Th.prototype,"mode",void 0),Th=c([I("esri.layers.support.DisplayFilterInfo")],Th);const GMe=Th,qMe=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return c([p(BMe)],t.prototype,"displayFilterEnabled",void 0),c([p(HMe)],t.prototype,"displayFilterInfo",void 0),t=c([I("esri.layers.mixins.DisplayFilteredLayer")],t),t},BMe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:ci,writer(e,t,i){$r(i,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},HMe={type:GMe,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:ci},origins:{"web-scene":{write:!1,read:!1}}}},WMe=dTe(),cK=new Map,dK=new Map;async function aUe(e,t,i){if(!e||!i)return!1;if(!t)return!0;const r=new URL(e).host;let s=cK.get(r);if(!s){const n=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await Rt(n,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===t}async function lUe(e,t,i=!1){var n,o,l;if(!e||!t)return!0;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=(n=dK.get(r))==null?void 0:n.entries();if(s){for(const[d,h]of s)if(h.name===t){const y=!((o=h.stack)!=null&&o.hasForwardEdits());if(!y&&i){const[{deleteForwardEdits:v},{default:b}]=await Promise.all([D(()=>import("./deleteForwardEdits--Ft2dv1J.js"),[]),D(()=>import("./DeleteForwardEditsParameters-Zlnh6YLn.js"),[])]),w=await v(r,d,new b({sessionId:WMe,moment:h.moment}));return w.success&&((l=h.stack)==null||l.clearForwardEdits()),w.success}return y}}return!0}function ZMe(e,t){var s;if(!e)return!1;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(s=dK.get(i))==null?void 0:s.entries();if(r){for(const[n,o]of r)if(o.name===t)return o.lockType==="edit"}return!1}const ID=new Kn.EventEmitter;function YMe(e){return ID.on("apply-edits",new WeakRef(e))}function JMe(e){return ID.on("update-moment",new WeakRef(e))}function uUe(e,t,i=null,r=!1){const s=bn();return r=t==null||r,ID.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:i,mayReceiveServiceEdits:r,result:s.promise}),s}const hK=Symbol();function cUe(e){return e!=null&&typeof e=="object"&&hK in e}function D0(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function zA(e,t,i){const r=new URL(e).host,s=cK.get(r),n=o=>!o||o===s;return n(t)&&n(i)||t===i}const XMe=e=>{var t;let i=class extends e{constructor(...r){super(...r),this[t]=!0,this._applyEditsHandler=s=>{const{serviceUrl:n,layerId:o,gdbVersion:l,mayReceiveServiceEdits:d,result:h}=s,y=n===this.url,v=o!=null&&this.layerId!=null&&o===this.layerId,b=D0(this),w=D0(this)&&zA(n,l,this.gdbVersion);if(!y||b&&!w||!v&&!d)return;const E=h.then(T=>{var O;if(this.lastEditsEventDate=new Date,v&&(T.addedFeatures.length||T.updatedFeatures.length||T.deletedFeatures.length||T.addedAttachments.length||T.updatedAttachments.length||T.deletedAttachments.length))return this.emit("edits",q(T)),T;const $=(O=T.editedFeatures)==null?void 0:O.find(({layerId:L})=>L===this.layerId);if($){const{adds:L,updates:R,deletes:N}=$.editedFeatures,j={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:L?L.map(({attributes:V})=>({objectId:this.objectIdField&&V[this.objectIdField],globalId:this.globalIdField&&V[this.globalIdField]})):[],deletedFeatures:N?N.map(({attributes:V})=>({objectId:this.objectIdField&&V[this.objectIdField],globalId:this.globalIdField&&V[this.globalIdField]})):[],updatedFeatures:R?R.map(({current:{attributes:V}})=>({objectId:this.objectIdField&&V[this.objectIdField],globalId:this.globalIdField&&V[this.globalIdField]})):[],editedFeatures:q(T.editedFeatures),exceededTransferLimit:!1,historicMoment:q(T.historicMoment)};return this.emit("edits",j),j}const A={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:q(T.editedFeatures),exceededTransferLimit:!1,historicMoment:q(T.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(n,l,A.historicMoment)&&this.emit("edits",A),A}).then(T=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(n,l,T.historicMoment)&&(this.historicMoment=T.historicMoment),T));this.emit("apply-edits",{result:E})},this._updateMomentHandler=s=>{const{serviceUrl:n,gdbVersion:o,moment:l}=s,d=n===this.url,h=D0(this),y=D0(this)&&zA(n,o,this.gdbVersion),v=D0(this)&&!zA(n,this.gdbVersion,null);d&&h&&y&&v&&"historicMoment"in this&&this.historicMoment!==l&&(this.historicMoment=l)},this.when().then(()=>{this.addHandles(YMe(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(JMe(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(r,s,n){return"historicMoment"in this&&this.historicMoment!==n&&ZMe(r,s)}};return t=hK,c([p()],i.prototype,"lastEditsEventDate",void 0),i=c([I("esri.layers.mixins.EditBusLayer")],i),i};var UL;const jA=new ot({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),UA=new ot({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let wa=UL=class extends se{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:n,units:o,distance:l}=this;return new su({geometry:q(i),objectIds:q(n),spatialRelationship:r,timeExtent:q(s),where:t,units:o,distance:l,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:s,units:n,distance:o}=this;return new UL({geometry:q(t),objectIds:q(s),spatialRelationship:i,timeExtent:q(r),where:e,units:n,distance:o})}};c([p({type:String,json:{write:!0}})],wa.prototype,"where",void 0),c([p({types:R_,json:{write:!0}})],wa.prototype,"geometry",void 0),c([p({type:jA.apiValues,json:{name:"spatialRel",read:{reader:jA.read},write:{allowNull:!1,writer:jA.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],wa.prototype,"spatialRelationship",void 0),c([p({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],wa.prototype,"distance",void 0),c([p({type:[Number],json:{write:!0}})],wa.prototype,"objectIds",void 0),c([p({type:UA.apiValues,json:{read:UA.read,write:{writer:UA.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],wa.prototype,"units",void 0),c([p({type:ru,json:{write:!0}})],wa.prototype,"timeExtent",void 0),wa=UL=c([I("esri.layers.support.FeatureFilter")],wa);const QMe=wa;var GL;const gU={read:{reader:s_},write:{writer:n_,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},vU={read:{reader:s_},write:{writer:n_,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},bU={name:"showExcludedLabels",default:!0};let $h=GL=class extends se{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,s;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const n=Object.keys(i.filter);if(n.length>1||n[0]!=="where")return(r=t.messages)==null||r.push(new B("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(s=t.messages)==null||s.push(new B("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new GL({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};c([p({type:QMe,json:{write:{allowNull:!0,writer(e,t,i,r){const s=e==null?void 0:e.write({},r);s&&Object.keys(s).length!==0?$r(i,s,t):$r(i,null,t)}}}})],$h.prototype,"filter",void 0),c([p({json:{read:s_,write:{writer:n_,allowNull:!0},origins:{"web-map":gU,"portal-item":gU}}})],$h.prototype,"includedEffect",void 0),c([p({json:{read:s_,write:{writer:n_,allowNull:!0},origins:{"web-map":vU,"portal-item":vU}}})],$h.prototype,"excludedEffect",void 0),c([p({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":bU,"portal-item":bU}}})],$h.prototype,"excludedLabelsVisible",void 0),$h=GL=c([I("esri.layers.support.FeatureEffect")],$h);const KMe=$h,_U={write:{allowNull:!0}},e3e={type:KMe,json:{origins:{"web-map":_U,"portal-item":_U}}},t3e=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return c([p(e3e)],t.prototype,"featureEffect",void 0),t=c([I("esri.layers.mixins.FeatureEffectLayer")],t),t};var qL;let Fv=qL=class extends se{constructor(e){super(e)}async collectRequiredFields(e,t){return is(e,t,this.expression)}clone(){return new qL({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};c([p({type:String,json:{write:{isRequired:!0}}})],Fv.prototype,"expression",void 0),c([p({type:String,json:{write:!0}})],Fv.prototype,"title",void 0),Fv=qL=c([I("esri.symbols.support.FeatureExpressionInfo")],Fv);const wU=Fv,L$={unknown:1,inches:Ci(1,"meters","inches"),feet:Ci(1,"meters","feet"),"us-feet":Ci(1,"meters","us-feet"),yards:Ci(1,"meters","yards"),miles:Ci(1,"meters","miles"),"nautical-miles":Ci(1,"meters","nautical-miles"),millimeters:Ci(1,"meters","millimeters"),centimeters:Ci(1,"meters","centimeters"),decimeters:Ci(1,"meters","decimeters"),meters:Ci(1,"meters","meters"),kilometers:Ci(1,"meters","kilometers"),"decimal-degrees":1/Gle(1,"meters",wi.radius)};function dUe(e){return!!e&&L$[e]!=null}function hUe(e){return 1/(L$[e]||1)}function i3e(){const e=Object.keys(L$);return vG(e,"decimal-degrees"),e.sort(),e}const r3e=i3e();var BL;const lS=xr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),SU=new ot({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Pl=BL=class extends se{constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new BL({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&tne(this.featureExpressionInfo,e.featureExpressionInfo)}};c([p({type:wU,json:{write:!0}})],Pl.prototype,"featureExpressionInfo",void 0),c([pe("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Pl.prototype,"readFeatureExpressionInfo",null),c([be("featureExpressionInfo",{featureExpressionInfo:{type:wU},"featureExpression.value":{type:[0]}})],Pl.prototype,"writeFeatureExpressionInfo",null),c([p({type:lS.apiValues,nonNullable:!0,json:{type:lS.jsonValues,read:lS.read,write:{writer:lS.write,isRequired:!0}}})],Pl.prototype,"mode",null),c([p({type:Number,json:{write:!0}})],Pl.prototype,"offset",void 0),c([p({type:r3e,json:{type:String,read:SU.read,write:SU.write}})],Pl.prototype,"unit",null),Pl=BL=c([I("esri.symbols.support.ElevationInfo")],Pl);const s3e=Pl;let Am=class extends se{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};c([p({type:String,json:{write:!0}})],Am.prototype,"description",void 0),c([p({type:String,json:{write:!0}})],Am.prototype,"label",void 0),c([p()],Am.prototype,"type",void 0),Am=c([I("esri.tables.elements.AttributeTableElement")],Am);const Fy=Am;var HL;let Vv=HL=class extends Fy{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new HL({description:this.description,displayType:this.displayType,label:this.label})}};c([p({type:["auto"],json:{write:!0}})],Vv.prototype,"displayType",void 0),c([p({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Vv.prototype,"type",void 0),Vv=HL=c([I("esri.tables.elements.AttributeTableAttachmentElement")],Vv);const EU=Vv;var WL;let zv=WL=class extends Fy{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new WL({description:this.description,fieldName:this.fieldName,label:this.label})}};c([p({type:String,json:{write:!0}})],zv.prototype,"fieldName",void 0),c([p({type:String,json:{read:!1,write:!0}})],zv.prototype,"type",void 0),zv=WL=c([I("esri.tables.elements.AttributeTableFieldElement")],zv);const TU=zv;var ZL;let jv=ZL=class extends Fy{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new ZL({description:this.description,label:this.label,relationshipId:this.relationshipId})}};c([p({type:Number,json:{write:!0}})],jv.prototype,"relationshipId",void 0),c([p({type:["relationship"],json:{read:!1,write:!0}})],jv.prototype,"type",void 0),jv=ZL=c([I("esri.tables.elements.AttributeTableRelationshipElement")],jv);const $U=jv;function pK(e){return{typesWithGroup:{base:Fy,key:"type",typeMap:{attachment:EU,field:TU,group:e,relationship:$U}},typesWithoutGroup:{base:Fy,key:"type",typeMap:{attachment:EU,field:TU,relationship:$U}}}}function fK(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function mK(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function yK(e,t,i=!0){return e?e.map(r=>Yo(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var YL;let Gl=YL=class extends Fy{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return yK(e,GA,!1)}readElements(e,t){return fK(t.attributeTableElements,GA,!1)}writeElements(e,t){t.attributeTableElements=mK(e,GA,!1)}clone(){return new YL({description:this.description,elements:q(this.elements),label:this.label})}};c([p({json:{write:!0}})],Gl.prototype,"elements",void 0),c([mt("elements")],Gl.prototype,"castElements",null),c([pe("elements",["attributeTableElements"])],Gl.prototype,"readElements",null),c([be("elements")],Gl.prototype,"writeElements",null),c([p({type:String,json:{read:!1,write:!0}})],Gl.prototype,"type",void 0),Gl=YL=c([I("esri.tables.elements.AttributeTableGroupElement")],Gl);const GA=pK(Gl),n3e=Gl;var JL;const qA=pK(n3e);let fc=JL=class extends se{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return yK(e,qA)}readElements(e,t){return fK(t.attributeTableElements,qA)}writeElements(e,t){t.attributeTableElements=mK(e,qA)}clone(){return new JL({elements:q(this.elements),orderByFields:this.orderByFields})}};c([p({json:{write:!0}})],fc.prototype,"elements",void 0),c([mt("elements")],fc.prototype,"castElements",null),c([pe("elements",["attributeTableElements"])],fc.prototype,"readElements",null),c([be("elements")],fc.prototype,"writeElements",null),c([p({type:[Object],json:{write:!0}})],fc.prototype,"orderByFields",void 0),fc=JL=c([I("esri.tables.AttributeTableTemplate")],fc);const o3e=fc,a3e={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:ci}}},R$={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},P$={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:ci}}},l3e={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:yp}}},u3e={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:ci}}},c3e={value:null,type:s3e,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:ci}}};function fUe(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const gK={write:{enabled:!0,layerContainerTypes:ci},read:!0},XL={type:Number,json:{origins:{"web-document":gK,"portal-item":{write:{layerContainerTypes:ci}}}}},d3e={...XL,json:{...XL.json,origins:{"web-document":{...gK,write:{enabled:!0,layerContainerTypes:ci,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>{var r;return i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(r=t.layerDefinition)!=null&&r.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?Gb(t.layerDefinition.drawingInfo.transparency):void 0:Gb(t.drawingInfo.transparency)}}}},mUe={type:Jt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Jt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=tt.fromJSON(t.spatialReference)),i}}}},read:!1}},h3e={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},p3e={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:ci}}},f3e={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:ci}}},vK={json:{write:{ignoreOrigin:!0,layerContainerTypes:ci},origins:{"web-map":{read:!1,write:!1}}}},m3e={type:o3e,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let kl=class extends ut.ClonableMixin(se){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};c([p()],kl.prototype,"creatorField",void 0),c([p()],kl.prototype,"creationDateField",void 0),c([p()],kl.prototype,"editorField",void 0),c([p()],kl.prototype,"editDateField",void 0),c([p()],kl.prototype,"realm",void 0),c([p(CE("dateFieldsTimeReference",!0))],kl.prototype,"timeZone",void 0),kl=c([I("esri.layers.support.EditFieldsInfo")],kl);const y3e=kl;let Aa=class extends ut.ClonableMixin(se){constructor(t){super(t)}};c([p({constructOnly:!0,json:{write:!0}})],Aa.prototype,"name",void 0),c([p({constructOnly:!0,json:{write:!0}})],Aa.prototype,"fields",void 0),c([p({constructOnly:!0,json:{write:!0}})],Aa.prototype,"isAscending",void 0),c([p({constructOnly:!0,json:{write:!0}})],Aa.prototype,"indexType",void 0),c([p({constructOnly:!0,json:{write:!0}})],Aa.prototype,"isUnique",void 0),c([p({constructOnly:!0,json:{write:!0}})],Aa.prototype,"description",void 0),Aa=c([I("esri.layers.support.FeatureIndex")],Aa);async function g3e(e,t,i){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=bK(e));const r=v3e(e),s=e.capabilities.query.supportsPagination;t.start=0,t.num=r;let n=null;for(;;){const o=await e.source.queryFeaturesJSON(t,i);if(n==null?n=o:n.features=n.features.concat(o.features),n.exceededTransferLimit=o.exceededTransferLimit,!s||!o.exceededTransferLimit)break;t.start+=r}return n}function v3e(e){return bK(e)*b3e(e)}function b3e(e){return e.capabilities.query.maxRecordCount||2e3}function bK(e){return e.capabilities.query.supportsMaxRecordCountFactor?su.MAX_MAX_RECORD_COUNT_FACTOR:1}var QL;let Uv=QL=class extends se{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new QL({minValue:this.minValue,maxValue:this.maxValue})}};c([p({type:Number,json:{write:!0}})],Uv.prototype,"minValue",void 0),c([p({type:Number,json:{write:!0}})],Uv.prototype,"maxValue",void 0),Uv=QL=c([I("esri.renderers.support.AuthoringInfoClassBreakInfo")],Uv);var KL;let Ac=KL=class extends se{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new KL({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:q(this.classBreakInfos)})}};c([p({type:String,json:{write:!0}})],Ac.prototype,"field",void 0),c([p({type:String,json:{write:!0}})],Ac.prototype,"normalizationField",void 0),c([p({type:String,json:{write:!0}})],Ac.prototype,"label",void 0),c([p({type:[Uv],json:{write:!0}})],Ac.prototype,"classBreakInfos",void 0),Ac=KL=c([I("esri.renderers.support.AuthoringInfoFieldInfo")],Ac);var eR;let Im=eR=class extends se{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new eR({label:this.label,value:this.value,size:this.size})}};c([p({type:String,json:{write:!0}})],Im.prototype,"label",void 0),c([p({type:Number,json:{write:!0}})],Im.prototype,"size",void 0),c([p({type:Number,json:{write:!0}})],Im.prototype,"value",void 0),Im=eR=c([I("esri.renderers.support.AuthoringInfoSizeStop")],Im);const _3e=Im;var tR;const uS=new ot({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),cS=new ot({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),xU={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},MU=["high-to-low","above-and-below","centered-on","extremes"],AU=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],IU=["seconds","minutes","hours","days","months","years"],w3e=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let gr=tR=class extends se{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new tR({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:q(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};c([p({types:xU,json:{write:!0}})],gr.prototype,"endTime",void 0),c([mt("endTime")],gr.prototype,"castEndTime",null),c([p({type:String,json:{write:!0}})],gr.prototype,"field",void 0),c([p({type:Number,json:{write:!0}})],gr.prototype,"maxSliderValue",void 0),c([p({type:Number,json:{write:!0}})],gr.prototype,"minSliderValue",void 0),c([p({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],gr.prototype,"normalizationField",null),c([p({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],gr.prototype,"referenceSizeScale",null),c([p({type:w3e,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],gr.prototype,"referenceSizeSymbolStyle",null),c([p({types:xU,json:{write:!0}})],gr.prototype,"startTime",void 0),c([mt("startTime")],gr.prototype,"castStartTime",null),c([p({type:[_3e],json:{origins:{"web-scene":{write:!1}},write:!0}})],gr.prototype,"sizeStops",null),c([p({type:uS.apiValues,value:null,json:{type:uS.jsonValues,read:uS.read,write:uS.write}})],gr.prototype,"style",null),c([p({type:AU,value:null,json:{type:AU,origins:{"web-scene":{type:MU,write:{writer:(e,t)=>{MU.includes(e)&&(t.theme=e)}}}},write:!0}})],gr.prototype,"theme",null),c([p({type:cS.apiValues,json:{type:cS.jsonValues,read:cS.read,write:cS.write}})],gr.prototype,"type",void 0),c([p({type:IU,json:{type:IU,write:!0}})],gr.prototype,"units",void 0),gr=tR=c([I("esri.renderers.support.AuthoringInfoVisualVariable")],gr);const S3e=gr;let N2=class extends se{constructor(t){super(t),this.type=null}};c([p({readOnly:!0,json:{read:!1,write:!0}})],N2.prototype,"type",void 0),N2=c([I("esri.rest.support.ColorRamp")],N2);const CD=N2;var iR;let xh=iR=class extends CD{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new iR({fromColor:q(this.fromColor),toColor:q(this.toColor),algorithm:this.algorithm})}};c([Pe({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],xh.prototype,"algorithm",void 0),c([p({type:ye,json:{type:[vt],write:!0}})],xh.prototype,"fromColor",void 0),c([p({type:ye,json:{type:[vt],write:!0}})],xh.prototype,"toColor",void 0),c([p({type:["algorithmic"]})],xh.prototype,"type",void 0),xh=iR=c([I("esri.rest.support.AlgorithmicColorRamp")],xh);const OD=xh;var rR;let Gv=rR=class extends CD{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new rR({colorRamps:q(this.colorRamps)})}};c([p({type:[OD],json:{write:!0}})],Gv.prototype,"colorRamps",void 0),c([p({type:["multipart"]})],Gv.prototype,"type",void 0),Gv=rR=c([I("esri.rest.support.MultipartColorRamp")],Gv);const _K=Gv,E3e={key:"type",base:CD,typeMap:{algorithmic:OD,multipart:_K}};function T3e(e){return e!=null&&e.type?e.type==="algorithmic"?OD.fromJSON(e):e.type==="multipart"?_K.fromJSON(e):null:null}var sR;const Bd=new ot({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),dS=new ot({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),CU=new ot({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),OU=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],$3e=["high-to-low","above-and-below","above","below"],x3e=["flow-line","wave-front"],M3e=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let bi=sR=class extends se{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?T3e(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new sR({classificationMethod:this.classificationMethod,colorRamp:q(this.colorRamp),fadeRatio:q(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(),field1:q(this.field1),field2:q(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};c([p({type:Bd.apiValues,value:null,json:{type:Bd.jsonValues,read:Bd.read,write:Bd.write,origins:{"web-document":{default:"manual",type:Bd.jsonValues,read:Bd.read,write:Bd.write}}}})],bi.prototype,"classificationMethod",null),c([p({types:E3e,json:{write:!0}})],bi.prototype,"colorRamp",void 0),c([pe("colorRamp")],bi.prototype,"readColorRamp",null),c([p({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],bi.prototype,"fadeRatio",void 0),c([p({type:[String],value:null,json:{write:!0}})],bi.prototype,"fields",null),c([p({type:Ac,value:null,json:{write:!0}})],bi.prototype,"field1",null),c([p({type:Ac,value:null,json:{write:!0}})],bi.prototype,"field2",null),c([p({type:x3e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],bi.prototype,"flowTheme",null),c([p({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],bi.prototype,"focus",null),c([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],bi.prototype,"isAutoGenerated",void 0),c([p({type:Number,value:null,json:{type:vt,write:!0}})],bi.prototype,"numClasses",null),c([p({type:OU,json:{type:OU,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],bi.prototype,"lengthUnit",void 0),c([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],bi.prototype,"maxSliderValue",void 0),c([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],bi.prototype,"minSliderValue",void 0),c([p({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],bi.prototype,"statistics",null),c([p({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],bi.prototype,"standardDeviationInterval",null),c([p({type:dS.apiValues,value:null,json:{type:dS.jsonValues,read:dS.read,write:dS.write,origins:{"web-scene":{type:CU.jsonValues,write:{writer:CU.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],bi.prototype,"type",null),c([p({type:[S3e],json:{write:!0}})],bi.prototype,"visualVariables",void 0),c([p({type:M3e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],bi.prototype,"univariateSymbolStyle",null),c([p({type:$3e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],bi.prototype,"univariateTheme",null),bi=sR=c([I("esri.renderers.support.AuthoringInfo")],bi);const LD=bi,BA=new ot({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let qv=class extends se{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,t),Array.from(i).sort()}getSymbol(t,i){}async getSymbolAsync(t,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};c([p({type:LD,json:{write:!0}})],qv.prototype,"authoringInfo",void 0),c([p({type:BA.apiValues,readOnly:!0,json:{type:BA.jsonValues,read:!1,write:{writer:BA.write,ignoreOrigin:!0,isRequired:!0}}})],qv.prototype,"type",void 0),qv=c([I("esri.renderers.Renderer")],qv);const uu=qv;let Bv=class extends ut.ClonableMixin(se){constructor(){super(...arguments),this.showLegend=null,this.title=null}};c([p({type:Boolean,json:{write:!0}})],Bv.prototype,"showLegend",void 0),c([p({type:String,json:{write:!0}})],Bv.prototype,"title",void 0),Bv=c([I("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Bv);const wK=Bv,HA=new ot({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Oo=class extends se{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(ae.getLogger(this).error(".field: field must be a string value"),null):E_(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};c([p()],Oo.prototype,"index",void 0),c([p({type:HA.apiValues,readOnly:!0,json:{read:HA.read,write:{writer:HA.write,isRequired:!0}}})],Oo.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],Oo.prototype,"field",void 0),c([mt("field")],Oo.prototype,"castField",null),c([p({type:String,json:{write:!0}})],Oo.prototype,"valueExpression",void 0),c([p({type:String,json:{write:!0}})],Oo.prototype,"valueExpressionTitle",void 0),c([p({readOnly:!0})],Oo.prototype,"arcadeRequired",null),c([p({type:wK,json:{write:!0}})],Oo.prototype,"legendOptions",void 0),Oo=c([I("esri.renderers.visualVariables.VisualVariable")],Oo);const ag=Oo;var nR;let Mh=nR=class extends se{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e??0}clone(){return new nR({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};c([p({type:ye,json:{type:[vt],write:{isRequired:!0}}})],Mh.prototype,"color",void 0),c([p({type:String,json:{write:!0}})],Mh.prototype,"label",void 0),c([p({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Mh.prototype,"value",void 0),c([be("value")],Mh.prototype,"writeValue",null),Mh=nR=c([I("esri.renderers.visualVariables.support.ColorStop")],Mh);const A3e=Mh;var oR;let Ah=oR=class extends ag{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){var e;return new oR({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};c([p({readOnly:!0})],Ah.prototype,"cache",null),c([p({type:["color"],json:{type:["colorInfo"]}})],Ah.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],Ah.prototype,"normalizationField",void 0),c([p({type:[A3e],json:{write:!0}})],Ah.prototype,"stops",null),Ah=oR=c([I("esri.renderers.visualVariables.ColorVariable")],Ah);const SK=Ah;var aR;let mc=aR=class extends se{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return Gb(t.transparency)}writeOpacity(e,t,i){t[i]=YT(e)}clone(){return new aR({label:this.label,opacity:this.opacity,value:this.value})}};c([p({type:String,json:{write:!0}})],mc.prototype,"label",void 0),c([p({type:Number,json:{type:vt,write:{target:"transparency",isRequired:!0}}})],mc.prototype,"opacity",void 0),c([pe("opacity",["transparency"])],mc.prototype,"readOpacity",null),c([be("opacity")],mc.prototype,"writeOpacity",null),c([p({type:Number,json:{write:{isRequired:!0}}})],mc.prototype,"value",void 0),mc=aR=c([I("esri.renderers.visualVariables.support.OpacityStop")],mc);const I3e=mc;var lR;let Ih=lR=class extends ag{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){var e;return new lR({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};c([p({readOnly:!0})],Ih.prototype,"cache",null),c([p({type:["opacity"],json:{type:["transparencyInfo"]}})],Ih.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],Ih.prototype,"normalizationField",void 0),c([p({type:[I3e],json:{write:!0}})],Ih.prototype,"stops",null),Ih=lR=c([I("esri.renderers.visualVariables.OpacityVariable")],Ih);const RD=Ih;var uR;let Ch=uR=class extends ag{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var e;return new uR({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};c([p({readOnly:!0})],Ch.prototype,"cache",null),c([p({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Ch.prototype,"axis",void 0),c([p({type:["rotation"],json:{type:["rotationInfo"]}})],Ch.prototype,"type",void 0),c([p({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Ch.prototype,"rotationType",void 0),Ch=uR=c([I("esri.renderers.visualVariables.RotationVariable")],Ch);const EK=Ch;function C3e(e){return ft(e)}var cR;let yc=cR=class extends se{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new cR({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};c([p({type:String,json:{write:!0}})],yc.prototype,"label",void 0),c([p({type:Number,cast:ft,json:{write:{isRequired:!0}}})],yc.prototype,"size",void 0),c([p({type:Number,json:{write:{isRequired:!0}}})],yc.prototype,"value",void 0),c([p({type:Boolean,json:{write:!1}})],yc.prototype,"useMinValue",void 0),c([p({type:Boolean,json:{write:!1}})],yc.prototype,"useMaxValue",void 0),yc=cR=c([I("esri.renderers.visualVariables.support.SizeStop")],yc);const F2=yc;let V2=class extends wK{constructor(){super(...arguments),this.customValues=null}};c([p({type:[Number],json:{write:!0}})],V2.prototype,"customValues",void 0),V2=c([I("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],V2);const TK=V2;var Kl,ar;function Zm(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function a_(e){return e!=null&&!isNaN(e)&&isFinite(e)}function $K(e){return e.valueExpression?Kl.Expression:e.field&&typeof e.field=="string"?Kl.Field:Kl.Unknown}function O3e(e,t){const i=t||$K(e),r=e.valueUnit||"unknown";return i===Kl.Unknown?ar.Constant:e.stops?ar.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?ar.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?ar.Proportional:ar.Additive:ar.Identity:ar.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Kl||(Kl={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(ar||(ar={}));const xK=()=>ae.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),k$=e=>xK().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),D$=()=>xK().error("Use of arcade expressions requires an arcade context"),LU=new ed,z2=Math.PI,MK=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function AK(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(E=>E.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void k$("ColorVariable");const s=typeof t=="number",n=s?null:t,o=n==null?void 0:n.attributes;let l=s?t:null;const d=r.field,{ipData:h,hasExpression:y}=r.cache;let v=r.cache.compiledFunc;if(!d&&!y){const E=r.stops;return E&&E[0]&&E[0].color}if(typeof l!="number")if(y){if((i==null?void 0:i.arcade)==null)return void D$();const E={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},T=i.arcade.arcadeUtils,$=T.getViewInfo(E),A=T.createExecContext(n,$,i.timeZone);if(!v){const O=T.createSyntaxTree(r.valueExpression);v=T.createFunction(O),r.cache.compiledFunc=v}l=T.executeFunction(v,A)}else o&&(l=o[d]);const b=r.normalizationField,w=o!=null&&b!=null?parseFloat(o[b]):void 0;if(l!=null&&(!b||s||!isNaN(w)&&w!==0)){isNaN(w)||s||(l/=w);const E=PD(l,h);if(E){const T=E[0],$=E[1],A=T===$?r.stops[T].color:ye.blendColors(r.stops[T].color,r.stops[$].color,E[2],i!=null?i.color:void 0);return new ye(A)}}}function IK(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(E=>E.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void k$("OpacityVariable");const s=typeof t=="number",n=s?null:t,o=n==null?void 0:n.attributes;let l=s?t:null;const d=r.field,{ipData:h,hasExpression:y}=r.cache;let v=r.cache.compiledFunc;if(!d&&!y){const E=r.stops;return E&&E[0]&&E[0].opacity}if(typeof l!="number")if(y){if((i==null?void 0:i.arcade)==null)return void D$();const E={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},T=i.arcade.arcadeUtils,$=T.getViewInfo(E),A=T.createExecContext(n,$,i.timeZone);if(!v){const O=T.createSyntaxTree(r.valueExpression);v=T.createFunction(O),r.cache.compiledFunc=v}l=T.executeFunction(v,A)}else o&&(l=o[d]);const b=r.normalizationField,w=o!=null&&b!=null?parseFloat(o[b]):void 0;if(l!=null&&(!b||s||!isNaN(w)&&w!==0)){isNaN(w)||s||(l/=w);const E=PD(l,h);if(E){const T=E[0],$=E[1];if(T===$)return r.stops[T].opacity;{const A=r.stops[T].opacity;return A+(r.stops[$].opacity-A)*E[2]}}}}function CK(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(w=>w.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void k$("RotationVariable");const s=r.axis||"heading",n=s==="heading"&&r.rotationType==="arithmetic"?90:0,o=s==="heading"&&r.rotationType==="arithmetic"?-1:1,l=typeof t=="number"?null:t,d=l==null?void 0:l.attributes,h=r.field,{hasExpression:y}=r.cache;let v=r.cache.compiledFunc,b=0;if(!h&&!y)return b;if(y){if((i==null?void 0:i.arcade)==null)return void D$();const w={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},E=i.arcade.arcadeUtils,T=E.getViewInfo(w),$=E.createExecContext(l,T,i.timeZone);if(!v){const A=E.createSyntaxTree(r.valueExpression);v=E.createFunction(A),r.cache.compiledFunc=v}b=E.executeFunction(v,$)}else d&&(b=d[h]||0);return b=typeof b!="number"||isNaN(b)?null:n+o*b,b}function L3e(e,t,i){const r=typeof t=="number",s=r?null:t,n=s==null?void 0:s.attributes;let o=r?t:null;const{isScaleDriven:l}=e.cache;let d=e.cache.compiledFunc;if(l){const y=i!=null?i.scale:void 0,v=i!=null?i.view:void 0;o=y==null||v==="3d"?R3e(e):y}else if(!r)switch(e.inputValueType){case Kl.Expression:{if((i==null?void 0:i.arcade)==null)return void D$();const y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(y),w=v.createExecContext(s,b,i.timeZone);if(!d){const E=v.createSyntaxTree(e.valueExpression);d=v.createFunction(E),e.cache.compiledFunc=d}o=v.executeFunction(d,w);break}case Kl.Field:n&&(o=n[e.field]);break;case Kl.Unknown:o=null}if(!a_(o))return null;if(r||!e.normalizationField)return o;const h=n?parseFloat(n[e.normalizationField]):null;return a_(h)&&h!==0?o/h:null}function R3e(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function N$(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(n=>n.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void k$("SizeVariable");const s=LK(L3e(r,t,i),r,t,i,r.cache.ipData);return s==null||isNaN(s)?0:s}function js(e,t,i){return e==null?null:Zm(e)?N$(e,t,i):a_(e)?e:null}function OK(e,t,i){return a_(i)&&e>i?i:a_(t)&&e<t?t:e}function P3e(e,t,i,r){return e+((js(t.minSize,i,r)||t.minDataValue)??0)}function k3e(e,t,i){const r=e.stops;let s=(r==null?void 0:r.length)&&r[0].size;return s==null&&(s=e.minSize),js(s,t,i)}function D3e(e,t,i,r){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=js(t.minSize,i,r),o=js(t.maxSize,i,r),l=r!=null?r.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return o;if(n==null||o==null)return null;if(t.scaleBy==="area"&&l){const d=l==="circle",h=d?z2*(n/2)**2:n*n,y=h+s*((d?z2*(o/2)**2:o*o)-h);return d?2*Math.sqrt(y/z2):Math.sqrt(y)}return n+s*(o-n)}function N3e(e,t,i,r){const s=r!=null?r.shape:void 0,n=e/t.minDataValue,o=js(t.minSize,i,r),l=js(t.maxSize,i,r);let d=null;return d=s==="circle"?2*Math.sqrt(n*(o/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(n*o**2):n*o,OK(d,o,l)}function F3e(e,t,i,r,s){var d,h,y;const[n,o,l]=PD(e,s);if(n===o)return js((d=t.stops)==null?void 0:d[n].size,i,r);{const v=js((h=t.stops)==null?void 0:h[n].size,i,r);return v+(js((y=t.stops)==null?void 0:y[o].size,i,r)-v)*l}}function V3e(e,t,i,r){const s=((r==null?void 0:r.resolution)??1)*L$[t.valueUnit],n=js(t.minSize,i,r),o=js(t.maxSize,i,r),{valueRepresentation:l}=t;let d=null;return d=l==="area"?2*Math.sqrt(e/z2)/s:l==="radius"||l==="distance"?2*e/s:e/s,OK(d,n,o)}function LK(e,t,i,r,s){switch(t.transformationType){case ar.Additive:return P3e(e,t,i,r);case ar.Constant:return k3e(t,i,r);case ar.ClampedLinear:return D3e(e,t,i,r);case ar.Proportional:return N3e(e,t,i,r);case ar.Stops:return F3e(e,t,i,r,s);case ar.RealWorldSize:return V3e(e,t,i,r);case ar.Identity:return e;case ar.Unknown:return null}}function z3e(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const s={scale:t,view:i};let n=js(e.minSize,LU,s),o=js(e.maxSize,LU,s);if(n!=null||o!=null){if(n>o){const l=o;o=n,n=l}return{minSize:n,maxSize:o}}}function j3e(e,t,i){if(!e.visualVariables)return;const r=[],s=[],n=[],o=[],l=[];for(const d of e.visualVariables)switch(d.type){case"color":s.push(d);break;case"opacity":n.push(d);break;case"rotation":l.push(d);break;case"size":o.push(d)}return s.forEach(d=>{const h=AK(d,t,i);r.push({variable:d,value:h})}),n.forEach(d=>{const h=IK(d,t,i);r.push({variable:d,value:h})}),l.forEach(d=>{const h=CK(d,t,i);r.push({variable:d,value:h})}),o.forEach(d=>{const h=N$(d,t,i);r.push({variable:d,value:h})}),r.filter(d=>d.value!=null)}function PD(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((s,n)=>e<s?(r=n,!0):(i=n,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function U3e(e,t,i){const r=["proportional","proportional","proportional"];for(const s of e){const n=s.useSymbolValue?"symbol-value":N$(s,t,i);switch(s.axis){case"width":r[0]=n;break;case"depth":r[1]=n;break;case"height":r[2]=n;break;case"width-and-depth":r[0]=n,r[1]=n;break;case"all":case void 0:case null:r[0]=n,r[1]=n,r[2]=n;break;default:s.axis}}return r}const Fp=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:U3e,getColor:AK,getOpacity:IK,getRotationAngle:CK,getSize:N$,getSizeForValue:LK,getSizeFromNumberOrVariable:js,getSizeRangeAtScale:z3e,getVisualVariableValues:j3e,viewScaleRE:MK},Symbol.toStringTag,{value:"Module"}));var dR;const hS=new ot({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),hR=new ot({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function RU(e){if(e!=null)return typeof e=="string"||typeof e=="number"?C3e(e):e.type==="size"?Zm(e)?e:(delete(e={...e}).type,new At(e)):void 0}function PU(e,t,i){if(typeof e!="object")return e;const r=new At;return r.read(e,i),r}let At=dR=class extends ag{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&MK.test(this.valueExpression)}}set index(e){Zm(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),Zm(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return $K(this)}set maxDataValue(e){e&&this.stops&&(ae.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(ae.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return RU(e)}readMaxSize(e,t,i){return PU(e,t,i)}set minDataValue(e){e&&this.stops&&(ae.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(ae.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return RU(e)}readMinSize(e,t,i){return PU(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(ae.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return O3e(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r!=null&&r.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new B("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?hR.read(e):null}clone(){var e,t;return new dR({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Zm(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Zm(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===ar.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===ar.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};c([p({readOnly:!0})],At.prototype,"cache",null),c([p({type:hS.apiValues,json:{type:hS.jsonValues,origins:{"web-map":{read:!1}},read:hS.read,write:hS.write}})],At.prototype,"axis",void 0),c([p()],At.prototype,"index",null),c([p({type:String,readOnly:!0})],At.prototype,"inputValueType",null),c([p({type:TK,json:{write:!0}})],At.prototype,"legendOptions",void 0),c([p({type:Number,value:null,json:{write:!0}})],At.prototype,"maxDataValue",null),c([p({type:Number,value:null,json:{write:!0}})],At.prototype,"maxSize",null),c([mt("maxSize")],At.prototype,"castMaxSize",null),c([pe("maxSize")],At.prototype,"readMaxSize",null),c([p({type:Number,value:null,json:{write:!0}})],At.prototype,"minDataValue",null),c([p({type:Number,value:null,json:{write:!0}})],At.prototype,"minSize",null),c([mt("minSize")],At.prototype,"castMinSize",null),c([pe("minSize")],At.prototype,"readMinSize",null),c([p({type:String,json:{write:!0}})],At.prototype,"normalizationField",void 0),c([p({readOnly:!0})],At.prototype,"arcadeRequired",null),c([p({type:String})],At.prototype,"scaleBy",void 0),c([p({type:[F2],value:null,json:{write:!0}})],At.prototype,"stops",null),c([p({type:["outline"],json:{write:!0}})],At.prototype,"target",void 0),c([p({type:String,readOnly:!0})],At.prototype,"transformationType",null),c([p({type:["size"],json:{type:["sizeInfo"]}})],At.prototype,"type",void 0),c([p({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],At.prototype,"useSymbolValue",void 0),c([p({type:String,json:{write:!0}})],At.prototype,"valueExpression",void 0),c([pe("valueExpression",["valueExpression","expression"])],At.prototype,"readValueExpression",null),c([be("web-scene","valueExpression")],At.prototype,"writeValueExpressionWebScene",null),c([p({type:["radius","diameter","area","width","distance"],json:{write:!0}})],At.prototype,"valueRepresentation",void 0),c([p({type:hR.apiValues,json:{write:hR.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],At.prototype,"valueUnit",void 0),c([pe("valueUnit")],At.prototype,"readValueUnit",null),At=dR=c([I("esri.renderers.visualVariables.SizeVariable")],At);const lg=At,G3e={color:SK,size:lg,opacity:RD,rotation:EK},q3e=new ot({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),B3e=/^\[([^\]]+)\]$/i;let j2=class extends Me{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t==null?void 0:t.filter(i=>!!i),t==null?void 0:t.length){for(const i of t)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&t.sort((i,r)=>{let s=null;return s=i.target===r.target?0:i.target?1:-1,s});for(let i=0;i<t.length;i++)t[i].index=i;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,i,r){const{rotationExpression:s,rotationType:n}=i,o=s==null?void 0:s.match(B3e),l=o==null?void 0:o[1];if(l&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:n,field:l})),t)return t.map(d=>{const h=q3e.read(d.type),y=G3e[h];y||(ae.getLogger(this).warn(`Unknown variable type: ${h}`),r!=null&&r.messages&&r.messages.push(new Qn("visual-variable:unsupported",`visualVariable of type '${h}' is not supported`,{definition:d,context:r})));const v=new y;return v.read(d,r),v})}writeVariables(t,i){const r=[];for(const s of t){const n=s.toJSON(i);n&&r.push(n)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};c([p()],j2.prototype,"visualVariables",null),j2=c([I("esri.renderers.visualVariables.VisualVariableFactory")],j2);const H3e=j2,W3e={base:ag,key:"type",typeMap:{opacity:RD,color:SK,rotation:EK,size:lg}},ug=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new H3e}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,n){r[s]=this._vvFactory.writeVariables(i,n)}get arcadeRequiredForVisualVariables(){var i;return((i=this.visualVariables)==null?void 0:i.some(({arcadeRequired:r})=>r))??!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){var s;return((s=this.visualVariables)==null?void 0:s.filter(n=>n.type===i&&(typeof r=="string"?n.target===r:r!==!1||!n.target)))??[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const n of s)n&&(n.field&&_s(i,r,n.field),n.normalizationField&&_s(i,r,n.normalizationField),n.valueExpression&&(Z3e(n.valueExpression,i,r)||await is(i,r,n.valueExpression)))}};return c([p({types:[W3e],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),c([pe("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),c([be("visualVariables")],t.prototype,"writeVisualVariables",null),t=c([I("esri.renderers.mixins.VisualVariablesMixin")],t),t};function Z3e(e,t,i){const r=qge(e);return r!=null&&(_s(t,i,r),!0)}const kD=[252,146,31,255],Y3e=[153,153,153,255],J3e={type:"esriSMS",style:"esriSMSCircle",size:6,color:kD,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},X3e={type:"esriSLS",style:"esriSLSSolid",width:.75,color:kD},Q3e={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},K3e={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},eAe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},tAe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},iAe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},hT=es.fromJSON(J3e),DD=ws.fromJSON(X3e),RK=qa.fromJSON(Q3e),rAe=rg.fromJSON(K3e);function TUe(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return hT;case"polyline":return DD;case"polygon":case"extent":return RK}return null}const $Ue=es.fromJSON(eAe),xUe=ws.fromJSON(tAe),MUe=qa.fromJSON(iAe),sAe=Yl.fromSimpleMarkerSymbol(hT),nAe=Np.fromSimpleLineSymbol(DD),oAe=pd.fromSimpleFillSymbol(RK),aAe=new U_({symbolLayers:new _e([new Dp({material:{color:kD},edges:new dY({size:Bs(1),color:new ye(Y3e)})})])}),lAe=new Np({symbolLayers:new _e([new tg({material:{color:new ye([0,0,0])},size:Bs(1)})])}),uAe=new pd({symbolLayers:new _e([new Dp({outline:{color:new ye([0,0,0]),size:Bs(1)}})])});function AUe(e){if(e==null)return null;switch(e.type){case"mesh":return aAe;case"point":case"multipoint":return sAe;case"polyline":return nAe;case"polygon":case"extent":return oAe}return null}const kU="#useCIMFallbackSymbology()",Wl={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Vy(e,t=Wl){var d,h,y,v;if(!e)return{symbol:null};const{retainId:i=Wl.retainId,ignoreDrivers:r=Wl.ignoreDrivers,hasLabelingContext:s=Wl.hasLabelingContext,retainCIM:n=Wl.retainCIM,cimFallbackEnabled:o=Wl.cimFallbackEnabled}=t;let l=null;if(Ba(e)||e instanceof Kc)l=e.clone();else if(e.type==="cim"){const b=(h=(d=e.data)==null?void 0:d.symbol)==null?void 0:h.type;switch(b){case"CIMPointSymbol":l=n?e.clone():Yl.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(l=lAe.clone(),(y=t==null?void 0:t.logWarning)==null||y.call(t,kU,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(l=uAe.clone(),(v=t==null?void 0:t.logWarning)==null||v.call(t,kU,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!l)return{error:new B("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${b||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof ws)l=Np.fromSimpleLineSymbol(e);else if(e instanceof es)l=Yl.fromSimpleMarkerSymbol(e);else if(e instanceof G_)l=Yl.fromPictureMarkerSymbol(e);else if(e instanceof qa)l=t.geometryType&&t.geometryType==="mesh"?U_.fromSimpleFillSymbol(e):pd.fromSimpleFillSymbol(e);else{if(!(e instanceof rg))return{error:new B("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};l=s?p$.fromTextSymbol(e):Yl.fromTextSymbol(e)}return i&&l&&l.type!=="cim"&&(l.id=e.id),!r||l.type==="cim"||l instanceof Kc||l.symbolLayers.forEach(b=>b.ignoreDrivers=!0),{symbol:l}}function pT(e,t,i,r){const s=PK(e,{},{context:r,isLabelSymbol:!1});s!=null&&(t[i]=s)}function DU(e,t,i,r){const s=PK(e,{},{context:r,isLabelSymbol:!0});s!=null&&(t[i]=s)}function NU(e){return Ba(e)||e instanceof Kc}function cAe(e){return(e==null?void 0:e.type)==="polygon-3d"||(e==null?void 0:e.type)==="line-3d"}function PK(e,t,i){var l;if(e==null)return null;const{context:r,isLabelSymbol:s}=i,n=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(n==="web-scene"&&!NU(e)){const d=Vy(e,{retainCIM:!0,hasLabelingContext:s});return d.symbol!=null?d.symbol.write(t,r):(o==null||o.push(new B("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:d.error})),null)}return oC(r==null?void 0:r.layer)&&cAe(e)?(o==null||o.push(new B("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${(l=r==null?void 0:r.layer)==null?void 0:l.declaredClass}'.`,{symbol:e,context:r})),null):(n==="web-map"||n==="portal-item"&&!oC(r==null?void 0:r.layer))&&NU(e)?(o==null||o.push(new B("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function kK(e,t){return Fve(e,null,t)}const F$={types:jY,json:{write:{writer:pT},origins:{"web-scene":{types:ZV,write:{writer:pT},read:{reader:By({types:ZV})}}}}},ND=hP({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},F$),FD={types:{base:Dr,key:"type",typeMap:{"simple-fill":Nc.typeMap["simple-fill"],"picture-fill":Nc.typeMap["picture-fill"],"polygon-3d":Nc.typeMap["polygon-3d"],cim:Nc.typeMap.cim}},json:{write:{writer:pT},origins:{"web-scene":{type:pd,write:{writer:pT}}}}},U2={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var pR;let Oh=pR=class extends ug(uu){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.symbols.map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new pR({description:this.description,label:this.label,symbol:q(this.symbol),visualVariables:q(this.visualVariables),authoringInfo:q(this.authoringInfo)})}};c([p({type:String,json:{write:!0}})],Oh.prototype,"description",void 0),c([p({type:String,json:{write:!0}})],Oh.prototype,"label",void 0),c([p(ND)],Oh.prototype,"symbol",void 0),c([Pe({simple:"simple"})],Oh.prototype,"type",void 0),Oh=pR=c([I("esri.renderers.SimpleRenderer")],Oh);const La=Oh,dAe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function fR(e){return e instanceof Me}function FU(e){return e instanceof _e?Object.keys(e.items):fR(e)?Us(e).keys():e?Object.keys(e):[]}function pS(e,t){return e instanceof _e?e.items[t]:e[t]}function hAe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function xb(e){return e?e.declaredClass:null}function DK(e,t){var v;const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=FU(e),s=FU(t);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||hAe(e,t))return{type:"complete",oldValue:e,newValue:t};const n=s.filter(b=>!r.includes(b)),o=r.filter(b=>!s.includes(b)),l=r.filter(b=>s.includes(b)&&pS(e,b)!==pS(t,b)).concat(n,o).sort(),d=xb(e);if(d&&dAe.has(d)&&l.length)return{type:"complete",oldValue:e,newValue:t};let h;const y=fR(e)&&fR(t);for(const b of l){const w=pS(e,b),E=pS(t,b);let T;if((y||typeof w!="function"&&typeof E!="function")&&w!==E&&(w!=null||E!=null)){if(i&&i[b]&&typeof i[b]=="function")T=(v=i[b])==null?void 0:v.call(i,w,E);else if(w instanceof Date&&E instanceof Date){if(w.getTime()===E.getTime())continue;T={type:"complete",oldValue:w,newValue:E}}else T=typeof w=="object"&&typeof E=="object"&&xb(w)===xb(E)?DK(w,E):{type:"complete",oldValue:w,newValue:E};T!=null&&(h!=null?h.diff[b]=T:h={type:"partial",diff:{[b]:T}})}}return h}function IUe(e,t){return pAe(e,t)}function pAe(e,t){if(e==null)return!1;const i=t.split(".");let r=e;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const n=r.diff[s];if(!n)return!1;r=n}}return!0}function CUe(e,t){if(!e)return!1;if(e.type==="partial"){const i=Object.keys(e.diff);return i.length===1&&i[0]===t}return!1}function fAe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&xb(e)!==xb(t)?{type:"complete",oldValue:e,newValue:t}:DK(e,t)}function fS(e){if(e==null)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const i of t.added)if(!fS(i))return!1;for(const i of t.removed)if(!fS(i))return!1;for(const i of t.changed)if(!fS(i))return!1;return!0}case"partial":for(const t in e.diff)if(!fS(e.diff[t]))return!1;return!0}}var mR;const mAe=xr()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let Hv=mR=class extends ut.ClonableMixin(se){static from(e){return T_(mR,e)}constructor(e){super(e),this.title=null,this.order=null}};c([p({type:String,json:{write:!0}})],Hv.prototype,"title",void 0),c([Pe(mAe)],Hv.prototype,"order",void 0),Hv=mR=c([I("esri.renderers.support.RendererLegendOptions")],Hv);const VD=Hv;let Cm=class extends ut.ClonableMixin(se){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};c([p(U2)],Cm.prototype,"value",void 0),c([p(U2)],Cm.prototype,"value2",void 0),c([p(U2)],Cm.prototype,"value3",void 0),Cm=c([I("esri.renderers.support.UniqueValue")],Cm);const my=Cm;let gc=class extends ut.ClonableMixin(se){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const i=typeof(t=Array.isArray(t)?t:[t])[0];return i==="string"||i==="number"?t.map(r=>new my({value:r})):i==="object"?t[0]instanceof my?t:t.map(r=>new my(r)):null}};c([p({type:String,json:{write:!0}})],gc.prototype,"description",void 0),c([p({type:String,json:{write:!0}})],gc.prototype,"label",void 0),c([p(F$)],gc.prototype,"symbol",void 0),c([p({type:[my],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new my({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const i=[];for(const r of e){const s=[r.value,r.value2,r.value3].filter(Yr).map(n=>n.toString());i.push(s)}t.values=i}}}})],gc.prototype,"values",void 0),c([mt("values")],gc.prototype,"castValues",null),gc=c([I("esri.renderers.support.UniqueValueClass")],gc);const NK=gc;let Wv=class extends ut.ClonableMixin(se){constructor(t){super(t),this.heading=null,this.classes=null}};c([p({type:String,json:{write:!0}})],Wv.prototype,"heading",void 0),c([p({type:[NK],json:{write:{isRequired:!0}}})],Wv.prototype,"classes",void 0),Wv=c([I("esri.renderers.support.UniqueValueGroup")],Wv);const yR=Wv;var gR;let Lh=gR=class extends se{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new gR({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};c([p({type:String,json:{write:!0}})],Lh.prototype,"description",void 0),c([p({type:String,json:{write:!0}})],Lh.prototype,"label",void 0),c([p(ND)],Lh.prototype,"symbol",void 0),c([p(U2)],Lh.prototype,"value",void 0),Lh=gR=c([I("esri.renderers.support.UniqueValueInfo")],Lh);const Mb=Lh,VU=new Map;async function yAe(e,t){try{return{data:(await zD(e,t)).data,baseUrl:CP(e),styleUrl:e}}catch(i){return Ia(i),null}}function gAe(e,t,i){var d;const r=t.portal!=null?t.portal:ts.getDefault();let s;const n=`${r.url} - ${(d=r.user)==null?void 0:d.username} - ${e}`,o=VU.get(n);if(o)return o;const l=vAe(e,r,i).then(h=>(s=h,h.fetchData())).then(h=>({data:h,baseUrl:s.itemUrl??"",styleName:e}));return VU.set(n,l),l}function vAe(e,t,i){return t.load(i).then(()=>{const r=new jo({disableExtraQuery:!0,query:`owner:${zU} AND type:${jU} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{var o;let s=null;const n=e.toLowerCase();if(r&&Array.isArray(r)){for(const l of r)if(((o=l.typeKeywords)==null?void 0:o.some(h=>h.toLowerCase()===n))&&l.type===jU&&l.owner===zU){s=l;break}}if(!s)throw new B("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(i)})}function FK(e,t,i){return(e==null?void 0:e.styleUrl)!=null?yAe(e.styleUrl,i):(e==null?void 0:e.styleName)!=null?gAe(e.styleName,t,i):Promise.reject(new B("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function VK(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function bAe(e,t){for(const i of t)switch(i){case"cim":if(e.cimRef)return{format:i,url:encodeURI(e.cimRef)};break;case"web-gltf-basisu":{const r=WA(e,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=WA(e,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=WA(e,"gltf");if(r)return{format:"web-gltf",url:r};if(e.webRef)return{format:i,url:encodeURI(e.webRef)};break}}}function WA(e,t){var i,r;if(!Y("enable-feature:force-wosr"))return(r=(i=e.formatInfos)==null?void 0:i.find(s=>s.type===t))==null?void 0:r.href}function zD(e,t){const i={responseType:"json",query:{f:"json"},...t};return Rt(Bo(e),i)}const zU="esri_en",jU="Style",_Ae="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Zv;const zK="esri.renderers.UniqueValueRenderer",Hu=()=>ae.getLogger(zK),UU="uvInfos-watcher",GU="uvGroups-watcher",wAe=",",SAe=Zi(Mb);function EAe(e){const{field1:t,field2:i,field3:r,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=e,l=!(!t||!i);return[{classes:(n??[]).map(d=>{var A;const{symbol:h,label:y,value:v,description:b}=d,[w,E,T]=l?((A=v==null?void 0:v.toString())==null?void 0:A.split(s||""))||[]:[v],$=[];return(t||o)&&$.push(w),i&&$.push(E),r&&$.push(T),{symbol:h,label:y,values:[$],description:b}})}]}function Uf(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let si=Zv=class extends ug(uu){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<i.length;n++){const o=t.find(l=>l.value===i[n].value);o?fAe(o,i[n])?(s.changed.push({type:"complete",oldValue:o,newValue:i[n]}),r=!0):s.unchanged.push({oldValue:o,newValue:i[n]}):(s.added.push(i[n]),r=!0)}for(let n=0;n<t.length;n++)i.find(o=>o.value===t[n].value)||(s.removed.push(t[n]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:E_(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r!=null&&r.messages?r.messages.push(new B("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Hu().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||ts.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=Wc(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=$_(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?Hu().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Hu().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var r;if(this.styleOrigin)return void Hu().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?SAe(e):new Mb({value:e,symbol:UY(t)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[Uf(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Hu().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let i=0;i<t.length;i++){const r=t[i];if(String(r.value)===String(e)){delete this._valueInfoMap[Uf(e)],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(i={...i,arcade:await Va()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void Hu().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const s=await Va(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}const r=this._getUniqueValueInfo(e,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}get symbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){var r;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((s,n)=>s+n.getMeshHash(),"");return`${e}.${t}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Zv({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:q(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:q(this.visualVariables),legendOptions:q(this.legendOptions),authoringInfo:q(this.authoringInfo),backgroundFillSymbol:q(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=q(this.uniqueValueInfos),i=q(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(q(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.symbols.map(r=>r.collectRequiredFields(e,t)),is(e,t,this.valueExpression)];_s(e,t,this.field),_s(e,t,this.field2),_s(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return FK(this.styleOrigin,{portal:this.portal}).then(e=>{var i;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const s=new Kc({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const n=new Mb({value:r.name,symbol:s});t.push(n),this._valueInfoMap[Uf(r.name)]=n}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",wAe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[Uf(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(UU);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push(ve(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,s)=>{r!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,UU)}}_watchUniqueValueGroups(){this.removeHandles(GU);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const i of e){t.push(ve(()=>({classes:i.classes}),(r,s)=>{r!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])t.push(ve(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,GU)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:r,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const l=!(!t||!i);for(const d of n)for(const h of d.classes??[]){const{symbol:y,label:v,values:b,description:w}=h;for(const E of b??[]){const{value:T,value2:$,value3:A}=E,O=[T];i&&O.push($),r&&O.push(A);const L=l?O.join(s||""):O[0]??void 0;e.push(new Mb({symbol:y,label:v,value:L,description:w}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:r,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!t&&!r||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!i),l=n.map(h=>{var A;const{symbol:y,label:v,value:b,description:w}=h,[E,T,$]=o?((A=b==null?void 0:b.toString())==null?void 0:A.split(s||""))||[]:[b];return new NK({symbol:y,label:v,description:w,values:[new my({value:E,value2:T,value3:$})]})}),d=[new yR({classes:l})];e&&Object.freeze(d),this._set("uniqueValueGroups",d),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:o}=t??{};let l=this._cache.compiledFunc;const d=n.arcadeUtils;if(!l){const y=d.createSyntaxTree(this.valueExpression);l=d.createFunction(y),this._cache.compiledFunc=l}const h=d.executeFunction(l,d.createExecContext(e,d.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),o));return this._valueInfoMap[Uf(h)]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(this.field2){const s=this.field2,n=this.field3,o=[];t&&o.push(i[t]),s&&o.push(i[s]),n&&o.push(i[n]),r=o.join(this.fieldDelimiter||"")}else t&&(r=i[t]);return this._valueInfoMap[Uf(r)]}static fromPortalStyle(e,t){const i=new Zv(t==null?void 0:t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",(t==null?void 0:t.portal)||ts.getDefault());const r=i.populateFromStyle();return r.catch(s=>{Hu().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(e,t){const i=new Zv(t==null?void 0:t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(s=>{Hu().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};c([p({readOnly:!0})],si.prototype,"_cache",null),c([Pe({uniqueValue:"unique-value"})],si.prototype,"type",void 0),c([p(FD)],si.prototype,"backgroundFillSymbol",void 0),c([p({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],si.prototype,"field",null),c([mt("field")],si.prototype,"castField",null),c([be("field")],si.prototype,"writeField",null),c([p({type:String,value:null,json:{write:!0}})],si.prototype,"field2",null),c([p({type:String,value:null,json:{write:!0}})],si.prototype,"field3",null),c([p({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],si.prototype,"orderByClassesEnabled",void 0),c([p({type:String,value:null,json:{write:!0}})],si.prototype,"valueExpression",null),c([p({type:String,json:{write:!0}})],si.prototype,"valueExpressionTitle",void 0),c([p({type:VD,json:{write:!0}})],si.prototype,"legendOptions",void 0),c([p({type:String,json:{write:!0}})],si.prototype,"defaultLabel",void 0),c([p(hP({...F$},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],si.prototype,"defaultSymbol",null),c([p({type:String,value:null,json:{write:!0}})],si.prototype,"fieldDelimiter",null),c([p({type:ts,readOnly:!0})],si.prototype,"portal",void 0),c([pe("portal",["styleName"])],si.prototype,"readPortal",null),c([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],si.prototype,"styleOrigin",void 0),c([pe("styleOrigin",["styleName","styleUrl"])],si.prototype,"readStyleOrigin",null),c([be("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],si.prototype,"writeStyleOrigin",null),c([p({type:[yR],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||EAe(t)).map(r=>yR.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],si.prototype,"uniqueValueGroups",null),c([p({type:[Mb],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],si.prototype,"uniqueValueInfos",null),si=Zv=c([I(zK)],si);const jD=si;var vR;let sr=vR=class extends se{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new vR(q({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};c([p({type:[String],json:{write:!0}})],sr.prototype,"attachmentTypes",void 0),c([p({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],sr.prototype,"attachmentsWhere",void 0),c([p({type:Boolean,json:{write:!0}})],sr.prototype,"cacheHint",void 0),c([p({type:[String],json:{write:!0}})],sr.prototype,"keywords",void 0),c([p({type:[String],json:{write:!0}})],sr.prototype,"globalIds",void 0),c([p({json:{write:!0}})],sr.prototype,"name",void 0),c([p({type:Number,json:{read:{source:"resultRecordCount"}}})],sr.prototype,"num",void 0),c([p({type:[Number],json:{write:!0}})],sr.prototype,"objectIds",void 0),c([p({type:[String],json:{write:!0}})],sr.prototype,"orderByFields",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],sr.prototype,"returnMetadata",void 0),c([p({type:[Number],json:{write:!0}})],sr.prototype,"size",void 0),c([p({type:Number,json:{read:{source:"resultOffset"}}})],sr.prototype,"start",void 0),c([be("start"),be("num")],sr.prototype,"writeStart",null),c([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],sr.prototype,"where",void 0),sr=vR=c([I("esri.rest.support.AttachmentQuery")],sr),sr.from=Zi(sr);const TAe=sr,jK=xr()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),qU="percent-of-total",BU="field",PUe=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let i=this._get("normalizationType");const r=!!this.normalizationField,s=this.normalizationTotal!=null;return r||s?(i=r&&BU||s&&qU||null,r&&s&&ae.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):i!==BU&&i!==qU||(i=null),i}set normalizationType(i){this._set("normalizationType",i)}};return c([p({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),c([p({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),c([p({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),c([p({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),c([Pe(jK,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=c([I("esri.rest.support.NormalizationBinParametersMixin")],t),t};var bR;let hi=bR=class extends se{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new bR(q({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};c([p({type:Boolean,json:{write:!0}})],hi.prototype,"cacheHint",void 0),c([p({type:Fo,json:{write:!0}})],hi.prototype,"dynamicDataSource",void 0),c([p({type:String,json:{write:!0}})],hi.prototype,"gdbVersion",void 0),c([p({type:Number,json:{write:!0}})],hi.prototype,"geometryPrecision",void 0),c([p({type:Date})],hi.prototype,"historicMoment",void 0),c([be("historicMoment")],hi.prototype,"_writeHistoricMoment",null),c([p({type:Number,json:{write:!0}})],hi.prototype,"maxAllowableOffset",void 0),c([p({json:{write:!0}})],hi.prototype,"objectIds",void 0),c([p({type:[String],json:{write:!0}})],hi.prototype,"orderByFields",void 0),c([p({type:[String],json:{write:!0}})],hi.prototype,"outFields",void 0),c([p({type:tt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],hi.prototype,"outSpatialReference",void 0),c([p({json:{write:!0}})],hi.prototype,"relationshipId",void 0),c([p({type:Number,json:{read:{source:"resultOffset"}}})],hi.prototype,"start",void 0),c([be("start"),be("num")],hi.prototype,"writeStart",null),c([p({type:Number,json:{read:{source:"resultRecordCount"}}})],hi.prototype,"num",void 0),c([p({json:{write:!0}})],hi.prototype,"returnGeometry",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],hi.prototype,"returnM",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],hi.prototype,"returnZ",void 0),c([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],hi.prototype,"where",void 0),hi=bR=c([I("esri.rest.support.RelationshipQuery")],hi),hi.from=Zi(hi);const UD=hi,kUe=Object.freeze(Object.defineProperty({__proto__:null,default:UD},Symbol.toStringTag,{value:"Module"})),_R=new ot({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function $Ae(e,t,i,r){const s=await fd(e);if(await GD(e,t,r),!s.addAttachment)throw new B(r,"Layer source does not support addAttachment capability");return s.addAttachment(t,i)}function GD(e,t,i){var n,o;const{attributes:r}=t,{objectIdField:s}=e;return(o=(n=e.capabilities)==null?void 0:n.data)!=null&&o.supportsAttachment?t?r?s&&r[s]?Promise.resolve():Promise.reject(new B(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new B(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new B(i,"A feature is required to add/delete/update attachments")):Promise.reject(new B(i,"this layer doesn't support attachments"))}async function xAe(e,t,i,r,s){const n=await fd(e);if(await GD(e,t,s),!n.updateAttachment)throw new B(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(t,i,r)}async function MAe(e,t,i){const{applyEdits:r}=await D(()=>import("./editingSupport-CnffEq4u.js"),[]),s=await e.load();let n=i;return s.type==="feature"&&s.infoFor3D&&t.deleteFeatures!=null&&s.globalIdField!=null&&(n={...n,globalIdToObjectId:await YAe(s,t.deleteFeatures,s.globalIdField)}),r(s,s.source,t,i)}async function AAe(e,t,i){const{uploadAssets:r}=await D(()=>import("./editingSupport-CnffEq4u.js"),[]),s=await e.load();return r(s,s.source,t,i)}async function IAe(e,t,i,r){const s=await fd(e);if(await GD(e,t,r),!s.deleteAttachments)throw new B(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(t,i)}async function CAe(e,t,i){const r=(await e.load({signal:t==null?void 0:t.signal})).source;if(!r.fetchRecomputedExtents)throw new B(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function OAe(e,t,i,r){var w,E,T,$;t=TAe.from(t),await e.load();const s=e.source,n=e.capabilities;if(!((w=n==null?void 0:n.data)!=null&&w.supportsAttachment))throw new B(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:l,globalIds:d,num:h,size:y,start:v,where:b}=t;if(!((E=n==null?void 0:n.operations)!=null&&E.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(d==null?void 0:d.length)>0||(y==null?void 0:y.length)>0||h||v||b))throw new B(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(l!=null&&l.length||d!=null&&d.length||b))throw new B(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!s.queryAttachments)throw new B(r,"Layer source does not support queryAttachments capability",t);return!((T=n==null?void 0:n.attachment)!=null&&T.supportsOrderByFields)&&(($=t.orderByFields)!=null&&$.length)&&((t=t.clone()).orderByFields=null),s.queryAttachments(t)}async function LAe(e,t,i,r){const s=await fd(e);if(!s.queryObjectIds)throw new B(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(su.from(t)??e.createQuery(),i)}async function RAe(e,t,i,r){const s=await fd(e);if(!s.queryFeatureCount)throw new B(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(su.from(t)??e.createQuery(),i)}async function PAe(e,t,i,r){const s=await fd(e);if(!s.queryExtent)throw new B(r,"Layer source does not support queryExtent capability");return s.queryExtent(su.from(t)??e.createQuery(),i)}async function kAe(e,t,i,r){const s=await fd(e);if(!s.queryRelatedFeatures)throw new B(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(UD.from(t),i)}async function DAe(e,t,i,r){const s=await fd(e);if(!s.queryRelatedFeaturesCount)throw new B(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(UD.from(t),i)}async function NAe(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(r!=null&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await Lk(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function FAe(e){var o,l;const t=new su,i=(o=e.capabilities)==null?void 0:o.data,r=(l=e.capabilities)==null?void 0:l.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:s,timeExtent:n}=e;return t.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function UK(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function GK(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function VAe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function zAe(e,t,i,r){var d,h;const s=i==null?void 0:i.feature,n=!!((d=e.subtypes)!=null&&d.length);if(n&&!(i!=null&&i.excludeImpliedDomains)){const y=UAe(e,t);if(y)return y}const o=n&&jAe(e,s);if(o){const y=(h=o==null?void 0:o.domains)==null?void 0:h[t];return(y==null?void 0:y.type)==="inherited"?r:y}const l=HK(e.types,e.typeIdField,s);if(l){const y=l.domains&&l.domains[t];if(y&&(y==null?void 0:y.type)!=="inherited")return y}if(r)return r;if(!(i!=null&&i.excludeImpliedDomains)){const y=GAe(e,t);if(y)return y}return null}function jAe(e,t){const{subtypes:i,subtypeField:r}=e;if(!(t!=null&&t.attributes)||!(i!=null&&i.length)||!r)return null;const s=t.attributes[r];return s==null?null:i.find(n=>n.code===s)}function UAe(e,t){var o,l;const{fieldsIndex:i,subtypeField:r}=e,{name:s,type:n}=i.get(t)??{};if(!s)return null;if((r&&((o=i.get(r))==null?void 0:o.name))===s&&((l=e.subtypes)!=null&&l.length)){const d=e.subtypes.map(h=>new ip({code:qK(h.code,n),name:h.name}));if(d!=null&&d.length)return new y$({codedValues:d})}return null}function GAe(e,t){var n,o;const{fieldsIndex:i}=e,{name:r,type:s}=i.get(t)??{};if(!r)return null;if(("typeIdField"in e?(n=i.get(e.typeIdField))==null?void 0:n.name:null)===r&&"types"in e&&((o=e.types)!=null&&o.length)){const l=e.types.map(d=>new ip({code:qK(d.id,s),name:d.name}));return new y$({codedValues:l})}return null}function qK(e,t){return t?KZ({type:t})&&typeof e=="number"?`${e}`:T0e({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function fd(e){return(await e.load()).source}async function DUe(e,t){if(!Be)return;const i=Be.findCredential(e);if(i)return i.userId;let r;try{const s=await ok(e,t);s&&(r=await Be.checkSignInStatus(`${s}/sharing`))}catch{}return r?r.userId:null}async function BK(e,t){if(!Be||Be.findCredential(e))return;let i;try{const r=await ok(e,t);r&&(i=await Be.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=t!=null?t.signal:null;await Be.getCredential(e,{signal:r})}catch{}}async function qAe(e,t,i){var s;const r=(s=e.parsedUrl)==null?void 0:s.path;r&&e.authenticationTriggerEvent===t&&await BK(r,i)}async function NUe(e){var i;const t=(i=e.parsedUrl)==null?void 0:i.path;t&&BAe(e)&&await BK(t)}function BAe(e){return HAe(e)&&("serviceDefinitionExpression"in e&&fT(e.serviceDefinitionExpression)||"definitionExpression"in e&&fT(e.definitionExpression))}function HAe(e){var t;return!(!NH(e)||!((t=e.capabilities)!=null&&t.query.supportsCurrentUser))}function fT(e){return!!(e!=null&&e.toLowerCase().includes("current_user"))}function WAe(e){return!G2(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const ZA=By({types:jY});function qD(e,t){var i;if(e.defaultSymbol)return(i=e.types)!=null&&i.length?new jD({defaultSymbol:ZA(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(r=>({id:r.id,symbol:ZA(r.symbol,r,t)}))}):new La({symbol:ZA(e.defaultSymbol,e,t)})}function ZAe(e){var r,s,n;let t=(r=e.sourceJSON)==null?void 0:r.cacheMaxAge;if(!t)return!1;const i=(n=(s=e.editingInfo)==null?void 0:s.lastEditDate)==null?void 0:n.getTime();return i==null||(t*=1e3,Date.now()-i<t)}async function YAe(e,t,i){if(t==null)return null;const r=[],{objectIdField:s}=e;if(t.forEach(h=>{let y=null;if("attributes"in h){const{attributes:v}=h;y={globalId:v[i],objectId:v[s]!=null&&v[s]!==-1?v[s]:null}}else y={globalId:h.globalId,objectId:h.objectId!=null&&h.objectId!==-1?h.objectId:null};y.globalId!=null&&(y.objectId!=null&&y.objectId!==-1||r.push(y.globalId))}),r.length===0)return null;const n=e.createQuery();n.where=r.map(h=>`${i}='${h}'`).join(" OR "),n.returnGeometry=!1,n.outFields=[s,i],n.cacheHint=!1;const o=await vle(g3e(e,n));if(!o.ok)return null;const l=new Map,d=o.value.features;for(const h of d){const y=h.attributes[i],v=h.attributes[s];y!=null&&v!=null&&v!==-1&&l.set(hTe(y),v)}return l}function HK(e,t,i){if(!t||!i||!e)return null;const r=i.getAttribute(t);return r==null?null:e.find(s=>{const{id:n}=s;return n!=null&&n.toString()===r.toString()})??null}function G2(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||JAe(e)}function JAe(e){var t,i;return!!((i=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&i.toLowerCase().split(",").map(r=>r.trim()).includes("map"))}function XAe(e,t,i){const r=t==null?void 0:t.queryAttributeBins;if(!r)throw new B(i,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new B(i,"Layer source does not support auto-interval binning");if(e.binParameters.normalizationType&&(!r.supportsNormalization||!HU(e.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new B(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new B(i,"Layer source does not support date binning");if(e.binParameters.snapToData&&!r.supportsSnapToData)throw new B(i,"Layer source does not support snapToData binning");if(e.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new B(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new B(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new B(i,"Layer source does not support fixed-interval binning");if(e.binParameters.normalizationType&&(!r.supportsNormalization||!HU(e.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new B(i,"Layer source does not support normalization binning")}if(e.binParameters.stackBy&&!r.supportsStackBy)throw new B(i,"Layer source does not support stackBy binning");if(e.binParameters.splitBy&&!r.supportsSplitBy)throw new B(i,"Layer source does not support splitBy binning");if(e.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new B(i,"Layer source does not support firstDayOfWeek binning");const s=r==null?void 0:r.supportedStatistics;if(e.outStatistics&&s){const n=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of e.outStatistics){const l=n.get(o);if(l&&!s[l])throw new B(i,`Layer source does not support ${o} statistic type`)}}}function HU(e,t){return e!=null&&!!(t!=null&&t[jK.toJSON(e)])}let Om=class extends ut.ClonableMixin(se){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};c([p({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Om.prototype,"shapeAreaField",void 0),c([p({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Om.prototype,"shapeLengthField",void 0),c([p({type:String,json:{read:e=>Jle.read(e)||Xle.read(e)}})],Om.prototype,"units",void 0),Om=c([I("esri.layers.support.GeometryFieldsInfo")],Om);const QAe=Om;var wR;let Lm=wR=class extends se{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new _e}clone(){return new wR({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};c([p({type:String,json:{write:{isRequired:!0}}})],Lm.prototype,"floorField",void 0),c([p({json:{read:!1,write:!1}})],Lm.prototype,"viewAllMode",void 0),c([p({json:{read:!1,write:!1}})],Lm.prototype,"viewAllLevelIds",void 0),Lm=wR=c([I("esri.layers.support.LayerFloorInfo")],Lm);const KAe=Lm,WU=new ot({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),ZU=new ot({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let dn=class extends ut.ClonableMixin(se){constructor(t){super(t),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};c([p({json:{read:WU.read,write:WU.write}})],dn.prototype,"cardinality",void 0),c([p({json:{name:"catalogID"}})],dn.prototype,"catalogId",void 0),c([p({json:{read:!0,write:!0}})],dn.prototype,"composite",void 0),c([p({json:{read:!0,write:!0}})],dn.prototype,"id",void 0),c([p({json:{read:!0,write:!0}})],dn.prototype,"keyField",void 0),c([p({json:{read:!0,write:!0}})],dn.prototype,"keyFieldInRelationshipTable",void 0),c([p({json:{read:!0,write:!0}})],dn.prototype,"name",void 0),c([p({json:{read:!0,write:!0}})],dn.prototype,"relatedTableId",void 0),c([p({json:{read:!0,write:!0}})],dn.prototype,"relationshipTableId",void 0),c([p({json:{read:ZU.read,write:ZU.write}})],dn.prototype,"role",void 0),dn=c([I("esri.layers.support.Relationship")],dn);const eIe=dn,tIe=[["binary","application/octet-stream","bin",""]];function zUe(e,t){return JK(t.name,(e==null?void 0:e.supportedFormats)??[])!=null}function jUe(e,t){if(!e)return!1;const i=iIe(t,e.supportedFormats??[]);return i!=null&&e.editFormats.includes(i)}function WK(e,t){return HD(oIe(e,t))}function ZK(e,t){return HD(JK(e,t))}function UUe(e,t){return XK(nIe(e,t))}function iIe(e,t){return ZK(e.name,t)??WK(e.type,t)}function V$(e,t,i){return WK(e,i)??ZK(t,i)}function YK({supportedFormats:e}){return V$("model/gltf-binary","glb",e)}function GUe(e){const t=YK(e);return t!=null&&e.editFormats.includes(t)}function rIe({supportedFormats:e}){return V$("model/gltf+json","gltf",e)}function sIe(e){if(!e)return null;const t=YK(e),i=rIe(e);let r=null;for(const s of e.queryFormats){if(s===t)return s;s===i&&(r=s)}return r}function qUe({supportedFormats:e}){return V$("application/esri3do-SR_world","wld",e)}function BUe({supportedFormats:e}){return V$("application/esri3do-SR_prj","prj",e)}function BD(e){return[...tIe,...e]}function nIe(e,t){return BD(t).find(i=>HD(i)===e)}function oIe(e,t){const i=e.toLowerCase();return BD(t).find(r=>XK(r)===i)}function JK(e,t){const i=e.toLowerCase();return BD(t).find(r=>aIe(r).some(s=>i.endsWith(s)))}function HD(e){return e==null?void 0:e[0]}function XK(e){return e==null?void 0:e[1].toLowerCase()}function aIe(e){return(e==null?void 0:e[2].split(",").map(t=>t.toLowerCase()))??[]}function HUe(e){var t;return(t=e.tables)==null?void 0:t.find(i=>i.role==="assetMaps")}function xe(e,t,i){return!!QK(e,t,i)}function Yv(e,t,i){return QK(e,t,i)}function QK(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}const lIe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function uIe(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function Y_(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(s=>s.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}function cIe(e){var i;const t=(i=e==null?void 0:e.supportedStatisticTypes)==null?void 0:i.map(r=>r.toLowerCase());return{count:!!(t!=null&&t.includes("count")),sum:!!(t!=null&&t.includes("sum")),min:!!(t!=null&&t.includes("min")),max:!!(t!=null&&t.includes("max")),avg:!!(t!=null&&t.includes("avg")),var:!!(t!=null&&t.includes("var")),stddev:!!(t!=null&&t.includes("stddev")),percentileContinuous:!!(t!=null&&t.includes("percentile_continuous")),percentileDiscrete:!!(t!=null&&t.includes("percentile_discrete")),envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function dIe(e){var i;const t=(i=e==null?void 0:e.supportedNormalizationTypes)==null?void 0:i.map(r=>r.toLowerCase());return{field:!!(t!=null&&t.includes("field")),log:!!(t!=null&&t.includes("log")),naturalLog:!!(t!=null&&t.includes("naturallog")),percentOfTotal:!!(t!=null&&t.includes("percentoftotal")),squareRoot:!!(t!=null&&t.includes("squareroot"))}}function KK(e,t){return{analytics:hIe(e),attachment:pIe(e),data:fIe(e),metadata:mIe(e),operations:yIe(e.capabilities,e,t),query:gIe(e,t),queryAttributeBins:_Ie(e),queryRelated:vIe(e),queryTopFeatures:bIe(e),editing:wIe(e)}}function hIe(e){return{supportsCacheHint:Y_(e.advancedQueryCapabilities,"queryAnalytics")}}function pIe(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Y_(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:xe(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:xe(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const s=lIe[r.name];s&&(i[s]=!!r.isEnabled)}),i}function fIe(e){return{isVersioned:xe(e,"isDataVersioned",!1),isBranchVersioned:xe(e,"isDataBranchVersioned",!1),supportsAttachment:xe(e,"hasAttachments",!1),supportsM:xe(e,"hasM",!1),supportsZ:xe(e,"hasZ",!1)}}function mIe(e){return{supportsAdvancedFieldProperties:xe(e,"supportsFieldDescriptionProperty",!1)}}function yIe(e,t,i){const r=e?e.toLowerCase().split(",").map(b=>b.trim()):[],s=i?Wy(i):null,n=r.includes(s!=null&&s.serverType==="MapServer"?"data":"query"),o=r.includes("editing")&&!t.datesInUnknownTimezone;let l=o&&r.includes("create"),d=o&&r.includes("delete"),h=o&&r.includes("update");const y=r.includes("changetracking"),v=t.advancedQueryCapabilities;return o&&!(l||d||h)&&(l=d=h=!0),{supportsCalculate:xe(t,"supportsCalculate",!1),supportsTruncate:xe(t,"supportsTruncate",!1),supportsValidateSql:xe(t,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:d,supportsEditing:o,supportsChangeTracking:y,supportsQuery:n,supportsQueryAnalytics:xe(v,"supportsQueryAnalytic",!1),supportsQueryAttachments:xe(v,"supportsQueryAttachments",!1),supportsQueryBins:xe(v,"supportsQueryBins",!1),supportsQueryTopFeatures:xe(v,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:xe(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:h,supportsExceedsLimitStatistics:xe(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:xe(t,"supportsAsyncConvert3D",!1)}}function gIe(e,t){const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,n=e.currentVersion,o=t==null?void 0:t.includes("MapServer"),l=!o||n>=Y("mapserver-pbf-version-support"),d=yE(t),h=new Set((e.supportedQueryFormats??"").split(",").map(y=>y.toLowerCase().trim()));return{maxRecordCount:Yv(e,"maxRecordCount",void 0),maxRecordCountFactor:Yv(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:Yv(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:uIe(i),supportsCacheHint:xe(i,"supportsQueryWithCacheHint",!1)||Y_(i,"query"),supportsCentroid:xe(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:d,supportsCurrentUser:xe(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:xe(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:xe(i,"supportsDisjointSpatialRel",!1),supportsDistance:xe(i,"supportsQueryWithDistance",!1),supportsDistinct:xe(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:xe(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:l&&h.has("pbf"),supportsFullTextSearch:xe(i,"supportsFullTextSearch",!1),supportsGeometryProperties:xe(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:xe(i,"supportsHavingClause",!1),supportsHistoricMoment:xe(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:xe(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:xe(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:xe(i,"supportsPagination",!1),supportsPercentileStatistics:xe(i,"supportsPercentileStatistics",!1),supportsQuantization:xe(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:xe(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:xe(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:xe(r,"allowOthersToQuery",!0),supportsQueryGeometry:xe(e,"supportsReturningQueryGeometry",!1),supportsResultType:xe(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!sIe(e.infoFor3D),supportsSpatialAggregationStatistics:xe(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:xe(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:xe(e,"useStandardizedQueries",!1),supportsStatistics:xe(i,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:xe(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:xe(i,"supportsTrueCurve",!1),tileMaxRecordCount:Yv(e,"tileMaxRecordCount",void 0)}}function vIe(e){const t=e.advancedQueryCapabilities,i=xe(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:xe(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:Y_(t,"queryRelated")}}function bIe(e){return{supportsCacheHint:Y_(e.advancedQueryCapabilities,"queryTopFilter")}}function _Ie(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:xe(t,"supportsDateBin",!1),supportsFixedInterval:xe(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:xe(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:xe(t,"supportsFixedBoundariesBin",!1),supportsStackBy:xe(t,"supportsStackBy",!1),supportsSplitBy:xe(t,"supportsSplitBy",!1),supportsSnapToData:xe(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:xe(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:xe(t,"supportsFirstDayOfWeek",!1),supportsNormalization:xe(t,"supportsNormalization",!1),supportedStatistics:cIe(t),supportedNormalizationTypes:dIe(t)}}function wIe(e){const t=e.ownershipBasedAccessControlForFeatures,i=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:xe(e,"allowGeometryUpdates",!0),supportsGlobalId:xe(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:xe(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:xe(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:xe(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:xe(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:xe(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:xe(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:xe(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:xe(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:xe(i,"supportsAsyncApplyEdits",!1),zDefault:Yv(e,"zDefault",void 0)}}function WUe(e){var t;return{operations:{supportsAppend:xe(e,"supportsAppend",!1),supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1,supportsExportClip:xe(e,"supportsExportClip",!1),supportsExportFrameset:xe(e,"supportsExportFrameset",!1),supportsMensuration:xe(e,"supportsMensuration",!1),supportsUpdate:xe(e,"supportsUpdate",!1)}}}let Dl=class extends ut.ClonableMixin(se){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const i={};for(const r of Object.keys(t))i[r]=g$(t[r]);return i}writeDomains(t,i){var s;if(!t)return;const r={};for(const n of Object.keys(t))t[n]&&(r[n]=(s=t[n])==null?void 0:s.toJSON());i.domains=r}};c([p({type:Number,json:{write:!0}})],Dl.prototype,"code",void 0),c([p({type:Object,json:{write:!0}})],Dl.prototype,"defaultValues",void 0),c([p({json:{write:!0}})],Dl.prototype,"domains",void 0),c([pe("domains")],Dl.prototype,"readDomains",null),c([be("domains")],Dl.prototype,"writeDomains",null),c([p({type:String,json:{write:!0}})],Dl.prototype,"name",void 0),Dl=c([I("esri.layers.support.Subtype")],Dl);const SIe=Dl,EIe=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(_e.ofType(Aa)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=tt.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}getFieldDomain(){throw new Error("Not implemented")}getField(i){return this.fieldsIndex.get(i)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:s,operations:n,editing:o}=i;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||n.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(fT(this.serviceDefinitionExpression)||fT(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(ZAe(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const r=this.editFieldsInfo;return(r!=null&&r.creatorField||r!=null&&r.editorField)&&(i!=null&&i.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(i,r){return KK(r,this.url)}readEditingInfo(i,r){const{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=q(i),{operations:s,editing:n}=r;return G2(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=n.supportsDeleteByOthers=n.supportsGeometryUpdate=n.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=n.supportsGeometryUpdate=!0),r)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(i,r){return UK(r)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||G2(this))return!1;const{operations:r,editing:s}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:r,editing:s}=i;return G2(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(i,r){return r.type==="Table"}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readMinScale(i,r){return r.effectiveMinScale||i||0}readObjectIdFieldFromService(i,r){return GK(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){if(i==null)return void this._set("url",i);const r=Fae({layer:this,url:i,nonStandardUrlAllowed:!0,logger:ae.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,s,n){Vae(this,i,null,r,n)}readVersion(i,r){return VAe(r)}};return c([p({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),c([p({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),c([p({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),c([pe("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),c([p(CE("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),c([p({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),c([p({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),c([p({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),c([p({readOnly:!0,type:y3e})],t.prototype,"editFieldsInfo",void 0),c([p({readOnly:!0})],t.prototype,"editingInfo",void 0),c([pe("editingInfo")],t.prototype,"readEditingInfo",null),c([p({readOnly:!0})],t.prototype,"effectiveCapabilities",null),c([p()],t.prototype,"effectiveEditingEnabled",null),c([p((()=>{const i=q(c3e),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],t.prototype,"elevationInfo",void 0),c([p()],t.prototype,"fieldsIndex",void 0),c([p({type:KAe,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:ci}}})],t.prototype,"floorInfo",void 0),c([p({type:Jt,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),c([p()],t.prototype,"gdbVersion",void 0),c([p({readOnly:!0,type:QAe,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),c([p({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:_R.read}}}})],t.prototype,"geometryType",void 0),c([p({type:String})],t.prototype,"globalIdField",void 0),c([pe("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),c([p({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),c([p({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),c([p({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),c([p({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),c([p({readOnly:!0,type:k_})],t.prototype,"heightModelInfo",void 0),c([p({type:Date})],t.prototype,"historicMoment",void 0),c([p({type:_e.ofType(Aa),readOnly:!0})],t.prototype,"indexes",void 0),c([p({readOnly:!0})],t.prototype,"isTable",void 0),c([pe("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),c([p({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),c([p(f3e)],t.prototype,"maxScale",void 0),c([pe("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),c([p(p3e)],t.prototype,"minScale",void 0),c([pe("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),c([p({type:String})],t.prototype,"objectIdField",void 0),c([pe("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),c([p(CE("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),c([p({type:[eIe],readOnly:!0})],t.prototype,"relationships",void 0),c([p({type:Boolean})],t.prototype,"returnM",void 0),c([p({type:Boolean})],t.prototype,"returnZ",void 0),c([p({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),c([p({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),c([pe("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),c([p({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),c([p()],t.prototype,"sourceJSON",void 0),c([p({type:tt,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),c([p({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),c([p({type:[SIe],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),c([p({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),c([p(l3e)],t.prototype,"url",null),c([be("url")],t.prototype,"writeUrl",null),c([p({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),c([pe("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=c([I("esri.layers.mixins.FeatureLayerBase")],t),t};let Rm=class extends ut.ClonableMixin(se){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};c([p({type:String,json:{write:!0}})],Rm.prototype,"expression",void 0),c([p({type:String,json:{write:!0}})],Rm.prototype,"title",void 0),c([p({type:String,json:{write:!0}})],Rm.prototype,"returnType",void 0),Rm=c([I("esri.layers.support.ExpressionInfo")],Rm);const WD=Rm;var SR;let Nl=SR=class extends se{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new SR({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:q(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};c([p({type:Boolean,json:{write:!0}})],Nl.prototype,"isAutoGenerated",void 0),c([p({type:String,json:{write:!0}})],Nl.prototype,"name",void 0),c([p({type:String,json:{write:!0}})],Nl.prototype,"alias",void 0),c([p({type:String,json:{write:!0}})],Nl.prototype,"onStatisticField",void 0),c([p({type:WD,json:{write:!0}})],Nl.prototype,"onStatisticExpression",void 0),c([p({type:String,json:{write:!0}})],Nl.prototype,"statisticType",void 0),Nl=SR=c([I("esri.layers.support.AggregateField")],Nl);const sd=Nl;let Bc=class extends se{constructor(){super(...arguments),this.type=null}};c([p({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Bc.prototype,"type",void 0),Bc=c([I("esri.layers.support.FeatureReduction")],Bc);const ZD="__begin__",YD="__end__",TIe=new RegExp(ZD,"ig"),$Ie=new RegExp(YD,"ig"),YU=new RegExp("^"+ZD,"i"),JU=new RegExp(YD+"$","i"),mT='"',xIe=mT+" + ",MIe=" + "+mT;function AIe(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function IIe(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function JD(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=AIe(e.labelExpression),t.type="conventional"),t}function CIe(e){const t=JD(e);switch(t.type){case"conventional":return ER(t.expression);case"arcade":return t.expression}return null}function OIe(e){const t=JD(e);switch(t.type){case"conventional":return RIe(t.expression);case"arcade":return eee(t.expression)}return null}function ER(e){let t;return e?(t=f_(e,i=>ZD+'$feature["'+i+'"]'+YD),t=YU.test(t)?t.replace(YU,""):mT+t,t=JU.test(t)?t.replace(JU,""):t+mT,t=t.replaceAll(TIe,xIe).replaceAll($Ie,MIe)):t='""',t}const LIe=/^\s*\{([^}]+)\}\s*$/i;function RIe(e){const t=e==null?void 0:e.match(LIe);return(t==null?void 0:t[1].trim())||null}const PIe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,kIe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,DIe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function eee(e){if(!e)return null;let t=PIe.exec(e)||kIe.exec(e);return t?t[1]||t[3]:(t=DIe.exec(e),t?t[2]:null)}var TR;let vc=TR=class extends se{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?ER(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=ER(this.value)),e!=null&&(t[i]=e)}clone(){return new TR({expression:this.expression,title:this.title,value:this.value})}};c([p({type:String,json:{write:{writerEnsuresNonNull:!0}}})],vc.prototype,"expression",void 0),c([pe("expression",["expression","value"])],vc.prototype,"readExpression",null),c([be("expression")],vc.prototype,"writeExpression",null),c([p({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],vc.prototype,"title",void 0),c([p({json:{read:!1,write:!1}})],vc.prototype,"value",void 0),vc=TR=c([I("esri.layers.support.LabelExpressionInfo")],vc);const tee=vc;var $R;const mS=new ot({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function yS(e,t,i){return{enabled:!oC(i==null?void 0:i.layer)}}function iee(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function NIe(e){return(e==null?void 0:e.type)==="map-image"}function ree(e){var t,i;return!!NIe(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function FIe(e){return iee(e)||ree(e==null?void 0:e.layer)}let Ai=$R=class extends se{static evaluateWhere(e,t){const i=(r,s,n)=>{switch(s){case"=":return r==n;case"<>":return r!=n;case">":return r>n;case">=":return r>=n;case"<":return r<n;case"<=":return r<=n}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const s=i(t[r[0]],r[1],r[2]),n=r[3],o=i(t[r[4]],r[5],r[6]);switch(n){case"AND":return s&&o;case"OR":return s||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=rAe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=IIe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=eee(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&iee(r))e=new tee({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(r);s.expression&&(t[i]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return JD(this)}getLabelExpressionArcade(){return CIe(this)}getLabelExpressionSingleField(){return OIe(this)}hash(){return JSON.stringify(this)}clone(){return new $R({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:q(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:q(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};c([p({type:String,json:{write:!0}})],Ai.prototype,"name",void 0),c([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:yS}}}}})],Ai.prototype,"allowOverrun",void 0),c([p({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:yS}}}}})],Ai.prototype,"deconflictionStrategy",void 0),c([p({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&ree(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Ai.prototype,"labelExpression",void 0),c([pe("labelExpression")],Ai.prototype,"readLabelExpression",null),c([be("labelExpression")],Ai.prototype,"writeLabelExpression",null),c([p({type:tee,json:{write:{overridePolicy:(e,t,i)=>FIe(i)?{allowNull:!0}:{enabled:!1}}}})],Ai.prototype,"labelExpressionInfo",void 0),c([be("labelExpressionInfo")],Ai.prototype,"writeLabelExpressionInfo",null),c([p({type:mS.apiValues,json:{type:mS.jsonValues,read:mS.read,write:mS.write}})],Ai.prototype,"labelPlacement",void 0),c([p({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Ai.prototype,"labelPosition",void 0),c([p({type:Number})],Ai.prototype,"maxScale",void 0),c([be("maxScale")],Ai.prototype,"writeMaxScale",null),c([p({type:Number})],Ai.prototype,"minScale",void 0),c([be("minScale")],Ai.prototype,"writeMinScale",null),c([p({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:yS}}}}})],Ai.prototype,"repeatLabel",void 0),c([p({type:Number,cast:ft,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:yS}}}}})],Ai.prototype,"repeatLabelDistance",void 0),c([p({types:Vve,json:{origins:{"web-scene":{types:zve,write:DU,default:null}},write:DU,default:null}})],Ai.prototype,"symbol",void 0),c([p({type:Boolean,json:{write:!0}})],Ai.prototype,"useCodedValues",void 0),c([p({type:String,json:{write:!0}})],Ai.prototype,"where",void 0),Ai=$R=c([I("esri.layers.support.LabelClass")],Ai);const J_=Ai;var xR;let bc=xR=class extends se{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new xR({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};c([p({type:String,json:{write:!0}})],bc.prototype,"description",void 0),c([p({type:String,json:{write:!0}})],bc.prototype,"label",void 0),c([p({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],bc.prototype,"minValue",void 0),c([p({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],bc.prototype,"maxValue",void 0),c([p(ND)],bc.prototype,"symbol",void 0),bc=xR=c([I("esri.renderers.support.ClassBreakInfo")],bc);const yT=bc;var MR;const see="log",q2="percent-of-total",B2="field",gS=new ot({esriNormalizeByLog:see,esriNormalizeByPercentOfTotal:q2,esriNormalizeByField:B2}),VIe=Zi(yT);let qi=MR=class extends ug(uu){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(s=>{const n=new yT;return n.read(s,i),n.minValue==null&&(n.minValue=r),n.maxValue==null&&(n.maxValue=n.minValue),r=n.maxValue,n})}writeClassBreakInfos(e,t,i,r){const s=e.map(n=>n.write({},r));this._areClassBreaksConsecutive()&&s.forEach(n=>delete n.classMinValue),t[i]=s}castField(e){return e==null?e:typeof e=="function"?(ae.getLogger(this).error(".field: field must be a string value"),null):E_(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&B2||i&&q2||null,t&&i&&ae.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==B2&&e!==q2||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new yT({minValue:e,maxValue:t,symbol:UY(i)}):VIe(q(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&ae.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(i={...i,arcade:await Va()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void ae.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const s=await Va(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new MR({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:q(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:q(this.visualVariables),legendOptions:q(this.legendOptions),authoringInfo:q(this.authoringInfo)})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.symbols.map(r=>r.collectRequiredFields(e,t)),is(e,t,this.valueExpression)];_s(e,t,this.field),_s(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:o}=t??{},{valueExpression:l}=this;let d=this._compiledValueExpression.valueExpression===l?this._compiledValueExpression.compiledFunction:null;const h=n.arcadeUtils;if(!d){const v=h.createSyntaxTree(l);d=h.createFunction(v),this._compiledValueExpression.compiledFunction=d}this._compiledValueExpression.valueExpression=l;const y=h.executeFunction(d,h.createExecContext(e,h.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),o));return this._getBreakIndexfromInfos(y)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let s=parseFloat(i[t]);if(r){const n=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===see)s=Math.log(s)*Math.LOG10E;else if(r!==q2||n==null||isNaN(n)){if(r===B2&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};c([p(FD)],qi.prototype,"backgroundFillSymbol",void 0),c([p({type:[yT],json:{write:{isRequired:!0}}})],qi.prototype,"classBreakInfos",void 0),c([pe("classBreakInfos")],qi.prototype,"readClassBreakInfos",null),c([be("classBreakInfos")],qi.prototype,"writeClassBreakInfos",null),c([p({type:String,json:{write:!0}})],qi.prototype,"defaultLabel",void 0),c([p(F$)],qi.prototype,"defaultSymbol",void 0),c([p({type:String,json:{write:!0}})],qi.prototype,"field",void 0),c([mt("field")],qi.prototype,"castField",null),c([p({type:Boolean})],qi.prototype,"isMaxInclusive",void 0),c([p({type:VD,json:{write:!0}})],qi.prototype,"legendOptions",void 0),c([p({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],qi.prototype,"minValue",null),c([p({type:String,json:{write:!0}})],qi.prototype,"normalizationField",void 0),c([p({type:Number,json:{write:!0}})],qi.prototype,"normalizationTotal",void 0),c([p({type:gS.apiValues,value:null,json:{type:gS.jsonValues,read:gS.read,write:gS.write}})],qi.prototype,"normalizationType",null),c([Pe({classBreaks:"class-breaks"})],qi.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],qi.prototype,"valueExpression",void 0),c([p({type:String,json:{write:!0}})],qi.prototype,"valueExpressionTitle",void 0),qi=MR=c([I("esri.renderers.ClassBreaksRenderer")],qi);const nee=qi,AR=-3,zIe=AR-1;var ql;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(ql||(ql={}));let jIe=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new np,this._users=new np}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,i){const r=this._db.get(t.id+i);return(r==null?void 0:r.size)??0}put(t,i,r,s,n){i=t.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,o.size,ql.ALL)),s>this._maxSize)return void this._notifyRemove(i,r,s,ql.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn(`Refusing to cache entry with size ${s} for key ${i}`),void this._notifyRemove(i,r,0,ql.ALL);const l=1+Math.max(n,zIe)-AR;this._db.set(i,new UIe(r,s,l)),this._size+=s,t.size+=s,this._checkSize()}updateSize(t,i,r,s){i=t.id+i;const n=this._db.get(i);if(n&&n.entry===r){for(this._size-=n.size,t.size-=n.size;s>this._maxSize;){const o=this._notifyRemove(i,r,s,ql.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);s=o}n.size=s,this._size+=s,t.size+=s,this._checkSize()}}pop(t,i){i=t.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,t.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(t,i){i=t.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(t,i){const r=this._db.get(t.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,l)=>{const d=o.lifetime;r[d]=(r[d]||0)+o.size,this._users.forAll(h=>{const{id:y,name:v}=h;if(l.startsWith(y)){const b=i[v]||0;i[v]=b+o.size}})});const s={};this._users.forAll(o=>{const l=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const d=i[l]||0;i[l]=d,s[l]=Math.round(100*o.hitRate)+"%"}else s[l]="0%"});const n=Object.keys(i);n.sort((o,l)=>i[l]-i[o]),n.forEach(o=>t[o]=Math.round(i[o]/2**20)+"MB / "+s[o]);for(let o=r.length-1;o>=0;--o){const l=r[o];l&&(t["Priority "+(o+AR-1)]=Math.round(l/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const i=t.id;this._db.forEach((r,s)=>{s.startsWith(i)&&(this._size-=r.size,this._db.delete(s),this._notifyRemove(s,r.entry,r.size,ql.ALL))}),t.size=0}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,t.size,ql.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r,s){let n;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const l=o[1](i,s,r);return typeof l=="number"&&(n=l),!0}return!1}),n}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const i=t??this;if(i.maxSize<0||i.size<=i.maxSize)return;const r=t==null?void 0:t.id;let s=!0;for(;s;){s=!1;for(const[n,o]of this._db)if(o.lifetime===0&&(!r||n.startsWith(r))){if(this._purgeItem(n,o,t),i.size<=.9*i.maxSize)return;s||(s=this._db.has(n))}}for(const[n,o]of this._db)if((!r||n.startsWith(r))&&(this._purgeItem(n,o,t),i.size<=.9*i.maxSize))return}_purgeItem(t,i,r=this._users.find(s=>t.startsWith(s.id))){if(this._db.delete(t),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const s=this._notifyRemove(t,i.entry,i.size,ql.SOME);s!=null&&s>0&&(this._size+=s,r&&(r.size+=s),i.lives=i.lifetime,i.size=s,this._db.set(t,i))}else--i.lives,this._db.set(t,i)}},UIe=class{constructor(t,i,r){this.entry=t,this.size=i,this.lifetime=r,this.lives=r}},oee=class{constructor(t,i){this._storage=new jIe,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,i,r=1){this._storage.put(this,t,i,r,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}};function GIe(e){return"timeZone"in e}function qIe(e){return"timeZone"in e}function BIe(e){return"dateFieldsTimeZone"in e}const HIe=new Map;let aee=class H2{static fromJSON(t){return new H2(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new H2(t.fields??[],QU(t))}static fromLayerJSON(t){return new H2(t.fields??[],QU(t))}constructor(t=[],i){var s;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const n of this.fields){const o=n==null?void 0:n.name,l=XU(o);if(o&&l){const d=Jh(o);this._fieldsMap.set(o,n),this._fieldsMap.set(d,n),this._normalizedFieldsMap.set(l,n),r.push(`${d}:${n.type}:${(s=this._timeZoneByFieldName)==null?void 0:s.get(o)}`),Pk(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):QZ(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),zV(n)||jV(n)||(n.editable=n.editable==null||!!n.editable,n.nullable=n.nullable==null||!!n.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)zV(t)||jV(t)||t.nullable||f0e(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let i=this._fieldsMap.get(t);return i||(i=this._fieldsMap.get(Jh(t))??this._normalizedFieldsMap.get(XU(t)),i&&this._fieldsMap.set(t,i),i)}getTimeZone(t){const i=this.get(t&&typeof t!="string"?t.name:t);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(ae.getLogger("esri.layers.support.FieldsIndex").errorOnce(new B("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),Da):lee.has(i.type)?Ep:null:null}getLuxonTimeZone(t){const i=this.getTimeZone(t);return i?i===Ep?zo.instance:i===Da?Sr.utcInstance:S_(HIe,i,()=>Gs.create(i)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return eY(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var i;return((i=this.get(t))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(t=>se.isSerializable(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Jh(e){return e.trim().toLowerCase()}function XU(e){var t;return((t=e0e(e))==null?void 0:t.toLowerCase())??""}const lee=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function QU(e){const t=new Map;if(!e.fields)return t;const i=e.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:s}=e,n=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",l=BIe(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?qS(e.dateFieldsTimeReference):null,d=s?GIe(s)?s.timeZone??l:s.dateFieldsTimeReference?qS(s.dateFieldsTimeReference):l??Da:null,h=r?qIe(r)?r.timeZone??l:r.timeReference?qS(r.timeReference):l:null,y=new Map([[Jh((s==null?void 0:s.creationDateField)??""),d],[Jh((s==null?void 0:s.editDateField)??""),d],[Jh(n),h],[Jh(o),h]]);for(const{name:v,type:b}of e.fields)if(lee.has(b))t.set(v,Ep);else if(b!=="date"&&b!=="esriFieldTypeDate")t.set(v,null);else if(i)t.set(v,Ep);else{const w=y.get(Jh(v??""))??l;t.set(v,w)}return t}var KU,e9,t9,i9,r9,s9,n9,o9,a9,l9,IR,CR,u9,c9,d9,h9,p9,f9,m9,y9,g9,v9,b9,_9,w9,S9,E9,T9,$9,x9,M9,A9,I9,C9,O9,L9,R9,P9,k9,D9,N9,F9,V9,z9,j9,U9,G9,q9,B9,H9,W9,Z9,Y9,J9,X9,gT,Q9,K9,e7,t7,i7,r7,s7;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(KU||(KU={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(e9||(e9={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(t9||(t9={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(i9||(i9={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(r9||(r9={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(s9||(s9={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(n9||(n9={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(o9||(o9={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(a9||(a9={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(l9||(l9={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(IR||(IR={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(CR||(CR={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(u9||(u9={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(c9||(c9={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(d9||(d9={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(h9||(h9={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(p9||(p9={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(f9||(f9={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(m9||(m9={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(y9||(y9={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(g9||(g9={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(v9||(v9={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(b9||(b9={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(_9||(_9={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(w9||(w9={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(S9||(S9={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(E9||(E9={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(T9||(T9={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}($9||($9={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(x9||(x9={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(M9||(M9={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(A9||(A9={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(I9||(I9={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AlongLine=1]="AlongLine"}(C9||(C9={})),function(e){e[e.Auto=0]="Auto",e[e.Clockwise=1]="Clockwise",e[e.Counterclockwise=2]="Counterclockwise"}(O9||(O9={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(L9||(L9={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(R9||(R9={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(P9||(P9={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(k9||(k9={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(D9||(D9={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(N9||(N9={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(F9||(F9={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(V9||(V9={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(z9||(z9={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(j9||(j9={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(U9||(U9={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(G9||(G9={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(q9||(q9={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(B9||(B9={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(H9||(H9={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(W9||(W9={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(Z9||(Z9={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(Y9||(Y9={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(J9||(J9={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(X9||(X9={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(gT||(gT={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(Q9||(Q9={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(K9||(K9={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(e7||(e7={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(t7||(t7={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(i7||(i7={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(r7||(r7={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(s7||(s7={}));const WIe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},OR={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:gT.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:gT.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:IR.Loop,repeatdelay:0,easing:CR.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function ZIe(e){return typeof e=="function"}function e9e(e,t,i,r){return ZIe(e)?e(t,i,r):e}function t9e(e){return[e.r,e.g,e.b,e.a]}const YIe=` /-,
`;function n7(e){let t=e.length;for(;t--;)if(!YIe.includes(e.charAt(t)))return!1;return!0}function i9e(e,t){const i=[];let r=0,s=-1;do if(s=e.indexOf("[",r),s>=r){if(s>r){const n=e.slice(r,s);i.push([n,null,n7(n)])}if(r=s+1,s=e.indexOf("]",r),s>=r){if(s>r){const n=t[e.slice(r,s)];n&&i.push([null,n,!1])}r=s+1}}while(s!==-1);if(r<e.length){const n=e.slice(r);i.push([n,null,n7(n)])}return i}function r9e(e,t,i,r){let s="",n=null;for(const o of t){const[l,d,h]=o;if(l)h?n=l:(n&&(s+=n,n=null),s+=l);else{let y=d;i!=null&&(y=pee(d,i));const v=e.attributes[y];v&&(n&&(s+=n,n=null),s+=v)}}return JIe(s,r)}function JIe(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function s9e(e,t,i,r,s,n,o=!0){const l=t/s,d=i/n,h=Math.ceil(l/2),y=Math.ceil(d/2);for(let v=0;v<n;v++)for(let b=0;b<s;b++){const w=4*(b+(o?n-v-1:v)*s);let E=0,T=0,$=0,A=0,O=0,L=0,R=0;const N=(v+.5)*d;for(let j=Math.floor(v*d);j<(v+1)*d;j++){const V=Math.abs(N-(j+.5))/y,Z=(b+.5)*l,ie=V*V;for(let oe=Math.floor(b*l);oe<(b+1)*l;oe++){let ue=Math.abs(Z-(oe+.5))/h;const me=Math.sqrt(ie+ue*ue);me>=-1&&me<=1&&(E=2*me*me*me-3*me*me+1,E>0&&(ue=4*(oe+j*t),R+=E*e[ue+3],$+=E,e[ue+3]<255&&(E=E*e[ue+3]/250),A+=E*e[ue],O+=E*e[ue+1],L+=E*e[ue+2],T+=E))}}r[w]=A/T,r[w+1]=O/T,r[w+2]=L/T,r[w+3]=R/$}}function uee(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function cee(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function dee(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function hee(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function n9e(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function z$(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const o9e=(e,t=0)=>e==null||isNaN(e)?t:e,a9e=(e,t)=>e??t,l9e=(e,t)=>e??t,u9e=e=>e.tintColor?uee(e.tintColor):[255,255,255,1],c9e=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function d9e(){return D(()=>import("./geometryEngineJSON-Bvf5zUh7.js").then(e=>e.g),__vite__mapDeps([22,23,1,24]))}function h9e(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function p9e(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function f9e(e){let t="normal",i="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:t,weight:i}}function m9e(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function o7(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=o7(t);if(i!=null)return i}break;case"CIMTextSymbol":return o7(e.symbol);case"CIMSolidFill":return e.color}return null}function a7(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const i of t){const r=a7(i);if(r!=null)return r}break}case"CIMTextSymbol":return a7(e.symbol);case"CIMSolidStroke":return e.color}}function l7(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=l7(t);if(i!==void 0)return i}break;case"CIMTextSymbol":return l7(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function y9e(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function g9e(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function v9e(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const b9e=e=>e.includes("data:image/svg+xml");function _9e(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function XD(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function w9e(e,t,i,r,s,n,o=!0){const{infos:l}=n;let d=1,h=0,y=0,v=0,b=1;for(const{absoluteAnchorPoint:T,offsetX:$,offsetY:A,rotation:O,size:L,frameHeight:R,rotateClockWise:N,scaleSymbolsProportionally:j}of l)b=T?1:d,y=c7($,A,h,b,y),v=u7($,A,h,b,v),R&&(j||o)&&(d*=L/R),h=d7(O,N,h);const w=c7(r,s,h,b,y),E=u7(r,s,h,b,v);return{size:e*d,rotation:d7(t,i,h),offsetX:w,offsetY:E}}function XIe(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>XIe(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function QIe(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...WIe[t]];const i=OR[e];if(!i)throw new Error(`InternalError: default value for type ${e}.`);return i[t]}function KIe(e){return e.split(" ").map(t=>Number(t))}function eCe(e){return typeof e=="string"?KIe(e):e}function S9e(e){return e!=null&&e.dashTemplate&&(e.dashTemplate=eCe(e.dashTemplate)),e}function LR(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const i of t)if(i.type==="CIMVectorMarker")return LR(i)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const i of t)if(i.symbol)return LR(i.symbol)}}return"Normal"}function E9e(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??OR.CIMVectorMarker.size;r>t&&(t=r);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>t&&(t=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&z$(i.markerPlacement)){const r=i.size??OR.CIMVectorMarker.size;r>t&&(t=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>t&&(t=r)}}}return t}}}function pee(e,t){if(t!==null){const i=t.get(e);return i?i.name:e}return e}function T9e(e){return e.map(t=>({...t,propertyName:XD(t.propertyName)}))}function $9e(e){const t={};for(const i in e){const r=e[i];t[XD(i)]=r}return t}function u7(e,t,i,r,s){const n=i*Math.PI/180;if(n){const o=Math.cos(n);return(Math.sin(n)*e+o*t)*r+s}return t*r+s}function c7(e,t,i,r,s){const n=i*Math.PI/180;return n?(Math.cos(n)*e-Math.sin(n)*t)*r+s:e*r+s}function d7(e,t,i){return t?i-e:i+e}function x9e(e,t,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",s=i==="Rotation"||i==="Angle"||i==="ToRotation";let n=t[XD(i)];if(n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180)),n==null&&(n=QIe(t.type,i.toLowerCase()),n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:s&&(n*=Math.PI/180))),t.primitiveName!=null){const o=e[t.primitiveName];if(o!=null){const l=o[i];l==null||(typeof l=="string"||typeof l=="number"||Array.isArray(l)?(n=l,n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180))):(n={valueExpressionInfo:l,defaultValue:n},n!=null&&(r?n={type:"Process",op:"ArcadeColor",value:n}:s&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return n}function M9e(e,t){return Math.max(Math.min((e??t)/100,1),0)}const h7="esri.renderers.support.DictionaryLoader",tCe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let fee=class{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new oee(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){var v;let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(b){if(rs(b))return this._dictionaryPromise=null,null}const s=(v=this._dictionaryVersion)==null?void 0:v.greaterEqual(4,0),n={};if(this.fieldMap)for(const b of this._symbolFields){const w=pee(this.fieldMap[b],this._fieldIndex);if(w){const E=t.attributes[w];n[b]=s?E:E!=null?""+t.attributes[w]:""}else n[b]=""}let o=null;try{o=r==null?void 0:r(n,i)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const l=o.split(";"),d=[],h=[];for(let b=0;b<l.length;b++){const w=l[b];if(w){if(w.includes("po:")){const E=w.slice(3).split("|");if(E.length===3){const T=E[0],$=E[1];let A=E[2];const O="countrylabel";if(T===O&&$==="TextString"){if(this.fieldMap!=null){let L=this.fieldMap[O];L==null&&(L=O,this.fieldMap[L]=L),t.attributes[L]=A}continue}if($==="DashTemplate")A=A.split(" ").map(L=>Number(L));else if($==="Color"){const L=new ye(A).toRgba();A=[L[0],L[1],L[2],255*L[3]]}else A=Number(A);h.push({primitiveName:T,propertyName:$,value:A,defaultValue:null})}}else if(w.includes("|")){for(const E of w.split("|"))if(this._itemNames.has(E)){d.push(E);break}}else if(this._itemNames.has(w))d.push(w);else if(b===0){d.length=0;let E="Invalid_P";t.geometry!=null&&(lp(t.geometry)?E="Invalid_A":_k(t.geometry)&&(E="Invalid_L")),d.push(E);break}}}const y=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,d,h,y,i)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void ae.getLogger(h7).error("no valid URL!");const i=Rt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:r}]=await Promise.all([i,Va()]);if(!r)throw this._dictionaryPromise=null,new B("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:s,dictionary_version:n,expression:o,itemsNames:l}=r,d=o;let h=!1;n&&(this._dictionaryVersion=zQ.parse(n),h=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(l),this._symbolFields=s.symbol;const y={};if(this.config){const w=this.config;for(const E in w)y[E]=w[E]}if(s.configuration)for(const w of s.configuration)y.hasOwnProperty(w.name)||(y[w.name]=w.value);const v=[];if(t!=null&&t.fields&&this.fieldMap)for(const w in this.fieldMap){const E=this.fieldMap[w],T=t.fields.filter($=>$.name.toLowerCase()===(E==null?void 0:E.toLowerCase()));T.length>0&&v.push({...T[0],type:h?T[0].type:"esriFieldTypeString"})}v.length>0&&(this._fieldIndex=new aee(v));const b=Xge(d,t!=null?t.spatialReference:null,v,y).then(w=>{const E={scale:0};return(T,$)=>{if(w==null)return null;const A=w.repurposeFeature({geometry:null,attributes:T});return E.scale=$!=null?$.scale??void 0:void 0,w.evaluate({$feature:A,$view:E},w.services)}}).catch(w=>(ae.getLogger(h7).error("Creating dictionary expression failed:",w),null));return this._dictionaryPromise=b,b}async _cimPartsToCIMSymbol(t,i,r,s,n){const o=new Array(i.length);for(let h=0;h<i.length;h++)o[h]=this._getSymbolPart(i[h],n);let l=await Promise.all(o);const d=this.fieldMap;if(d&&l.length>0){const{OverrideHelper:h}=await D(()=>import("./OverrideHelper-DJFotDXO.js").then(y=>y.O),__vite__mapDeps([191,18]));l=q(l);for(const y of l)h.applyDictionaryTextOverrides(y,t,d,this._fieldIndex,LR(y))}return new dd({data:iCe(l,r,s)})}async _getSymbolPart(t,i){const r=this._symbolCache.get(t);if(r)return r;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const s=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),n=Rt(s,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,n),n.finally(()=>this._ongoingRequests.delete(t));try{const o=await n;return this._symbolCache.put(t,o.data),o.data}catch(o){throw o}}};function iCe(e,t,i){if(!e||e.length===0)return null;const r={...e[0]};if(e.length>1){r.effects=null,r.symbolLayers=[];for(const s of e){const n=s;if(n.effects!=null)for(const o of n.symbolLayers)o.effects==null?o.effects=n.effects:o.effects.unshift(...n.effects);r.symbolLayers.unshift(...n.symbolLayers)}}return i&&(r.callout=tCe),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}var RR;let Lo=RR=class extends ug(uu){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new fee(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new RR({config:q(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:q(this.fieldMap),url:q(this.url),visualVariables:q(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await is(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};c([p({type:fee})],Lo.prototype,"_loader",null),c([p({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Lo.prototype,"config",void 0),c([p({type:Object,json:{write:!0}})],Lo.prototype,"fieldMap",void 0),c([p({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Lo.prototype,"scaleExpression",void 0),c([be("scaleExpression")],Lo.prototype,"writeData",null),c([p({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Lo.prototype,"scaleExpressionTitle",void 0),c([p({type:String,json:{write:!0}})],Lo.prototype,"url",void 0),c([be("visualVariables")],Lo.prototype,"writeVisualVariables",null),Lo=RR=c([I("esri.renderers.DictionaryRenderer")],Lo);const rCe=Lo;var PR;let Fl=PR=class extends se{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(ae.getLogger(this).error(".field: field must be a string value"),null):E_(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new PR({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};c([p({type:ye,json:{type:[Number],write:!0}})],Fl.prototype,"color",void 0),c([p({type:String,json:{write:!0}})],Fl.prototype,"field",void 0),c([mt("field")],Fl.prototype,"castField",null),c([p({type:String,json:{write:!0}})],Fl.prototype,"label",void 0),c([p({type:String,json:{write:!0}})],Fl.prototype,"valueExpression",void 0),c([p({type:String,json:{write:!0}})],Fl.prototype,"valueExpressionTitle",void 0),Fl=PR=c([I("esri.renderers.support.AttributeColorInfo")],Fl);const mee=Fl;var kR;let W2=kR=class extends se{constructor(){super(...arguments),this.unit=null}clone(){return new kR({unit:this.unit})}};c([p({type:String,json:{write:!0}})],W2.prototype,"unit",void 0),W2=kR=c([I("esri.renderers.support.DotDensityLegendOptions")],W2);const sCe=W2;var DR;let Os=DR=class extends ug(uu){constructor(e){super(e),this.attributes=null,this.backgroundColor=new ye([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new ws,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new qa({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new DR({attributes:q(this.attributes),backgroundColor:q(this.backgroundColor),dotBlendingEnabled:q(this.dotBlendingEnabled),dotShape:q(this.dotShape),dotSize:q(this.dotSize),dotValue:q(this.dotValue),legendOptions:q(this.legendOptions),outline:q(this.outline),referenceScale:q(this.referenceScale),seed:q(this.seed),visualVariables:q(this.visualVariables),authoringInfo:q(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes??[])i.valueExpression&&await is(e,t,i.valueExpression),i.field&&e.add(i.field)}};c([p({type:[mee],json:{write:!0}})],Os.prototype,"attributes",void 0),c([p({type:ye,json:{write:!0}})],Os.prototype,"backgroundColor",void 0),c([p({type:Boolean,json:{write:!0}})],Os.prototype,"dotBlendingEnabled",void 0),c([p({type:String,json:{write:!1}})],Os.prototype,"dotShape",void 0),c([p({type:Number,json:{write:!0}})],Os.prototype,"dotSize",void 0),c([p({type:sCe,json:{write:!0}})],Os.prototype,"legendOptions",void 0),c([p({type:ws,json:{default:null,write:!0}})],Os.prototype,"outline",void 0),c([p({type:Number,json:{write:!0}})],Os.prototype,"dotValue",void 0),c([p({type:Number,json:{write:!0}})],Os.prototype,"referenceScale",void 0),c([p({type:Number,json:{write:!0}})],Os.prototype,"seed",void 0),c([Pe({dotDensity:"dot-density"})],Os.prototype,"type",void 0),Os=DR=c([I("esri.renderers.DotDensityRenderer")],Os);const nCe=Os;var NR;let Jv=NR=class extends se{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new NR({color:this.color&&this.color.clone(),ratio:this.ratio})}};c([p({type:ye,json:{type:[vt],default:null,write:{isRequired:!0}}})],Jv.prototype,"color",void 0),c([p({type:Number,json:{write:{isRequired:!0}}})],Jv.prototype,"ratio",void 0),Jv=NR=c([I("esri.renderers.support.HeatmapColorStop")],Jv);const Ab=Jv;let Pm=class extends ut.ClonableMixin(se){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};c([p({type:String,json:{write:!0}})],Pm.prototype,"minLabel",void 0),c([p({type:String,json:{write:!0}})],Pm.prototype,"maxLabel",void 0),c([p({type:String,json:{write:!0}})],Pm.prototype,"title",void 0),Pm=c([I("esri.renderers.support.HeatmapLegendOptions")],Pm);function oCe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function aCe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function lCe(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}function uCe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function yee(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function gee(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function vee(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function cCe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function dCe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function hCe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function pCe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function fCe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function mCe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function yCe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function bee(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return Math.sqrt(i*i+r*r+s*s+n*n)}function _ee(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return i*i+r*r+s*s+n*n}function wee(e){const t=e[0],i=e[1],r=e[2],s=e[3];return Math.sqrt(t*t+i*i+r*r+s*s)}function See(e){const t=e[0],i=e[1],r=e[2],s=e[3];return t*t+i*i+r*r+s*s}function gCe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function vCe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function bCe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3];let o=i*i+r*r+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=i*o,e[1]=r*o,e[2]=s*o,e[3]=n*o),e}function _Ce(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Eee(e,t,i,r){const s=t[0],n=t[1],o=t[2],l=t[3];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e[2]=o+r*(i[2]-o),e[3]=l+r*(i[3]-l),e}function wCe(e,t=1){const i=QT;let r,s,n,o,l,d;do r=2*i()-1,s=2*i()-1,l=r*r+s*s;while(l>=1);do n=2*i()-1,o=2*i()-1,d=n*n+o*o;while(d>=1);const h=Math.sqrt((1-l)/d);return e[0]=t*r,e[1]=t*s,e[2]=t*n*h,e[3]=t*o*h,e}function SCe(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3];return e[0]=i[0]*r+i[4]*s+i[8]*n+i[12]*o,e[1]=i[1]*r+i[5]*s+i[9]*n+i[13]*o,e[2]=i[2]*r+i[6]*s+i[10]*n+i[14]*o,e[3]=i[3]*r+i[7]*s+i[11]*n+i[15]*o,e}function ECe(e,t,i){const r=t[0],s=t[1],n=t[2],o=i[0],l=i[1],d=i[2],h=i[3],y=h*r+l*n-d*s,v=h*s+d*r-o*n,b=h*n+o*s-l*r,w=-o*r-l*s-d*n;return e[0]=y*h+w*-o+v*-d-b*-l,e[1]=v*h+w*-l+b*-o-y*-d,e[2]=b*h+w*-d+y*-l-v*-o,e[3]=t[3],e}function TCe(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function $Ce(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function xCe(e,t){const i=e[0],r=e[1],s=e[2],n=e[3],o=t[0],l=t[1],d=t[2],h=t[3],y=bs();return Math.abs(i-o)<=y*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-l)<=y*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-d)<=y*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(n-h)<=y*Math.max(1,Math.abs(n),Math.abs(h))}const MCe=yee,ACe=gee,ICe=vee,CCe=bee,OCe=_ee,LCe=wee,RCe=See;Object.freeze(Object.defineProperty({__proto__:null,add:uCe,ceil:cCe,copy:oCe,copyVec3:aCe,dist:CCe,distance:bee,div:ICe,divide:vee,dot:_Ce,equals:xCe,exactEquals:$Ce,floor:dCe,inverse:vCe,len:LCe,length:wee,lerp:Eee,max:pCe,min:hCe,mul:ACe,multiply:gee,negate:gCe,normalize:bCe,random:wCe,round:fCe,scale:mCe,scaleAndAdd:yCe,set:lCe,sqrDist:OCe,sqrLen:RCe,squaredDistance:_ee,squaredLength:See,str:TCe,sub:MCe,subtract:yee,transformMat4:SCe,transformQuat:ECe},Symbol.toStringTag,{value:"Module"}));function j$(){return[0,0,0,0]}function PCe(e){return[e[0],e[1],e[2],e[3]]}function Vp(e,t,i,r){return[e,t,i,r]}function kCe(e,t,i,r){return[e,t,i,r]}function DCe(e,t=j$()){const i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function NCe(e,t){return new Float64Array(e,t,4)}function Tee(){return j$()}function $ee(){return Vp(1,1,1,1)}function xee(){return Vp(1,0,0,0)}function Mee(){return Vp(0,1,0,0)}function Aee(){return Vp(0,0,1,0)}function Iee(){return Vp(0,0,0,1)}const FCe=Tee(),VCe=$ee(),zCe=xee(),jCe=Mee(),UCe=Aee(),GCe=Iee();Object.freeze(Object.defineProperty({__proto__:null,ONES:VCe,UNIT_W:GCe,UNIT_X:zCe,UNIT_Y:jCe,UNIT_Z:UCe,ZEROS:FCe,clone:PCe,create:j$,createView:NCe,freeze:kCe,fromArray:DCe,fromValues:Vp,ones:$ee,unitW:Iee,unitX:xee,unitY:Mee,unitZ:Aee,zeros:Tee},Symbol.toStringTag,{value:"Module"}));const QD=2.4;function qCe(e){return Bs(e*QD)}function BCe(e){return mi(e)/QD}function HCe(e,t,i,r){let{color:s,ratio:n}=t,{color:o,ratio:l}=i;l===n&&(l===1?n-=1e-6:l+=1e-6);const d=_n((r-n)/(l-n),0,1);Eee(e,s.toArray(),o.toArray(),d)}function C9e(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:l})=>l>=0&&l<=1).sort((l,d)=>l.ratio-d.ratio).map(({color:l,ratio:d})=>({color:l,ratio:Math.max(d,.001)})),e.length<1)return i;let r=e[0],s=e[0],n=1;const o=j$();for(let l=0;l<512;l++){const d=(l+.5)/512;for(;d>s.ratio&&n<e.length;)r=s,s=e[n++];HCe(o,r,s,d),i.set(o,4*l)}return i}function O9e(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function L9e(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var FR;function p7(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:o,...l}=e;return l}}return e}let vr=FR=class extends uu{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new Ab({ratio:0,color:new ye("rgba(255, 140, 0, 0)")}),new Ab({ratio:.75,color:new ye("rgba(255, 140, 0, 1)")}),new Ab({ratio:.9,color:new ye("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return p7(e)}get blurRadius(){return BCe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",qCe(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(QD**2*this.blurRadius**4)}read(e,t){e=p7(e),super.read(e,t)}getSymbol(){return new es}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&_s(e,t,i),r&&typeof r=="string"&&await is(e,t,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new FR({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:q(this.colorStops),field:this.field,legendOptions:q(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};c([p({type:LD,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],vr.prototype,"authoringInfo",void 0),c([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],vr.prototype,"blurRadius",null),c([p({type:[Ab],json:{write:{isRequired:!0}}})],vr.prototype,"colorStops",void 0),c([p({type:String,json:{write:!0}})],vr.prototype,"field",void 0),c([p({type:Pm,json:{write:!0}})],vr.prototype,"legendOptions",void 0),c([p({type:Number,json:{write:!0}})],vr.prototype,"maxDensity",void 0),c([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],vr.prototype,"maxPixelIntensity",null),c([p({type:Number,json:{write:!0}})],vr.prototype,"minDensity",void 0),c([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],vr.prototype,"minPixelIntensity",null),c([p({type:Number,cast:ft,json:{write:!0}})],vr.prototype,"radius",void 0),c([p({type:Number,range:{min:0},json:{default:0,write:!0}})],vr.prototype,"referenceScale",void 0),c([Pe({heatmap:"heatmap"})],vr.prototype,"type",void 0),c([p({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],vr.prototype,"valueExpression",void 0),c([p({type:String})],vr.prototype,"valueExpressionTitle",void 0),c([p({readOnly:!0})],vr.prototype,"_pixelIntensityToDensity",null),vr=FR=c([I("esri.renderers.HeatmapRenderer")],vr);const Cee=vr;let Xh=class extends ut.ClonableMixin(se){constructor(){super(...arguments),this.color=new ye([0,0,0,0]),this.label=null,this.threshold=0}};c([p({type:ye,json:{write:!0}})],Xh.prototype,"color",void 0),c([p({type:String,json:{write:!0}})],Xh.prototype,"label",void 0),c([p({type:Number,range:{min:0,max:1},json:{write:!0}})],Xh.prototype,"threshold",void 0),Xh=c([I("esri.renderers.support.OthersCategory")],Xh);const WCe={base:ag,key:"type",typeMap:{size:lg,opacity:RD}};let Ls=class extends ug(ut.ClonableMixin(uu)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new ye([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Xh,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var t;return new es({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Yr)}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((i,r)=>i+r.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((t,i)=>t+JSON.stringify(i),"")}async collectRequiredFields(t,i){await this.collectVVRequiredFields(t,i);for(const r of this.attributes)r.valueExpression&&await is(t,i,r.valueExpression),r.field&&t.add(r.field)}};c([p({type:[mee],json:{write:!0}})],Ls.prototype,"attributes",void 0),c([p(FD)],Ls.prototype,"backgroundFillSymbol",void 0),c([p({type:ye,json:{write:!0}})],Ls.prototype,"defaultColor",void 0),c([p({type:String,json:{write:!0}})],Ls.prototype,"defaultLabel",void 0),c([p({type:Number,range:{min:0,max:1},json:{write:!0}})],Ls.prototype,"holePercentage",void 0),c([p({type:Xh,json:{write:!0}})],Ls.prototype,"othersCategory",void 0),c([p({type:VD,json:{write:!0}})],Ls.prototype,"legendOptions",void 0),c([p({type:ws,json:{default:null,write:!0}})],Ls.prototype,"outline",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],Ls.prototype,"size",void 0),c([Pe({pieChart:"pie-chart"})],Ls.prototype,"type",void 0),c([p({types:[WCe]})],Ls.prototype,"visualVariables",void 0),Ls=c([I("esri.renderers.PieChartRenderer")],Ls);const ZCe=Ls,X_={key:"type",base:uu,typeMap:{heatmap:Cee,simple:La,"unique-value":jD,"class-breaks":nee,"dot-density":nCe,dictionary:rCe,"pie-chart":ZCe},errorContext:"renderer"},YCe={key:"type",base:uu,typeMap:{simple:La,"unique-value":jD,"class-breaks":nee,heatmap:Cee},errorContext:"renderer",validate:JCe};function JCe(e){switch(e.type){case"simple":return XCe(e);case"unique-value":return QCe(e);case"class-breaks":return KCe(e);case"heatmap":return e}}function XCe(e){if(e.symbol)return e;ae.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function QCe(e){const t=e.uniqueValueInfos,i=t==null?void 0:t.filter(({symbol:r,label:s},n)=>(r||ae.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${s}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=i),e}function KCe(e){const t=e.classBreakInfos,i=t==null?void 0:t.filter(({symbol:r,label:s},n)=>(r||ae.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${s}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=i),e}function eOe(e,t){return l_(e,null,t)}const tOe=By({types:X_});function l_(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new Qn("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):tOe(e,t,i):null}var VR;let Hr=VR=class extends Bc{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=ft("12px"),this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());$r(i,r,t)}readRenderer(e,t,i){var s;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return r?l_(r,t,i)??void 0:qD(t,i)}clone(){return new VR({fields:q(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:q(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:q(this.popupTemplate),renderer:q(this.renderer),binType:q(this.binType),size:this.size})}};c([Pe({binning:"binning"})],Hr.prototype,"type",void 0),c([Pe({geohash:"geohash",square:"square"}),p({type:["geohash","square"]})],Hr.prototype,"binType",void 0),c([p({type:Number,json:{write:!0}})],Hr.prototype,"fixedBinLevel",void 0),c([p({type:[J_],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Hr.prototype,"labelingInfo",void 0),c([p(P$)],Hr.prototype,"labelsVisible",void 0),c([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Hr.prototype,"maxScale",void 0),c([p(R$)],Hr.prototype,"popupEnabled",void 0),c([p({type:eg,json:{name:"popupInfo",write:!0}})],Hr.prototype,"popupTemplate",void 0),c([p({cast:e=>e==="auto"?e:ms(ft(e))})],Hr.prototype,"size",void 0),c([p({type:[sd],json:{write:!0}})],Hr.prototype,"fields",void 0),c([be("fields")],Hr.prototype,"writeFields",null),c([p({types:X_,json:{write:{target:"drawingInfo.renderer"}}})],Hr.prototype,"renderer",void 0),c([pe("renderer",["drawingInfo.renderer"])],Hr.prototype,"readRenderer",null),Hr=VR=c([I("esri.layers.support.FeatureReductionBinning")],Hr);const Oee=Hr;var zR;function f7(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let Bi=zR=class extends se{constructor(e){super(e),this.type="cluster",this.clusterRadius=ft("80px"),this.clusterMinSize=ft("12px"),this.clusterMaxSize=ft("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,i){var s,n;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return(n=r==null?void 0:r.authoringInfo)!=null&&n.isAutoGenerated?null:r?f7(r)?null:l_(r,t,i)??void 0:qD(t,i)}readSymbol(e,t,i){var s,n;const r=(s=t.drawingInfo)==null?void 0:s.renderer;if((n=r==null?void 0:r.authoringInfo)!=null&&n.isAutoGenerated)return null;if(r&&f7(r)){const o=l_(r,t,i);return o==null?void 0:o.symbol}return null}writeSymbol(e,t,i,r){var n,o;const s=(o=(n=this.renderer)==null?void 0:n.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||s){const l=new La({symbol:e});t.drawingInfo={renderer:l.write({},r)}}}writeFields(e,t,i){const r=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());$r(i,r,t)}readFields(e,t,i){return e.filter(r=>!r.isAutoGenerated).map(r=>sd.fromJSON(r))}clone(){return new zR({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:q(this.labelingInfo),labelsVisible:this.labelsVisible,fields:q(this.fields),maxScale:this.maxScale,renderer:q(this.renderer),symbol:q(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:q(this.popupTemplate)})}};c([p({type:["cluster"],readOnly:!0,json:{write:!0}})],Bi.prototype,"type",void 0),c([p({cast:e=>e==="auto"?e:ms(ft(e)),json:{write:!0}})],Bi.prototype,"clusterRadius",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],Bi.prototype,"clusterMinSize",void 0),c([p({type:Number,cast:ft,json:{write:!0}})],Bi.prototype,"clusterMaxSize",void 0),c([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Bi.prototype,"maxScale",void 0),c([p(R$)],Bi.prototype,"popupEnabled",void 0),c([p({type:eg,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Bi.prototype,"popupTemplate",void 0),c([p({types:X_,json:{write:{target:"drawingInfo.renderer"}}})],Bi.prototype,"renderer",void 0),c([pe("renderer",["drawingInfo.renderer"])],Bi.prototype,"readRenderer",null),c([p({types:Nve})],Bi.prototype,"symbol",void 0),c([pe("symbol",["drawingInfo.renderer"])],Bi.prototype,"readSymbol",null),c([be("symbol")],Bi.prototype,"writeSymbol",null),c([p({type:[J_],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Bi.prototype,"labelingInfo",void 0),c([p(P$)],Bi.prototype,"labelsVisible",void 0),c([p({type:[sd],json:{write:!0}})],Bi.prototype,"fields",void 0),c([be("fields")],Bi.prototype,"writeFields",null),c([pe("fields")],Bi.prototype,"readFields",null),Bi=zR=c([I("esri.layers.support.FeatureReductionCluster")],Bi);const Lee=Bi;var jR;let Z2=jR=class extends Bc{constructor(e){super(e),this.type="selection"}clone(){return new jR}};c([p({type:["selection"]})],Z2.prototype,"type",void 0),Z2=jR=c([I("esri.layers.support.FeatureReductionSelection")],Z2);const m7=Z2,y7={key:"type",base:Bc,typeMap:{cluster:Lee,binning:Oee}},iOe={types:{key:"type",base:Bc,typeMap:{selection:m7,cluster:Lee,binning:Oee}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:y7},"portal-item":{types:y7},"web-scene":{types:{key:"type",base:Bc,typeMap:{selection:m7}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:ci}}}}},Gf={Base64:0,Hex:1,String:2,Raw:3},yy=8,Ree=(1<<yy)-1;function Fc(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function rOe(e){const t=[];for(let i=0,r=e.length*yy;i<r;i+=yy)t[i>>5]|=(e.charCodeAt(i/yy)&Ree)<<i%32;return t}function sOe(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=yy)t.push(String.fromCharCode(e[i>>5]>>>i%32&Ree));return t.join("")}function nOe(e){const t="0123456789abcdef",i=[];for(let r=0,s=4*e.length;r<s;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}function oOe(e){const t="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let s=0,n=4*e.length;s<n;s+=3){const o=(e[s>>2]>>s%4*8&255)<<16|(e[s+1>>2]>>(s+1)%4*8&255)<<8|e[s+2>>2]>>(s+2)%4*8&255;for(let l=0;l<4;l++)8*s+6*l>32*e.length?r.push(t):r.push(i.charAt(o>>6*(3-l)&63))}return r.join("")}function aOe(e,t){return e<<t|e>>>32-t}function U$(e,t,i,r,s,n){return Fc(aOe(Fc(Fc(t,e),Fc(r,n)),s),i)}function Vr(e,t,i,r,s,n,o){return U$(t&i|~t&r,e,t,s,n,o)}function zr(e,t,i,r,s,n,o){return U$(t&r|i&~r,e,t,s,n,o)}function jr(e,t,i,r,s,n,o){return U$(t^i^r,e,t,s,n,o)}function Ur(e,t,i,r,s,n,o){return U$(i^(t|~r),e,t,s,n,o)}function lOe(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,s=-1732584194,n=271733878;for(let o=0;o<e.length;o+=16){const l=i,d=r,h=s,y=n;i=Vr(i,r,s,n,e[o],7,-680876936),n=Vr(n,i,r,s,e[o+1],12,-389564586),s=Vr(s,n,i,r,e[o+2],17,606105819),r=Vr(r,s,n,i,e[o+3],22,-1044525330),i=Vr(i,r,s,n,e[o+4],7,-176418897),n=Vr(n,i,r,s,e[o+5],12,1200080426),s=Vr(s,n,i,r,e[o+6],17,-1473231341),r=Vr(r,s,n,i,e[o+7],22,-45705983),i=Vr(i,r,s,n,e[o+8],7,1770035416),n=Vr(n,i,r,s,e[o+9],12,-1958414417),s=Vr(s,n,i,r,e[o+10],17,-42063),r=Vr(r,s,n,i,e[o+11],22,-1990404162),i=Vr(i,r,s,n,e[o+12],7,1804603682),n=Vr(n,i,r,s,e[o+13],12,-40341101),s=Vr(s,n,i,r,e[o+14],17,-1502002290),r=Vr(r,s,n,i,e[o+15],22,1236535329),i=zr(i,r,s,n,e[o+1],5,-165796510),n=zr(n,i,r,s,e[o+6],9,-1069501632),s=zr(s,n,i,r,e[o+11],14,643717713),r=zr(r,s,n,i,e[o],20,-373897302),i=zr(i,r,s,n,e[o+5],5,-701558691),n=zr(n,i,r,s,e[o+10],9,38016083),s=zr(s,n,i,r,e[o+15],14,-660478335),r=zr(r,s,n,i,e[o+4],20,-405537848),i=zr(i,r,s,n,e[o+9],5,568446438),n=zr(n,i,r,s,e[o+14],9,-1019803690),s=zr(s,n,i,r,e[o+3],14,-187363961),r=zr(r,s,n,i,e[o+8],20,1163531501),i=zr(i,r,s,n,e[o+13],5,-1444681467),n=zr(n,i,r,s,e[o+2],9,-51403784),s=zr(s,n,i,r,e[o+7],14,1735328473),r=zr(r,s,n,i,e[o+12],20,-1926607734),i=jr(i,r,s,n,e[o+5],4,-378558),n=jr(n,i,r,s,e[o+8],11,-2022574463),s=jr(s,n,i,r,e[o+11],16,1839030562),r=jr(r,s,n,i,e[o+14],23,-35309556),i=jr(i,r,s,n,e[o+1],4,-1530992060),n=jr(n,i,r,s,e[o+4],11,1272893353),s=jr(s,n,i,r,e[o+7],16,-155497632),r=jr(r,s,n,i,e[o+10],23,-1094730640),i=jr(i,r,s,n,e[o+13],4,681279174),n=jr(n,i,r,s,e[o],11,-358537222),s=jr(s,n,i,r,e[o+3],16,-722521979),r=jr(r,s,n,i,e[o+6],23,76029189),i=jr(i,r,s,n,e[o+9],4,-640364487),n=jr(n,i,r,s,e[o+12],11,-421815835),s=jr(s,n,i,r,e[o+15],16,530742520),r=jr(r,s,n,i,e[o+2],23,-995338651),i=Ur(i,r,s,n,e[o],6,-198630844),n=Ur(n,i,r,s,e[o+7],10,1126891415),s=Ur(s,n,i,r,e[o+14],15,-1416354905),r=Ur(r,s,n,i,e[o+5],21,-57434055),i=Ur(i,r,s,n,e[o+12],6,1700485571),n=Ur(n,i,r,s,e[o+3],10,-1894986606),s=Ur(s,n,i,r,e[o+10],15,-1051523),r=Ur(r,s,n,i,e[o+1],21,-2054922799),i=Ur(i,r,s,n,e[o+8],6,1873313359),n=Ur(n,i,r,s,e[o+15],10,-30611744),s=Ur(s,n,i,r,e[o+6],15,-1560198380),r=Ur(r,s,n,i,e[o+13],21,1309151649),i=Ur(i,r,s,n,e[o+4],6,-145523070),n=Ur(n,i,r,s,e[o+11],10,-1120210379),s=Ur(s,n,i,r,e[o+2],15,718787259),r=Ur(r,s,n,i,e[o+9],21,-343485551),i=Fc(i,l),r=Fc(r,d),s=Fc(s,h),n=Fc(n,y)}return[i,r,s,n]}function Pee(e,t=Gf.Hex){const i=t||Gf.Base64,r=lOe(rOe(e),e.length*yy);switch(i){case Gf.Raw:return r;case Gf.Hex:return nOe(r);case Gf.String:return sOe(r);case Gf.Base64:return oOe(r)}}const uOe=()=>ae.getLogger("esri.views.2d.layers.support.clusterUtils");Y.add("esri-cluster-arcade-enabled",!0);const cOe=Y("esri-cluster-arcade-enabled"),dOe=new Set(["simple-line","simple-fill","picture-fill"]);function g7(e,t){let i=t.clone();if(!hOe(i))return i;if(t.symbols.some(r=>dOe.has(r.type))&&(i=new La({symbol:new es})),i.authoringInfo||(i.authoringInfo=new LD),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(s=>s.valueExpression!=="$view.scale");r.forEach(s=>{s.type==="rotation"?s.field?s.field=Hd(e,s.field,"avg_angle","number"):s.valueExpression&&(s.field=N0(e,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=Hd(e,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=Hd(e,s.field,"avg","number"):s.valueExpression&&(s.field=N0(e,s.valueExpression,"avg","number"),s.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=Hd(e,r.field,"sum","number"):r.valueExpression&&(r.field=N0(e,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=Hd(e,i.field,"mode","string"):i.valueExpression&&(i.field=N0(e,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=Hd(e,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=Hd(e,i.field,"avg","number"):i.valueExpression&&(i.field=N0(e,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const hOe=e=>{const t=i=>uOe().error(new B("Unsupported-renderer",i,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if(i!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!cOe){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function pOe(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const r=i,s="field",n=t.toLowerCase()+",norm:"+s+","+r.toLowerCase();return"cluster_avg_"+Pee(n)}}}function N0(e,t,i,r){const s=Pee(t),n=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return e.some(o=>o.name===n)||e.push(new sd({name:n,isAutoGenerated:!0,onStatisticExpression:new WD({expression:t,returnType:r}),statisticType:i})),n}function Hd(e,t,i,r,s){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const n=pOe(i,t,s);return e.some(o=>o.name===n)||(i==="avg_norm"?e.push(new sd({name:n,isAutoGenerated:!0,onStatisticExpression:new WD({expression:`$feature.${t} / $feature.${s}`,returnType:r}),statisticType:"avg"})):e.push(new sd({name:n,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),n}const fOe=e=>{let t=class extends e{constructor(...i){super(...i),this.addHandles(ve(()=>this.renderer,()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},Na))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_withClusterVariable(i,r,s){const n=i.clone();return"visualVariables"in n&&(n.visualVariables||(n.visualVariables=[]),n.visualVariables.some(o=>o.type==="size")||n.visualVariables.push(new lg({field:"cluster_count",stops:[new F2({value:1}),new F2({useMinValue:!0,size:r}),new F2({useMaxValue:!0,size:s})]}))),n}_normalizeFeatureReduction(i){var v;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),s=[new sd({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],n=(r.fields??[]).filter(b=>!b.isAutoGenerated),o=i.renderer&&!((v=i.renderer.authoringInfo)!=null&&v.isAutoGenerated),{clusterMinSize:l,clusterMaxSize:d}=r;if(o){r.fields=[...s,...n];const b=this._withClusterVariable(r.renderer,l,d);return r.effectiveFeatureRenderer=b,r.effectiveClusterRenderer=b,r}if(i.symbol){if(r.fields=[...s,...n],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const b=g7(s,this.renderer),w=this._withClusterVariable(b,l,d),E="visualVariables"in w&&w.visualVariables?w.visualVariables:[],T=new La({symbol:i.symbol,visualVariables:E});return r.fields=[...s,...n],r.effectiveFeatureRenderer=w,r.effectiveClusterRenderer=T,r}if(!this.renderer)return i;const h=g7(s,this.renderer);r.fields=[...s,...n],r.renderer=h;const y=this._withClusterVariable(h,l,d);return r.effectiveFeatureRenderer=y,r.effectiveClusterRenderer=y,r}};return c([p(iOe)],t.prototype,"featureReduction",null),t=c([I("esri.layers.mixins.FeatureReductionLayer")],t),t},v7={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},b7={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},_7={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},mOe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":v7,"web-map/basemap":b7,"web-map/tables":_7,"link-chart/operational-layers":{...v7,LinkChartLayer:!0},"link-chart/basemap":b7,"link-chart/tables":_7,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},yOe=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,r,s){var n;return((n=s==null?void 0:s.portalItem)==null?void 0:n.type)==="Group Layer"?void 0:i}writeListMode(i,r,s,n){(n&&n.layerContainerType==="ground"||i&&Joe(this,s,{},n))&&(r[s]=i)}writeOperationalLayerType(i,r,s){i&&(r[s]=i)}writeTitle(i,r){r.title=i??"Layer"}readVisibilityTimeExtent(i){return i?ru.fromArray(i):null}writeVisibilityTimeExtent(i,r,s,n){i&&n.layerContainerType!=="tables"&&(i.isEmpty?n!=null&&n.messages&&n.messages.push(new B("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[s]=i.toArray())}read(i,r){r&&(r.layer=this),Woe(this,i,s=>super.read(i,s),r)}write(i,r){var o,l;if(!this.persistenceEnabled&&!(r!=null&&r.ignorePersistenceEnabled))return null;if(r!=null&&r.origin){const d=`${r.origin}/${r.layerContainerType||"operational-layers"}`,h=mOe[d];let y=!!(h!=null&&h[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&d==="web-scene/operational-layers"&&(y=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&d==="web-map/operational-layers"&&(y=!1),!y)return(o=r.messages)==null||o.push(new B("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${d}'`,{layer:this})),null}const s=super.write(i,{...r,layer:this}),n=!!r&&!!r.messages&&!!r.messages.filter(d=>d instanceof B&&d.name==="web-document-write:property-required").length;return PT(s==null?void 0:s.url)?((l=r==null?void 0:r.messages)==null||l.push(new B("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:s}beforeSave(){}};return c([p({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),c([pe("id",["id"])],t.prototype,"readId",null),c([p(vK)],t.prototype,"listMode",void 0),c([be("listMode")],t.prototype,"writeListMode",null),c([p({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:ci,isRequired:!0}}}}})],t.prototype,"operationalLayerType",void 0),c([be("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),c([p(XL)],t.prototype,"opacity",void 0),c([p({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),c([p({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),c([be("title"),be(["web-scene"],"title")],t.prototype,"writeTitle",null),c([p({type:ru,json:{origins:{"web-scene":{write:{layerContainerTypes:ci}}}}})],t.prototype,"visibilityTimeExtent",void 0),c([pe("visibilityTimeExtent")],t.prototype,"readVisibilityTimeExtent",null),c([be(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[vt,LT]]}})],t.prototype,"writeVisibilityTimeExtent",null),c([p({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:ci}}})],t.prototype,"visible",void 0),t=c([I("esri.layers.mixins.OperationalLayer")],t),t};var UR;const vS=new ot({asc:"ascending",desc:"descending"});let km=UR=class extends se{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new UR({field:this.field,valueExpression:this.valueExpression,order:this.order})}};c([p({type:String,json:{write:!0}})],km.prototype,"field",void 0),c([p({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],km.prototype,"valueExpression",void 0),c([p({type:vS.apiValues,json:{type:vS.jsonValues,read:vS.read,write:vS.write}})],km.prototype,"order",void 0),km=UR=c([I("esri.layers.support.OrderByInfo")],km);const kee=km;function gOe(e,t,i){if(!e)return null;const r=e.find(n=>!!n.field);if(!r)return null;const s=new kee;return s.read(r,i),[s]}function vOe(e,t,i,r){const s=e.find(n=>!!n.field);s&&$r(i,[s.toJSON()],t)}const bOe={type:[kee],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:gOe},write:{writer:vOe}}},_Oe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return c([p(bOe)],t.prototype,"orderBy",void 0),t=c([I("esri.layers.mixins.OrderedLayer")],t),t};async function wOe(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return zm(e);const i=tt.WGS84;return await xk(t,i),cd(e,i)}function SOe(e,t){if(!Dee(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function Dee(e,t){var i;return!!((i=e.typeKeywords)!=null&&i.includes(t))}function k9e(e){return Dee(e,TOe.HOSTED_SERVICE)}function EOe(e,t){const i=e.typeKeywords;if(i){const r=i.indexOf(t);r>-1&&i.splice(r,1)}}function D9e(e,t,i){i?SOe(e,t):EOe(e,t)}async function N9e(e){const t=e.clone().normalize();let i;if(t.length>1)for(const r of t)i?r.width>i.width&&(i=r):i=r;else i=t[0];return wOe(i)}const TOe={GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function $Oe(e){var d;const{portal:t,isOrgItem:i,itemControl:r}=e,s=(d=t.user)==null?void 0:d.privileges;let n=!s||s.includes("features:user:edit"),o=!!i&&!!(s!=null&&s.includes("features:user:fullEdit"));const l=r==="update"||r==="admin";return l?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:l}}}const xOe=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Zt(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new ob({id:r.itemId,portal:s==null?void 0:s.portal})}writePortalItem(i,r){i!=null&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){var s;if((s=this.portalItem)!=null&&s.id)try{const{load:n}=await D(()=>import("./layersLoader-Bt9qThag.js"),__vite__mapDeps([272,11,10,12,273]));return yi(r),await n({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap,populateGroupLayer:i.populateGroupLayer},r)}catch(n){throw rs(n)||ae.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(Ia(r),!0)))}async setUserPrivileges(i,r){if(!It.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:s,fullEdit:n},content:{updateItem:o}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",o)}catch(s){Ia(s)}}async _fetchUserPrivileges(i,r){let s=this.portalItem;if(!i||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(r);const n=!(Be!=null&&Be.findCredential(this.url)),o=i===s.id;if(o&&s.portal.user)return this._getUserPrivileges(s,n);let l,d;if(o)l=s.portal.url;else try{l=await ok(this.url,r)}catch(b){Ia(b)}if(!l||!pae(l,s.portal.url))return this._fetchFallbackUserPrivileges(r);try{const b=r!=null?r.signal:null;d=await(Be==null?void 0:Be.getCredential(`${l}/sharing`,{prompt:!1,signal:b}))}catch(b){Ia(b)}const h=!0,y=!1,v=!1;if(!d)return{features:{edit:h,fullEdit:y},content:{updateItem:v}};try{if(o?await s.reload():(s=new ob({id:i,portal:{url:l}}),await s.load(r)),s.portal.user)return this._getUserPrivileges(s,n)}catch(b){Ia(b)}return{features:{edit:h,fullEdit:y},content:{updateItem:v}}}_getUserPrivileges(i,r){const s=$Oe(i);return r&&(s.features.edit=!0),s}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(s){Ia(s)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?Be==null?void 0:Be.findCredential(this.url):null;if(!r)return!0;const s=bS.credential===r?bS.user:await this._fetchEditingUser(i);return bS.credential=r,bS.user=s,(s==null?void 0:s.privileges)==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var y,v;const r=(v=(y=this.portalItem)==null?void 0:y.portal)==null?void 0:v.user;if(r)return r;const s=Be==null?void 0:Be.findServerInfo(this.url??"");if(!(s!=null&&s.owningSystemUrl))return null;const n=`${s.owningSystemUrl}/sharing/rest`,o=ts.getDefault();if(o&&o.loaded&&Bo(o.restUrl)===Bo(n))return o.user;const l=`${n}/community/self`,d=i!=null?i.signal:null,h=await DT(Rt(l,{authMode:"no-prompt",query:{f:"json"},signal:d}));return h.ok?ZP.fromJSON(h.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){var o;const s=r==null?void 0:r.portal,n=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||ts.getDefault());return s&&n&&!Pq(n.restUrl,s.restUrl)?(r.messages&&r.messages.push(new B("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return c([p({type:ob})],t.prototype,"portalItem",null),c([pe("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),c([be("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),c([p({clonable:!1})],t.prototype,"resourceReferences",void 0),c([p({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),c([p({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),c([p({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=c([I("esri.layers.mixins.PortalLayer")],t),t},bS={credential:null,user:null};let Xv=class extends Me{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};c([p()],Xv.prototype,"updating",void 0),c([p()],Xv.prototype,"status",void 0),Xv=c([I("esri.layers.support.PublishingInfo")],Xv);const MOe=Xv,AOe=Symbol(),IOe=e=>{var t;let i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const s=new MOe;return this._checkPublishingStatus(s),s}_checkPublishingStatus(r){let o=0;const l=async h=>{let y;r.updating=!0;try{y=await this.fetchPublishingStatus()}catch{y="unavailable"}y!=="published"&&y!=="unavailable"||(r.status==="publishing"&&this.refresh(),d.remove()),r.status=y,r.updating=!1,d.removed||(o=setTimeout(l,h,h+125))},d={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>d.remove()),l(250),this.addHandles(d)}};return t=AOe,c([p({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=c([I("esri.layers.mixins.PublishableLayer")],i),i},Vc=new _e,Ib=new WeakMap;function COe(e){LOe(e)&&Vc.push(new WeakRef(e))}function OOe(e){const t=Vc.find(i=>i.deref()===e);t&&Vc.remove(t)}function LOe(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function Nee(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Nee(t,e%t):0}let YA=0,_S=0;function ROe(){const e=Date.now();let t=!1;for(const i of Vc){const r=i.deref();r?r.refreshInterval&&e-(Ib.get(r)??0)+5>=6e4*r.refreshInterval&&(Ib.set(r,e),r.refresh(e)):t=!0}if(t)for(let i=Vc.length-1;i>=0;i--)Vc.at(i).deref()||Vc.removeAt(i)}iq(()=>{const e=Date.now();let t=0;for(const i of Vc){const r=i.deref();r&&(t=Nee(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?Ib.get(r)||Ib.set(r,e):Ib.delete(r))}if(t!==_S){if(_S=t,clearInterval(YA),_S===0)return void(YA=0);YA=setInterval(ROe,_S)}},Na);const w7=.1,POe=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=IT(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||COe(this)},()=>{})}destroy(){OOe(this)}castRefreshInterval(i){return i>=w7?i:i<=0?0:w7}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Rb(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{ae.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}get test(){}};return c([p({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:ci}}}}})],t.prototype,"refreshInterval",void 0),c([mt("refreshInterval")],t.prototype,"castRefreshInterval",null),c([p({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),c([p({readOnly:!0})],t.prototype,"refreshParameters",null),t=c([I("esri.layers.mixins.RefreshableLayer")],t),t},kOe=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&DOe(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return c([p({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),c([p({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),c([p({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=c([I("esri.layers.mixins.ScaleRangeLayer")],t),t};function DOe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const Fee=xr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Qv=class extends ut.ClonableMixin(se){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return wW(this.value,this.unit,"milliseconds")}};c([Pe(Fee,{nonNullable:!0})],Qv.prototype,"unit",void 0),c([p({type:Number,json:{write:!0},nonNullable:!0})],Qv.prototype,"value",void 0),Qv=c([I("esri.time.TimeInterval")],Qv);const u_=Qv;function S7(e,t){return u_.fromJSON({value:e,unit:t})}let Lr=class extends ut.ClonableMixin(se){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?ru.fromArray(i.timeExtent):null}writeFullTimeExtent(t,i){(t==null?void 0:t.start)!=null&&t.end!=null?i.timeExtent=t.toArray():i.timeExtent=null}readInterval(t,i){return i.timeInterval&&i.timeIntervalUnits?S7(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?S7(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(t,i){i.timeInterval=(t==null?void 0:t.toJSON().value)??null,i.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};c([p({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Lr.prototype,"cumulative",void 0),c([p({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Lr.prototype,"endField",void 0),c([p({type:ru,json:{write:{enabled:!0,allowNull:!0}}})],Lr.prototype,"fullTimeExtent",void 0),c([pe("fullTimeExtent",["timeExtent"])],Lr.prototype,"readFullTimeExtent",null),c([be("fullTimeExtent")],Lr.prototype,"writeFullTimeExtent",null),c([p({type:Boolean,json:{write:!0}})],Lr.prototype,"hasLiveData",void 0),c([p({type:u_,json:{write:{enabled:!0,allowNull:!0}}})],Lr.prototype,"interval",void 0),c([pe("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Lr.prototype,"readInterval",null),c([be("interval")],Lr.prototype,"writeInterval",null),c([p({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Lr.prototype,"startField",void 0),c([p(CE("timeReference",!0))],Lr.prototype,"timeZone",void 0),c([p({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Lr.prototype,"trackIdField",void 0),c([p({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Lr.prototype,"useTime",void 0),c([p({type:[Date],json:{read:!1}})],Lr.prototype,"stops",void 0),Lr=c([I("esri.layers.support.TimeInfo")],Lr);const Vee=Lr,NOe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:ci}}},FOe=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const n=s.timeOffset,o=Fee.fromJSON(s.timeOffsetUnits);return n&&o?new u_({value:n,unit:o}):null}set timeInfo(i){qZ(i,this.fieldsIndex),this._set("timeInfo",i)}};return c([p({type:ru,json:{write:!1}})],t.prototype,"timeExtent",void 0),c([p({type:u_})],t.prototype,"timeOffset",void 0),c([pe("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),c([p({value:null,type:Vee,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),c([p(NOe)],t.prototype,"useViewTime",void 0),t=c([I("esri.layers.mixins.TemporalLayer")],t),t};let Rh=class extends ut.ClonableMixin(se){constructor(t){super(t),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};c([p({type:[J_],json:{write:!0}})],Rh.prototype,"labelingInfo",void 0),c([p(P$)],Rh.prototype,"labelsVisible",void 0),c([p({types:X_,json:{write:!0}})],Rh.prototype,"renderer",void 0),c([p({type:Boolean,json:{write:!0}})],Rh.prototype,"visible",void 0),Rh=c([I("esri.layers.support.TrackPartInfo")],Rh);const gy=Rh;let Rs=class extends ut.ClonableMixin(se){constructor(t){super(t),this.enabled=!0,this.fields=[],this.latestObservations=new gy({renderer:new La({symbol:hT.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new gy({renderer:new La({symbol:hT.clone()})}),this.trackLines=new gy({renderer:new La({symbol:DD.clone()})}),this.timeField="startTimeField"}writeFields(t,i,r){const s=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());$r(r,s,i)}};c([p({type:Boolean,json:{write:!0}})],Rs.prototype,"enabled",void 0),c([p({type:[sd],json:{write:!0}})],Rs.prototype,"fields",void 0),c([be("fields")],Rs.prototype,"writeFields",null),c([p({type:gy,json:{write:!0}})],Rs.prototype,"latestObservations",void 0),c([p({type:u_,json:{write:!0}})],Rs.prototype,"maxDisplayDuration",void 0),c([p({type:Number,json:{write:!0}})],Rs.prototype,"maxDisplayObservationsPerTrack",void 0),c([p(R$)],Rs.prototype,"popupEnabled",void 0),c([p({type:eg,json:{name:"popupInfo",write:!0}})],Rs.prototype,"popupTemplate",void 0),c([p({type:gy,json:{write:!0}})],Rs.prototype,"previousObservations",void 0),c([p({type:gy,json:{write:!0}})],Rs.prototype,"trackLines",void 0),c([p({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],Rs.prototype,"timeField",void 0),Rs=c([I("esri.layers.support.TrackInfo")],Rs);const VOe=Rs,zOe=e=>{let t=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return c([p({type:VOe})],t.prototype,"trackInfo",void 0),t=c([I("esri.layers.mixins.TrackableLayer")],t),t},E7=new ot({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let _c=class extends ut.ClonableMixin(se){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};c([p({json:{write:!0}})],_c.prototype,"name",void 0),c([p({json:{write:!0}})],_c.prototype,"description",void 0),c([p({json:{read:E7.read,write:E7.write}})],_c.prototype,"drawingTool",void 0),c([p({json:{write:!0}})],_c.prototype,"prototype",void 0),c([p({json:{write:!0}})],_c.prototype,"thumbnail",void 0),_c=c([I("esri.layers.support.FeatureTemplate")],_c);const KD=_c;let Vl=class extends ut.ClonableMixin(se){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const i={};for(const r of Object.keys(t))i[r]=g$(t[r]);return i}writeDomains(t,i){var s;const r={};for(const n of Object.keys(t))t[n]&&(r[n]=(s=t[n])==null?void 0:s.toJSON());i.domains=r}};c([p({json:{write:!0}})],Vl.prototype,"id",void 0),c([p({json:{write:!0}})],Vl.prototype,"name",void 0),c([p({json:{write:!0}})],Vl.prototype,"domains",void 0),c([pe("domains")],Vl.prototype,"readDomains",null),c([be("domains")],Vl.prototype,"writeDomains",null),c([p({type:[KD],json:{write:!0}})],Vl.prototype,"templates",void 0),Vl=c([I("esri.layers.support.FeatureType")],Vl);const zee=Vl;function jOe(){return{fields:{type:[Yk],value:null,set:function(e){if(e&&Y("big-integer-warning-enabled")){const t=e.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(t.length){const i=t.map(r=>`'${r.name}'`).join(", ");ae.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return aee.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const i of e)((t=this.fieldsIndex)==null?void 0:t.has(i))||ae.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:e});return a$(this.fieldsIndex,e)}}}}const JA=()=>ae.getLogger("esri.layers.support.labelingInfo"),UOe=/\[([^[\]]+)\]/gi;function XA(e,t,i){return e?e.map(r=>{var n;const s=new J_;if(s.read(r,i),s.labelExpression){const o=t.fields||((n=t.layerDefinition)==null?void 0:n.fields)||this.fields;s.labelExpression=s.labelExpression.replaceAll(UOe,(l,d)=>`[${GOe(d,o)}]`)}return s}):null}function GOe(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const s=t[r].name;if(s.toLowerCase()===i)return s}return e}const qOe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function B9e(e,t){const i=[];for(const r of e){const s=r.labelPlacement,n=qOe[t];if(!r.symbol)return JA().warn("No ILabelClass symbol specified."),[];if(!n)return JA().error(new B("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(n.includes(s))i.push(r);else{const o=n[0];s&&JA().warn(`Found invalid label placement type ${s} for ${t}. Defaulting to ${o}`);const l=r.clone();l.labelPlacement=o,i.push(l)}}return i}const BOe="relationships/",HOe="expression/";let hs=class extends Me{constructor(t){super(t),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||A_(()=>Va()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??D(()=>import("./featureUtils-CtJcvo4a.js"),[]).then(t=>this._featureUtils=t)}get calculatedExpressions(){var i;const t=new _e;if(!this.expressionsUsedInTitle.length)return t;if(!((i=this._arcadeTask)!=null&&i.value)){for(const r of this.expressionsUsedInTitle??[])t.push({name:r.name,invalid:!0});return t}for(const r of this.expressionsUsedInTitle)try{const s=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(s.isAsync){t.push({name:r.name,invalid:!0});break}t.push({name:r.name,syntax:s,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(s,{vars:{$feature:"any"}})})}catch{t.push({name:r.name,invalid:!0});break}return t}get expressionsUsedInTitle(){var i,r,s;let t=((i=this.effectivePopupTemplate)==null?void 0:i.title)??"";return typeof t!="string"?[]:(t=t.toLowerCase(),((s=(r=this.effectivePopupTemplate)==null?void 0:r.expressionInfos)==null?void 0:s.filter(n=>t.includes(`{expression/${n.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(t=>t.invalid===!0)}get requiredFields(){var r,s;const t=new Set;if((r=this._arcadeTask)!=null&&r.value&&!this.hasBadExpressions)for(const n of((s=this.calculatedExpressions)==null?void 0:s.toArray())??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(n.syntax);for(const l of o){const d=l.split("."),h=this.fieldsIndex.get(d.at(-1)??"");h&&t.add(h.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const n of i){const o=this.fieldsIndex.get(n);o&&t.add(o.name)}return t}get titleFromDisplayField(){var i,r;let t="";return this.displayField&&(t=((i=this.fieldsIndex.get(this.displayField))==null?void 0:i.name)??""),t||(t=((r=this.fieldsIndex.get(this.objectIdField))==null?void 0:r.name)??""),t?`{${t}}`:""}get workingTitle(){const t=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return t===""||t==null||this.hasBadExpressions||typeof t!="string"?this.titleFromDisplayField:t}async getTitle(t,i,r){var s;try{const{attributes:n}=i,o=(r==null?void 0:r.timeZone)??"system",[{substituteFieldsInLinksAndAttributes:l}]=await Promise.all([this.featureUtilsPromise,(s=this._arcadeTask)==null?void 0:s.promise]);if(r.fetchMissingFields&&(i=await this._checkAndReQueryGraphic(t,i)),this.workingTitle&&this.fieldInfoMap){const d=this._createFormattedAttributes(t,i,o).global;return l({attributes:n,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:d,layer:t,text:this.workingTitle})}return""}catch{}return""}async _checkAndReQueryGraphic(t,i){const r=i.getObjectId();if(r==null)return i;if(!P0e(this.requiredFields,i)){const s=t.createQuery();s.where="1=1",s.outFields=[...this.requiredFields],s.objectIds=[r];const n=await t.queryFeatures(s);if((n==null?void 0:n.features.length)===1)return n.features[0]}return i}_createFieldInfoMap(t){const i=new Map;if(!t)return i;for(const r of t){if(!r.fieldName)continue;const s=this.fieldsIndex.get(r.fieldName),n=(s==null?void 0:s.name)??r.fieldName;r.fieldName=n,i.set(n.toLowerCase(),r)}return i}_createFormattedAttributes(t,i,r="system"){var l,d;const s=((l=this.effectivePopupTemplate)==null?void 0:l.fieldInfos)??[],n={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((d=this._arcadeTask)!=null&&d.value)){const h=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,t,null);for(const y of this.calculatedExpressions)try{n[`expression/${y.name}`]=y.func({vars:{$feature:h}})}catch{}}const o={...i.attributes,...n};return{global:this._featureUtils.formatAttributes({fieldInfos:s,attributes:o,graphic:i,timeZone:r,layer:t,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(t){return kk(t).filter(i=>!(i.indexOf(BOe)===0||i.indexOf(HOe)===0))}};c([p({readOnly:!0})],hs.prototype,"_arcadeTask",null),c([p()],hs.prototype,"_featureUtils",void 0),c([p({readOnly:!0})],hs.prototype,"featureUtilsPromise",null),c([p({readOnly:!0})],hs.prototype,"calculatedExpressions",null),c([p()],hs.prototype,"displayField",void 0),c([p()],hs.prototype,"effectivePopupTemplate",void 0),c([p()],hs.prototype,"expressionsUsedInTitle",null),c([p()],hs.prototype,"fieldsIndex",void 0),c([p()],hs.prototype,"fieldInfoMap",null),c([p()],hs.prototype,"fields",void 0),c([p()],hs.prototype,"objectIdField",void 0),c([p()],hs.prototype,"requiredFields",null),hs=c([I("esri.layers.support.TitleCreator")],hs);const WOe=hs,Dm=[];function ZOe(e,t){if(yE(e.url??""))return!0;const{wkid:i}=t;for(const r of Dm){if((e.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Dm.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),Dm.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Dm.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Dm.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Dm.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function YOe(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await DT(r.populateFromStyle());if(yi(i),s.ok===!1){const n=s.error;t!=null&&t.messages&&t.messages.push(new Qn("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}function JOe({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:s},n){if(!i)return null;const o=eLe({editFieldsInfo:t,fields:i,objectIdField:r},n);if(!o.length)return null;const l=rLe({titleBase:s,fields:i,displayField:e}),d=iLe();return new eg({title:l,content:d,fieldInfos:o})}function W9e(e){var h;const{title:t,graphic:i}=e??{},{attributes:r,sourceLayer:s}=i??{},n=s&&"displayField"in s?s.displayField:null,o=n?r==null?void 0:r[n]:null,l=o!=null?JSON.stringify(o):null,d=(h=i==null?void 0:i.getObjectId())==null?void 0:h.toString();return t||l||d||""}const XOe=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):p0e(e,t);function QOe({fields:e,ignoreFieldTypes:t,sortDisabled:i}){const r=e;return t&&(e=e.filter(s=>!t.includes(s.type))),e===r&&(e=e.slice()),i!==!0&&e.sort(KOe),e}function KOe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:T7(e)?-1:T7(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function eLe(e,t){const i=t==null?void 0:t.visibleFieldNames;return QOe({fields:e.fields??[],ignoreFieldTypes:(t==null?void 0:t.ignoreFieldTypes)||sLe,sortDisabled:t==null?void 0:t.sortDisabled}).map(r=>new Dk({fieldName:r.name,isEditable:h0e(r,e),label:r.alias,format:tLe(r),visible:XOe(r,{...e,visibleFieldNames:i})}))}function tLe(e){switch(e.type){case"small-integer":case"integer":case"single":return new i2({digitSeparator:!0,places:0});case"double":return new i2({digitSeparator:!0,places:2});case"string":return D0e(e.name)?new i2({digitSeparator:!0,places:0}):void 0;default:return}}function iLe(){return[new ky,new Py]}function rLe(e){const t=r0e(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}function T7(e){var i;return(e.name&&e.name.toLowerCase())==="name"?!0:((i=e.alias)==null?void 0:i.toLowerCase())==="name"}const sLe=["geometry","blob","raster","guid","xml"];var Ym;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(Ym||(Ym={}));const Cr="FeatureLayer";function wS(e,t){return new B("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function $7(e){return e&&e instanceof _e}const QA=jOe();function KA(e,t,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Ie=class extends EIe(fOe(t3e(IOe(XMe(qMe(LMe(_Oe(FOe(zOe(kOe(POe(oMe(yOe(xOe(JQ(RMe(nMe(ut.ClonableMixin(pk))))))))))))))))))){constructor(...t){super(...t),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=tt.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=IT(async(i,r,s)=>{const{save:n,saveAs:o}=await D(()=>import("./featureLayerUtils-CbHtLCtx.js"),__vite__mapDeps([274,275,276,277,273,278,11]));switch(i){case Ym.SAVE:return n(this,r);case Ym.SAVE_AS:return o(this,s,r)}})}destroy(){var t;(t=this.source)==null||t.destroy()}normalizeCtorArgs(t,i){return typeof t=="string"?{url:t,...i}:t}load(t){var s;const i=t!=null?t.signal:null;if((s=this.portalItem)!=null&&s.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(n=>this.initLayerProperties(n))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},t).catch(Ia).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const n=await this._fetchFirstValidLayerId(i);n!=null&&(this.layerId=n)}if(!this.url&&!this._hasMemorySource())throw new B("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>qAe(this,"load",t));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const t=this._get("_titleCreator");return Zt(t),new WOe({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(t,i){return i=i.layerDefinition||i,KK(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var t;return!(this.loaded&&!((t=this.capabilities)!=null&&t.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(t,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(t,i){this._writeEditingEnabled(t,i,!1)}writeEditingEnabledToWebMap(t,i,r,s){this._writeEditingEnabled(t,i,!0,s)}get effectiveEditingEnabled(){return WAe(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(t,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(t,i,r,s){s!=null&&s.writeLayerSchema&&$r(r,t?"Table":"Feature Layer",i)}readGlobalIdField(t,i){return UK(i.layerDefinition||i)}readObjectIdField(t,i){return GK(i.layerDefinition||i)}get parsedUrl(){const t=ur(this.url);return t!=null&&(this.dynamicDataSource!=null?t.path=Sy(t.path,"dynamicLayer"):this.layerId!=null&&(t.path=Sy(t.path,this.layerId.toString()))),t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){FV(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,i,r){var n;i=i.layerDefinition||i;const s=(n=i.drawingInfo)==null?void 0:n.renderer;if(s){const o=l_(s,i,r)??void 0;return o||ae.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),o}return qD(i,r)}set source(t){const i=this._get("source");i!==t&&($7(i)&&this._resetMemorySource(i),$7(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof _e?new Ul({layer:this,items:t}):t:null}readSource(t,i){const r=sK.fromJSON(i.featureSet);return new Ul({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(t,i){const r=i.editFieldsInfo,s=r==null?void 0:r.creatorField,n=r==null?void 0:r.editorField;return t=t==null?void 0:t.map(o=>KD.fromJSON(o)),this._fixTemplates(t,s),this._fixTemplates(t,n),t}readTitle(t,i){var n,o,l;const r=((n=i.layerDefinition)==null?void 0:n.name)??i.name,s=i.title||((o=i.layerDefinition)==null?void 0:o.title);if(r){const d=(l=this.portalItem)==null?void 0:l.title;if(this.sublayerTitleMode==="item-title")return this.url?Dae(this.url,r):r;let h=r;if(!h&&this.url){const y=Wy(this.url);y!=null&&(h=y.title)}return h?(this.sublayerTitleMode==="item-title-and-service-name"&&d&&d!==h&&(h=d+" - "+h),PP(h)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(t,i){var r;return i.title||((r=i.layerDefinition)==null?void 0:r.name)}readTypeIdField(t,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const s=i.fields.find(n=>n.name.toLowerCase()===r);s&&(r=s.name)}return r}readTypes(t,i){t=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,s=r==null?void 0:r.creatorField,n=r==null?void 0:r.editorField;return t==null?void 0:t.map(o=>(o=zee.fromJSON(o),this._fixTemplates(o.templates,s),this._fixTemplates(o.templates,n),o))}readVisible(t,i){var r;return((r=i.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(t,i){const r=await $Ae(this,t,i,Cr);return this.lastEditsEventDate=new Date,r}async updateAttachment(t,i,r){const s=await xAe(this,t,i,r,Cr);return this.lastEditsEventDate=new Date,s}async applyEdits(t,i){return MAe(this,t,i)}async uploadAssets(t,i){return AAe(this,t,i)}on(t,i){return super.on(t,i)}createPopupTemplate(t){return JOe(this,t)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});const{default:i}=await ZG(D(()=>import("./FeatureLayerSource-DYI_jrr4.js"),__vite__mapDeps([279,60,67,280,281,63,112,62,113,282,283,46,38,284,285,74,72,73,7,28,27,33,170,32])),t);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:t})}createQuery(){const t=FAe(this);t.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=DZ(this.definitionExpression,i);return t.where=r||"1=1",t}async deleteAttachments(t,i){const r=await IAe(this,t,i,Cr);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(t){return CAe(this,t,Cr)}getFeatureTitle(t,i={timeZone:"system",fetchMissingFields:!1}){return this._titleCreator.getTitle(this,t,i)}getFeatureType(t){return HK(this.types,this.typeIdField,t)}getFieldDomain(t,i){var r;return zAe(this,t,i,((r=this.getField(t))==null?void 0:r.domain)??null)}async queryAttachments(t,i){return OAe(this,t,i,Cr)}async queryFeatures(t,i){const r=await this.load(),s=await r.source.queryFeatures(su.from(t)??r.createQuery(),i);if(s!=null&&s.features)for(const n of s.features)n.layer=n.sourceLayer=r;return s}async queryObjectIds(t,i){return(await LAe(this,t,i,Cr)).filter(PV)}async queryFeatureCount(t,i){return RAe(this,t,i,Cr)}async queryExtent(t,i){return PAe(this,t,i,Cr)}async queryRelatedFeatures(t,i){return kAe(this,t,i,Cr)}async queryRelatedFeaturesCount(t,i){return DAe(this,t,i,Cr)}async queryTopFeatures(t,i){var l;const{source:r,capabilities:s}=await this.load();if(!r.queryTopFeatures||!((l=s==null?void 0:s.query)!=null&&l.supportsTopFeaturesQuery))throw new B(Cr,"Layer source does not support queryTopFeatures capability");const n=await D(()=>import("./TopFeaturesQuery-CWBgMH1m.js"),[]),o=await r.queryTopFeatures(n.default.from(t),i);if(o!=null&&o.features)for(const d of o.features)d.layer=d.sourceLayer=this;return o}async queryAttributeBins(t,i){var l;const{source:r,capabilities:s}=await this.load();if(!r.queryAttributeBins||!((l=s==null?void 0:s.operations)!=null&&l.supportsQueryBins))throw new B(Cr,"Layer source does not support queryAttributeBins capability");XAe(t,s,Cr);const n=await D(()=>import("./AttributeBinsQuery-BE5_jElD.js"),__vite__mapDeps([218,30,24,40])),o=await r.queryAttributeBins(n.default.from(t),i);if(o.features)for(const d of o.features)d.layer=d.sourceLayer=this;return o}async queryTopObjectIds(t,i){const{source:r,capabilities:s}=await this.load();if(!r.queryTopObjectIds||!(s!=null&&s.query.supportsTopFeaturesQuery))throw new B(Cr,"Layer source does not support queryTopObjectIds capability");const n=await D(()=>import("./TopFeaturesQuery-CWBgMH1m.js"),[]);return(await r.queryTopObjectIds(n.default.from(t),i)).filter(PV)}async queryTopFeaturesExtent(t,i){var o;const{source:r,capabilities:s}=await this.load();if(!r.queryTopExtents||!((o=s==null?void 0:s.query)!=null&&o.supportsTopFeaturesQuery))throw new B(Cr,"Layer source does not support queryTopExtents capability");const n=await D(()=>import("./TopFeaturesQuery-CWBgMH1m.js"),[]);return r.queryTopExtents(n.default.from(t),i)}async queryTopFeatureCount(t,i){var o;const{source:r,capabilities:s}=await this.load();if(!r.queryTopCount||!((o=s==null?void 0:s.query)!=null&&o.supportsTopFeaturesQuery))throw new B(Cr,"Layer source does not support queryFeatureCount capability");const n=await D(()=>import("./TopFeaturesQuery-CWBgMH1m.js"),[]);return r.queryTopCount(n.default.from(t),i)}read(t,i){const r=t.featureCollection;if((r||t.type==="Feature Collection")&&(this.resourceInfo=t),r){const s=r.layers;s&&s.length===1&&(super.read(s[0],i),r.showLegend!=null&&super.read({showLegend:r.showLegend},i))}super.read(t,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:s,messages:n}=i;if(this.dynamicDataSource)return n==null||n.push(wS(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&s!=="tables")return n==null||n.push(wS(this,`a table source can only be written to tables, not ${s}`)),null;if(this._hasMemorySource())return n==null||n.push(wS(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&s==="tables")return n==null||n.push(wS(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(t,i)}clone(){if(this._hasMemorySource())throw new B(Cr,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||ZOe(this,t))}async save(t){return this._debouncedSaveOperations(Ym.SAVE,t)}async saveAs(t,i){return this._debouncedSaveOperations(Ym.SAVE_AS,i,t)}_readEditingEnabled(t,i,r){var n;let s=(n=t.layerDefinition)==null?void 0:n.capabilities;return s?this._hasEditingCapability(s):(s=t.capabilities,i&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(t,i,r,s){var n,o;if(!t){const l=(o=(n=this.capabilities)==null?void 0:n.operations)!=null&&o.supportsSync?"Query,Sync":"Query";$r("layerDefinition.capabilities",l,i),r&&!(s!=null&&s.writeLayerSchema)&&(i.capabilities=l)}}_fetchFirstValidLayerId(t){return Rt(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(i=>{const r=i.data;if(r)return this.findFirstValidLayerId(r)})}async initLayerProperties(t){var i;return this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),FV(this.renderer,this.fieldsIndex),qZ(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),YOe(this,{origin:"service"})}async hasDataChanged(){return NAe(this)}async fetchPublishingStatus(){const t=this.source;return t!=null&&t.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,r;const t=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||t.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(s=>s.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,i){t&&t.forEach(r=>{var n;const s=(n=r.prototype)==null?void 0:n.attributes;s&&i&&delete s[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new B("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new B("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([t.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),t.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(t){return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}};c([p({clonable:!1,readOnly:!0})],Ie.prototype,"_titleCreator",null),c([p(m3e)],Ie.prototype,"attributeTableTemplate",void 0),c([pe("service","capabilities")],Ie.prototype,"readCapabilities",null),c([p({json:{origins:{"web-scene":{write:!1}},write:!0}})],Ie.prototype,"charts",void 0),c([p({readOnly:!0})],Ie.prototype,"createQueryVersion",null),c([p({json:{read:{source:"layerDefinition.copyrightText"}}})],Ie.prototype,"copyright",void 0),c([p({json:{read:{source:"layerDefinition.displayField"}}})],Ie.prototype,"displayField",void 0),c([p({types:Nc,readOnly:!0})],Ie.prototype,"defaultSymbol",void 0),c([p({type:Fo})],Ie.prototype,"dynamicDataSource",void 0),c([p({type:Boolean})],Ie.prototype,"editingEnabled",null),c([pe(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ie.prototype,"readEditingEnabled",null),c([pe("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ie.prototype,"readEditingEnabledFromWebMap",null),c([be(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ie.prototype,"writeEditingEnabled",null),c([be("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ie.prototype,"writeEditingEnabledToWebMap",null),c([p({readOnly:!0})],Ie.prototype,"effectiveEditingEnabled",null),c([p({clonable:!1,readOnly:!0})],Ie.prototype,"featureTitleFields",null),c([p({...QA.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:KA}}}}})],Ie.prototype,"fields",void 0),c([p(QA.fieldsIndex)],Ie.prototype,"fieldsIndex",void 0),c([p({type:eMe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ie.prototype,"formTemplate",void 0),c([p({json:{read:{source:"layerDefinition.extent"}}})],Ie.prototype,"fullExtent",void 0),c([p({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:KA,writer(e,t,i){const r=e?_R.toJSON(e):null;r&&$r(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:_R.read}}})],Ie.prototype,"geometryType",void 0),c([p({json:{read:{source:"layerDefinition.hasM"}}})],Ie.prototype,"hasM",void 0),c([p({json:{read:{source:"layerDefinition.hasZ"}}})],Ie.prototype,"hasZ",void 0),c([p(h3e)],Ie.prototype,"id",void 0),c([p({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ie.prototype,"infoFor3D",void 0),c([p({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ie.prototype,"isTable",void 0),c([pe("service","isTable",["type","geometryType"]),pe("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ie.prototype,"readIsTable",null),c([be("web-map","isTable")],Ie.prototype,"writeIsTable",null),c([p(P$)],Ie.prototype,"labelsVisible",void 0),c([p({type:[J_],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:XA,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:XA,write:{enabled:!0,layerContainerTypes:ci}}},name:"layerDefinition.drawingInfo.labelingInfo",read:XA,write:!0}})],Ie.prototype,"labelingInfo",void 0),c([p((()=>{const e=q(d3e);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){$r(r,YT(t),i)}}},e})())],Ie.prototype,"opacity",void 0),c([p(u3e)],Ie.prototype,"legendEnabled",void 0),c([p({type:["show","hide"],json:(()=>{const e=q(vK.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Ie.prototype,"listMode",void 0),c([pe("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ie.prototype,"readGlobalIdField",null),c([p({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:KA}}}}})],Ie.prototype,"objectIdField",void 0),c([pe("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ie.prototype,"readObjectIdField",null),c([p({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:ci}}})],Ie.prototype,"operationalLayerType",void 0),c([p(QA.outFields)],Ie.prototype,"outFields",void 0),c([p({readOnly:!0})],Ie.prototype,"parsedUrl",null),c([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ie.prototype,"path",void 0),c([p(R$)],Ie.prototype,"popupEnabled",void 0),c([p({type:eg,json:{name:"popupInfo",write:!0}})],Ie.prototype,"popupTemplate",void 0),c([p({readOnly:!0})],Ie.prototype,"defaultPopupTemplate",null),c([p({types:X_,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:YCe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:ci,overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Ie.prototype,"renderer",null),c([pe("service","renderer",["drawingInfo.renderer","defaultSymbol"]),pe("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ie.prototype,"readRenderer",null),c([p()],Ie.prototype,"resourceInfo",void 0),c([p((()=>{const e=q(a3e);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Ie.prototype,"screenSizePerspectiveEnabled",void 0),c([p({clonable:!1})],Ie.prototype,"source",null),c([mt("source")],Ie.prototype,"castSource",null),c([pe("portal-item","source",["featureSet"]),pe("web-map","source",["featureSet"])],Ie.prototype,"readSource",null),c([p({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ie.prototype,"spatialReference",void 0),c([p({type:Number})],Ie.prototype,"subtypeCode",void 0),c([p({type:[KD]})],Ie.prototype,"templates",void 0),c([pe("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ie.prototype,"readTemplates",null),c([p({type:Vee})],Ie.prototype,"timeInfo",void 0),c([p()],Ie.prototype,"title",void 0),c([pe("service","title",["name"]),pe("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ie.prototype,"readTitle",null),c([pe("web-map","title",["layerDefinition.name","title"])],Ie.prototype,"readTitleFromWebMap",null),c([p({type:String})],Ie.prototype,"sublayerTitleMode",void 0),c([p({json:{read:!1}})],Ie.prototype,"type",void 0),c([p({type:String})],Ie.prototype,"typeIdField",void 0),c([pe("service","typeIdField"),pe("typeIdField",["layerDefinition.typeIdField"])],Ie.prototype,"readTypeIdField",null),c([p({type:[zee]})],Ie.prototype,"types",void 0),c([pe("service","types",["types"]),pe("types",["layerDefinition.types"])],Ie.prototype,"readTypes",null),c([p({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ie.prototype,"visible",void 0),c([pe("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ie.prototype,"readVisible",null),Ie=c([I("esri.layers.FeatureLayer")],Ie);const jee=Ie,Y9e=Object.freeze(Object.defineProperty({__proto__:null,default:jee},Symbol.toStringTag,{value:"Module"}));async function nLe(){return await new Promise(e=>setTimeout(e,10)),["https://services1.arcgis.com/6lR7mtkopfEfHUZf/arcgis/rest/services/Designated_Wetlands/FeatureServer/0"]}let SS=null;const Uee={async getLayers(){return SS||(SS=(async()=>{const[e]=await nLe();return new jee({url:e,outFields:["SOIL_TYPE"],renderer:new La({symbol:new qa({color:[76,129,205,191],outline:{type:"simple-line",style:"dash",width:2,color:[255,0,0,1]}})})})})(),SS)}};function oLe(){const e=Qr.useRef(null),[t,i]=Qr.useState(null);return Qr.useEffect(()=>{let r=!0;return(async()=>{const s=await Uee.getLayers();if(!e.current)return;const n=new EW({basemap:"topo",layers:[s]}),o=new Ixe({container:e.current,map:n});return o.when(()=>{s.when(()=>o.goTo(s.fullExtent))}),r&&i(o),()=>o.destroy()})(),()=>{r=!1,i(null)}},[]),{mapDivRef:e,view:t}}function aLe(){const[e,t]=Qr.useState(null);return Qr.useEffect(()=>{(async()=>{const r=await Uee.getLayers();t(r)})()},[]),Qr.useMemo(()=>e?{labelWater:r=>{const s=r;e.labelingInfo=[{labelExpressionInfo:{expression:`Iif($feature.${s}, 'TRUE', 'FALSE')`},symbol:{type:"text",color:"black",haloColor:"white",haloSize:"3px",font:{family:"Noto Sans",size:14,weight:"bold"}}}],e.labelsVisible=!0,e.refresh()}}:null,[e])}function Gee(){const e=aLe(),[t,i]=Qr.useState("SOIL_TYPE == 'WATER'");if(!e)return null;const{labelWater:r}=e;return li.jsxs("div",{className:"esri-widget",style:{padding:8,background:"white"},children:[li.jsx("calcite-input",{value:t,oncalciteInputInput:s=>i(s.target.value)}),li.jsx("calcite-label",{style:{marginTop:".25rem",marginLeft:".25rem"},children:"Enter expression"}),li.jsx("calcite-button",{"icon-end":"launch",style:{marginTop:"0.5rem"},onClick:()=>r(t),children:"Execute query"})]})}const lLe={resolveDirective:ym.V,ElementPart:ym.F,TemplateInstance:ym.R,isIterable:ym.D,ChildPart:ym.I};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{TemplateInstance:uLe,isIterable:cLe,resolveDirective:qee,ChildPart:F0,ElementPart:dLe}=lLe,hLe=(e,t,i={})=>{if(t._$litPart$!==void 0)throw Error("container already contains a live render");let r,s,n;const o=[],l=document.createTreeWalker(t,NodeFilter.SHOW_COMMENT);let d;for(;(d=l.nextNode())!==null;){const h=d.data;if(h.startsWith("lit-part")){if(o.length===0&&r!==void 0)throw Error(`There must be only one root part per container. Found a part marker (${d}) when we already have a root part marker (${s})`);n=pLe(e,d,o,i),r===void 0&&(r=n),s??(s=d)}else if(h.startsWith("lit-node"))mLe(d,o,i);else if(h.startsWith("/lit-part")){if(o.length===1&&n!==r)throw Error("internal error");n=fLe(d,n,o)}}if(r===void 0){const h=t instanceof ShadowRoot?"{container.host.localName}'s shadow root":t instanceof DocumentFragment?"DocumentFragment":t.localName;console.error(`There should be exactly one root part in a render container, but we didn't find any in ${h}.`)}t._$litPart$=r},pLe=(e,t,i,r)=>{let s,n;if(i.length===0)n=new F0(t,null,void 0,r),s=e;else{const o=i[i.length-1];if(o.type==="template-instance")n=new F0(t,null,o.instance,r),o.instance._$AV.push(n),s=o.result.values[o.instancePartIndex++],o.templatePartIndex++;else if(o.type==="iterable"){n=new F0(t,null,o.part,r);const l=o.iterator.next();if(l.done)throw s=void 0,o.done=!0,Error("Unhandled shorter than expected iterable");s=l.value,o.part._$AH.push(n)}else n=new F0(t,null,o.part,r)}if(s=qee(n,s),s===nu)i.push({part:n,type:"leaf"});else if(k$e(s))i.push({part:n,type:"leaf"}),n._$AH=s;else if(D$e(s)){if(N$e(s))throw Error("compiled templates are not supported");const o="lit-part "+yLe(s);if(t.data!==o)throw Error("Hydration value mismatch: Unexpected TemplateResult rendered to part");{const l=F0.prototype._$AC(s),d=new uLe(l,n);i.push({type:"template-instance",instance:d,part:n,templatePartIndex:0,instancePartIndex:0,result:s}),n._$AH=d}}else cLe(s)?(i.push({part:n,type:"iterable",value:s,iterator:s[Symbol.iterator](),done:!1}),n._$AH=[]):(i.push({part:n,type:"leaf"}),n._$AH=s??"");return n},fLe=(e,t,i)=>{if(t===void 0)throw Error("unbalanced part marker");t._$AB=e;const r=i.pop();if(r.type==="iterable"&&!r.iterator.next().done)throw Error("unexpected longer than expected iterable");if(i.length>0)return i[i.length-1].part},mLe=(e,t,i)=>{const r=/lit-node (\d+)/.exec(e.data),s=parseInt(r[1]),n=e.nextElementSibling;if(n===null)throw Error("could not find node for attribute parts");n.removeAttribute("defer-hydration");const o=t[t.length-1];if(o.type!=="template-instance")throw Error("Hydration value mismatch: Primitive found where TemplateResult expected. This usually occurs due to conditional rendering that resulted in a different value or template being rendered between the server and client.");{const l=o.instance;for(;;){const d=l._$AD.parts[o.templatePartIndex];if(d===void 0||d.type!==Yh.ATTRIBUTE&&d.type!==Yh.ELEMENT||d.index!==s)break;if(d.type===Yh.ATTRIBUTE){const h=new d.ctor(n,d.name,d.strings,o.instance,i),y=F$e(h)?o.result.values[o.instancePartIndex]:o.result.values,v=!(h.type===Yh.EVENT||h.type===Yh.PROPERTY);h._$AI(y,h,o.instancePartIndex,v),o.instancePartIndex+=d.strings.length-1,l._$AV.push(h)}else{const h=new dLe(n,o.instance,i);qee(h,o.result.values[o.instancePartIndex++]),l._$AV.push(h)}o.templatePartIndex++}}},yLe=e=>{const t=new Uint32Array(2).fill(5381);for(const r of e.strings)for(let s=0;s<r.length;s++)t[s%2]=33*t[s%2]^r.charCodeAt(s);const i=String.fromCharCode(...new Uint8Array(t.buffer));return btoa(i)};globalThis.litElementHydrateSupport=({LitElement:e})=>{const t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"observedAttributes").get;Object.defineProperty(e,"observedAttributes",{get(){return[...t.call(this),"defer-hydration"]}});const i=e.prototype.attributeChangedCallback;e.prototype.attributeChangedCallback=function(o,l,d){o==="defer-hydration"&&d===null&&r.call(this),i.call(this,o,l,d)};const r=e.prototype.connectedCallback;e.prototype.connectedCallback=function(){this.hasAttribute("defer-hydration")||r.call(this)};const s=e.prototype.createRenderRoot;e.prototype.createRenderRoot=function(){return this.shadowRoot?(this._$AG=!0,this.shadowRoot):s.call(this)};const n=Object.getPrototypeOf(e.prototype).update;e.prototype.update=function(o){const l=this.render();if(n.call(this,o),this._$AG){this._$AG=!1;for(let d=0;d<this.attributes.length;d++){const h=this.attributes[d];if(h.name.startsWith("hydrate-internals-")){const y=h.name.slice(18);this.removeAttribute(y),this.removeAttribute(h.name)}}hLe(l,this.renderRoot,this.renderOptions)}else yQ(l,this.renderRoot,this.renderOptions)}};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.1.0 */const gLe=DTe(TQ,{"calcite-accordion":[()=>D(()=>import("./customElement-DcdL8QWj.js"),__vite__mapDeps([286,263])),"appearance,iconPosition,iconType,scale,selectionMode"],"calcite-accordion-item":[()=>D(()=>import("./customElement-D96ja0dD.js"),__vite__mapDeps([287,288,266,262,259,271,264])),"accordionParent:,description,expanded,heading,iconEnd,iconFlipRtl,iconPosition,iconStart,iconType,scale;setFocus"],"calcite-action":[()=>D(()=>import("./customElement-DbYIqRpr.js"),__vite__mapDeps([289,288,266,259,269,271,264,263,260])),"active,alignment,appearance,compact,disabled,dragHandle,icon,iconFlipRtl,indicator,label,loading,messageOverrides:,scale,text,textEnabled;setFocus"],"calcite-action-bar":[()=>D(()=>import("./customElement-B1o7I8Ko.js"),__vite__mapDeps([290,262,259,271,264,263,291,266,292,293,260,294])),"actionsEndGroupLabel,expandDisabled,expanded,layout,messageOverrides:,overflowActionsDisabled,overlayPositioning,position,scale;overflowActions,setFocus"],"calcite-action-group":[()=>D(()=>import("./customElement-Ds7zrC14.js"),__vite__mapDeps([295,271,264,293,262,259,260,292])),"columns,expanded,label,layout,menuFlipPlacements:,menuOpen,menuPlacement,messageOverrides:,overlayPositioning,scale;setFocus"],"calcite-action-menu":[()=>D(()=>import("./customElement-B535Z37d.js"),__vite__mapDeps([296,266,297,262,259,298,271,264,293])),"appearance,expanded,flipPlacements:,label,open,overlayPositioning,placement,scale;setFocus"],"calcite-action-pad":[()=>D(()=>import("./customElement-28ISmfpP.js"),__vite__mapDeps([299,262,259,271,264,291,266,292,293,263,260])),"actionsEndGroupLabel,expandDisabled,expanded,layout,messageOverrides:,overlayPositioning,position,scale;setFocus"],"calcite-alert":[()=>D(()=>import("./customElement-DTMSaIDo.js"),__vite__mapDeps([300,266,288,262,259,271,264,301,298,302,303,260])),"active,autoClose,autoCloseDuration,embedded,icon,iconFlipRtl,kind,label,messageOverrides:,numberingSystem,open,openAlertCount,placement,queue,scale;setFocus"],"calcite-autocomplete":[()=>D(()=>import("./customElement-BaW-DdxG.js"),__vite__mapDeps([304,266,305,306,307,262,259,294,269,302,270,268,260,308,263,309])),"alignment,autocomplete:,disabled,flipPlacements:,form,icon,iconFlipRtl,inputValue,label,loading,maxLength,messageOverrides:,minLength,name,open,overlayPositioning,pattern,placeholder,placement,prefixText,readOnly,required,scale,status,suffixText,validationIcon,validationMessage,validity:,value;reposition,scrollContentTo,selectText,setFocus"],"calcite-autocomplete-item":[()=>D(()=>import("./customElement-DSHNdRZl.js"),__vite__mapDeps([310,271,264,269,259,311])),"active,description,disabled,guid,heading,iconEnd,iconFlipRtl,iconStart,inputValueMatchPattern:,label,scale,value"],"calcite-autocomplete-item-group":[()=>D(()=>import("./customElement-Be_0ZB9r.js"),[]),"disableSpacing,heading,label,scale"],"calcite-avatar":[()=>D(()=>import("./customElement-b7sr0cPZ.js"),__vite__mapDeps([312,262,259,313,314])),"fullName,label,scale,thumbnail,userId,username"],"calcite-block":[()=>D(()=>import("./customElement-C76G5vBg.js"),__vite__mapDeps([315,288,266,262,259,269,316,267,271,264,302,306,307,294,260])),"collapsible,description,disabled,dragDisabled,dragHandle,expanded,heading,headingLevel,iconEnd,iconFlipRtl,iconStart,label,loading,menuFlipPlacements:,menuPlacement,messageOverrides:,moveToItems:,open,overlayPositioning,setPosition,setSize,sortHandleOpen,status;setFocus"],"calcite-block-group":[()=>D(()=>import("./customElement-Cr076y8U.js"),__vite__mapDeps([317,269,263,318,271,264,262,259,294])),"canPull:,canPut:,disabled,dragEnabled,group,label,loading;setFocus"],"calcite-block-section":[()=>D(()=>import("./customElement-BvnVRsEJ.js"),__vite__mapDeps([319,288,262,259,298,271,264,260])),"expanded,iconEnd,iconFlipRtl,iconStart,messageOverrides:,open,status,text,toggleDisplay;setFocus"],"calcite-button":[()=>D(()=>import("./customElement-Cqv8nDNZ.js"),__vite__mapDeps([265,266,267,268,262,259,269,270,271,264,263,260])),"alignment,appearance,disabled,download,form,href,iconEnd,iconFlipRtl,iconStart,kind,label,loading,messageOverrides:,name,rel,round,scale,splitChild,target,type,width;setFocus"],"calcite-card":[()=>D(()=>import("./customElement-CjKyL2R8.js"),__vite__mapDeps([320,266,262,259,271,264,269,298,260])),"disabled,label,loading,messageOverrides:,selectable,selected,selectionMode,thumbnailPosition;setFocus"],"calcite-card-group":[()=>D(()=>import("./customElement-B2caN8nB.js"),__vite__mapDeps([321,266,262,259,269])),"disabled,label,selectedItems:,selectionMode;setFocus"],"calcite-carousel":[()=>D(()=>import("./customElement-CFqduKVm.js"),__vite__mapDeps([322,266,305,262,259,269,271,264,263,323,314,297,260])),"arrowType,autoplay,autoplayDuration,controlOverlay,disabled,label,messageOverrides:,paused,selectedItem:;play,setFocus,stop"],"calcite-carousel-item":[()=>D(()=>import("./index-CaCkR99s.js").then(e=>e.c),__vite__mapDeps([324,259])),"label,selected"],"calcite-checkbox":[()=>D(()=>import("./customElement-C4dSFRJ5.js"),__vite__mapDeps([325,266,262,259,268,269,298,270,271,264])),"checked,disabled,form,hovered,indeterminate,label,name,required,scale,status,validity:,value;setFocus"],"calcite-chip":[()=>D(()=>import("./customElement-aCrlYhJ1.js"),__vite__mapDeps([326,266,262,259,271,264,269,298,260])),"appearance,closable,closed,closeOnDelete,disabled,icon,iconFlipRtl,interactive,kind,label,messageOverrides:,parentChipGroup:,scale,selected,selectionMode,value;setFocus"],"calcite-chip-group":[()=>D(()=>import("./customElement-CLzvbaDq.js"),__vite__mapDeps([327,266,262,259,269,271,264])),"disabled,label,scale,selectedItems:,selectionMode;setFocus"],"calcite-color-picker":[()=>D(()=>import("./customElement-BChYFJI3.js"),__vite__mapDeps([328,266,305,288,313,314,262,259,269,298,271,264,329,260,263,330,294])),"allowEmpty,alphaChannel,channelsDisabled,clearable,color:,disabled,format,hexDisabled,messageOverrides:,numberingSystem,savedDisabled,scale,storageId,value;setFocus"],"calcite-color-picker-hex-input":[()=>D(()=>import("./customElement-DRu_jKdQ.js"),__vite__mapDeps([331,266,288,313,314,262,259,271,264])),"allowEmpty,alphaChannel,hexLabel,messages:,numberingSystem,scale,value;setFocus"],"calcite-color-picker-swatch":[()=>D(()=>import("./customElement-B1oYDGYC.js"),__vite__mapDeps([332,288,313,314,262,259])),"active,color,scale"],"calcite-combobox":[()=>D(()=>import("./customElement-CWmunMYz.js"),__vite__mapDeps([333,288,334,335,266,336,309,294,262,259,306,307,268,269,270,271,264,263,302,308,260,337])),"allowCustomValues,clearDisabled,disabled,filteredItems:,filterProps:,filterText,flipPlacements:,form,label,maxItems,messageOverrides:,name,open,overlayPositioning,placeholder,placeholderIcon,placeholderIconFlipRtl,readOnly,required,scale,selectedItems:,selectionDisplay,selectionMode,status,validationIcon,validationMessage,validity:,value;reposition,setFocus"],"calcite-combobox-item":[()=>D(()=>import("./customElement-DbjulYVa.js"),__vite__mapDeps([338,288,259,269,337,262,271,264,311])),"active,ancestors:,description,disabled,filterDisabled,filterTextMatchPattern:,guid,heading,icon,iconFlipRtl,itemHidden,label,metadata:,scale,selected,selectionMode,shortHeading,textLabel,value"],"calcite-combobox-item-group":[()=>D(()=>import("./customElement-_eQiAyQ4.js"),__vite__mapDeps([339,259,337,262])),"afterEmptyGroup,ancestors:,itemHidden,label,scale"],"calcite-date-picker":[()=>D(()=>import("./customElement-D8I7lj7z.js"),__vite__mapDeps([340,341,301,298,271,264,262,259,260,342])),"activeDate:,activeRange,headingLevel,layout,max,maxAsDate:,messageOverrides:,min,minAsDate:,monthStyle,numberingSystem,proximitySelectionDisabled,range,scale,value,valueAsDate:;reset,setFocus"],"calcite-date-picker-day":[()=>D(()=>import("./customElement-BxL3hRSL.js"),__vite__mapDeps([343,341,301,298,262,259,269,271,264])),"active,currentMonth,dateTimeFormat:,day,disabled,endOfRange,highlighted,range,rangeEdge,rangeHover,scale,selected,startOfRange,value:;setFocus"],"calcite-date-picker-month":[()=>D(()=>import("./customElement-CexKHU4y.js"),__vite__mapDeps([344,266,288,341,301,298])),"activeDate:,dateTimeFormat:,endDate:,headingLevel,hoverRange:,layout,localeData:,max:,messages:,min:,monthStyle,range,scale,selectedDate:,startDate:"],"calcite-date-picker-month-header":[()=>D(()=>import("./customElement-BF4Vs_-c.js"),__vite__mapDeps([345,334,314,266,341,301,298,262,259])),"activeDate:,headingLevel,localeData:,max:,messages:,min:,monthStyle,position,scale,selectedDate:"],"calcite-dialog":[()=>D(()=>import("./customElement-3z2nPzUK.js"),__vite__mapDeps([346,288,347,266,262,259,271,264,263,348,302,349,260,350])),"beforeClose:,closeDisabled,description,dragEnabled,embedded,escapeDisabled,focusTrapDisabled,focusTrapOptions:,heading,headingLevel,kind,loading,menuOpen,messageOverrides:,modal,open,outsideCloseDisabled,overlayPositioning,placement,resizable,scale,width,widthScale;scrollContentTo,setFocus,updateFocusTrapElements"],"calcite-dropdown":[()=>D(()=>import("./index-MBQN_6jT.js").then(e=>e.c),__vite__mapDeps([351,266,262,259,306,307,294,269,298,271,264,263,302,348])),"closeOnSelectDisabled,disabled,flipPlacements:,maxItems,offsetDistance,offsetSkidding,open,overlayPositioning,placement,scale,selectedItems:,type,width,widthScale;reposition,setFocus"],"calcite-dropdown-group":[()=>D(()=>import("./index-CVDvUcnY.js").then(e=>e.c),__vite__mapDeps([352,263,353])),"groupTitle,position,scale,selectionMode"],"calcite-dropdown-item":[()=>D(()=>import("./customElement-Hld3HwJf.js"),__vite__mapDeps([354,266,262,259,271,264,269,353])),"disabled,href,iconEnd,iconFlipRtl,iconStart,label,rel,scale,selected,selectionMode,target;setFocus"],"calcite-fab":[()=>D(()=>import("./customElement-CZixkNAd.js"),__vite__mapDeps([355,266,262,259,269,271,264])),"appearance,disabled,icon,iconFlipRtl,kind,label,loading,scale,text,textEnabled;setFocus"],"calcite-filter":[()=>D(()=>import("./customElement-BVipwgcT.js"),__vite__mapDeps([356,266,336,309,294,269,271,264,260])),"disabled,filteredItems:,filterProps:,items:,label,messageOverrides:,placeholder,scale,value;filter,setFocus"],"calcite-flow":[()=>D(()=>import("./index-6-Oq11xS.js").then(e=>e.c),__vite__mapDeps([357,266,263,271,264,262,259])),"customItemSelectors;back,setFocus"],"calcite-flow-item":[()=>D(()=>import("./customElement-UtXu6HOx.js"),__vite__mapDeps([358,266,288,262,259,269,271,264,349,260])),"beforeBack:,beforeClose:,closable,closed,collapsed,collapseDirection,collapsible,description,disabled,heading,headingLevel,loading,menuOpen,messageOverrides:,overlayPositioning,scale,selected,showBackButton;scrollContentTo,setFocus"],"calcite-graph":[()=>D(()=>import("./customElement-Bpf6Y2ZG.js"),__vite__mapDeps([359,259,263])),"colorStops:,data:,highlightMax,highlightMin,max,min"],"calcite-handle":[()=>D(()=>import("./customElement-Jp2EiZT7.js"),__vite__mapDeps([360,266,271,264,269,260])),"blurUnselectDisabled,disabled,dragHandle,label,messageOverrides:,selected,setPosition,setSize;setFocus"],"calcite-icon":[()=>D(()=>import("./index-DZcWOJe1.js").then(e=>e.c),__vite__mapDeps([261,262,259,263,264])),"flipRtl,icon,preload,scale,textLabel"],"calcite-inline-editable":[()=>D(()=>import("./customElement-CDfqB3ah.js"),__vite__mapDeps([361,266,269,270,262,259,271,264,260])),"afterConfirm:,controls,disabled,editingEnabled,loading,messageOverrides:,scale;setFocus"],"calcite-input":[()=>D(()=>import("./customElement-iVlqJoC9.js"),__vite__mapDeps([362,334,288,266,267,262,259,268,269,298,270,271,264,301,308,260,363])),"accept,alignment,autocomplete:,clearable,disabled,editingEnabled,files:,form,groupSeparator,icon,iconFlipRtl,label,loading,localeFormat,max,maxLength,messageOverrides:,min,minLength,multiple,name,numberButtonType,numberingSystem,pattern,placeholder,prefixText,readOnly,required,scale,status,step,suffixText,type,validationIcon,validationMessage,validity:,value;selectText,setFocus"],"calcite-input-date-picker":[()=>D(()=>import("./customElement-DhmKilvU.js"),__vite__mapDeps([364,266,350,262,259,341,301,298,306,307,294,268,269,270,271,264,302,342,308,363,260])),"disabled,flipPlacements:,focusTrapDisabled,form,headingLevel,layout,max,maxAsDate:,messageOverrides:,min,minAsDate:,monthStyle,name,numberingSystem,open,overlayPositioning,placement,proximitySelectionDisabled,range,readOnly,required,scale,status,validationIcon,validationMessage,validity:,value,valueAsDate:;reposition,setFocus"],"calcite-input-message":[()=>D(()=>import("./customElement-pS-p-hJS.js"),__vite__mapDeps([365,262,259])),"icon,iconFlipRtl,scale,status"],"calcite-input-number":[()=>D(()=>import("./customElement-C0ehXVYl.js"),__vite__mapDeps([366,334,288,266,262,259,268,269,298,270,271,264,301,308,363,260])),"alignment,autocomplete:,clearable,disabled,editingEnabled,form,groupSeparator,icon,iconFlipRtl,integer,label,loading,localeFormat,max,maxLength,messageOverrides:,min,minLength,name,numberButtonType,numberingSystem,placeholder,prefixText,readOnly,required,scale,status,step,suffixText,validationIcon,validationMessage,validity:,value;selectText,setFocus"],"calcite-input-text":[()=>D(()=>import("./customElement-B6YSuS20.js"),__vite__mapDeps([367,334,266,262,259,268,269,270,271,264,308,363,260])),"alignment,autocomplete:,clearable,disabled,editingEnabled,form,icon,iconFlipRtl,label,loading,maxLength,messageOverrides:,minLength,name,pattern,placeholder,prefixText,readOnly,required,scale,status,suffixText,validationIcon,validationMessage,validity:,value;selectText,setFocus"],"calcite-input-time-picker":[()=>D(()=>import("./customElement-BTH_0I4p.js").then(e=>e.c),__vite__mapDeps([368,266,268,262,259,269,298,270,271,264,301,369,329,308,363,260])),"disabled,focusTrapDisabled,form,hourFormat,max,messageOverrides:,min,name,numberingSystem,open,overlayPositioning,placement,readOnly,required,scale,status,step,validationIcon,validationMessage,validity:,value;reposition,setFocus"],"calcite-input-time-zone":[()=>D(()=>import("./customElement-CNlyQwoH.js"),__vite__mapDeps([370,266,305,288,270,262,259,269,271,264,268,260,301,298])),"clearable,disabled,form,maxItems,messageOverrides:,mode,name,offsetStyle,open,overlayPositioning,readOnly,referenceDate,required,scale,status,validationIcon,validationMessage,validity:,value;setFocus"],"calcite-label":[()=>D(()=>import("./index-Nv0GAkVJ.js").then(e=>e.c),__vite__mapDeps([371,270,262,259])),"alignment,for,layout,scale"],"calcite-link":[()=>D(()=>import("./customElement-DVU0e-Ed.js"),__vite__mapDeps([372,266,267,262,259,269,271,264])),"disabled,download,href,iconEnd,iconFlipRtl,iconStart,rel,target;setFocus"],"calcite-list":[()=>D(()=>import("./customElement-CK0MFlSc.js"),__vite__mapDeps([373,266,288,262,259,269,263,374,318,375,271,264,301,298,260,294])),"canPull:,canPut:,disabled,displayMode,dragEnabled,filteredData:,filteredItems:,filterEnabled,filterLabel,filterPlaceholder,filterPredicate:,filterProps:,filterText,group,interactionMode,label,loading,messageOverrides:,numberingSystem,scale,selectedItems:,selectionAppearance,selectionMode;setFocus"],"calcite-list-item":[()=>D(()=>import("./customElement-CrvpFj0_.js"),__vite__mapDeps([376,288,266,262,259,269,271,264,260,374,377])),"active,bordered,closable,closed,description,disabled,displayMode,dragDisabled,dragHandle,expanded,filterHidden,iconEnd,iconFlipRtl,iconStart,interactionMode,label,messageOverrides:,metadata:,moveToItems:,open,scale,selected,selectionAppearance,selectionMode,setPosition,setSize,sortHandleOpen,unavailable,value;setFocus"],"calcite-list-item-group":[()=>D(()=>import("./index-D2Zh7x6i.js").then(e=>e.c),__vite__mapDeps([378,269,377])),"disabled,filterHidden,heading,scale"],"calcite-loader":[()=>D(()=>import("./index-BIJM5S-Y.js").then(e=>e.c),__vite__mapDeps([258,259,260])),"complete,inline,label,scale,text,type,value"],"calcite-menu":[()=>D(()=>import("./customElement-Bykk7IOh.js"),__vite__mapDeps([379,262,259,271,264,260])),"label,layout,messageOverrides:;setFocus"],"calcite-menu-item":[()=>D(()=>import("./customElement-BicITEYs.js"),__vite__mapDeps([380,288,266,262,259,271,264,260])),"active,breadcrumb,href,iconEnd,iconFlipRtl,iconStart,isTopLevelItem,label,layout,messageOverrides:,open,rel,target,text,topLevelMenuLayout;setFocus"],"calcite-meter":[()=>D(()=>import("./customElement-DIiZwY48.js"),__vite__mapDeps([381,288,266,268,262,259,301,298,263,260])),"appearance,disabled,fillType,form,groupSeparator,high,label,low,max,min,name,numberingSystem,rangeLabels,rangeLabelType,scale,unitLabel,value,valueLabel,valueLabelType"],"calcite-modal":[()=>D(()=>import("./customElement-DaXDDNIg.js"),__vite__mapDeps([382,288,266,307,262,259,271,264,263,302,260,350])),"beforeClose:,closeButtonDisabled,docked,escapeDisabled,focusTrapDisabled,focusTrapOptions:,fullscreen,kind,messageOverrides:,open,opened,outsideCloseDisabled,scale,widthScale;scrollContent,setFocus,updateFocusTrapElements"],"calcite-navigation":[()=>D(()=>import("./customElement-Cizma_Ls.js"),__vite__mapDeps([383,266,262,259,271,264])),"label,navigationAction;setFocus"],"calcite-navigation-logo":[()=>D(()=>import("./customElement-D6MJpT66.js"),__vite__mapDeps([384,288,271,264,316,267])),"active,description,heading,headingLevel,href,icon,iconFlipRtl,label,rel,target,thumbnail;setFocus"],"calcite-navigation-user":[()=>D(()=>import("./customElement-b_srAt8O.js"),__vite__mapDeps([385,288,271,264])),"active,fullName,label,textDisabled,thumbnail,userId,username;setFocus"],"calcite-notice":[()=>D(()=>import("./customElement-CS5gRLhJ.js"),__vite__mapDeps([386,266,262,259,271,264,303,302,260])),"closable,icon,iconFlipRtl,kind,messageOverrides:,open,scale,width;setFocus"],"calcite-option":[()=>D(()=>import("./customElement-DaF_0l1J.js"),__vite__mapDeps([387,263])),"disabled,label,selected,value"],"calcite-option-group":[()=>D(()=>import("./customElement-Cr690iSJ.js"),[]),"disabled,label"],"calcite-pagination":[()=>D(()=>import("./customElement-Dfz9SDqJ.js"),__vite__mapDeps([388,288,271,264,301,298,263,323,314,260])),"groupSeparator,messageOverrides:,numberingSystem,pageSize,scale,startItem,totalItems;goTo,nextPage,previousPage,setFocus"],"calcite-panel":[()=>D(()=>import("./customElement-B5pKWK5x.js"),__vite__mapDeps([389,288,266,262,259,269,271,264,263,293,316,267,306,307,294,260,349])),"beforeClose:,closable,closed,collapsed,collapseDirection,collapsible,description,disabled,heading,headingLevel,loading,menuFlipPlacements:,menuOpen,menuPlacement,messageOverrides:,overlayPositioning,scale;scrollContentTo,setFocus"],"calcite-popover":[()=>D(()=>import("./customElement-Dg0rxFuI.js"),__vite__mapDeps([390,288,266,306,307,262,259,294,302,316,267,271,264,263,391,260,350,298])),"autoClose,closable,flipDisabled,flipPlacements:,focusTrapDisabled,focusTrapOptions:,heading,headingLevel,label,messageOverrides:,offsetDistance,offsetSkidding,open,overlayPositioning,placement,pointerDisabled,referenceElement,scale,triggerDisabled;reposition,setFocus,updateFocusTrapElements"],"calcite-progress":[()=>D(()=>import("./customElement-CUBVyw3X.js"),__vite__mapDeps([392,262,259])),"label,reversed,text,type,value"],"calcite-radio-button":[()=>D(()=>import("./customElement-b0_twxfO.js"),__vite__mapDeps([393,266,297,262,259,268,269,270,271,264])),"checked,disabled,focused,form,hovered,label,name,required,scale,value;emitCheckedChange,setFocus"],"calcite-radio-button-group":[()=>D(()=>import("./customElement-C-fsEs7i.js"),__vite__mapDeps([394,263,271,264,308,262,259])),"disabled,layout,name,required,scale,selectedItem:,status,validationIcon,validationMessage;setFocus"],"calcite-rating":[()=>D(()=>import("./customElement-BZTot_Lz.js"),__vite__mapDeps([395,334,268,262,259,269,270,271,264,308,260])),"average,count,disabled,form,messageOverrides:,name,readOnly,required,scale,showChip,status,validationIcon,validationMessage,validity:,value;setFocus"],"calcite-scrim":[()=>D(()=>import("./customElement-BHf1F1s8.js"),__vite__mapDeps([396,266,263,262,259,260])),"loading,messageOverrides:"],"calcite-segmented-control":[()=>D(()=>import("./customElement-DdlGzyRk.js"),__vite__mapDeps([397,262,259,268,269,270,271,264,308])),"appearance,disabled,form,layout,name,required,scale,selectedItem:,status,validationIcon,validationMessage,validity:,value,width;setFocus"],"calcite-segmented-control-item":[()=>D(()=>import("./customElement-a5ljXZmr.js"),__vite__mapDeps([398,262,259])),"appearance,checked,iconEnd,iconFlipRtl,iconStart,layout,scale,value"],"calcite-select":[()=>D(()=>import("./customElement-aEX9LMNF.js"),__vite__mapDeps([399,266,262,259,268,269,270,271,264,263,308])),"disabled,form,label,name,required,scale,selectedOption:,status,validationIcon,validationMessage,validity:,value,width;setFocus"],"calcite-sheet":[()=>D(()=>import("./customElement-CZh3tF1s.js"),__vite__mapDeps([400,266,288,347,262,259,271,264,263,302,348,329,260,350])),"beforeClose:,displayMode,embedded,escapeDisabled,focusTrapDisabled,focusTrapOptions:,height,heightScale,label,messageOverrides:,open,opened,outsideCloseDisabled,position,resizable,width,widthScale;setFocus,updateFocusTrapElements"],"calcite-shell":[()=>D(()=>import("./customElement-Cutfp1wg.js"),__vite__mapDeps([401,288,262,259])),"contentBehind"],"calcite-shell-center-row":[()=>D(()=>import("./customElement-5zr1yB_Z.js"),__vite__mapDeps([402,288,262,259,264])),"detached,heightScale,position"],"calcite-shell-panel":[()=>D(()=>import("./customElement-SQ4tMBq5.js"),__vite__mapDeps([403,288,266,262,259,329,348,260])),"collapsed,displayMode,height,heightScale,layout,messageOverrides:,position,resizable,width,widthScale"],"calcite-slider":[()=>D(()=>import("./customElement-W_HwP8SZ.js"),__vite__mapDeps([404,266,288,259,262,308,268,269,298,270,271,264,301,329,260])),"disabled,fillPlacement,form,groupSeparator,hasHistogram,histogram:,histogramStops:,labelFormatter:,labelHandles,labelTicks,max,maxLabel,maxValue,min,minLabel,minValue,mirrored,name,numberingSystem,pageStep,precise,required,scale,snap,status,step,ticks,validationIcon,validationMessage,validity:,value;setFocus"],"calcite-sort-handle":[()=>D(()=>import("./customElement-DDFjHG9p.js"),__vite__mapDeps([405,266,288,271,264,269,306,307,262,259,294,260])),"disabled,flipPlacements:,label,messageOverrides:,messages:,moveToItems:,open,overlayPositioning,placement,scale,setPosition,setSize,widthScale;setFocus"],"calcite-sortable-list":[()=>D(()=>import("./customElement-BBxFAgyW.js"),__vite__mapDeps([406,269,263,318,262,259,264])),"canPull:,canPut:,disabled,dragSelector,group,handleSelector,layout,loading"],"calcite-split-button":[()=>D(()=>import("./customElement-BH_RCJNV.js"),__vite__mapDeps([407,269,271,264,262,259])),"active,appearance,disabled,download,dropdownIconType,dropdownLabel,flipPlacements:,href,kind,loading,overlayPositioning,placement,primaryIconEnd,primaryIconFlipRtl,primaryIconStart,primaryLabel,primaryText,rel,scale,target,width;setFocus"],"calcite-stack":[()=>D(()=>import("./customElement-BMIa6Szj.js"),__vite__mapDeps([408,288,262,259,375])),"disabled"],"calcite-stepper":[()=>D(()=>import("./customElement-BeaGs4Qi.js"),__vite__mapDeps([409,266,262,259,263,260,271,264])),"icon,layout,messageOverrides:,numbered,numberingSystem,scale,selectedItem:;endStep,goToStep,nextStep,prevStep,startStep"],"calcite-stepper-item":[()=>D(()=>import("./customElement-Baw9aLQV.js"),__vite__mapDeps([410,266,269,301,298,271,264,260])),"complete,description,disabled,error,heading,icon,iconFlipRtl,itemHidden,layout,messageOverrides:,numbered,numberingSystem,scale,selected;setFocus"],"calcite-switch":[()=>D(()=>import("./customElement-CmThWR8Q.js"),__vite__mapDeps([411,266,262,259,268,269,298,270,271,264])),"checked,disabled,form,label,name,scale,value;setFocus"],"calcite-tab":[()=>D(()=>import("./customElement-INuw2C-h.js"),__vite__mapDeps([412,262,259])),"scale,selected,tab;getTabIndex;_updateAriaInfo"],"calcite-tab-nav":[()=>D(()=>import("./customElement-DRikWu2T.js"),__vite__mapDeps([413,266,288,335,262,259,263,260])),"bordered,layout,messageOverrides:,position,scale,selectedTitle:,storageId,syncId"],"calcite-tab-title":[()=>D(()=>import("./customElement-Btzi6M7E.js"),__vite__mapDeps([414,288,266,262,259,269,263,271,264,260])),"bordered,closable,closed,disabled,iconEnd,iconFlipRtl,iconStart,layout,messageOverrides:,position,scale,selected,tab;activateTab,getTabIdentifier,getTabIndex;_updateAriaInfo"],"calcite-table":[()=>D(()=>import("./customElement-C9oG2amG.js"),__vite__mapDeps([415,266,301,298,260,271,264])),"bordered,caption,groupSeparator,interactionMode,layout,messageOverrides:,numbered,numberingSystem,pageSize,scale,selectedItems:,selectionDisplay,selectionMode,striped"],"calcite-table-cell":[()=>D(()=>import("./customElement-DVpTfmjF.js"),__vite__mapDeps([416,266,271,264,269,262,259,260])),"alignment,colSpan,disabled,interactionMode,lastCell,messageOverrides:,numberCell,parentRowAlignment,parentRowIsSelected,parentRowPositionLocalized,parentRowType,positionInRow,readCellContentsToAT,rowSpan,scale,selectionCell;setFocus"],"calcite-table-header":[()=>D(()=>import("./customElement-BhQmoCVl.js"),__vite__mapDeps([417,266,271,264,260])),"alignment,bodyRowCount,colSpan,description,heading,interactionMode,lastCell,messageOverrides:,numberCell,parentRowAlignment,parentRowIsSelected,parentRowType,positionInRow,rowSpan,scale,selectedRowCount,selectedRowCountLocalized,selectionCell,selectionMode;setFocus"],"calcite-table-row":[()=>D(()=>import("./customElement-uhtw8oXs.js"),__vite__mapDeps([418,288,266,262,259,298,269,271,264])),"alignment,bodyRowCount,cellCount,disabled,interactionMode,itemHidden,lastVisibleRow,numbered,positionAll,positionSection,positionSectionLocalized,readCellContentsToAT,rowType,scale,selected,selectedRowCount,selectedRowCountLocalized,selectionMode"],"calcite-tabs":[()=>D(()=>import("./customElement-Csv4vcbj.js"),__vite__mapDeps([419,266,262,259])),"bordered,layout,position,scale"],"calcite-text-area":[()=>D(()=>import("./customElement-c9FwM7Zq.js"),__vite__mapDeps([420,334,266,268,262,259,270,301,298,263,271,264,269,308,363,260,330,294])),"columns,disabled,form,groupSeparator,label,limitText,maxLength,messageOverrides:,minLength,name,numberingSystem,placeholder,readOnly,required,resize,rows,scale,status,validationIcon,validationMessage,validity:,value,wrap;selectText,setFocus"],"calcite-tile":[()=>D(()=>import("./customElement-Ym8QHMTU.js"),__vite__mapDeps([421,266,269,262,259,271,264])),"active,alignment,description,disabled,embed,heading,href,icon,iconFlipRtl,interactive,label,layout,scale,selected,selectionAppearance,selectionMode;setFocus"],"calcite-tile-group":[()=>D(()=>import("./customElement-DICKRJdb.js"),__vite__mapDeps([422,266,269,263,262,259])),"alignment,disabled,label,layout,scale,selectedItems:,selectionAppearance,selectionMode"],"calcite-tile-select":[()=>D(()=>import("./customElement-DudaM45S.js"),__vite__mapDeps([423,259,269,271,264])),"checked,description,disabled,heading,icon,iconFlipRtl,inputAlignment,inputEnabled,name,type,value,width;setFocus"],"calcite-tile-select-group":[()=>D(()=>import("./customElement-TBNSDlg7.js"),__vite__mapDeps([424,269,264])),"disabled,layout"],"calcite-time-picker":[()=>D(()=>import("./customElement-2_6ycHTB.js"),__vite__mapDeps([425,266,298,301,369,329,271,264,262,259,260])),"hourFormat,messageOverrides:,numberingSystem,scale,step,value;setFocus"],"calcite-tip":[()=>D(()=>import("./customElement-BvDl-gKS.js"),__vite__mapDeps([426,288,316,267,264,262,259,260])),"closed,closeDisabled,heading,headingLevel,messageOverrides:,selected"],"calcite-tip-group":[()=>D(()=>import("./customElement-BMcb4Ler.js"),__vite__mapDeps([427,264])),"groupTitle"],"calcite-tip-manager":[()=>D(()=>import("./customElement-BxHigHF-.js"),__vite__mapDeps([428,266,288,262,259,263,316,267,264,260])),"closed,headingLevel,messageOverrides:;nextTip,previousTip"],"calcite-tooltip":[()=>D(()=>import("./index-B2dhARfn.js").then(e=>e.c),__vite__mapDeps([429,266,306,307,262,259,294,302,391,288])),"closeOnClick,label,offsetDistance,offsetSkidding,open,overlayPositioning,placement,referenceElement;reposition"],"calcite-tree":[()=>D(()=>import("./customElement-X7sYxCXU.js"),__vite__mapDeps([430,262,259])),"child,lines,parentExpanded,scale,selectedItems:,selectionMode"],"calcite-tree-item":[()=>D(()=>import("./customElement-CAz4rPtk.js"),__vite__mapDeps([431,288,266,262,259,269,271,264])),"depth,disabled,expanded,hasChildren,iconFlipRtl,iconStart,indeterminate,label,lines,parentExpanded,scale,selected,selectionMode"]});function vLe({actions:e,activeId:t,onSelect:i}){const r=Qr.useRef(null),s=n=>{const o=n.target.closest("calcite-action");if(!o)return;const l=o.getAttribute("data-action-id");i(l)};return Qr.useEffect(()=>{r.current&&r.current.querySelectorAll("calcite-action").forEach(n=>n.active=n.getAttribute("data-action-id")===t)},[t]),li.jsx("calcite-action-bar",{id:"map-actions",slot:"action-bar",layout:"horizontal",ref:r,onClick:s,children:e.map(({id:n,icon:o,label:l})=>li.jsx("calcite-action",{icon:o,text:l,"data-action-id":n},n))})}const Vn="esri-layer-list",yl=`${Vn}__item`,V0={base:Vn,actionMenu:`${Vn}__action-menu`,actionGroup:`${Vn}__action-group`,filterNoResults:`${Vn}__filter-no-results`,item:yl,itemActive:`${yl}--active`,itemContentBottom:`${yl}-content-bottom`,itemMessage:`${yl}-message`,itemActionIcon:`${yl}-action-icon`,itemActionImage:`${yl}-action-image`,itemTemporaryIcon:`${yl}-temporary-icon`,itemTableIcon:`${yl}-table-icon`,itemCatalogIcon:`${yl}-catalog-icon`,statusIndicator:`${Vn}__status-indicator`,publishing:`${Vn}__publishing`,updating:`${Vn}__updating`,connectionStatus:`${Vn}__connection-status`,connectionStatusConnected:`${Vn}__connection-status--connected`,visibleToggle:`${Vn}__visible-toggle`,visibleIcon:`${Vn}__visible-icon`};function x7(e){return e.icon?e.icon:"image"in e&&e.image||e.className?void 0:"question"}function bLe(e){return e?{backgroundImage:`url(${e})`}:{}}function J9e({action:e,feature:t}){const i=t==null?void 0:t.attributes,r="image"in e?e.image:void 0;return r&&i?Ub(r,i):r??""}const Bee={hide:"hide",hideChildren:"hide-children"},_Le=10,wLe=2;function SLe({exclusive:e,visible:t,visibilityAppearance:i}){const r=i==="checkbox";return t?e?"circle-f":r?"check-square-f":"view-visible":e?"circle":r?"square":"view-hide"}function ELe({connectionStatus:e,publishing:t}){return e?e==="connected"?"beacon":"offline":t?"square":"bullet-point"}function TLe(e){return(e==null?void 0:e.listMode)===Bee.hideChildren}function vT(e){return(e==null?void 0:e.listMode)??void 0}function $Le(e){return e!=null&&"minScale"in e&&e.minScale!=null?e.minScale:void 0}function xLe(e){return e!=null&&"maxScale"in e&&e.maxScale!=null?e.maxScale:void 0}function MLe(e){if(!e)return"inherited";const t=PLe(eN(e)?e.layer:e);return t!=null?t?"independent":"inherited":"visibilityMode"in e&&e.visibilityMode!=null?e.visibilityMode:"independent"}function ALe(e){e==null||e.removeMany(e.filter(t=>t==null?void 0:t.destroyed))}function Hee(e){if(e&&(!("type"in e)||e.type!=="wmts"))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function ILe(e,t){e&&(e.filterPredicate=t?i=>t(Do(i)):void 0)}function CLe(e){const t=(e!=null&&e.layer&&eN(e.layer)?e.layer.layer:void 0)??(e==null?void 0:e.layer);return!!t&&t.type!=="catalog"&&(kLe(t)??!0)}function OLe(e){return vT(e)!==Bee.hide}function LLe(e,t){if(!e||t==null||isNaN(t))return!1;const i=$Le(e),r=xLe(e),s=i!=null&&!isNaN(i)&&i>0&&t>i,n=r!=null&&!isNaN(r)&&r>0&&t<r;return s||n}function Wee(e,t){e==null||e.sort((i,r)=>{const s="uid"in i?t.indexOf(i.uid):-1,n="uid"in r?t.indexOf(r.uid):-1;return s>n?-1:s<n?1:0})}function RLe(e,t){const i=e==null?void 0:e.layer;if(!i)return;const r=Hee(i);if(!r)return;let s;r==="layers"&&"layers"in i?s=i.layers:r==="sublayers"&&"sublayers"in i&&(s=i.sublayers),Wee(s,t)}function M7(e){const t=e==null?void 0:e.layer;return t&&"layers"in t?t.layers:null}function eN(e){return e!=null&&"layer"in e&&e.layer!=null}function PLe(e){const t=Zee(e);return t!=null&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}function kLe(e){const t=Zee(e);return t!=null&&"supportsDynamicLayers"in t?t.supportsDynamicLayers:void 0}function Zee(e){return e&&"capabilities"in e&&e.capabilities!=null&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}function Do(e){return e==null?void 0:e["data-item"]}function A7(e){return e==null?void 0:e.getAttribute("data-layer-type")}function DLe(e){const{children:t,error:i}=e,r="incompatible"in e&&e.incompatible;return!!(t!=null&&t.filter(s=>!s.hidden).length)&&!i&&!r}function NLe(e){for(const t of e)for(const i of t)if(i.type==="button"||i.type==="toggle")return i}var GR;let Ke=GR=class extends Ji{constructor(e){super(e),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=t=>{this.item.actionsOpen=t.currentTarget.open},this._setTooltipReference=t=>{var i,r;(r=this.onTooltipReferenceChange)==null||r.call(this,(i=this.item.layer)==null?void 0:i.uid,t)},this._removeTooltipReference=()=>{var t,i;(i=this.onTooltipReferenceChange)==null||i.call(this,(t=this.item.layer)==null?void 0:t.uid,null)}}loadDependencies(){return ng({"action-group":()=>D(()=>import("./index-OlQ67UD5.js"),__vite__mapDeps([432,258,259,260,261,262,263,264,289,288,266,269,271,390,306,307,294,302,316,267,391,350,298,296,297,293,295,292])),"action-menu":()=>D(()=>import("./index-CUtGz3Gy.js"),__vite__mapDeps([433,258,259,260,261,262,263,264,289,288,266,269,271,390,306,307,294,302,316,267,391,350,298,296,297,293])),action:()=>D(()=>import("./index-DjmsQtCq.js"),__vite__mapDeps([434,258,259,260,261,262,263,264,289,288,266,269,271])),icon:()=>D(()=>import("./index-DZcWOJe1.js").then(e=>e.i),__vite__mapDeps([261,262,259,263,264])),"list-item":()=>D(()=>import("./index-B9CyziuY.js"),__vite__mapDeps([435,261,262,259,263,264,351,266,306,307,294,269,298,271,302,348,258,260,289,288,354,353,352,405,376,374,377])),list:()=>D(()=>import("./index-0HSJtORh.js"),__vite__mapDeps([436,258,259,260,396,266,263,262,408,288,375,261,264,365,392,362,334,267,268,269,298,270,271,301,308,363,356,336,309,294,373,374,318])),notice:()=>D(()=>import("./index-CkbimEBj.js"),__vite__mapDeps([437,261,262,259,263,264,386,266,271,303,302,260]))})}render(){var w,E;const e=this.parentTitles??[],{_title:t,item:i,activeItem:r,selectionMode:s,selectedItems:n,messages:o,parent:l,css:d}=this,h="visibleAtCurrentTimeExtent"in i&&"layerInvisibleAtTime"in o&&!i.visibleAtCurrentTimeExtent?`${t} (${o.layerInvisibleAtTime})`:"visibleAtCurrentScale"in i&&"layerInvisibleAtScale"in o&&!i.visibleAtCurrentScale?`${t} (${o.layerInvisibleAtScale})`:t,y="parent"in i&&((E=(w=i.parent)==null?void 0:w.layer)==null?void 0:E.type)==="catalog",{layer:v}=i,b="visibleAtCurrentScale"in i&&!i.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in i&&!i.visibleAtCurrentTimeExtent;return k("calcite-list-item",{afterCreate:T=>this._focusSelectedDragEl(T,i),afterUpdate:T=>this._focusSelectedDragEl(T,i),class:this.classes(d.item,"itemActive"in d&&{[d.itemActive]:r===i}),"data-item":i,"data-layer-id":v==null?void 0:v.id,dragDisabled:!i.sortable||y,id:v==null?void 0:v.uid,key:`list-item-${v==null?void 0:v.uid}`,label:t,metadata:{parentTitles:e,_title:t},open:"open"in i&&i.open,selected:s!=="none"&&n.includes(i),title:h,unavailable:b,value:v==null?void 0:v.uid,onCalciteListItemSelect:T=>"visible"in i&&this._handleCalciteListItemSelect(T,i,l),onCalciteListItemToggle:T=>"open"in i&&this._handleCalciteListItemToggle(T,i)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:e}=this;return this.item.title||("untitledTable"in e?e.untitledTable:e.untitledLayer)}get _renderedItemStatus(){const{item:e,parent:t,visibleElements:i,css:r}=this;if(!i.statusIndicators)return null;const{publishing:s}=e,n="updating"in e&&e.updating&&!t,o="connectionStatus"in e?e.connectionStatus:void 0,l=!!o;return k("calcite-icon",{class:this.classes(r.statusIndicator,{[r.publishing]:s},"updating"in r&&{[r.updating]:n},"connectionStatus"in r&&{[r.connectionStatus]:l},"connectionStatusConnected"in r&&{[r.connectionStatusConnected]:l&&o==="connected"}),icon:ELe({connectionStatus:o,publishing:s}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:e,visibleElements:t,css:i}=this,{layer:r}=e,s="temporaryLayerIndicators"in t&&t.temporaryLayerIndicators,n="temporaryTableIndicators"in t&&t.temporaryTableIndicators,o=r&&"persistenceEnabled"in r&&(uk(r)||!r.persistenceEnabled);return(s||n)&&o?k("calcite-icon",{class:i.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"content-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{item:e,parent:t,messages:i,visibilityAppearance:r,css:s}=this;if(!("visible"in e&&"layerVisibility"in i&&"visibleToggle"in s&&r))return null;const{visible:n}=e,o=this._getParentVisibilityMode(t);if(o==="inherited")return null;const l=SLe({visible:n,exclusive:o==="exclusive",visibilityAppearance:r}),d=r==="checkbox",h=i.layerVisibility;return k("calcite-action",{appearance:"transparent",class:s.visibleToggle,icon:d?l:void 0,key:"visibility-toggle",onclick:()=>this._toggleVisibility(e,t),scale:"s",slot:d?"actions-start":"actions-end",text:h,title:h},d?null:k("calcite-icon",{class:this.classes({[s.visibleIcon]:o!=="exclusive"&&n}),icon:l,scale:"s"}))}get _renderedPanel(){const{panel:e}=this.item;return!(e!=null&&e.open)||e.disabled||e.flowEnabled?null:k("div",{class:this.css.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}get _renderedPanelAction(){const{panel:e}=this.item;if(!(e!=null&&e.visible))return null;const{open:t,title:i,disabled:r}=e;return k("calcite-action",{active:t,appearance:"transparent",disabled:r,icon:x7(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:i??"",title:i??void 0},this._renderFallbackIcon(e))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:e,messagesCommon:t}=this,i=t.options;return k("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:t.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},k("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:i,title:i}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map(e=>k("calcite-action-group",{key:`action-section-${e.uid}`},e.toArray().map(t=>this._renderAction({action:t,textEnabled:!0}))))}get _renderedCatalogFootprintIcon(){const{css:e}=this,t=this.item.layer,i=(t==null?void 0:t.type)==="catalog-footprint",r=(t==null?void 0:t.type)==="sublayer"&&B8(t,"footprints");return"itemCatalogIcon"in e&&(i||r)?k("calcite-icon",{class:e.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){const{css:e}=this,t=this.item.layer,i=(t==null?void 0:t.type)==="catalog-dynamic-group",r=(t==null?void 0:t.type)==="sublayer"&&B8(t,"layers-in-view");return"itemCatalogIcon"in e&&(i||r)?k("calcite-icon",{class:e.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:e,item:t,visibleElements:i}=this;if(!("visible"in t))return;const{layer:r}=t,s=(r==null?void 0:r.type)==="catalog-dynamic-group";return"catalogLayerList"in i&&i.catalogLayerList&&s?k("calcite-action",{appearance:"transparent",disabled:!r.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(t),scale:"s",slot:"actions-end",text:e}):null}get _renderedChildList(){const{dragEnabled:e,item:t,rootGroupUid:i,listModeDisabled:r,selectionMode:s,displayMode:n}=this;if(!("children"in t))return;const o=[...this.parentTitles??[],t.title],{children:l,layer:d}=t,h=(d==null?void 0:d.type)!=="catalog-dynamic-group"&&DLe(t),y=!r&&TLe(d),v=(d==null?void 0:d.type)==="group",b=!y&&!h&&e&&v,w=!!e&&"childrenSortable"in t&&t.childrenSortable&&CLe(t);return h||b?k("calcite-list",{canPull:E=>!!this.canMove&&this.canMove(E,"pull"),canPut:E=>!!this.canMove&&this.canMove(E,"put"),"data-item":t,"data-layer-type":i,displayMode:n,dragEnabled:w,group:v?i:`${i}-${d==null?void 0:d.uid}`,key:`child-list-${d==null?void 0:d.uid}`,label:t.title,selectionAppearance:"border",selectionMode:s},l==null?void 0:l.filter(E=>!E.hidden&&(this.visibleElements.errors||!E.error)).toArray().map(E=>this._renderItem(E,t,o)),this._renderedTablesItem):null}get _hasTables(){var i,r;const{layerTablesEnabled:e}=this,t=this.item.layer;if(!e||!t)return!1;switch(t.type){case"knowledge-graph":return e.includes(t.type)&&"tables"in t&&!!((i=t.tables)!=null&&i.length);case"map-image":case"tile":return e.includes(t.type)&&"subtables"in t&&!!((r=t.subtables)!=null&&r.length);default:return!1}}get _renderedTablesItem(){const{item:e,messages:t,css:i}=this,{layer:r}=e;return"itemTableIcon"in i&&"visible"in e&&"tables"in t&&this._hasTables?k("calcite-list-item",{class:i.item,"data-layer-id":r==null?void 0:r.id,dragDisabled:!0,key:`list-item-table-list-tables-${r==null?void 0:r.uid}`,label:t.tables,title:t.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(e)},k("calcite-icon",{class:i.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),k("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:e,messages:t,css:i}=this;return e.error?k("div",{class:i.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},k("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},k("div",{slot:"message"},"tableError"in t?t.tableError:t.layerError))):"incompatible"in e&&e.incompatible&&"layerIncompatible"in t?k("div",{class:i.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},k("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},k("div",{slot:"message"},t.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:NLe(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map(e=>e.filter(t=>t.visible))}get _actionsCount(){return this.item.actionsSections.reduce((e,t)=>e+t.length,0)}_renderAction(e){const{item:t}=this,{action:i,textEnabled:r}=e;if(!i)return null;const{active:s,disabled:n,title:o,type:l,indicator:d}=i;return k("calcite-action",{active:l==="toggle"&&i.value,appearance:"transparent","data-action-id":i.id,disabled:n,icon:x7(i),indicator:d,key:`action-${i.uid}`,loading:s,onclick:()=>this._triggerAction(t,i),scale:"s",slot:r?void 0:"actions-end",text:o??"",textEnabled:r,title:o??void 0},this._renderFallbackIcon(i))}_renderFallbackIcon(e){const{css:t}=this,{className:i,icon:r}=e;if(r)return null;const s="image"in e?e.image:void 0,n={[t.itemActionIcon]:!!i,[t.itemActionImage]:!!s};return i&&(n[i]=!0),s||i?k("span",{"aria-hidden":"true",class:this.classes(t.itemActionIcon,n),key:"icon",styles:bLe(s)}):null}_renderItem(e,t,i=[]){var r;return k(GR,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,displayMode:this.displayMode,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${(r=e.layer)==null?void 0:r.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:t,parentTitles:i,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(e,t){t&&e&&(t.type==="toggle"&&(t.value=!t.value),this.onAction(t,e))}_triggerOnTablesOpen(e){e&&this.onTablesOpen&&this.onTablesOpen(e)}_triggerOnCatalogOpen(e){var t;e&&((t=this.onCatalogOpen)==null||t.call(this,e))}_focusSelectedDragEl(e,t){var i,r;this.selectedDragItemLayerUid===((i=t.layer)==null?void 0:i.uid)&&(pb(e),(r=this.onSelectedDragItemLayerUidChange)==null||r.call(this,null))}_handleCalciteListItemToggle(e,t){e.stopPropagation(),t.open=e.target.open}_getParentVisibilityMode(e){return e&&"visibilityMode"in e?e.visibilityMode:null}_handleCalciteListItemSelect(e,t,i){if(Do(e.target)!==t)return;const r=this._getParentVisibilityMode(i);this.selectionMode==="none"&&r!=="inherited"&&this._toggleVisibility(t,i)}_togglePanel(e){e.open=!e.open,e.open&&this.onPanelOpen()}_toggleVisibility(e,t){!e||!("visible"in e)||this._getParentVisibilityMode(t)==="exclusive"&&e.visible||(e.visible=!e.visible)}};Ke.vnodeSelector="calcite-list-item",c([p()],Ke.prototype,"activeItem",void 0),c([p()],Ke.prototype,"canMove",void 0),c([p()],Ke.prototype,"css",void 0),c([p()],Ke.prototype,"displayMode",void 0),c([p()],Ke.prototype,"dragEnabled",void 0),c([p()],Ke.prototype,"item",void 0),c([p()],Ke.prototype,"layerTablesEnabled",void 0),c([p()],Ke.prototype,"listModeDisabled",void 0),c([p()],Ke.prototype,"messages",void 0),c([p()],Ke.prototype,"messagesCommon",void 0),c([p()],Ke.prototype,"onAction",void 0),c([p()],Ke.prototype,"onPanelOpen",void 0),c([p()],Ke.prototype,"onCatalogOpen",void 0),c([p()],Ke.prototype,"onTablesOpen",void 0),c([p()],Ke.prototype,"onSelectedDragItemLayerUidChange",void 0),c([p()],Ke.prototype,"onTooltipReferenceChange",void 0),c([p()],Ke.prototype,"parent",void 0),c([p()],Ke.prototype,"parentTitles",void 0),c([p()],Ke.prototype,"rootGroupUid",void 0),c([p()],Ke.prototype,"selectionMode",void 0),c([p()],Ke.prototype,"selectedItems",void 0),c([p()],Ke.prototype,"selectedDragItemLayerUid",void 0),c([p()],Ke.prototype,"visibleElements",void 0),c([p()],Ke.prototype,"visibilityAppearance",void 0),c([p()],Ke.prototype,"_title",null),c([p()],Ke.prototype,"_renderedItemStatus",null),c([p()],Ke.prototype,"_renderedItemTemporaryIcon",null),c([p()],Ke.prototype,"_renderedItemToggle",null),c([p()],Ke.prototype,"_renderedPanel",null),c([p()],Ke.prototype,"_renderedPanelAction",null),c([p()],Ke.prototype,"_renderedActions",null),c([p()],Ke.prototype,"_renderedActionMenu",null),c([p()],Ke.prototype,"_renderedActionMenuContent",null),c([p()],Ke.prototype,"_renderedCatalogFootprintIcon",null),c([p()],Ke.prototype,"_renderedCatalogDynamicIcon",null),c([p()],Ke.prototype,"_renderedCatalogSelectNode",null),c([p()],Ke.prototype,"_renderedChildList",null),c([p()],Ke.prototype,"_hasTables",null),c([p()],Ke.prototype,"_renderedTablesItem",null),c([p()],Ke.prototype,"_renderedItemMessage",null),c([p()],Ke.prototype,"_singleAction",null),c([p()],Ke.prototype,"_filteredSections",null),c([p()],Ke.prototype,"_actionsCount",null),Ke=GR=c([I("esri.widgets.LayerList.LayerListItem")],Ke);const FLe=Ke;function I7(e){return e!=null&&typeof e=="object"&&e.type==="2d"&&e.view2dType==="linkchart"}function VLe(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:zLe(e);i.push(...r)}}function zLe(e){return e.split(",").map(t=>t.trim())}function C7(e){return e&&typeof e.render=="function"}function X9e(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}let Rr=class extends ld.IdentifiableMixin(Ji){constructor(t,i){super(t,i),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([ve(()=>this._canCreateLegend,()=>this._createLegend(),yt),ve(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),yt)])}destroy(){this._legend=Zt(this._legend)}get _canCreateLegend(){const{content:t,listItem:i}=this;if(!i)return!1;const r="legend";return t===r||t!=null&&!!Array.isArray(t)&&t.includes(r)}get _legendOptions(){const{listItem:t,_legendLayerInfo:i}=this,r=t==null?void 0:t.view;return i&&r?{view:r,layerInfos:[i]}:{}}get _legendLayerInfo(){var o;const t=(o=this.listItem)==null?void 0:o.layer;if(!t||t.type==="subtype-sublayer")return null;const i=eN(t)?t:null,r=t==null?void 0:t.parent,s=r!=null&&"type"in r&&r.type==="map-image"?i==null?void 0:i.source:null,n="";return s&&r?{layer:r,title:n,sublayerIds:[s.mapLayerId]}:{layer:t,title:n}}get disabled(){var s;const{listItem:t,_legend:i,content:r}=this;return!t||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((s=i.activeLayerInfos)!=null&&s.length)||!t.visibleAtCurrentScale||!t.visible)}set disabled(t){this._overrideIfSome("disabled",t)}get icon(){const{image:t}=this,i=this._getFirstWidget();return this._get("icon")??(!t&&i?i.icon:null)}set icon(t){this._overrideIfSome("icon",t)}get title(){var t;return this._get("title")||(((t=this._getFirstWidget())==null?void 0:t.label)??"")}set title(t){this._override("title",t)}render(){return k("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(t){const{_legend:i,disabled:r,open:s}=this;return t&&!r&&s?t==="legend"&&i?k("div",{key:"legend-widget"},i.render()):typeof t=="string"?k("div",{innerHTML:t,key:t}):C7(t)?k("div",{key:"content-widget"},t.render()):t instanceof HTMLElement?k("div",{afterCreate:this._attachToNode,bind:t,key:"content-element"}):null:null}_renderContents(){const{content:t,open:i}=this;return i?Array.isArray(t)?t.map(r=>this._renderContent(r)):this._renderContent(t):null}async _createLegend(){if(Zt(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:t}=await D(()=>Promise.resolve().then(()=>RDe),void 0),i=new t(this._legendOptions);this._legend=i}_attachToNode(t){t.appendChild(this)}_updateLegend(){const t=this._legend;t&&t.set(this._legendOptions)}_getWidget(t){return t==="legend"?this._legend:C7(t)?t:null}_getFirstWidget(){const{content:t}=this;return Array.isArray(t)?t.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(t)}};c([p()],Rr.prototype,"_legend",void 0),c([p()],Rr.prototype,"_canCreateLegend",null),c([p()],Rr.prototype,"_legendOptions",null),c([p()],Rr.prototype,"_legendLayerInfo",null),c([p()],Rr.prototype,"className",void 0),c([p()],Rr.prototype,"content",void 0),c([p()],Rr.prototype,"disabled",null),c([p()],Rr.prototype,"flowEnabled",void 0),c([p()],Rr.prototype,"icon",null),c([p()],Rr.prototype,"image",void 0),c([p()],Rr.prototype,"listItem",void 0),c([p()],Rr.prototype,"open",void 0),c([p()],Rr.prototype,"title",null),c([p()],Rr.prototype,"visible",void 0),Rr=c([I("esri.widgets.LayerList.ListItemPanel")],Rr);const Yee=Rr;var Kv;const jLe=_e.ofType({key:"type",defaultKeyValue:"button",base:d$,typeMap:{button:lY,toggle:uY}}),Jee=_e.ofType(jLe),eI="layer",ES="child-list-mode",ULe="hide";let kt=Kv=class extends ld.IdentifiableMixin(Me){constructor(e){super(e),this.actionsSections=new Jee,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(_e.ofType(Kv)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([ve(()=>{var e;return[this.layer,(e=this.layer)==null?void 0:e.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),yt),ve(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),yt),ve(()=>this.view,e=>this._updateChildrenView(e),yt),ve(()=>this.panel,e=>this._setListItemOnPanel(e),yt)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){var e;(e=this.panel)==null||e.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){var e;return(e=this.layer)==null?void 0:e.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||e.type==="sublayer")return null;const i=e.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(r=>r.layer===i)??null}castPanel(e){var t;return(t=this.panel)!=null&&t.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new Yee(e):null}get sortable(){var e;return((e=this.layer)==null?void 0:e.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=ys(this,"layer.layer");return(!e||e&&ys(this,"layer.layer.loaded"))&&ys(this,"layer.title")||ys(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){var i;const{layer:e,checkPublishStatusEnabled:t}=this;return!!(t&&e&&"publishingInfo"in e&&((i=e.publishingInfo)==null?void 0:i.status)==="publishing")}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:r}=this;return!r&&!t&&(e?e.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var e;return!!((e=this.layer)!=null&&e.visible)}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){var e,t;return((e=this.layerView)==null?void 0:e.visibleAtCurrentScale)??!LLe(this.layer,(t=this.view)==null?void 0:t.scale)}get visibleAtCurrentTimeExtent(){var e;return((e=this.layerView)==null?void 0:e.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return MLe(this.layer)}clone(){return new Kv({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){var t;(t=this.children)==null||t.forEach(i=>i.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(i=>i.view=e)}_createChildren(e){const{listModeDisabled:t,children:i}=this,r=e.filter(s=>!i.some(n=>n.layer===s));i.addMany(this._createChildItems(r,t))}_destroyChildren(e){const{children:t}=this,i=t.filter(r=>!!r.layer&&!e.includes(r.layer));t.destroyMany(i)}_sortChildren(e){this.children.sort((t,i)=>e.indexOf(i.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(ES),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(ES),this.listModeDisabled||this.addHandles(e.toArray().map(t=>ve(()=>t.listMode,()=>this._compileChildren(e))),ES)}_compileChildren(e){const t=this.listModeDisabled?e:e==null?void 0:e.filter(i=>vT(i)!==ULe);e!=null&&e.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),eI)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.reverse().map(i=>t||OLe(i)?new Kv({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(Yr)}_watchLayerProperties(e){if(this.removeHandles(eI),this.removeHandles(ES),!e)return;if((!this.listModeDisabled&&vT(e))==="hide-children")return void this.children.destroyAll();const t=Hee(e);t&&this.addHandles(ve(()=>e[t],i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)},yt),eI)}};c([p({type:Jee})],kt.prototype,"actionsSections",void 0),c([p()],kt.prototype,"actionsOpen",void 0),c([p()],kt.prototype,"checkPublishStatusEnabled",void 0),c([p({type:_e.ofType(kt)})],kt.prototype,"children",void 0),c([p()],kt.prototype,"childrenSortable",void 0),c([p({readOnly:!0})],kt.prototype,"connectionStatus",null),c([p({readOnly:!0})],kt.prototype,"error",null),c([p()],kt.prototype,"hidden",void 0),c([p({readOnly:!0})],kt.prototype,"incompatible",null),c([p()],kt.prototype,"layer",void 0),c([p({readOnly:!0})],kt.prototype,"layerView",null),c([p()],kt.prototype,"listItemCreatedFunction",void 0),c([p({nonNullable:!0})],kt.prototype,"listModeDisabled",void 0),c([p()],kt.prototype,"open",void 0),c([p({type:Yee})],kt.prototype,"panel",void 0),c([mt("panel")],kt.prototype,"castPanel",null),c([p()],kt.prototype,"parent",void 0),c([p({value:!0})],kt.prototype,"sortable",null),c([p()],kt.prototype,"title",null),c([p({readOnly:!0})],kt.prototype,"publishing",null),c([p({readOnly:!0})],kt.prototype,"updating",null),c([p()],kt.prototype,"view",void 0),c([p()],kt.prototype,"visible",null),c([p({readOnly:!0})],kt.prototype,"visibleAtCurrentScale",null),c([p({readOnly:!0})],kt.prototype,"visibleAtCurrentTimeExtent",null),c([p({readOnly:!0})],kt.prototype,"visibilityMode",null),kt=Kv=c([I("esri.widgets.LayerList.ListItem")],kt);const tN=kt,bo={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},GLe="hide",Xee=_e.ofType(tN);let Sa=class extends Kn.EventedAccessor{constructor(t){super(t),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new Xee,this.view=null}initialize(){this.addHandles([ve(()=>{var t;return((t=this.view)==null?void 0:t.ready)===!0},()=>this._viewHandles(),yt),ve(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),ve(()=>I7(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],bo.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:t}=this;return t!=null&&t.ready?"ready":t?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(t=>t.children).length}triggerAction(t,i){t&&!t.disabled&&this.emit("trigger-action",{action:t,item:i})}moveListItem(t,i,r,s){var w,E;const n=t==null?void 0:t.layer;if(!n||n.type==="subtype-sublayer"||n.type==="sublayer")return;const o=(E=(w=this.view)==null?void 0:w.map)==null?void 0:E.layers,l=i?M7(i):o,d=r?M7(r):o;if(!l||!d)return;const{operationalItems:h}=this,y=(i==null?void 0:i.children)||h,v=(r==null?void 0:r.children)||h,b=d.length-s;t.parent=r||null,y.remove(t),l.remove(n),v.includes(t)||v.add(t,b),d.includes(n)||d.add(n,b),this._compileList()}_createLayerViewHandles(t){this.removeHandles(bo.layerViews),this._compileList(),t&&this.addHandles(t.on("change",()=>this._compileList()),bo.layerViews)}_createMapLayerHandles(t){this.removeHandles(bo.mapLayers),this._compileList(),t&&this.addHandles(t.on("change",()=>this._compileList()),bo.mapLayers)}_createListItem(t){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:s,listModeDisabled:n}=this;return new tN({checkPublishStatusEnabled:s,listModeDisabled:n,layer:t,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(t){return t?this.listModeDisabled?t:t.filter(i=>vT(i)!==GLe):void 0}_watchLayersListMode(t){this.removeHandles(bo.layerListMode),t&&!this.listModeDisabled&&this.addHandles(ve(()=>t.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),bo.layerListMode)}_compileList(){var s,n;const t=(n=(s=this.view)==null?void 0:s.map)==null?void 0:n.layers,i=I7(this.view)&&!this.view.inGeographicLayout?t==null?void 0:t.filter(({type:o})=>o==="link-chart"):t;this._watchLayersListMode(i);const r=this._getViewableLayers(i);r!=null&&r.length?(this._createNewItems(r),this._removeItems(r),this._sortItems(r)):this._removeAllItems()}_createNewItems(t){const{operationalItems:i}=this;t.forEach(r=>{i.some(s=>s.layer===r)||i.add(this._createListItem(r))})}_removeItems(t){const{operationalItems:i}=this,r=[];i.forEach(s=>{s&&t&&t.includes(s.layer)||r.push(s)}),i.destroyMany(r)}_sortItems(t){const{operationalItems:i}=this;i.sort((r,s)=>{const n=t.indexOf(r.layer),o=t.indexOf(s.layer);return n>o?-1:n<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:t}=this;this.removeHandles([bo.mapLayers,bo.layerViews,bo.viewLayers]),t!=null&&t.ready?this.addHandles([ve(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.allLayers},i=>this._createMapLayerHandles(i),yt),ve(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),yt)],bo.viewLayers):this._removeAllItems()}};c([p()],Sa.prototype,"checkPublishStatusEnabled",void 0),c([p()],Sa.prototype,"listItemCreatedFunction",void 0),c([p({nonNullable:!0})],Sa.prototype,"listModeDisabled",void 0),c([p({type:Xee})],Sa.prototype,"operationalItems",void 0),c([p({readOnly:!0})],Sa.prototype,"state",null),c([p()],Sa.prototype,"totalItems",null),c([p()],Sa.prototype,"view",void 0),Sa=c([I("esri.widgets.LayerList.LayerListViewModel")],Sa);const Qee=Sa;let zn=class extends Me{constructor(){super(...arguments),this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};c([p({type:Boolean,nonNullable:!0})],zn.prototype,"catalogLayerList",void 0),c([p({type:Boolean,nonNullable:!0})],zn.prototype,"closeButton",void 0),c([p({type:Boolean,nonNullable:!0})],zn.prototype,"collapseButton",void 0),c([p({type:Boolean,nonNullable:!0})],zn.prototype,"errors",void 0),c([p({type:Boolean,nonNullable:!0})],zn.prototype,"filter",void 0),c([p({type:Boolean,nonNullable:!0})],zn.prototype,"flow",void 0),c([p({type:Boolean,nonNullable:!0})],zn.prototype,"heading",void 0),c([p({type:Boolean,nonNullable:!0})],zn.prototype,"statusIndicators",void 0),c([p({type:Boolean,nonNullable:!0})],zn.prototype,"temporaryLayerIndicators",void 0),zn=c([I("esri.widgets.LayerList.LayerListVisibleElements")],zn);const Kee=zn,qLe=["label","description","metadata"],BLe=_e.ofType(tN),O7="nested";let et=class extends ld.IdentifiableMixin(Ji){constructor(t,i){super(t,i),this._rootListEl=null,this._activeItem=null,this._tooltipReferenceMap=new dy,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._layerListMap=new dy,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`operational-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterPredicate=null,this.filterText="",this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new _e(["knowledge-graph"]),this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=wLe,this.minFilterItems=_Le,this.openedLayers=new _e,this.openedLayerLists=new _e,this.selectedItems=new BLe,this.selectionMode="none",this.tableList=null,this.tileOptions=null,this.viewModel=new Qee,this.visibilityAppearance="default",this.visibleElements=new Kee,this._canMove=({dragEl:r,fromEl:s,toEl:n},o)=>{var N,j,V;const l=o==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,d=Do(r);if(!(d!=null&&d.sortable))return!1;const h=Do(s),y=A7(s),v=Do(n),b=A7(n),w=!!y&&!!b&&y===b,E={selected:d,from:h,to:v},T=s.group,$=n.group,A=((N=h==null?void 0:h.layer)==null?void 0:N.type)??"",O=((j=v==null?void 0:v.layer)==null?void 0:j.type)??"",L=new Set(["map-image","catalog","knowledge-graph"]);return T&&$&&typeof l=="function"?l.call(null,E):w&&!L.has(A)&&!L.has(O)&&((V=d==null?void 0:d.layer)==null?void 0:V.type)!=="sublayer"},this._onCatalogOpen=r=>{var s,n;this.openedLayers.push((s=r.layer)==null?void 0:s.parent),this._focusLayerFlowItem=(n=r.layer)==null?void 0:n.uid},this._onTablesOpen=r=>{var s;this.openedLayers.push(r.layer),this._focusLayerFlowItem=(s=r.layer)==null?void 0:s.uid},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onTooltipReferenceChange=(r,s)=>{s?this._tooltipReferenceMap.set(r,s):this._tooltipReferenceMap.delete(r)},this._onSelectedDragItemLayerUidChange=r=>{this._selectedDragItemLayerUid=r},this._onTriggerAction=(r,s)=>{this.triggerAction(r,s)},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=r=>{if(this.visibilityAppearance!=="default")return;const s=Array.from(r.composedPath()).find(n=>{var o;return(o=n.classList)==null?void 0:o.contains(V0.item)});this._activeItem=Do(s)},this._onCalciteListOrderChange=r=>{const{_lastDragDetail:s}=this,{toEl:n,fromEl:o,dragEl:l,newIndex:d}=r;if(o&&n&&!((s==null?void 0:s.newIndex)===d&&(s==null?void 0:s.dragEl)===l&&(s==null?void 0:s.toEl)===n&&(s==null?void 0:s.fromEl)===o))if(this._lastDragDetail=r,this._selectedDragItemLayerUid=l.value,o!==n)this._moveLayerFromChildList({toEl:n,fromEl:o,dragEl:l,newIndex:d});else{const h=Array.from(o.children).filter(y=>y==null?void 0:y.matches("calcite-list-item")).map(y=>y.value);this._sortLayers(o,h)}}}initialize(){this.addHandles([zs(()=>this.openedLayers,"change",()=>this._handleOpenedLayersChange(),yt),zs(()=>this.viewModel.operationalItems,"change",()=>ALe(this.selectedItems),yt),ve(()=>[this.filterPredicate,this._rootListEl],()=>ILe(this._rootListEl,this.filterPredicate))])}loadDependencies(){return ng({button:()=>D(()=>import("./index-BnkLrfPs.js"),__vite__mapDeps([257,258,259,260,261,262,263,264,265,266,267,268,269,270,271])),flow:()=>D(()=>import("./index-6-Oq11xS.js").then(t=>t.i),__vite__mapDeps([357,266,263,271,264,262,259])),"flow-item":()=>D(()=>import("./index-B7tkvGDB.js"),__vite__mapDeps([438,258,259,260,261,262,263,264,289,288,266,269,271,390,306,307,294,302,316,267,391,350,298,296,297,293,396,389,349,358])),list:()=>D(()=>import("./index-0HSJtORh.js"),__vite__mapDeps([436,258,259,260,396,266,263,262,408,288,375,261,264,365,392,362,334,267,268,269,298,270,271,301,308,363,356,336,309,294,373,374,318])),notice:()=>D(()=>import("./index-CkbimEBj.js"),__vite__mapDeps([437,261,262,259,263,264,386,266,271,303,302,260])),tooltip:()=>D(()=>import("./index-B2dhARfn.js").then(t=>t.i),__vite__mapDeps([429,266,306,307,262,259,294,302,391,288]))})}destroy(){this._destroyOpenedLayerLists(),this._tooltipReferenceMap.clear()}get _totalItems(){return this.viewModel.operationalItems.flatten(t=>t.children.filter(i=>{var r;return((r=i.layer)==null?void 0:r.type)!=="catalog-dynamic-group"})).length}get _visibleItems(){var t;return(t=this.operationalItems)==null?void 0:t.filter(i=>!i.hidden&&(this.visibleElements.errors||!i.error))}get _openedPanelItems(){return this._visibleItems.flatten(t=>t.children).filter(({hidden:t,panel:i})=>!t&&(i==null?void 0:i.open)&&!i.disabled&&i.flowEnabled)}get _dragEnabled(){return this._totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this._totalItems>=this.minFilterItems&&this.visibleElements.filter}get _renderedOpenLayerFlowItems(){const{openedLayers:t}=this;return t.toArray().map((i,r)=>this._renderLayerFlowItem(i,r===t.length-1))}get icon(){return"layers"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(t){this.viewModel.listItemCreatedFunction=t}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(t){this.viewModel.operationalItems=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}triggerAction(t,i){return this.viewModel.triggerAction(t,i)}render(){var s;const t=(s=this.viewModel)==null?void 0:s.state,{_visibleItems:i}=this,r={[Tr.hidden]:t==="loading",[Tr.disabled]:t==="disabled"};return k("div",{class:this.classes(V0.base,Tr.widget,Tr.panel,r)},i!=null&&i.length?[this._renderItemTooltips(),this._renderItems()]:this._renderNoItems())}async _createFlowList(t,i){const{_layerListMap:r}=this,s=r.get(t);if(s)return s;const n=t.type==="catalog"?await this._createCatalogLayerList(t):await this._createTableList(t);return i.aborted||r.set(t,n),n}async _handleOpenedLayersChange(){var d;const{_layerListMap:t,openedLayers:i,openedLayerLists:r}=this;(d=this._openedLayersController)==null||d.abort();const s=new AbortController,{signal:n}=s;this._openedLayersController=s,t.forEach((h,y)=>{i.includes(y)||(h.destroy(),t.delete(y))});const o=await Promise.all(i.map(h=>this._createFlowList(h,n)));if(n.aborted)return;r.removeAll(),r.addMany(o);const l=r.at(-1);l?"catalogLayer"in l?(this._set("catalogLayerList",l),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",l)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(t){var s,n;const{_tooltipReferenceMap:i,messages:r}=this;return t?k("calcite-tooltip",{key:`tooltip-${(s=t.layer)==null?void 0:s.uid}`,overlayPositioning:"fixed",referenceElement:i.get((n=t.layer)==null?void 0:n.uid)},r.layerIncompatibleTooltip):null}_renderItemTooltipNodes(t){var i;return t.incompatible?this._renderItemTooltip(t):(i=t.children)==null?void 0:i.filter(r=>!r.hidden).toArray().map(r=>this._renderItemTooltipNodes(r))}_renderItemTooltips(){var t;return(t=this._visibleItems)==null?void 0:t.toArray().map(i=>this._renderItemTooltipNodes(i))}_renderNoItemsMessage(){return k("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return k("div",{class:V0.itemMessage,key:"esri-layer-list__no-items"},k("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}async _createCatalogLayerList(t){const{default:i}=await D(()=>import("./CatalogLayerList-Dg6B2mgg.js"),[]),{headingLevel:r,catalogOptions:s,view:n,filterPlaceholder:o,listItemCreatedFunction:l,minFilterItems:d,selectionMode:h,visibilityAppearance:y,_onCatalogOpen:v,_onTablesOpen:b,layerTablesEnabled:w}=this;return new i({headingLevel:r,view:n,filterPlaceholder:o,listItemCreatedFunction:l,minFilterItems:d,selectionMode:h,visibilityAppearance:y,...s,catalogLayer:t,layerTablesEnabled:w,onCatalogOpen:v,onTablesOpen:b})}_getTableListParams(t){switch(t.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:t.tables};case"map-image":return{...this.mapImageOptions,tables:t.subtables};case"tile":return{...this.tileOptions,tables:t.subtables};default:return null}}async _createTableList(t){const{default:i}=await D(()=>import("./TableList-CODgYTfn.js"),[]),{headingLevel:r,selectionMode:s,dragEnabled:n}=this;return new i({headingLevel:r,selectionMode:s,dragEnabled:n,...this._getTableListParams(t)})}_renderLayerFlowItem(t,i){var o;const{messages:r,openedLayers:s}=this,n=t.title||this.messages.untitledLayer;return k("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":t.uid,description:n,heading:r[t.type==="catalog"?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${t.uid}`,selected:i,onCalciteFlowItemBack:l=>{l.preventDefault(),s.pop();const d=s.at(-1);d?this._focusLayerFlowItem=d.uid:this._focusRootFlowItem=!0}},(o=this._layerListMap.get(t))==null?void 0:o.render())}_renderPanelFlowItems(){const{_openedPanelItems:t,openedLayers:i}=this;return t.toArray().map(({title:r,panel:s},n)=>{const o=()=>this._handlePanelFlowItemBack(s);return k("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:r,heading:s.title,headingLevel:this.headingLevel,key:`flow-panel-${s.uid}`,selected:!i.length&&n===t.length-1,onCalciteFlowItemBack:l=>{l.preventDefault(),o()}},s.render(),k("calcite-button",{appearance:"transparent",onclick:o,slot:"footer-actions",width:"full"},this.messagesCommon.back))})}_handlePanelFlowItemBack(t){t.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(t){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,pb(t))}_focusLayerFlowItemNode(t){this._focusLayerFlowItem===t.dataset.layerUid&&(this._focusLayerFlowItem=null,pb(t))}_focusPanelFlowItemNode(t){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,pb(t))}_renderItems(){const{visible:t,collapsed:i,_visibleItems:r,_openedPanelItems:s,_filterEnabled:n,_rootGroupUid:o,visibleElements:{closeButton:l,collapseButton:d,heading:h,flow:y},_dragEnabled:v,selectionMode:b,filterText:w,openedLayers:E,filterPlaceholder:T,messages:$}=this,A=[k("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:l,closed:!t,collapsed:i,collapsible:d,heading:h?$.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!E.length&&!s.length,onCalciteFlowItemClose:()=>this.visible=!1},k("calcite-list",{afterCreate:O=>{this._rootListEl=O,O.addEventListener("focusin",this._setActiveItem),O.addEventListener("focusout",this._clearActiveItem)},afterRemoved:O=>{this._rootListEl=null,O.removeEventListener("focusin",this._setActiveItem),O.removeEventListener("focusout",this._clearActiveItem)},canPull:O=>this._canMove(O,"pull"),canPut:O=>this._canMove(O,"put"),"data-layer-type":o,displayMode:O7,dragEnabled:v,filterEnabled:n,filterPlaceholder:T,filterProps:qLe,filterText:n?w:"",group:o,key:"root-list",label:$.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:b,onCalciteListChange:O=>this._handleCalciteListChange(O),onCalciteListDragEnd:O=>this._handleCalciteListDragEnd(O.detail),onCalciteListFilter:O=>{var L;return this.filterText=((L=O.currentTarget)==null?void 0:L.filterText)??""},onCalciteListOrderChange:O=>this._onCalciteListOrderChange(O.detail)},r==null?void 0:r.toArray().map(O=>this._renderItem(O)),r!=null&&r.length&&n?k("div",{class:V0.filterNoResults,slot:"filter-no-results"},k("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(),this._renderedOpenLayerFlowItems];return t?y?k("calcite-flow",{key:"root-flow"},A):A:null}_renderItem(t,i,r){var s;return k(FLe,{activeItem:this._activeItem,canMove:this._canMove,css:V0,displayMode:O7,dragEnabled:this.dragEnabled,item:t,key:`layerListItem-${(s=t.layer)==null?void 0:s.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:r,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_moveLayerFromChildList({toEl:t,fromEl:i,dragEl:r,newIndex:s}){const n=Do(r),o=Do(t),l=Do(i);this.viewModel.moveListItem(n,l,o,s)}_handleCalciteListDragEnd(t){const{fromEl:i,dragEl:r,oldIndex:s}=t;i.insertBefore(r,i.children[s])}_sortLayers(t,i){var r,s;if(t)if(t===this._rootListEl)Wee((s=(r=this.view)==null?void 0:r.map)==null?void 0:s.layers,i);else{const n=Do(t);if(!n)return;RLe(n,i)}}_handleCalciteListChange(t){const{selectionMode:i,selectedItems:r}=this;if(i==="none")return;const s=t.target.selectedItems.map(n=>Do(n)).filter(Boolean);r.removeAll(),r.addMany(s)}};c([p()],et.prototype,"_rootListEl",void 0),c([p()],et.prototype,"_activeItem",void 0),c([p()],et.prototype,"_tooltipReferenceMap",void 0),c([p()],et.prototype,"_focusRootFlowItem",void 0),c([p()],et.prototype,"_focusPanelFlowItem",void 0),c([p()],et.prototype,"_focusLayerFlowItem",void 0),c([p()],et.prototype,"_layerListMap",void 0),c([p()],et.prototype,"_totalItems",null),c([p()],et.prototype,"_visibleItems",null),c([p()],et.prototype,"_openedPanelItems",null),c([p()],et.prototype,"_dragEnabled",null),c([p()],et.prototype,"_filterEnabled",null),c([p()],et.prototype,"_renderedOpenLayerFlowItems",null),c([p({readOnly:!0})],et.prototype,"catalogLayerList",void 0),c([p()],et.prototype,"catalogOptions",void 0),c([p()],et.prototype,"collapsed",void 0),c([p()],et.prototype,"dragEnabled",void 0),c([p()],et.prototype,"filterPlaceholder",void 0),c([p()],et.prototype,"filterPredicate",void 0),c([p()],et.prototype,"filterText",void 0),c([p()],et.prototype,"headingLevel",void 0),c([p()],et.prototype,"icon",null),c([p()],et.prototype,"knowledgeGraphOptions",void 0),c([p()],et.prototype,"label",null),c([p()],et.prototype,"layerTablesEnabled",void 0),c([p()],et.prototype,"listItemCanGiveFunction",void 0),c([p()],et.prototype,"listItemCanReceiveFunction",void 0),c([p()],et.prototype,"listItemCreatedFunction",null),c([p()],et.prototype,"mapImageOptions",void 0),c([p(),ja("esri/widgets/LayerList/t9n/LayerList")],et.prototype,"messages",void 0),c([p(),ja("esri/t9n/common")],et.prototype,"messagesCommon",void 0),c([p()],et.prototype,"minDragEnabledItems",void 0),c([p()],et.prototype,"minFilterItems",void 0),c([p({readOnly:!0})],et.prototype,"openedLayers",void 0),c([p({readOnly:!0})],et.prototype,"openedLayerLists",void 0),c([p()],et.prototype,"operationalItems",null),c([p()],et.prototype,"selectedItems",void 0),c([p()],et.prototype,"selectionMode",void 0),c([p({readOnly:!0})],et.prototype,"tableList",void 0),c([p()],et.prototype,"tileOptions",void 0),c([p()],et.prototype,"view",null),c([VLe("trigger-action"),p({type:Qee})],et.prototype,"viewModel",void 0),c([p()],et.prototype,"visibilityAppearance",void 0),c([p({type:Kee,nonNullable:!0})],et.prototype,"visibleElements",void 0),et=c([I("esri.widgets.LayerList")],et);const HLe=et;function L7(e,t){const i=e.featureReduction;return i&&i.type!=="selection"&&(!("maxScale"in i)||!i.maxScale||i.maxScale<t.scale)?i:null}const c_=-1;let Ro=class extends Me{constructor(t){super(t),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=Y("mapview-transitions-duration"),this.effects=[]}set effect(t){if(this._get("effect")!==(t=t||"")){this._set("effect",t);try{this._transitionTo(R7(t))}catch(i){this._transitionTo([]),ae.getLogger(this).warn("Invalid Effect",{effect:t,error:i})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(t){this._updateForScale(t)}get transitioning(){return this._to!==null}canTransitionTo(t){try{return this.scale>0&&P7(this._current,R7(t),this.scale)}catch{return!1}}transitionStep(t,i){this._applyTimeTransition(t),this._updateForScale(i)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(t){this.scale>0&&P7(this._current,t,this.scale)?(this._final=t,this._to=q(t),WLe(this._current,this._to,this.scale),this._from=q(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._set("effects",this._current[0]?q(this._current[0].effects):[])}_applyTimeTransition(t){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=t;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const s=this._current[r],n=this._from[r],o=this._to[r];s.scale=ZLe(n.scale,o.scale,i);for(let l=0;l<s.effects.length;l++){const d=s.effects[l],h=n.effects[l],y=o.effects[l];d.interpolate(h,y,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?q(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(t){if(this._set("scale",t),this._current.length===0)return;const i=this._current,r=this._current.length-1;let s,n,o=1;if(i.length===1||t>=i[0].scale)n=s=i[0].effects;else if(t<=i[r].scale)n=s=i[r].effects;else for(let l=0;l<r;l++){const d=i[l],h=i[l+1];if(d.scale>=t&&h.scale<=t){o=(t-d.scale)/(h.scale-d.scale),s=d.effects,n=h.effects;break}}for(let l=0;l<this.effects.length;l++)this.effects[l].interpolate(s[l],n[l],o)}};function R7(e){const t=$D(e)||[];return YLe(t)?[{scale:c_,effects:t}]:t}function P7(e,t,i){var r,s,n,o;return!((r=e[0])!=null&&r.effects)||!((s=t[0])!=null&&s.effects)?!0:!((((n=e[0])==null?void 0:n.scale)===c_||((o=t[0])==null?void 0:o.scale)===c_)&&(e.length>1||t.length>1)&&i<=0)&&gW(e[0].effects,t[0].effects)}function WLe(e,t,i){const r=e.length>t.length?e:t,s=e.length>t.length?t:e,n=s[s.length-1],o=(n==null?void 0:n.scale)??i,l=(n==null?void 0:n.effects)??[];for(let d=s.length;d<r.length;d++)s.push({scale:o,effects:[...l]});for(let d=0;d<r.length;d++)s[d].scale=s[d].scale===c_?i:s[d].scale,r[d].scale=r[d].scale===c_?i:r[d].scale,vW(s[d].effects,r[d].effects)}function ZLe(e,t,i){return e+(t-e)*i}function YLe(e){const t=e[0];return!!t&&"type"in t}c([p()],Ro.prototype,"_to",void 0),c([p()],Ro.prototype,"duration",void 0),c([p({value:""})],Ro.prototype,"effect",null),c([p({readOnly:!0})],Ro.prototype,"effects",void 0),c([p({readOnly:!0})],Ro.prototype,"final",null),c([p({readOnly:!0})],Ro.prototype,"hasEffects",null),c([p({value:0})],Ro.prototype,"scale",null),c([p({readOnly:!0})],Ro.prototype,"transitioning",null),Ro=c([I("esri.layers.effects.EffectView")],Ro);function r7e(e){var i;const t=e.layer;return"floorInfo"in t&&((i=t.floorInfo)!=null&&i.floorField)&&"floors"in e.view?ete(e.view.floors,t.floorInfo.floorField):null}function k7(e,t){var i;return"floorInfo"in t&&((i=t.floorInfo)!=null&&i.floorField)?ete(e,t.floorInfo.floorField):null}function ete(e,t){if(!(e!=null&&e.length))return null;const i=e.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${t} IN (${i.join(",")}) OR ${t} IS NULL`}function s7e(e,t,i){return t.flatten(({sublayers:s})=>s).length!==e.length?!0:!!e.some(s=>s.originIdOf("minScale")>i||s.originIdOf("maxScale")>i||s.originIdOf("renderer")>i||s.originIdOf("labelingInfo")>i||s.originIdOf("opacity")>i||s.originIdOf("labelsVisible")>i||s.originIdOf("source")>i)||!tte(e,t)}function JLe(e,t,i){return!!e.some(r=>{var l,d,h;const s=r.source,n=!s||s.type==="map-layer"&&s.mapLayerId===r.id&&(s.gdbVersion==null||s.gdbVersion===i);r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),r.commitProperty("orderBy");const o=((h=(d=(l=r.layer)==null?void 0:l.capabilities)==null?void 0:d.exportMap)==null?void 0:h.supportsSublayerOrderBy)??!1;return!n||r.originIdOf("renderer")>He.SERVICE||r.originIdOf("labelingInfo")>He.SERVICE||r.originIdOf("opacity")>He.SERVICE||r.originIdOf("labelsVisible")>He.SERVICE||o&&r.originIdOf("orderBy")>He.SERVICE})||!tte(e,t)}function tte(e,t){if(!(e!=null&&e.length)||t==null)return!0;const i=t.slice().reverse().flatten(({sublayers:n})=>n&&n.toArray().reverse()).map(n=>n.id).toArray();if(e.length>i.length)return!1;let r=0;const s=i.length;for(const{id:n}of e){for(;r<s&&i[r]!==n;)r++;if(r>=s)return!1}return!0}function n7e(e){return!!e&&e.some(t=>{var i;return t.minScale!=null||((i=t.layerDefinition)==null?void 0:i.minScale)!=null})}const XLe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let jn=class extends Me{constructor(t){super(t),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const t=this.visibleSublayers.map(i=>{const r=k7(this.floors,i);return i.toExportImageJSON(r)});return t.length?JSON.stringify(t):null}get hasDynamicLayers(){return this.layer&&JLe(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.removeHandles("layer"),t&&this.addHandles([t.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("sublayer-update",i=>this.notifyChange(XLe[i.propertyName]))],"layer"))}get layers(){const t=this.visibleSublayers;return t?t.length?"show:"+t.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){var r;const t=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter(s=>s.definitionExpression!=null||t&&s.floorInfo!=null);return i.length?JSON.stringify(i.reduce((s,n)=>{const o=k7(this.floors,n),l=DZ(o,n.definitionExpression);return l!=null&&(s[n.id]=l),s},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const t=this.layer;return t&&(t.commitProperty("dpi"),t.commitProperty("imageFormat"),t.commitProperty("imageTransparency"),t.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const t=[];if(!this.layer)return t;const i=this.layer.sublayers,r=this.scale,s=o=>{o.visible&&(r===0||PMe(r,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(s):t.unshift(o))};i&&i.forEach(s);const n=this._get("visibleSublayers");return!n||n.length!==t.length||n.some((o,l)=>t[l]!==o)?t:n}toJSON(){const t=this.layer;let i={dpi:t.dpi,format:t.imageFormat,transparent:t.imageTransparency,gdbVersion:t.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};c([p({readOnly:!0})],jn.prototype,"dynamicLayers",null),c([p()],jn.prototype,"floors",void 0),c([p({readOnly:!0})],jn.prototype,"hasDynamicLayers",null),c([p()],jn.prototype,"layer",null),c([p({readOnly:!0})],jn.prototype,"layers",null),c([p({readOnly:!0})],jn.prototype,"layerDefs",null),c([p({type:Number})],jn.prototype,"scale",void 0),c([p({readOnly:!0})],jn.prototype,"version",null),c([p({readOnly:!0})],jn.prototype,"visibleSublayers",null),jn=c([I("esri.layers.support.ExportImageParameters")],jn);const QLe=9999999e31,KLe=2e-7,eRe={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function bT(e){return eRe[e]??[-34028234663852886e22,34028234663852886e22]}function a7e(e,t){return e==null||t==null?"s32":e<0?e>=-128&&t<128?"s8":e>=-32768&&t<32768?"s16":"s32":t<256?"u8":t<65536?"u16":"u32"}function tRe(e){return((e==null?void 0:e.startsWith("s"))||(e==null?void 0:e.startsWith("u")))??!1}function l7e(e,t,i,r){let[s,n]=bT(i);const o=tRe(i);return o&&(s-=1e-5,n+=1e-5),o?i.startsWith("u")?iRe(e,t,r,[s,n]):rRe(e,t,r,[s,n]):sRe(e,t,r,[s,n])}function u7e(e,t){for(let i=0;i<t.length;i++)t[i]&&isNaN(e[i])&&(t[i]=0,e[i]=0)}function iRe(e,t,i,r){const[s,n]=r;for(let o=0;o<t.length;o++)if(t[o]){const l=e[o];l<s||l>n?t[o]=0:i[o]=l+.5|0}}function rRe(e,t,i,r){const[s,n]=r;for(let o=0;o<t.length;o++)if(t[o]){const l=e[o];l<s||l>n?t[o]=0:i[o]=l+(l>0?.5:-.5)|0}}function sRe(e,t,i,r){const[s,n]=r;for(let o=0;o<t.length;o++)if(t[o]){const l=e[o];l<s||l>n?t[o]=0:i[o]=l}}function c7e(e,t,i){var w,E;if(e.depthCount&&e.depthCount>1)return;const{pixels:r,statistics:s,pixelType:n}=e,o=r[0].length,l=e.bandMasks??[],d=e.mask??new Uint8Array(o).fill(255),h=n==="f32"||n==="f64",y=bT(n);let v=!1;for(let T=0;T<r.length;T++){const $=typeof t=="number"?t:t[T];if($==null)continue;const A=((w=s==null?void 0:s[T])==null?void 0:w.minValue)??y[0],O=((E=s==null?void 0:s[T])==null?void 0:E.maxValue)??y[1];if(A>$+Number.EPSILON||O<$-Number.EPSILON)continue;const L=l[T]||d.slice(),R=r[T],N=i==null?void 0:i.customFloatTolerance;if(h&&N!==0){let j=N;j||(j=Math.abs($)>=QLe?KLe*Math.abs($):n==="f32"?2**-23:Number.EPSILON);for(let V=0;V<R.length;V++)L[V]&&Math.abs(R[V]-$)<j&&(R[V]=0,L[V]=0,d[V]=0,v=!0)}else for(let j=0;j<R.length;j++)L[j]&&R[j]===$&&(R[j]=0,L[j]=0,d[j]=0,v=!0);l[T]=L}if(v){const T=e.bandMasks||e.pixels.length>1?l:null;i!=null&&i.matchAllNoData?e.mask=T&&T.length>1?b(T):d:(e.bandMasks=T,e.mask=d)}function b(T){if(T.length<2)return T[0];const $=T[0].length,A=new Uint8Array($).fill(0);for(let O=0;O<T.length;O++){const L=T[O];for(let R=0;R<$;R++)L[R]&&(A[R]=255)}return A}v&&"updateStatistics"in e&&e.updateStatistics()}function ite(e){return e==null||e.type==="simple"||e.type==="unique-value"||e.type==="class-breaks"||e.type==="dictionary"||e.type==="heatmap"}function d7e(e,t){if(e==null)return null;if(!ite(e))return new B("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${e.type||e.declaredClass}'`,{renderer:e});switch(e.type){case"simple":return nRe(e,t);case"unique-value":return oRe(e,t);case"class-breaks":return aRe(e,t);case"dictionary":case"heatmap":return null}return null}function iN(e,t){if(!t)return null;if(Array.isArray(t)||(t=[t]),t.length>0){const i=t.map(s=>s.details.symbol.type||s.details.symbol.declaredClass).filter(s=>!!s);i.sort();const r=new Array;return i.forEach((s,n)=>{n!==0&&s===i[n-1]||r.push(s)}),new B("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${r.join(", ")}) which are not supported in 3D`,{renderer:e,symbolErrors:t})}return null}function nRe(e,t){const i={...Wl,...t,cimFallbackEnabled:!0};return iN(e,Vy(e.symbol,i).error)}function oRe(e,t){var n;const i={...Wl,...t,cimFallbackEnabled:!0},r=(n=e.uniqueValueInfos)==null?void 0:n.map(o=>Vy(o.symbol,i).error).filter(Yr),s=Vy(e.defaultSymbol,i);return s.error&&(r==null||r.unshift(s.error)),iN(e,r)}function aRe(e,t){const i={...Wl,...t,cimFallbackEnabled:!0},r=e.classBreakInfos.map(n=>Vy(n.symbol,i).error).filter(Yr),s=Vy(e.defaultSymbol,i);return s.error&&r.unshift(s.error),iN(e,r)}var qR;function lRe(e){switch(e){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function rN(e){var t;return(e==null?void 0:e.type)==="CIMVectorMarker"?(t=e.markerGraphics)==null?void 0:t[0]:void 0}function rte(e){var t,i;return((t=e==null?void 0:e.symbol)==null?void 0:t.type)==="CIMPolygonSymbol"?(i=e.symbol.symbolLayers)==null?void 0:i[0]:void 0}function uRe(e,t){(e==null?void 0:e.type)==="CIMVectorMarker"&&t!=null&&(e.size=t)}function cRe(e,t){const i=rN(e);i&&t!=null&&(i.geometry=lRe(t))}function dRe(e,t){const i=rte(rN(e));i&&t!=null&&(i.color=t.toArray())}function hRe(e,t,i){const r=rte(rN(e));r&&t!=null&&i&&(r.colorLocked=t)}function ste(e,t){var h;const{outerRingSize:i,innerDotSize:r,type:s,color:n,colorLocked:o,primitiveOverrides:l}=t,d=((h=e.data.symbol)==null?void 0:h.type)==="CIMPolygonSymbol"?e.data.symbol.symbolLayers:null;if((d==null?void 0:d.length)===2)for(const y of d){const v=y.primitiveName===qR.OuterRing;uRe(y,v?i:r),cRe(y,s),dRe(y,n),hRe(y,o,v)}return i!=null&&r!=null&&(e.data.primitiveOverrides=null),l!==void 0&&(e.data.primitiveOverrides=q(l)),e}(function(e){e.OuterRing="reference-size-outer-ring",e.InnerDot="reference-size-inner-dot"})(qR||(qR={}));function nte(e,t,i,r){if(e)if(e.type!=="CIMTextSymbol"){if(e.effects)for(const s of e.effects)D7(s,t);if(e.symbolLayers)for(const s of e.symbolLayers){switch(s.type){case"CIMPictureMarker":case"CIMVectorMarker":pRe(s,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!(r!=null&&r.preserveOutlineWidth)&&s.width&&(s.width*=t);break;case"CIMPictureFill":s.height&&(s.height*=t),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t);break;case"CIMHatchFill":nte(s.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t),s.separation&&(s.separation*=t)}if(s.effects)for(const n of s.effects)D7(n,t)}}else e.height!=null&&(e.height*=t)}function pRe(e,t,i){if(e&&(e.markerPlacement&&fRe(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=e.size!=null?e.size*t:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||nte(r.symbol,t,!0,i)}function fRe(e,t){switch(z$(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function D7(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const i=e.dashTemplate.map(r=>r*t);e.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function ote(e){const t=[];return BR(cee(e),t),t.length?new ye(uee(t[0])):null}function BR(e,t){var s;if(!e)return;let i;i=e.type==="CIMTextSymbol"?e.symbol:e;const r=e.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const n of i.symbolLayers)if(!(n.colorLocked||r&&(hee(n)||dee(n)&&n.markerPlacement&&z$(n.markerPlacement))))switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":n.tintColor&&N7(t,n.tintColor);break;case"CIMVectorMarker":(s=n.markerGraphics)==null||s.forEach(o=>{BR(o.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":N7(t,n.color);break;case"CIMHatchFill":BR(n.lineSymbol,t)}}}function N7(e,t){for(const i of e)if(i.join(".")===t.join("."))return;e.push(t)}function ate(e,t,i){t instanceof ye||(t=new ye(t));const r=cee(e);r&&HR(r,t)}function HR(e,t,i){var n;if(!e)return;let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const s=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const o of r.symbolLayers){if(o.colorLocked||s&&(hee(o)||dee(o)&&o.markerPlacement&&z$(o.markerPlacement)))continue;const l=t.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=l;break;case"CIMVectorMarker":(n=o.markerGraphics)==null||n.forEach(d=>{HR(d.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":o.color=l;break;case"CIMHatchFill":HR(o.lineSymbol,t)}}}var Yi;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(Yi||(Yi={}));const Cb={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}]};function mRe(e,t,i){const r=Yi.size;let s=r,n=r;e<1?s*=.75:e>1&&(n*=1.25);const o=0,l=0;let d=r,h=r;return t&&i&&(s=n=d=h=0),[{type:"path",path:[{command:"M",values:[d,o]},{command:"L",values:[i?d:.875*d,o]},{command:"L",values:[i?s-.5*d:l,n-.5*h]},{command:"L",values:[s-.5*d,n-.5*h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[d,o]},{command:"L",values:[d,t?o:.125*h]},{command:"L",values:[s-.5*d,t?n-.5*h:h]},{command:"L",values:[s-.5*d,n-.5*h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s-.5*d,n-.5*h]},{command:"L",values:[i?s-.5*d:l,n-.5*h]},{command:"L",values:[i?s-.5*d:l,t?n-.5*h:h]},{command:"L",values:[s-.5*d,t?n-.5*h:h]},{command:"Z",values:[]}]}]}function yRe(e){const t=Yi.size,i=.5*e,r=0,s=0;return[{type:"path",path:[{command:"M",values:[s,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[s,.7*t+i-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[t,i]},{command:"L",values:[t,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,r]},{command:"L",values:[t,r]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[s,.7*t*.5]},{command:"Z",values:[]}]}]}function gRe(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function vRe(e,t){let i=t?Yi.tallSymbolWidth:e;const r=e,s=t?4:6;i<=Yi.size?i-=.5*s:i-=s;const n=0,o=0,l=t?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,n]},{command:"L",values:[i,.5*l]},{command:"L",values:[.5*i,l]},{command:"L",values:[o,.5*l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,.5*l]},{command:"L",values:[.5*i,l]},{command:"L",values:[.5*i,r]},{command:"L",values:[o,r-.5*l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,l]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*l]},{command:"L",values:[i,.5*l]},{command:"Z",values:[]}]}]}function bRe(e,t){let i=t?Yi.tallSymbolWidth:e;const r=e,s=t?4:6;i<=Yi.size?i-=.5*s:i-=s;const n=.5*i,o=.15*i,l=0,d=r-o;return[{type:"ellipse",cx:.5*i,cy:d,rx:n,ry:o},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,d]},{command:"L",values:[i,d]},{command:"L",values:[i,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:o,rx:n,ry:o}]}function _Re(e,t){let i=t?Yi.tallSymbolWidth:e;const r=e,s=t?4:6;i<=Yi.size?i-=.5*s:i-=s;const n=.15*i,o=r-n;return[{type:"ellipse",cx:.5*i,cy:o,rx:.5*i,ry:n},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function wRe(e){let t=e;const i=e,r=6;t<Yi.size?t-=.5*r:t-=r;const s=.15*t,n=0;return[{type:"path",path:[{command:"M",values:[0,n]},{command:"L",values:[t,n]},{command:"L",values:[.5*t,i-s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:n,rx:.5*t,ry:s}]}function SRe(e){let t=e;const i=e,r=4;t<Yi.size?t-=.5*r:t-=r;const s=0,n=0,o=t,l=i,d=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,s]},{command:"L",values:[o,.5*l-d]},{command:"L",values:[.45*o-d,.5*l+d]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,s]},{command:"L",values:[.45*o-d,.5*l+d]},{command:"L",values:[n,.5*l-d]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,.5*l-d]},{command:"L",values:[.45*o-d,.5*l+d]},{command:"L",values:[.45*o,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,i]},{command:"L",values:[o,.5*l-d]},{command:"L",values:[.45*o-d,.5*l+d]},{command:"Z",values:[]}]}]}function ERe(e){const t=e,i=2;let r=e;r<Yi.size?r-=.5*i:r-=i;const s=0,n=0;return[{type:"path",path:[{command:"M",values:[.45*t,s]},{command:"L",values:[t,r]},{command:"L",values:[.45*t,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,s]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[n,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,r]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[t,r]},{command:"Z",values:[]}]}]}function Hc(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function h7e(e,t){if(e==null)return new ye;if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const i=new ye(e);return new ye([Hc(i.r,t),Hc(i.g,t),Hc(i.b,t),i.a])}function TRe(e){return"r"in e&&"g"in e&&"b"in e}function lte(e){return"h"in e&&"s"in e&&"v"in e}function ute(e){return"l"in e&&"a"in e&&"b"in e}function cte(e){return"l"in e&&"c"in e&&"h"in e}function $Re(e){return"x"in e&&"y"in e&&"z"in e}const xRe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],MRe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function dte(e,t){const i=[];let r,s;if(e[0].length!==t.length)throw new Error("dimensions do not match");const n=e.length,o=e[0].length;let l=0;for(r=0;r<n;r++){for(l=0,s=0;s<o;s++)l+=e[r][s]*t[s];i.push(l)}return i}function hte(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=dte(xRe,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function sN(e){const t=dte(MRe,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function pte(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function fte(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function ARe(e){const t=e.l,i=e.a,r=e.b,s=Math.sqrt(i*i+r*r);let n=Math.atan2(r,i);return n=n>0?n:n+2*Math.PI,{l:t,c:s,h:n}}function IRe(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function CRe(e){return pte(hte(e))}function ORe(e){return sN(fte(e))}function LRe(e){return ARe(pte(hte(e)))}function RRe(e){return sN(fte(IRe(e)))}function PRe(e){const t=e.r,i=e.g,r=e.b,s=Math.max(t,i,r),n=s-Math.min(t,i,r);let o=s,l=n===0?0:s===t?(i-r)/n%6:s===i?(r-t)/n+2:(t-i)/n+4,d=n===0?0:n/o;return l<0&&(l+=6),l*=60,d*=100,o*=100/255,{h:l,s:d,v:o}}function kRe(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,s=r*i,n=s*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:s,g:n,b:0};break;case 1:o={r:n,g:s,b:0};break;case 2:o={r:0,g:s,b:n};break;case 3:o={r:0,g:n,b:s};break;case 4:o={r:n,g:0,b:s};break;case 5:case 6:o={r:s,g:0,b:n};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-s),o.g=Math.round(o.g+r-s),o.b=Math.round(o.b+r-s),o}function zp(e){return TRe(e)?e:cte(e)?RRe(e):ute(e)?ORe(e):$Re(e)?sN(e):lte(e)?kRe(e):e}function G$(e){return lte(e)?e:PRe(zp(e))}function DRe(e){return ute(e)?e:CRe(zp(e))}function p7e(e){return cte(e)?e:LRe(zp(e))}function NRe(e){let{r:t,g:i,b:r,a:s}=e;return s<1&&(t=Math.round(s*t+255*(1-s)),i=Math.round(s*i+255*(1-s)),r=Math.round(s*r+255*(1-s))),new ye({r:t,g:i,b:r})}function FRe(e,t){const{r:i,g:r,b:s}=t!=null&&t.ignoreAlpha?e:NRe(e);return .2126*i+.7152*r+.0722*s}var WR;function f7e(e,t=WR.High){return FRe(e,{ignoreAlpha:!0})>t?new ye([0,0,0,e.a]):new ye([255,255,255,e.a])}function m7e(e,t){const i=DRe(e);i.l*=1-t;const r=zp(i),s=e.clone();return s.setColor(r),s.a=e.a,s}function y7e(e,t){const i=e.clone();return i.a*=t,i}function g7e(e,t){const i=G$(e);i.s*=t;const r=zp(i),s=e.clone();return s.setColor(r),s.a=e.a,s}function v7e(e){return ye.toUnitRGBA(e)}function b7e(e){return Vp(e[0],e[1],e[2],e.length>3?e[3]:1)}function _7e(e,t){const i=ye.toUnitRGBA(e);return i[3]*=t,i}function w7e(e,t,i={}){if(e.length===0||t<=0)return[];if((e=e.map(r=>typeof r=="string"?new ye(r):r)).length===1||t===1){const r=[],s=e[0];for(let n=0;n<t;n++)r.push(s.clone());return r}if(i.shuffle&&(e=gG(q(e),i.seed)),e.length>=t){const r=[],s=(e.length-1)/(t-1);for(let n=0;n<t;n++){const o=Math.round(n*s);r.push(e[o].clone())}return r}return VRe(e,t,i)}function VRe(e,t,i={}){const r=[],s=e.length-1,n=Math.ceil((t-e.length)/s);e:for(let o=0;o<s;o++){const l=e[o],d=e[o+1];for(let h=1;h<=n;h++){const y=h/(n+1);if(r.push(zRe(l,d,y,i)),r.length+e.length===t)break e}}return[...e.map(o=>o.clone()),...gG(r,i.seed??1)]}(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(WR||(WR={}));const tI=(e,t)=>{const i=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+i))};function zRe(e,t,i,r={}){const s=e.r,n=e.g,o=e.b,l=t.r,d=t.g,h=t.b,y=Math.round(s+(l-s)*i),v=Math.round(n+(d-n)*i),b=Math.round(o+(h-o)*i);if(!r.offset)return new ye([y,v,b]);const w=aP(r.seed);return new ye([tI(y,w),tI(v,w),tI(b,w)])}const mte="picture-fill",yte="simple-fill",jRe="simple-line",gte="simple-marker",URe="text",GRe="cim",F7=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),iI=new oee(1e3);function qRe(e){const t=e.style;let i=null;if(e)switch(e.type){case gte:t!=="cross"&&t!=="x"&&(i=e.color);break;case yte:t&&t!=="solid"?t!=="none"&&(i={type:"pattern",x:0,y:0,src:oi(`esri/symbols/patterns/${t}.png`),width:5,height:5}):i=e.color;break;case mte:i={type:"pattern",src:e.url,width:mi(e.width)*e.xscale,height:mi(e.height)*e.yscale,x:mi(e.xoffset),y:mi(e.yoffset)};break;case URe:i=e.color;break;case GRe:i=ote(e)}return i}function BRe(e,t){const i=e+"-"+t;return iI.get(i)!==void 0?Promise.resolve(iI.get(i)):Rt(e,{responseType:"image"}).then(r=>{const s=r.data,n=s.naturalWidth,o=s.naturalHeight,l=document.createElement("canvas");l.width=n,l.height=o;const d=l.getContext("2d");d.fillStyle=t,d.fillRect(0,0,n,o),d.globalCompositeOperation="destination-in",d.drawImage(s,0,0);const h=l.toDataURL();return iI.put(i,h),h})}function d_(e){if(!e)return null;let t=null;switch(e.type){case yte:case mte:case gte:t=d_(e.outline);break;case jRe:{const i=mi(e.width);e.style!=null&&e.style!=="none"&&i!==0&&(t={color:e.color,style:nN(e.style),width:i,cap:e.cap,join:e.join==="miter"?mi(e.miterLimit):e.join},t.dashArray=vte(t).join(",")||"none");break}default:t=null}return t}function vte(e){if(!(e!=null&&e.style))return[];const{dashArray:t,style:i,width:r}=e;if(typeof t=="string"&&t!=="none")return t.split(",").map(o=>Number(o));const s=r??0,n=F7.has(i)?F7.get(i).map(o=>o*s):[];if(e.cap!=="butt")for(const[o,l]of n.entries())n[o]=o%2==1?l+s:Math.max(l-s,1);return n}const nN=(()=>{const e={};return t=>{if(e[t])return e[t];const i=t.replaceAll("-","");return e[t]=i,i}})(),HRe=new ye([128,128,128]);let WRe=0;function ZRe(){return WRe++}let YRe=0;function JRe(){return YRe++}let XRe=0;function QRe(){return XRe++}const KRe="http://www.w3.org/2000/svg",V7=Y("android"),ePe=Y("chrome")||V7&&V7>=4?"auto":"optimizeLegibility",tPe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},iPe=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let pi={},xt={};const rPe=Math.PI;function zc(e,t){const i=e*(rPe/180);return Math.abs(t*Math.sin(i))+Math.abs(t*Math.cos(i))}function bte(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function oN(e,t,i,r,s){if(e){if(e.type==="circle")return k("circle",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",r:e.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(e.type==="ellipse")return k("ellipse",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",rx:e.rx,ry:e.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(e.type==="rect")return k("rect",{fill:t,"fill-rule":"evenodd",height:e.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:e.width,x:e.x,y:e.y});if(e.type==="image")return k("image",{alt:s||"image",height:e.height,href:e.src,preserveAspectRatio:"none",width:e.width,x:e.x,y:e.y});if(e.type==="path"){const n=typeof e.path!="string"?bte(e.path):e.path;return k("path",{d:n,fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(e.type==="text")return m_(r),k("text",{"dominant-baseline":r.dominantBaseline,fill:t,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":ePe,x:e.x,y:e.y},e.text)}return null}function aN(e){if(!e)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in e))return{fill:new ye(e).toString(),pattern:null,linearGradient:null};if(e.type==="pattern"){const i=`patternId-${ZRe()}`;return{fill:`url(#${i})`,pattern:{id:i,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}},linearGradient:null}}const t=`linearGradientId-${JRe()}`;return{fill:`url(#${t})`,pattern:null,linearGradient:{id:t,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(i=>({offset:i.offset,color:i.color&&new ye(i.color).toString()}))}}}function lN(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new ye(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashoffset&&(t.dashOffset=e.dashoffset),e.style&&!e.dashArray&&(t.dashArray=vte(e).join(",")||"none")),t}function _te(e,t){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const r=e.alignBaseline,s=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=e.align,i.dominantBaseline=s,i.decoration=e.decoration,i.kerning=e.kerning?"auto":"0",i.rotate=e.rotated?"90":"0",m_(t),i.font.style=t.style||"normal",i.font.variant=t.variant||"normal",i.font.weight=t.weight||"normal",i.font.size=t.size&&t.size.toString()||"10pt",i.font.family=t.family||"serif"}return i}function wte(e){const{pattern:t,linearGradient:i}=e;if(t)return k("pattern",{height:t.height,id:t.id,patternUnits:"userSpaceOnUse",width:t.width,x:t.x,y:t.y},k("image",{height:t.image.height,href:t.image.href,width:t.image.width,x:t.image.x,y:t.image.y}));if(i){const r=i.stops.map((s,n)=>k("stop",{key:`${n}-stop`,offset:s.offset,"stop-color":s.color}));return k("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function sPe(e,t){if(!e||e.length===0)return null;const i=[];for(const r of e){const{shape:s,fill:n,stroke:o,font:l}=r,d=aN(n),h=lN(o),y=s.type==="text"?_te(s,l):null,v=oN(s,d.fill,h,y);v&&i.push(v)}return k("mask",{id:t,maskUnits:"userSpaceOnUse"},k("g",null,i))}function z7(e,t,i){return Dy(e,_$(e),[t,i])}function j7(e,t,i,r,s){return w$(e,_$(e),[t,i]),e[4]=e[4]*t-r*t+r,e[5]=e[5]*i-s*i+s,e}function nPe(e,t,i,r){const s=t%360*Math.PI/180;W_(e,_$(e),s);const n=Math.cos(s),o=Math.sin(s),l=e[4],d=e[5];return e[4]=l*n-d*o+r*o-i*n+i,e[5]=d*n+l*o-i*o-r*n+r,e}function as(e,t){pi&&"left"in pi?(pi.left!=null&&pi.left>e&&(pi.left=e),(pi.right==null||pi.right<e)&&(pi.right=e),(pi.top==null||pi.top>t)&&(pi.top=t),(pi.bottom==null||pi.bottom<t)&&(pi.bottom=t)):pi={left:e,bottom:t,right:e,top:t}}function U7(e){const t=e.args,i=t.length;let r;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)as(t[r],t[r+1]);xt.x=t[i-2],xt.y=t[i-1];break;case"H":for(r=0;r<i;++r)as(t[r],xt.y);xt.x=t[i-1];break;case"V":for(r=0;r<i;++r)as(xt.x,t[r]);xt.y=t[i-1];break;case"m":{let s=0;for(("x"in xt)||(as(xt.x=t[0],xt.y=t[1]),s=2),r=s;r<i;r+=2)as(xt.x+=t[r],xt.y+=t[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)as(xt.x+=t[r],xt.y+=t[r+1]);break;case"h":for(r=0;r<i;++r)as(xt.x+=t[r],xt.y);break;case"v":for(r=0;r<i;++r)as(xt.x,xt.y+=t[r]);break;case"c":for(r=0;r<i;r+=6)as(xt.x+t[r],xt.y+t[r+1]),as(xt.x+t[r+2],xt.y+t[r+3]),as(xt.x+=t[r+4],xt.y+=t[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)as(xt.x+t[r],xt.y+t[r+1]),as(xt.x+=t[r+2],xt.y+=t[r+3]);break;case"A":for(r=0;r<i;r+=7)as(t[r+5],t[r+6]);xt.x=t[i-2],xt.y=t[i-1];break;case"a":for(r=0;r<i;r+=7)as(xt.x+=t[r+5],xt.y+=t[r+6])}}function G7(e,t,i){const r=tPe[e.toLowerCase()];let s;typeof r=="number"&&(r?t.length>=r&&(s={action:e,args:t.slice(0,t.length-t.length%r)},i.push(s),U7(s)):(s={action:e,args:[]},i.push(s),U7(s)))}function oPe(e){const t=(typeof e.path!="string"?bte(e.path):e.path).match(iPe),i=[];if(pi={},xt={},!t)return null;let r="",s=[];const n=t.length;for(let l=0;l<n;++l){const d=t[l],h=parseFloat(d);isNaN(h)?(r&&G7(r,s,i),s=[],r=d):s.push(h)}G7(r,s,i);const o={x:0,y:0,width:0,height:0};return pi&&"left"in pi&&(o.x=pi.left,o.y=pi.top,o.width=pi.right-pi.left,o.height=pi.bottom-pi.top),o}function Ste(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const i=oPe(e);t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height}return t}function Ete(e){const t={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(const n of e)i?(i.x=Math.min(i.x,n.x),i.y=Math.min(i.y,n.y),r=Math.max(r,n.x+n.width),s=Math.max(s,n.y+n.height)):(i=t,i.x=n.x,i.y=n.y,r=n.x+n.width,s=n.y+n.height);return i&&(i.width=r-i.x,i.height=s-i.y),i}function ZR(e,t,i,r,s,n,o,l,d){let h=(o&&n?zc(n,t):t)/2,y=(o&&n?zc(n,i):i)/2;if(d){const O=d[0],L=d[1];h=(o&&n?zc(n,O):O)/2,y=(o&&n?zc(n,L):L)/2}const v=e.width+r,b=e.height+r,w=JE(),E=JE();let T=!1;if(s&&v!==0&&b!==0){const O=t!==i?t/i:v/b,L=t>i?t:i;let R=1,N=1;isNaN(L)||(O>1?(R=L/v,N=L/O/b):(N=L/b,R=L*O/v)),Wh(E,E,j7(w,R,N,h,y)),T=!0}const $=e.x+(v-r)/2,A=e.y+(b-r)/2;if(Wh(E,E,z7(w,h-$,y-A)),!T&&(v>t||b>i)){const O=v/t>b/i,L=(O?t:i)/(O?v:b);Wh(E,E,j7(w,L,L,$,A))}return l&&Wh(E,E,z7(w,l[0],l[1])),n&&Wh(E,E,nPe(w,n,$,A)),`matrix(${E[0]},${E[1]},${E[2]},${E[3]},${E[4]},${E[5]})`}function aPe(e,t,i){const r=e==null?void 0:e.effects.find(h=>h.type==="bloom");if(!r)return null;const{strength:s,radius:n}=r,o=s>0?n:0,l=(s+o)*t,d=4*s+1;return k("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},k("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(s+.5*o)*(5**(t/100)*(.4+t/100)),result:"dilate"}),k("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:l/25}),k("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:l/50}),k("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},k("feFuncR",{slope:d,type:"linear"}),k("feFuncG",{slope:d,type:"linear"}),k("feFuncB",{slope:d,type:"linear"})),k("feMerge",null,k("feMergeNode",{in:"intensityBlur"}),k("feMergeNode",{in:"intensityBrightness"}),k("feGaussianBlur",{stdDeviation:s/10})))}function Tte(e,t,i,r={}){var b,w,E;const s=[],n=[],o=QRe(),l=aPe(r.effectView,t,o);let d=null;if(l){const T=(b=r.effectView)==null?void 0:b.effects.find(L=>L.type==="bloom"),$=(T.strength?T.strength+T.radius/2:0)/3,A=t+t*$,O=i+i*$;d=[Math.max(A,10),Math.max(O,10)]}let h=t,y=i;if(r.useRotationSize)for(let T=0;T<e.length;T++){const $=((w=r.rotations)==null?void 0:w[T])??0;h=Math.max(zc($,t),h),y=Math.max(zc($,i),y)}for(let T=0;T<e.length;T++){const $=e[T],A=[],O=[];let L=0,R=0,N=0;for(const ie of $){const{shape:oe,fill:ue,stroke:me,font:Te,offset:Ee}=ie;r.ignoreStrokeWidth||oe.type==="text"||(L+=(me==null?void 0:me.width)||0);const Ye=aN(ue),te=lN(me),fe=oe.type==="text"?_te(oe,Te):null;s.push(wte(Ye)),A.push(oN(oe,Ye.fill,te,fe,r.ariaLabel)),O.push(Ste(oe)),Ee&&(R+=Ee[0],N+=Ee[1])}const j=((E=r.rotations)==null?void 0:E[T])??0;r.useRotationSize&&(R+=(h-zc(j,t))/2,N+=(y-zc(j,i))/2);const V=ZR(Ete(O),t,i,L,r.scale??!1,j,r.useRotationSize??!1,[R,N],d);let Z=null;if(r.masking){const ie=`mask-${T}`,oe=r.masking[T];s.push(sPe(oe,ie)),Z=`url(#${ie})`}n.push(Z?k("g",{mask:Z},k("g",{transform:V},A)):k("g",{transform:V},A))}return l&&(m_(d),h=d[0],y=d[1]),k("svg",{"aria-label":r.ariaLabel,focusable:!1,height:y,role:"img",style:"display: block;",width:h,xmlns:KRe},l,k("defs",null,s),l?k("g",{filter:`url(#bloom${o})`},n):n)}const lPe=new ye("white");function uPe(e){var i,r;const t=(i=e.symbolLayers)==null?void 0:i.at(-1);if(t&&"outline"in t)return(r=t==null?void 0:t.outline)==null?void 0:r.size}function cPe(e){var t;if(!e)return 0;if(Ba(e)){const i=uPe(e);return i??0}return Bs((t=d_(e))==null?void 0:t.width)}function q$(e){if(e==null||!("symbolLayers"in e)||e.symbolLayers==null)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function dPe(e){var t;return((t=e.resource)==null?void 0:t.href)??""}function S7e(e,t){if(!e)return null;let i=null;return Ba(e)?i=hPe(e):f$(e)&&(i=e.type==="cim"?ote(e):e.color?new ye(e.color):null),i?h_(i,t):null}function hPe(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{var s;r.type==="object"&&((s=r.resource)!=null&&s.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new ye(i):null}function h_(e,t){if(t==null||e==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new ye(i)}function pPe(e,t,i){const r=e.symbolLayers;if(!r)return;const s=n=>h_(t=t??n??(i!=null?lPe:null),i);r.forEach(n=>{var o,l;if(n.type!=="object"||!((o=n.resource)!=null&&o.href)||t)if(n.type==="water")n.color=s(n.color);else{const d=n.material!=null?n.material.color:null,h=s(d);n.material==null?n.material=new Fs({color:h}):n.material.color=h,i!=null&&"outline"in n&&((l=n.outline)==null?void 0:l.color)!=null&&(n.outline.color=h_(n.outline.color,i))}})}function fPe(e,t,i){var r;(t=t??e.color)&&(e.color=h_(t,i)),i!=null&&"outline"in e&&((r=e.outline)!=null&&r.color)&&(e.outline.color=h_(e.outline.color,i))}function rI(e,t,i){e&&(t||i!=null)&&(t&&(t=new ye(t)),Ba(e)?pPe(e,t,i):f$(e)&&fPe(e,t,i))}async function mPe(e,t){const i=e.symbolLayers;i&&await fle(i,async r=>yPe(r,t))}async function yPe(e,t){switch(e.type){case"extrude":vPe(e,t);break;case"icon":case"line":case"text":gPe(e,t);break;case"path":_Pe(e,t);break;case"object":await bPe(e,t)}}function gPe(e,t){const i=$te(t);i!=null&&(e.size=i)}function $te(e){for(const t of e)if(typeof t=="number")return t;return null}function vPe(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function bPe(e,t){const{resourceSize:i,symbolSize:r}=await wPe(e),s=xte(t,i,r);e.width=Ob(t[0],r[0],i[0],s),e.depth=Ob(t[1],r[1],i[1],s),e.height=Ob(t[2],r[2],i[2],s)}function _Pe(e,t){const i=xte(t,eW,[e.width,void 0,e.height]);e.width=Ob(t[0],e.width,1,i),e.height=Ob(t[2],e.height,1,i)}function xte(e,t,i){for(let r=0;r<3;r++){const s=e[r];switch(s){case"symbol-value":{const n=i[r];return n!=null?n/t[r]:1}case"proportional":break;default:if(s&&t[r])return s/t[r]}}return 1}async function wPe(e){const{computeObjectLayerResourceSize:t}=await D(()=>import("./symbolLayerUtils-Dk6f-hNO.js"),[]),i=await t(e,10),{width:r,height:s,depth:n}=e,o=[r,n,s];let l=1;for(let d=0;d<3;d++){const h=o[d];if(h!=null){l=h/i[d];break}}for(let d=0;d<3;d++)o[d]==null&&(o[d]=i[d]*l);return{resourceSize:i,symbolSize:o}}function Ob(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t??i;default:return e}}function SPe(e,t){const i=$te(t);if(i!=null)switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function EPe(e,t){if(e&&t)return Ba(e)?mPe(e,t):void(f$(e)&&SPe(e,t))}function TPe(e,t,i){if(e&&t!=null)if(Ba(e)){const r=e.symbolLayers;r&&r.forEach(s=>{if(s.type==="object")switch(i){case"tilt":s.tilt=(s.tilt??0)+t;break;case"roll":s.roll=(s.roll??0)+t;break;default:s.heading=(s.heading??0)+t}s.type==="icon"&&(s.angle+=t)})}else f$(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle+=t))}function Q_(e){if(!e)return null;const t=e.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return cT(t)}function E7e(e){return e!=null&&e.type==="polygon-3d"&&e.symbolLayers.some(t=>t.type==="extrude")}const q7=zE();function $Pe(e,t){q7.append(e,t),q7.detach(t)}function K_(e,t,i){const r=Math.ceil(t[0]),s=Math.ceil(t[1]);if(!e.some(o=>!!o.length))return null;const n=(i==null?void 0:i.node)||document.createElement("div");return i.opacity!=null&&(n.style.opacity=i.opacity.toString()),i.effectView!=null&&(n.style.filter=Q_(i.effectView)),$Pe(n,()=>Tte(e,r,s,i)),n}function xPe(e,t){e=Math.ceil(e),t=Math.ceil(t);const i=document.createElement("canvas");i.width=e,i.height=t,i.style.width=e+"px",i.style.height=t+"px";const r=i.getContext("2d");return r.clearRect(0,0,e,t),r}function MPe(e,t,i){return e?Rt(e,{responseType:"image"}).then(r=>{const s=r.data,n=s.width,o=s.height,l=n/o;let d=t;if(i){const h=Math.max(n,o);d=Math.min(d,h)}return{image:s,width:l<=1?Math.ceil(d*l):d,height:l<=1?d:Math.ceil(d/l)}}):Promise.reject(new B("renderUtils: imageDataSize","href not provided."))}function APe(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function IPe(e,t,i,r,s){switch(s){case"multiply":e[t]*=i[0],e[t+1]*=i[1],e[t+2]*=i[2],e[t+3]*=i[3];break;default:{const n=G$({r:e[t],g:e[t+1],b:e[t+2]});n.h=r.h,n.s=r.s,n.v=n.v/100*r.v;const o=zp(n);e[t]=o.r,e[t+1]=o.g,e[t+2]=o.b,e[t+3]*=i[3];break}}}function CPe(e,t,i,r,s){return MPe(e,t,s).then(n=>{const o=n.width??t,l=n.height??t;if(n.image&&APe(i,r)){let d=n.image.width,h=n.image.height;Y("edge")&&/\.svg$/i.test(e)&&(d-=1,h-=1);const y=xPe(o,l);y.drawImage(n.image,0,0,d,h,0,0,o,l);const v=y.getImageData(0,0,o,l),b=[i.r/255,i.g/255,i.b/255,i.a],w=G$(i);for(let E=0;E<v.data.length;E+=4)IPe(v.data,E,b,w,r);y.putImageData(v,0,0),e=y.canvas.toDataURL("image/png")}else{const d=Be==null?void 0:Be.findCredential(e);if(d!=null&&d.token){const h=e.includes("?")?"&":"?";e=`${e}${h}token=${d.token}`}}return{url:e,width:o,height:l}}).catch(()=>({url:e,width:t,height:t}))}const OPe=["web-gltf","web","cim"],Mte="esri-relationship-ramp",qf=`${Mte}--diamond`,Wu=`${Mte}--square`,LPe="http://www.w3.org/2000/svg",qt={diamondContainer:`${qf}__container`,diamondLeftCol:`${qf}__left-column`,diamondRightCol:`${qf}__right-column`,diamondMidCol:`${qf}__middle-column`,diamondMidColLabel:`${qf}__middle-column--label`,diamondMidColRamp:`${qf}__middle-column--ramp`,squareTable:`${Wu}__table`,squareTableRow:`${Wu}__table-row`,squareTableCell:`${Wu}__table-cell`,squareTableLabel:`${Wu}__table-label`,squareTableLabelLeftBottom:`${Wu}__table-label--left-bottom`,squareTableLabelRightBottom:`${Wu}__table-label--right-bottom`,squareTableLabelLeftTop:`${Wu}__table-label--left-top`,squareTableLabelRightTop:`${Wu}__table-label--right-top`};function Ate(e,t,i={}){const{focus:r,labels:s}=e,n=!!r,o=RPe(e,t,i),l={justifyContent:"center"},d=n$(),h=i.key??t;return n?k("div",{class:qt.diamondContainer,key:`${h}-container`,styles:l},k("div",{class:qt.diamondLeftCol},d?s.right:s.left),k("div",{class:qt.diamondMidCol},k("div",{class:qt.diamondMidColLabel},s.top),o,k("div",{class:qt.diamondMidColLabel},s.bottom)),k("div",{class:qt.diamondRightCol},d?s.left:s.right)):k("div",{class:qt.squareTable,key:`${h}-container`},k("div",{class:qt.squareTableRow},k("div",{class:Um(qt.squareTableCell,qt.squareTableLabel,qt.squareTableLabelRightBottom)},d?s.top:s.left),k("div",{class:qt.squareTableCell}),k("div",{class:Um(qt.squareTableCell,qt.squareTableLabel,qt.squareTableLabelLeftBottom)},d?s.left:s.top)),k("div",{class:qt.squareTableRow},k("div",{class:qt.squareTableCell}),o,k("div",{class:qt.squareTableCell})),k("div",{class:qt.squareTableRow},k("div",{class:Um(qt.squareTableCell,qt.squareTableLabel,qt.squareTableLabelRightTop)},d?s.right:s.bottom),k("div",{class:qt.squareTableCell}),k("div",{class:Um(qt.squareTableCell,qt.squareTableLabel,qt.squareTableLabelLeftTop)},d?s.bottom:s.right)))}function B7(e,t,i){const r=`${i}_arrowStart`,s=`${i}_arrowEnd`,n=e==="left",o={markerStart:null,markerEnd:null};switch(t){case"HL":n?o.markerStart=`url(#${s})`:o.markerEnd=`url(#${r})`;break;case"LL":o.markerStart=`url(#${s})`;break;case"LH":n?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${s})`;break;default:o.markerEnd=`url(#${r})`}return o}function RPe(e,t,i={}){const{focus:r,numClasses:s,colors:n,rotation:o}=e,{opacity:l,effectList:d,ariaLabel:h}=i,y=i.size??60,v=!!r,b=Math.sqrt(y**2+y**2)+(v?0:5),w=[],E=[],T=[],$=(y||75)/s;for(let ue=0;ue<s;ue++){const me=ue*$;for(let Te=0;Te<s;Te++){const Ee=Te*$,Ye=aN(n[ue][Te]),te=lN(null),fe={type:"rect",x:Ee,y:me,width:$,height:$},we=wte(Ye);we&&w.push(we);const Je=oN(fe,Ye.fill,te,null);Je&&E.push(Je),T.push(Ste(fe))}}const A=15,O=15,L=10;let R=null;v||(R="margin: -15px -15px -18px -15px");const N=B7("left",r,t),j=B7("right",r,t),V=Ete(T),Z=ZR(V,b,b,0,!1,o,!1),ie=ZR(V,b,b,0,!1,v?-45:null,!1),oe={filter:Q_(d)??void 0,opacity:l==null?"":`${l}`};return k("div",{class:v?qt.diamondMidColRamp:qt.squareTableCell,styles:oe},k("svg",{"aria-label":h,focusable:!1,height:b,role:"image",style:R,width:b,xmlns:LPe},k("defs",null,k("marker",{id:`${t}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},k("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),k("marker",{id:`${t}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},k("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),w),k("g",{transform:Z},E),k("g",{transform:ie},k("line",{fill:"none","marker-end":N.markerEnd,"marker-start":N.markerStart,stroke:"#555555","stroke-width":"1",x1:-10,x2:-10,y1:y-A,y2:A}),k("line",{fill:"none","marker-end":j.markerEnd,"marker-start":j.markerStart,stroke:"#555555","stroke-width":"1",x1:O,x2:y-O,y1:y+L,y2:y+L}))))}function PPe(e){return e=e||globalThis.location.hostname,kPe.some(t=>(e==null?void 0:e.match(t))!=null)}function H7(e,t){return e?(t=t||globalThis.location.hostname)?t.match(Ite)!=null||t.match(Ote)!=null?e.replace("static.arcgis.com","staticdev.arcgis.com"):t.match(Cte)!=null||t.match(Lte)!=null?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e:null}const Ite=/^devext\.arcgis\.com$/,Cte=/^qaext\.arcgis\.com$/,Ote=/^[\w-]*\.mapsdevext\.arcgis\.com$/,Lte=/^[\w-]*\.mapsqa\.arcgis\.com$/,kPe=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,Ite,Cte,/^jsapps\.esri\.com$/,Ote,Lte];function Rte(e,t,i){const r=e.name;return r==null?Promise.reject(new B("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):e.styleName==="Esri2DPointSymbolsStyle"?DPe(r,t,i):FK(e,t,i).then(s=>kte(s,r,t,bAe,i))}function Pte(e,t){return t.items.find(i=>i.name===e)}async function kte(e,t,i,r,s){var $,A;const n=(i==null?void 0:i.portal)!=null?i.portal:ts.getDefault(),o={portal:n,url:ur(e.baseUrl)},l=Pte(t,e.data);if(!l)throw new B("symbolstyleutils:symbol-name-not-found",`The symbol name '${t}' could not be found`,{symbolName:t});const d=(s==null?void 0:s.acceptedFormats)??OPe,h=r(l,d);if(!h)throw new B("symbolstyleutils:symbol-reference-no-accepted-format",`The symbol name '${t}' does not have an accepted format (one of ${d})`,{symbolName:t});const{url:y,format:v}=h;let b=Wc(y,o),w=(($=l.thumbnail)==null?void 0:$.href)??null;const E=(A=l.thumbnail)==null?void 0:A.imageData;PPe()&&(b=H7(b)??"",w=H7(w));const T={portal:n,url:ur(CP(b)),origin:"portal-item"};return zD(b,s).then(O=>{const L=v==="cim"?VK(O.data):O.data,R=kK(L,T);if(R&&Ba(R)){if(w){const N=Wc(w,o);R.thumbnail=new dp({url:N})}else E&&(R.thumbnail=new dp({url:`data:image/png;base64,${E}`}));e.styleUrl?R.styleOrigin=new Xb({portal:i.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(R.styleOrigin=new Xb({portal:i.portal,styleName:e.styleName,name:t}))}return R})}function DPe(e,t,i){const r=_Ae.replaceAll(/\{SymbolName\}/gi,e),s=t.portal!=null?t.portal:ts.getDefault();return zD(r,i).then(n=>{const o=VK(n.data);return kK(o,{portal:s,url:ur(CP(r)),origin:"portal-item"})})}const NPe=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:kte,getStyleItemFromStyle:Pte,resolveWebStyleSymbol:Rte},Symbol.toStringTag,{value:"Module"})),Qh=Yi.size,Y2=Yi.maxSize,uN=Yi.maxOutlineSize,W7=Yi.lineWidth,YR=Yi.tallSymbolWidth;function Jm(e){const t=e.outline,i=e.material!=null?e.material.color:null,r=i!=null?i.toHex():null;if(t==null||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const s=mi(t.size)||0;return{color:"rgba("+(t.color!=null?t.color.toRgba():"255,255,255,1")+")",width:Math.min(s,uN),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?nN(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}async function FPe(e,t){var r,s,n;if((r=e.thumbnail)!=null&&r.url)return e.thumbnail.url;if(t.type==="icon"&&((s=t==null?void 0:t.resource)==null?void 0:s.href))return dPe(t);const i=oi("esri/images/Legend/legend3dsymboldefault.png");if(e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)){const o=await Rte(e.styleOrigin,{portal:e.styleOrigin.portal}).catch(()=>null);if(o&&"thumbnail"in o&&((n=o.thumbnail)!=null&&n.url))return o.thumbnail.url}return i}function sI(e,t=1){const i=e.a,r=G$(e),s=r.h,n=r.s/t,o=100-(100-r.v)/t,{r:l,g:d,b:h}=zp({h:s,s:n,v:o});return[l,d,h,i]}function _T(e){var t;return e.type==="water"?e.color==null?null:e.color:((t=e.material)==null?void 0:t.color)==null?null:e.material.color}function St(e,t=0){const i=_T(e);if(!i){if(e.type==="fill")return null;const s=HRe.r,n=Hc(s,t);return[n,n,n,100]}const r=i.toRgba();for(let s=0;s<3;s++)r[s]=Hc(r[s],t);return r}async function Dte(e,t){const i=e.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await BRe(oi(`esri/symbols/patterns/${i}.png`),t.toCss(!0)),width:5,height:5}}function Z7(e){return e.outline?Jm(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function cN(e,t){const i=_T(e);if(!i)return null;let r="rgba(";return r+=Hc(i.r,t)+",",r+=Hc(i.g,t)+",",r+=Hc(i.b,t)+",",r+i.a+");"}function JR(e,t){const i=cN(e,t);return i?"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:i,width:Math.min(e.size?mi(e.size):.75,uN),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?nN(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?mi(2):e.join:null}:{}}function TS(e,t,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function VPe(e){const t=e.depth,i=e.height,r=e.width;return r!==0&&t!==0&&i!==0&&r===t&&r!=null&&i!=null&&r<i}function zPe(e,t,i){var s,n;const r=[];if(!e)return r;switch(e.type){case"icon":{const d=t,h=t;switch(((s=e.resource)==null?void 0:s.primitive)??gve){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:St(e,0),stroke:Jm(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,h]},{command:"L",values:[0,0]},{command:"L",values:[d,0]},{command:"L",values:[d,h]},{command:"Z",values:[]}]},fill:St(e,0),stroke:Jm(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,h]},{command:"L",values:[.5*d,0]},{command:"L",values:[d,h]},{command:"Z",values:[]}]},fill:St(e,0),stroke:Jm(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*d,0]},{command:"L",values:[.5*d,h]},{command:"M",values:[0,.5*h]},{command:"L",values:[d,.5*h]}]},stroke:Z7(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[d,h]},{command:"M",values:[d,0]},{command:"L",values:[0,h]}]},stroke:Z7(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*h]},{command:"L",values:[.5*d,0]},{command:"L",values:[d,.5*h]},{command:"L",values:[.5*d,h]},{command:"Z",values:[]}]},fill:St(e,0),stroke:Jm(e)})}break}case"object":switch(((n=e.resource)==null?void 0:n.primitive)??Sve){case"cone":{const o=TS(St(e,0),St(e,-.6),i?YR:t),l=_Re(t,i);r.push({shape:l[0],fill:o},{shape:l[1],fill:o});break}case"inverted-cone":{const o=St(e,0),l=TS(o,St(e,-.6),t),d=wRe(t);r.push({shape:d[0],fill:l},{shape:d[1],fill:o});break}case"cube":{const o=vRe(t,i);r.push({shape:o[0],fill:St(e,0)},{shape:o[1],fill:St(e,-.3)},{shape:o[2],fill:St(e,-.5)});break}case"cylinder":{const o=TS(St(e,0),St(e,-.6),i?YR:t),l=bRe(t,i);r.push({shape:l[0],fill:o},{shape:l[1],fill:o},{shape:l[2],fill:St(e,0)});break}case"diamond":{const o=SRe(t);r.push({shape:o[0],fill:St(e,-.3)},{shape:o[1],fill:St(e,0)},{shape:o[2],fill:St(e,-.3)},{shape:o[3],fill:St(e,-.7)});break}case"sphere":{const o=TS(St(e,0),St(e,-.6));o.x1=0,o.y1=0,o.x2=.25*t,o.y2=.25*t,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:o});break}case"tetrahedron":{const o=ERe(t);r.push({shape:o[0],fill:St(e,-.3)},{shape:o[1],fill:St(e,0)},{shape:o[2],fill:St(e,-.6)});break}}break}return r}function B$(e){const t=typeof(e==null?void 0:e.size)=="number"?e==null?void 0:e.size:null;return t?mi(t):null}function jPe(e){return e.type==="icon"?"multiply":"tint"}async function UPe(e,t){const i=B$(t),r=t!=null&&t.maxSize?mi(t.maxSize):null,s=(t==null?void 0:t.disableUpsampling)??!1,n=e.symbolLayers,o=[],l=[];let d=!1,h=0,y=0,v=0;n.forEach(E=>{var O,L,R,N;if(E.type!=="icon"&&E.type!=="object")return;E&&E.type==="icon"&&(v=Math.max(E.size&&mi(E.size),v));const T=E.type==="icon"?E.size&&mi(E.size):0,$=i||T?Math.ceil(Math.min(i||T,r||Y2)):Qh;let A=E.type==="icon"?E.angle:null;if((t==null?void 0:t.rotation)!=null&&(A=(A??0)+t.rotation),l.push(A),(O=E==null?void 0:E.resource)==null?void 0:O.href){const j=FPe(e,E).then(V=>{var oe;const Z=(oe=E==null?void 0:E.material)==null?void 0:oe.color,ie=jPe(E);return CPe(V,$,Z,ie,s)}).then(V=>{const Z=V.width,ie=V.height;return h=Math.max(h,Z),y=Math.max(y,ie),A&&(d=!0),[{shape:{type:"image",x:0,y:0,width:Z,height:ie,src:V.url},fill:null,stroke:null}]});o.push(j)}else{let j=$;E.type==="icon"&&i&&(j=$*(T/v));const V=(t==null?void 0:t.symbolConfig)==="tall"||((L=t==null?void 0:t.symbolConfig)==null?void 0:L.isTall)||E.type==="object"&&VPe(E);h=Math.max(h,V?YR:j),y=Math.max(y,j),A&&((R=E.resource)!=null&&R.primitive)&&["square","triangle","x"].includes((N=E.resource)==null?void 0:N.primitive)&&(d=!0),o.push(Promise.resolve(zPe(E,j,V)))}});const b=await Promise.allSettled(o),w=[];return b.forEach(E=>{E.status==="fulfilled"?w.push(E.value):E.reason&&ae.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",E.reason)}),K_(w,[h,y],{node:t==null?void 0:t.node,scale:!1,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel,rotations:l,useRotationSize:d})}function GPe(e,t){const i=e.symbolLayers,r=[],s=q$(e),n=B$(t),o=(t!=null&&t.maxSize?mi(t.maxSize):null)||uN;let l,d=0,h=0;return i.forEach((y,v)=>{if(!y||y.type!=="line"&&y.type!=="path")return;const b=[];switch(y.type){case"line":{const w=JR(y,0);if(w==null)break;const E=(w==null?void 0:w.width)||0;v===0&&(l=E);const T=Math.min(n||E,o),$=v===0?T:n?T*(E/l):T,A=$>W7/2?2*$:W7;h=Math.max(h,$),d=Math.max(d,A),w.width=$,b.push({shape:{type:"path",path:[{command:"M",values:[0,.5*h]},{command:"L",values:[d,.5*h]}]},stroke:w});break}case"path":{const w=Math.min(n||Qh,o),E=St(y,0),T=St(y,-.2),$=cN(y,-.4),A=$?{color:$,width:1}:{};if(y.profile==="quad"){const O=y.width,L=y.height,R=mRe(O&&L?O/L:1,L===0,O===0),N={...A,join:"bevel"};b.push({shape:R[0],fill:T,stroke:N},{shape:R[1],fill:T,stroke:N},{shape:R[2],fill:E,stroke:N})}else b.push({shape:Cb.pathSymbol3DLayer[0],fill:T,stroke:A},{shape:Cb.pathSymbol3DLayer[1],fill:E,stroke:A});h=Math.max(h,w),d=h}}r.push(b)}),Promise.resolve(K_(r,[d,h],{node:t==null?void 0:t.node,scale:s,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel}))}async function qPe(e,t){const i=e.type==="mesh-3d",r=e.symbolLayers,s=B$(t),n=t!=null&&t.maxSize?mi(t.maxSize):null,o=s||Qh,l=[];let d=0,h=0,y=!1;for(let v=0;v<r.length;v++){const b=r.at(v),w=[];if(!i||b.type==="fill"){switch(b.type){case"fill":{const E=Math.min(o,n||Y2);if(d=Math.max(d,E),h=Math.max(h,E),y=!0,i){const T=Cb.meshSymbol3DFill,$=cN(b,-.4),A=$?{color:$,width:1,join:"round"}:{};w.push({shape:T[0],fill:St(b,0),stroke:A},{shape:T[1],fill:St(b,-.2),stroke:A},{shape:T[2],fill:St(b,-.6),stroke:A})}else{let T=St(b,0);const $="pattern"in b?b.pattern:null,A=Jm(b),O=_T(b);$!=null&&$.type==="style"&&$.style!=="solid"&&O&&(T=await Dte($,O)),w.push({shape:Cb.fill[0],fill:T,stroke:A})}break}case"line":{const E=JR(b,0);if(E==null)break;const T={stroke:E,shape:Cb.fill[0]};d=Math.max(d,Qh),h=Math.max(h,Qh),w.push(T);break}case"extrude":{const E={join:"round",width:1,...JR(b,-.4)},T=St(b,0),$=St(b,-.2),A=Math.min(o,n||Y2),O=yRe(A);E.width=1,w.push({shape:O[0],fill:$,stroke:E},{shape:O[1],fill:$,stroke:E},{shape:O[2],fill:T,stroke:E});const L=Qh,R=.7*Qh+.5*A;d=Math.max(d,L),h=Math.max(h,R);break}case"water":{const E=_T(b),T=sI(E),$=sI(E,2),A=sI(E,3),O=gRe();y=!0,w.push({shape:O[0],fill:T},{shape:O[1],fill:$},{shape:O[2],fill:A});const L=Math.min(o,n||Y2);d=Math.max(d,L),h=Math.max(h,L);break}}l.push(w)}}return K_(l,[d,h],{node:t==null?void 0:t.node,scale:y,opacity:t==null?void 0:t.opacity,ariaLabel:t==null?void 0:t.ariaLabel})}function BPe(e,t){if(e.symbolLayers.length===0)return Promise.reject(new B("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return UPe(e,t);case"line-3d":return GPe(e,t);case"polygon-3d":case"mesh-3d":return qPe(e,t)}return Promise.reject(new B("symbolPreview: swatchInfo3D","symbol not supported."))}const HPe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:Dte,getSizeFromOptions:B$,getSymbolLayerFill:St,previewSymbol3D:BPe},Symbol.toStringTag,{value:"Module"})),Y7={HH:315,HL:45,LL:135,LH:225},WPe={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function ZPe(e){if(!e)return;const{type:t}=e;if(t.includes("3d"))return St(e.symbolLayers.at(0));if(t==="simple-line"){const i=d_(e);return i&&i.color}if(e.type==="simple-marker"&&(e.style==="x"||e.style==="cross")){const i=d_(e);return i&&i.color}return qRe(e)}function YPe(e,t){const i=t.HH.label,r=t.LL.label,s=t.HL.label,n=t.LH.label;switch(e){case"HH":default:return{top:i,bottom:r,left:s,right:n};case"HL":return{top:s,bottom:n,left:r,right:i};case"LL":return{top:r,bottom:i,left:n,right:s};case"LH":return{top:n,bottom:s,left:i,right:r}}}function JPe(e){const{focus:t,infos:i,numClasses:r}=e,s=WPe[r],n={};i.forEach(l=>{n[l.value]={label:l.label,fill:ZPe(l.symbol)}});const o=[];for(let l=0;l<r;l++){const d=[];for(let h=0;h<r;h++){const y=n[s[l][h]];d.push(y.fill)}o.push(d)}return{type:"relationship-ramp",numClasses:r,focus:t,colors:o,labels:YPe(t,n),rotation:Nte(t)}}function Nte(e){let t=Y7[e];return e&&t==null&&(t=Y7.HH),t||0}let Bf=null;const J7=[255,255,255];function X7(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function XPe(e,t,i){const{backgroundColor:r,outline:s,dotSize:n}=e,o=(i==null?void 0:i.swatchSize)||Yi.size,l=.8,d=Math.round(o*o/Math.max(n,.5)**2*l),h=window.devicePixelRatio,y=document.createElement("canvas"),v=o*h;y.width=v,y.height=v,y.style.width=y.width/h+"px",y.style.height=y.height/h+"px";const b=y.getContext("2d");if(r&&(b.fillStyle=r.toCss(!0),b.fillRect(0,0,v,v),b.fill()),b.fillStyle=(t==null?void 0:t.toCss(!0))??"",Bf&&Bf.length/2===d)for(let E=0;E<2*d;E+=2){const T=Bf[E],$=Bf[E+1];b.fillRect(T,$,n*h,n*h),b.fill()}else{Bf=[];for(let E=0;E<2*d;E+=2){const T=X7(0,v),$=X7(0,v);Bf.push(T,$),b.fillRect(T,$,n*h,n*h),b.fill()}}s&&(s.color&&(b.strokeStyle=s.color.toCss(!0)),b.lineWidth=s.width,b.strokeRect(0,0,v,v));const w=new Image(o,o);return w.src=y.toDataURL(),w.ariaLabel=(i==null?void 0:i.ariaLabel)??null,w.alt=(i==null?void 0:i.ariaLabel)??"",w}function QPe(e,t={}){const i=t.radius||40,r=2*Math.PI*i,s=e.length,n=r/s,o=[],l=d_(t.outline);(l==null?void 0:l.width)!=null&&(l.width*=2),(l||t.backgroundColor)&&o.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:t.backgroundColor,stroke:l,offset:[0,0]});const d=t.values,h=d&&d.length===s&&d.reduce((E,T)=>E+T,0)===100,y=[0];for(let E=0;E<s;E++){let T=null;h&&(T=d[E]*r/100,y.push(T+y[E])),o.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(T??n)/2} ${r}`,dashoffset:"-"+(h?y[E]/2:E*(n/2)),color:e[E]},offset:[0,0]})}let v=null;const b=2*i+((l==null?void 0:l.width)||0),w=t.holePercentage;if(w){l&&o.push({shape:{type:"circle",cx:i,cy:i,r:i*w},fill:null,stroke:l,offset:[0,0]});const E=b/2;v=[[{shape:{type:"circle",cx:E,cy:E,r:E},fill:J7,stroke:l?{...l,color:J7}:null,offset:[0,0]},{shape:{type:"circle",cx:E,cy:E,r:i*w},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return K_([o],[b,b],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:v,rotations:[-90],ariaLabel:t.ariaLabel})}function Ph(e,t={}){const s=t.align==="horizontal",n=s?75:24,o=s?24:75,l=t.width??n,d=t.height??o,h=t.gradient??!0,y=window.devicePixelRatio,v=l*y,b=d*y,w=document.createElement("canvas");w.width=v,w.height=b,w.ariaLabel=t.ariaLabel??null,w.style.width=`${l}px`,w.style.height=`${d}px`;const E=w.getContext("2d"),T=s?v:0,$=s?0:b;if(h){const O=E.createLinearGradient(0,0,T,$),L=e.length,R=L===1?0:1/(L-1);e.forEach((N,j)=>O.addColorStop(j*R,N.toString())),E.fillStyle=O,E.fillRect(0,0,v,b)}else{const O=s?v/e.length:v,L=s?b:b/e.length;let R=0,N=0;for(const j of e)E.fillStyle=j.toString(),E.fillRect(R,N,O,L),R=s?R+O:0,N=s?0:N+L}const A=document.createElement("div");return A.style.width=`${l}px`,A.style.height=`${d}px`,KPe(A,t==null?void 0:t.effectList),A.appendChild(w),A}function KPe(e,t){if(!t)return;e.style.filter=Q_(t);const i=t.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?e.style.marginLeft=`${Math.abs(r.offsetX)}px`:e.style.marginRight=`${r.offsetX}px`;break}}}async function Fte(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:i}=await D(()=>import("./previewWebStyleSymbol--rk_XK1a.js"),[]);return i(e,Fte,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await D(()=>Promise.resolve().then(()=>HPe),void 0);return i(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await D(()=>import("./previewSymbol2D-CrKDlqT6.js"),__vite__mapDeps([439,89,18]));return i(e,t)}case"cim":{const{previewCIMSymbol:i}=await D(()=>import("./previewCIMSymbol-Je3be1rZ.js"),__vite__mapDeps([440,87,88,89,28,7,90,91,92,93,85,441,195,191,18]));return i(e,t)}default:return}}function Vte(e){return e&&"opacity"in e?e.opacity*Vte(e.parent):1}async function T7e(e,t){var L;if(!e)return;const i=e.sourceLayer,r=(t!=null&&t.useSourceLayer?i:e.layer)??i,s=t!=null&&t.ignoreOpacity?1:Vte(r);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){const R=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,acceptedFormats:["web","cim"],cache:t!=null?t.webStyleCache:null}):e.symbol.clone();return rI(R,null,s),R}const n=(t==null?void 0:t.renderer)??eke(r);let o=n&&"getSymbolAsync"in n?await n.getSymbolAsync(e,t):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...t,cache:t!=null?t.webStyleCache:null}):o.clone(),!n||!("visualVariables"in n)||!((L=n.visualVariables)!=null&&L.length))return rI(o,null,s),o;if("arcadeRequiredForVisualVariables"in n&&n.arcadeRequiredForVisualVariables&&(t==null?void 0:t.arcade)==null){const R={...t};R.arcade=await Va(),t=R}const{getColor:l,getOpacity:d,getAllSizes:h,getRotationAngle:y}=await D(()=>Promise.resolve().then(()=>Fp),void 0),v=[],b=[],w=[],E=[];for(const R of n.visualVariables)switch(R.type){case"color":v.push(R);break;case"opacity":b.push(R);break;case"rotation":E.push(R);break;case"size":R.target||w.push(R)}const T=!!v.length&&v[v.length-1],$=T?l(T,e,t):null,A=!!b.length&&b[b.length-1];let O=A?d(A,e,t):null;if(s!=null&&(O=O!=null?O*s:s),t!=null&&t.ignoreOpacity&&(O=1),rI(o,$,O),w.length&&(t==null?void 0:t.ignoreSizeVariables)!==!0){const R=h(w,e,t);await EPe(o,R)}if((t==null?void 0:t.ignoreRotationVariables)!==!0)for(const R of E)TPe(o,y(R,e,t),R.axis);return o}function eke(e){if(e)return"renderer"in e?e.renderer:void 0}function tke(e,t,i){const r=e.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const s=r.visualVariables.find(y=>y.type==="size");if(!("stops"in s)||!s.stops)return null;const n=s.stops.find(y=>y.useMinValue),o=s.stops.find(y=>y.useMaxValue);if(n==null||o==null)return null;const l=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,d=s.field,h=t.getDisplayStatistics(l,d);return h?new lg({field:s.field,minSize:e.clusterMinSize,minDataValue:h.minValue,maxSize:e.clusterMaxSize,maxDataValue:h.maxValue}):null}const ike=/^-?(\d+)(\.(\d+))?$/i;function rke(e,t){return e-t}function ske(e,t){let i,r;return i=Number(e.toFixed(t)),i<e?r=i+1/10**t:(r=i,i-=1/10**t),i=Number(i.toFixed(t)),r=Number(r.toFixed(t)),[i,r]}function nke(e,t,i,r,s){const n=J2(e,t,i,r),o=n.previous==null||n.previous<=s,l=n.next==null||n.next<=s;return o&&l||n.previous+n.next<=2*s}function wT(e){const t=String(e),i=t.match(ike);if(i!=null&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(t.toLowerCase().includes("e")){const r=t.split("e"),s=r[0],n=r[1];if(s&&n){const o=Number(s);let l=Number(n);const d=l>0;d||(l=Math.abs(l));const h=wT(o);return d?(h.integer+=l,l>h.fractional?h.fractional=0:h.fractional-=l):(h.fractional+=l,l>h.integer?h.integer=1:h.integer-=l),h}}return{integer:0,fractional:0}}function J2(e,t,i,r){const s={previous:null,next:null};if(i!=null){const n=e-i,o=t-i-n;s.previous=Math.floor(Math.abs(100*o/n))}if(r!=null){const n=r-e,o=r-t-n;s.next=Math.floor(Math.abs(100*o/n))}return s}function ST(e,t={}){const i=e.slice(),{tolerance:r=2,strictBounds:s=!1,indexes:n=i.map((o,l)=>l)}=t;n.sort(rke);for(let o=0;o<n.length;o++){const l=n[o],d=i[l],h=l===0?null:i[l-1],y=l===i.length-1?null:i[l+1],v=wT(d).fractional;if(v){let b,w=0,E=!1;for(;w<=v&&!E;){const T=ske(d,w);b=s&&o===0?T[1]:T[0],E=nke(d,b,h,y,r),w++}E&&(i[l]=b)}}return i}const oke={maximumFractionDigits:20};function ake(e){return Tp(e,oke)}const $7e=",",lke={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},uke=new Set(["integer","small-integer"]);let nI=null;function cke(e){return Pk(e)||$0e(e)||x0e(e)}async function x7e(e){const{field:t,field2:i,field3:r,normalizationField:s,valueExpression:n}=e;let o=[];if(n){if(!nI){const{arcadeUtils:l}=await Va();nI=l}o=nI.extractFieldNames(n)}return t&&o.push(t),i&&o.push(i),r&&o.push(r),s&&o.push(s),o}function z0(e){return String(e).padStart(2,"0")}function Q7(e,t,i){let r;return t==="date"||t==="number"?(t==="number"&&(e=new Date(e)),r=`TIMESTAMP'${i?e.getFullYear():e.getUTCFullYear()}-${z0((i?e.getMonth():e.getUTCMonth())+1)}-${z0(i?e.getDate():e.getUTCDate())} ${z0(i?e.getHours():e.getUTCHours())}:${z0(i?e.getMinutes():e.getUTCMinutes())}:${z0(i?e.getSeconds():e.getUTCSeconds())}'`):r=e,r}function M7e(e,t,i,r){const{hasQueryEngine:s}=e,n=`(${Q7(i,K7(e,i),s)} - ${Q7(t,K7(e,t),s)})`;let o=lke[r],l="/";return o<1&&(o=1/o,l="*"),{sqlExpression:o===1?n:`(${n} ${l} ${o})`,sqlWhere:null}}function K7(e,t){if(t instanceof Date)return"date";if(typeof t=="number")return"number";if(typeof t=="string"){const i=e.getField(t);if(t.toLowerCase()==="<now>")return;if(Pk(i))return"field"}}function A7e(e,t){const i=t&&e.getField(t);return!!i&&uke.has(i.type)}function I7e(e){return`cast(${e} as float)`}function dke(e,t){const{format:i,timeZoneOptions:r,fieldType:s}=t??{};let n,o;if(r&&({timeZone:n,timeZoneName:o}=qde(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,w0(i||"short-date-short-time"),s)),typeof e=="string"&&isNaN(Date.parse(s==="time-only"?`1970-01-01T${e}Z`:e)))return e;switch(s){case"date-only":{const l=w0(i||"short-date");return typeof e=="string"?Jde(e,{...l}):Go(e,{...l,timeZone:Da})}case"time-only":{const l=w0(i||"short-time");return typeof e=="string"?Xde(e,l):Go(e,{...l,timeZone:Da})}case"timestamp-offset":{if(!n&&typeof e=="string"&&new Date(e).toISOString()!==e)return e;const l=i||r?w0(i||"short-date-short-time"):void 0,d=l?{...l,timeZone:n,timeZoneName:o}:void 0;return typeof e=="string"?Qde(e,d):Go(e,d)}default:{const l=i||r?w0(i||"short-date-short-time"):void 0;return Go(typeof e=="string"?new Date(e):e,l?{...l,timeZone:n,timeZoneName:o}:void 0)}}}const zte="<",jte=">";function Ute(e,t,i,r){let s="";return t===0?s=`${zte} `:t===i&&(s=`${jte} `),s+(r?dke(e,r):ake(e))}const hke=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function XR(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find(o=>o.type==="color");if(!t)return null;let i=null,r=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;i=t.stops[0].value,r=t.stops[t.stops.length-1].value}const s=i!=null&&r!=null?i+(r-i)/2:0,{getColor:n}=await D(async()=>{const{getColor:o}=await Promise.resolve().then(()=>Fp);return{getColor:o}},void 0);return n(t,s)??null}async function Gte(e,t){const i=e.trailCap,r=e.trailWidth||1,s=t||await XR(e)||e.color;return new ws({cap:i,color:s,width:r})}function pke(e,t){var i,r;if(!t.field)return null;if("featureReduction"in e)switch((i=e.featureReduction)==null?void 0:i.type){case"cluster":case"binning":{const s=e.featureReduction.fields.find(({name:n})=>n.toLowerCase()===t.field.toLowerCase());return s&&"getField"in e?e.getField(s.onStatisticField):null}}return"getField"in e?(r=e.getField)==null?void 0:r.call(e,t.field):null}function fke(e,t){var r,s,n;const i="popupTemplate"in e?(r=e.popupTemplate)==null?void 0:r.fieldInfos:null;if(i!=null&&i.length&&t)return(n=(s=i.find(o=>{var l;return((l=o.fieldName)==null?void 0:l.toLowerCase())===t.toLowerCase()}))==null?void 0:s.format)==null?void 0:n.dateFormat}function mke(e,t,i){var n,o,l,d;const r=pke(e,t);if(!r||!cke(r)&&!eY(r))return null;let s=fke(e,r.name);if(!s&&r.type==="date"){let h=0,y=0;t.stops?(h=((o=(n=t.stops)==null?void 0:n.at(0))==null?void 0:o.value)??h,y=((d=(l=t.stops)==null?void 0:l.at(-1))==null?void 0:d.value)??y):"minDataValue"in t&&"maxDataValue"in t&&(h=t.minDataValue??h,y=t.maxDataValue??y),s=y-h>2*hC.days?"short-date":"short-date-short-time"}return{fieldType:r.type,format:s,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}}function QR(e){var t,i;if("authoringInfo"in e)return(i=(t=e.authoringInfo)==null?void 0:t.visualVariables)==null?void 0:i.find(({theme:r})=>r==="reference-size")}const yke=new ye([64,64,64]);function qte(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((s,n)=>i.includes(n)?Ute(s,n,r,t):null)}async function eG(e,t,i){let r=!1,s=[],n=[];if(e.stops){const h=e.stops;s=h.map(y=>y.value),r=h.some(y=>!!y.label),r&&(n=h.map(y=>y.label))}const o=s[0],l=s[s.length-1];if(o==null&&l==null)return null;const d=r?null:qte(s,i);return(await Promise.all(s.map(async(h,y)=>({value:h,color:e.type==="opacity"?await gke(h,e,t):(await D(async()=>{const{getColor:v}=await Promise.resolve().then(()=>Fp);return{getColor:v}},void 0)).getColor(e,h),label:r?n[y]:(d==null?void 0:d[y])??""})))).reverse()}async function gke(e,t,i){const r=new ye(i??yke),s=(await D(async()=>{const{getOpacity:n}=await Promise.resolve().then(()=>Fp);return{getOpacity:n}},void 0)).getOpacity(t,e);return s!=null&&(r.a=s),r}function vke(e){let t=!1,i=[],r=[];i=e.map(l=>l.value),t=e.some(l=>!!l.label),t&&(r=e.map(l=>l.label??""));const s=i[0],n=i[i.length-1];if(s==null&&n==null)return null;const o=t?null:qte(i);return i.map((l,d)=>({value:l,color:Bte(l,e),label:t?r[d]:(o==null?void 0:o[d])??""})).reverse()}function Bte(e,t){const{startIndex:i,endIndex:r,weight:s}=bke(e,t);if(i===r)return t[i].color;const n=ye.blendColors(t[i].color,t[r].color,s);return new ye(n)}function bke(e,t){let i=0,r=t.length-1;return t.some((s,n)=>e<s.value?(r=n,!0):(i=n,!1)),{startIndex:i,endIndex:r,weight:(e-t[i].value)/(t[r].value-t[i].value)}}function _ke(e,t){let i=[];if(e&&e.type==="multipart")e.colorRamps.reverse().forEach((r,s)=>{s===0?i.push({value:t.max,color:new ye(r.toColor),label:"high"}):i.push({value:null,color:new ye(r.toColor),label:""}),s===e.colorRamps.length-1?i.push({value:t.min,color:new ye(r.fromColor),label:"low"}):i.push({value:null,color:new ye(r.fromColor),label:""})});else{let r,s;e&&e.type==="algorithmic"?(r=e.fromColor,s=e.toColor):(r=[0,0,0,1],s=[255,255,255,1]),i=[{value:t.max,color:new ye(s),label:"high"},{value:t.min,color:new ye(r),label:"low"}]}return i}function wke(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>{var s;return((s=r.color)==null?void 0:s.a)>0});let i=t.length-1;if(t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new Ab({ratio:1,color:r.color})),i++)}return t.map((r,s)=>{var o,l;let n="";return s===0?n=((o=e.legendOptions)==null?void 0:o.minLabel)||"low":s===i&&(n=((l=e.legendOptions)==null?void 0:l.maxLabel)||"high"),{color:r.color,label:n,ratio:r.ratio}}).reverse()}const KR=30,eP=12,tP=24,Hte=[255,255,255],dN=[200,200,200],Xm=[128,128,128],Ske=20,Eke=5;function Tke(e){return e.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function $ke(e){return e.declaredClass==="esri.symbols.PictureMarkerSymbol"}function xke(e){return e.declaredClass==="esri.symbols.SimpleLineSymbol"}function Mke(e){return e.declaredClass==="esri.symbols.TextSymbol"}function Ake(e,t){const i=e.length-1;return e.map((r,s)=>Ute(r,s,i,t))}async function Ike(e,t,i,r,s,n,o){const l=t.legendOptions,d=l==null?void 0:l.customValues,h=o||await Rke(e,i),y=t.stops,v=!!h,b=!!d,w=t.minSize!=null&&t.maxSize!=null,E=y&&y.length>1,T=!!t.target;if(!v||!b&&!(w||E&&!T))return;const $=q$(h);let A=!1,O=null,L=null;O=$&&!E?ST([t.minDataValue,t.maxDataValue]):d??await kke(t,h,r,s==null?void 0:s.type);const R=e==null?void 0:e.authoringInfo,N=(R==null?void 0:R.type)==="univariate-color-size",j=N&&(R==null?void 0:R.univariateTheme)==="above-and-below",V=!!QR(e);if(!O&&E&&(O=y.map(ue=>ue.value),A=y.some(ue=>!!ue.label),e.type==="flow"&&(O=ST(O)),A&&(L=y.map(ue=>ue.label))),$&&O!=null&&(O==null?void 0:O.length)>2&&!j&&(O=[O[0],O[O.length-1]]),!O)return null;N&&(O==null?void 0:O.length)!==5&&(O=Yte({minSize:O[0],maxSize:O[O.length-1]}));const Z=$?Cke(e,O):null,ie=cPe(h),oe=A?null:Ake(O,n);return(await Promise.all(O.map(async(ue,me)=>{const Te=$?Z[me]:await Nm(t,h,ue,r,s==null?void 0:s.type);return{value:ue,symbol:!V||e.type!=="class-breaks"&&e.type!=="unique-value"?Fke(j&&e.type==="class-breaks"?Lke(e,me):h,Te):Oke(e,Te,t.maxSize,i)??h,label:A?L[me]:oe[me],size:V?tP:Te,outlineSize:ie}}))).reverse()}function Cke(e,t){const i=e==null?void 0:e.authoringInfo,r=(i==null?void 0:i.type)==="univariate-color-size";let s=[eP,KR];if(r){const n=t[0],o=t[t.length-1],l=eP,d=KR;s=t.map(h=>l+(h-n)/(o-n)*(d-l))}return r&&(i==null?void 0:i.univariateTheme)==="below"&&s.reverse(),s}function Oke(e,t,i,r){var o,l,d,h,y,v;const s=e.type==="class-breaks",n=s?(d=(l=(o=e.classBreakInfos)==null?void 0:o[0])==null?void 0:l.symbol)==null?void 0:d.clone():(v=(y=(h=e.uniqueValueInfos)==null?void 0:h[0])==null?void 0:y.symbol)==null?void 0:v.clone();return n&&"type"in n&&n.type==="cim"?(ste(n,{color:r??(s?null:new ye(dN)),innerDotSize:t*(tP/i)||1,outerRingSize:tP}),n):null}function Lke(e,t){var o;const i=e.classBreakInfos,r=i.length,s=r<2||!(t>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return((o=e.visualVariables)==null?void 0:o.some(l=>l.type==="color"))&&(s.type.includes("3d")?Wte(s):Zte(s)),s}async function Rke(e,t){var s,n;if(e.type==="flow")return Gte(e,t);if(e.type==="pie-chart")return new es({color:null,outline:(s=e.outline)!=null&&s.width?e.outline:new ws});let i=null,r=null;if(e.type==="simple")i=e.symbol;else if(e.type==="class-breaks"){const o=e.classBreakInfos;i=o&&o[0]&&o[0].symbol,r=o.length>1}else if(e.type==="unique-value"){const o=e.uniqueValueInfos;i=(n=o==null?void 0:o[0])==null?void 0:n.symbol,r=o!=null&&o.length>1}return!i||Pke(i)?null:(i=i.clone(),(t||r)&&(i.type.includes("3d")?Wte(i):Zte(i)),i)}function Pke(e){var t;return Ba(e)?((t=e.symbolLayers)==null?void 0:t.some(i=>(i==null?void 0:i.type)==="fill"))??!1:(e==null?void 0:e.type.includes("fill"))??!1}function Wte(e){e.type==="line-3d"?e.symbolLayers.forEach(t=>{t.material={color:Xm}}):e.symbolLayers.forEach(t=>{var i;t.type!=="icon"||(i=t.resource)!=null&&i.href?t.material={color:dN}:(t.material={color:Hte},t.outline={color:Xm,size:1.5})})}function Zte(e){var i,r;const t=qX();e.type==="cim"?ate(e,new ye(dN)):e.type.includes("line")?e.color=Xm:(e.color=t?Xm:Hte,e.type==="simple-marker"&&(e.outline?((r=(i=e.outline)==null?void 0:i.color)==null?void 0:r.toHex())==="#ffffff"&&(e.outline.color=Xm):e.outline={color:Xm,width:1.5}))}async function kke(e,t,i,r){const s=(await D(async()=>{const{getSizeRangeAtScale:l}=await Promise.resolve().then(()=>Fp);return{getSizeRangeAtScale:l}},void 0)).getSizeRangeAtScale(e,i,r),n=s&&Yte(s);if(!s||!n)return;let o=n.map(l=>Dke(l,e,s));o=ST(o);for(let l=1;l<o.length-1;l++){const d=await Nke(e,t,o[l],o[l-1],i,r);d&&(o[l]=d[0],n[l]=d[1])}return o}function Yte(e){const t=e.minSize,i=e.maxSize,r=Eke,s=(i-t)/(r-1),n=[];for(let o=0;o<r;o++)n.push(t+s*o);return n}function Dke(e,t,i){const r=i.minSize,s=i.maxSize,n=t.minDataValue,o=t.maxDataValue;let l;return e<=r?l=n:e>=s?l=o:l=(e-r)/(s-r)*(o-n)+n,l}async function Nke(e,t,i,r,s,n){const o=await Nm(e,t,i,s,n),l=await Nm(e,t,r,s,n),d=wT(i),h=d.fractional,y=Ske;let v=d.integer,b=null,w=null;i>0&&i<1&&(b=10**h,v=wT(i*=b).integer);for(let E=v-1;E>=0;E--){const T=10**E;let $=Math.floor(i/T)*T,A=Math.ceil(i/T)*T;b!=null&&($/=b,A/=b);let O=($+A)/2;[,O]=ST([$,O,A],{indexes:[1]});const L=await Nm(e,t,$,s,n),R=await Nm(e,t,A,s,n),N=await Nm(e,t,O,s,n),j=J2(o,L,l,null),V=J2(o,R,l,null),Z=J2(o,N,l,null);let ie=j.previous<=y,oe=V.previous<=y;if(ie&&oe&&(j.previous<=V.previous?(ie=!0,oe=!1):(oe=!0,ie=!1)),ie?w=[$,L]:oe?w=[A,R]:Z.previous<=y&&(w=[O,N]),w)break}return w}async function Nm(e,t,i,r,s){const{getSize:n}=await D(()=>Promise.resolve().then(()=>Fp),void 0);return n(e,i,{scale:r,view:s,shape:t.type==="simple-marker"?t.style:null})}function Fke(e,t){const i=e.clone();if(Ba(i))q$(i)||i.symbolLayers.forEach(r=>{r.type!=="fill"&&(r.size=t)});else if(Tke(i))i.size=t;else if($ke(i)){const r=i.width,s=i.height;i.height=t,i.width=t*(r/s)}else xke(i)?i.width=t:Mke(i)&&i.font&&(i.font.size=t);return i}function Vke(e){const i=Math.floor(Math.log10(Math.abs(e)))+1,r=i<4||i>6?4:i,s=1e6,n=Math.abs(e)>=s?"compact":"standard";return Tp(e,{notation:n,minimumSignificantDigits:2,maximumSignificantDigits:r})}const tG=16,zke="https://utility.arcgis.com/sharing/tools/legend",jke="esri.layers.ImageryLayer",Uke="esri.layers.ImageryTileLayer",Gke="esri.layers.WCSLayer",$S=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,qke=new ot({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),xS=new es({size:6,outline:{color:[128,128,128,.5],width:.5}}),Bke=new qa({style:"solid"});function iP(e){return e.type==="flow"}function Jte(e){return e.type==="vector-field"}function Xte(e){return e.type==="raster-colormap"}function Qte(e){return e.type==="raster-stretch"}function Kte(e){return e.type==="raster-shaded-relief"}function Fm(e){return e.declaredClass==="esri.renderers.SimpleRenderer"}function kh(e){return e.declaredClass==="esri.renderers.ClassBreaksRenderer"}function Dh(e){return e.declaredClass==="esri.renderers.UniqueValueRenderer"}function eie(e){return e.declaredClass==="esri.renderers.HeatmapRenderer"}function Hke(e){return hN(e)||pN(e)||fN(e)||Wke(e)}function Wke(e){return e.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function hN(e){return e.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function pN(e){return e.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function fN(e){return e.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function tie(e){return e.declaredClass==="esri.renderers.DotDensityRenderer"}function iie(e){return e.declaredClass==="esri.renderers.PieChartRenderer"}function Zke(e,t){return Fm(e)||kh(e)||Dh(e)||eie(e)||tie(e)||iie(e)?t.type==="2d"||ite(e):Qte(e)||Xte(e)||Kte(e)||hN(e)||pN(e)||fN(e)||Jte(e)||iP(e)}function Yke(e){return e.declaredClass==="esri.layers.BuildingSceneLayer"}function oI(e){return e.declaredClass==="esri.layers.SubtypeGroupLayer"}function Jke(e){return e.declaredClass==="esri.layers.VoxelLayer"}function Xke(e){return e.declaredClass==="esri.layers.WMSLayer"}function Qke(e){return e.declaredClass==="esri.layers.WMTSLayer"}function aI(e){return e.declaredClass==="esri.layers.MapImageLayer"}function iG(e){return e.declaredClass==="esri.layers.TileLayer"}function Hf(e){return e.declaredClass===jke}function MS(e){return e.declaredClass===Uke}function Kke(e){return e.declaredClass===Gke}function eDe(e){return e.type==="stretch-ramp"}function tDe(e){const t="authoringInfo"in e?e==null?void 0:e.authoringInfo:null;return(t==null?void 0:t.type)==="univariate-color-size"}function iDe(e){const t="authoringInfo"in e?e==null?void 0:e.authoringInfo:null;return(t==null?void 0:t.type)==="univariate-color-size"&&(t==null?void 0:t.univariateTheme)==="above-and-below"}function rG(e){return"sublayers"in e}async function gl(e,t){const i=await YP("esri/widgets/Legend/t9n/Legend");return e!=="previewTemplateAriaLabel"||t||(e="previewAriaLabel"),Ub(i[e],{label:t})}function rDe(e,t){const{field:i,field2:r,field3:s,fieldDelimiter:n,valueExpression:o}=e;if(!i)return null;const l=!i&&!o||!r&&!s?[t]:t==null?void 0:t.toString().split(n||""),d=i?{[i]:l==null?void 0:l[0]}:null;return d&&(r&&(d[r]=l==null?void 0:l[1]),s&&(d[s]=l==null?void 0:l[2])),d}const sDe=new es({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Wf={},Ni=class extends Me{constructor(e){super(e),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilterId=null,this._layerDisplayFilterClause=null,this.children=new _e,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange("ready");this.addHandles([zs(()=>this.children,"change",t=>{const{added:i,removed:r}=t;i.forEach(s=>{const n=`activeLayerInfo-ready-watcher-${s.layer.uid}`;this.addHandles(ve(()=>s.ready,e,yt),n)}),r.forEach(s=>this.removeHandles(s.layer.uid)),e()})]),this.keepCacheOnDestroy||(Wf={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Wf=null),this._layerDefinitionExpressionClause=null}get effectList(){const e=this.layer;let t=null;return"effect"in e&&e.effect&&(t=new Ro,t.effect=e.effect,t.endTransition(),t.scale=this.scale),t}get opacity(){var s;const e=this.layer.opacity,t=(s=this.parent)==null?void 0:s.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return t!=null?t*e:r!=null?r*e:e}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){var e;return((e=this.view)==null?void 0:e.scale)??0}get isScaleDriven(){const e=this.layer;if(e===null)return!1;if("effect"in e&&e.effect&&Array.isArray(e.effect))return!0;if("featureReduction"in e&&e.featureReduction){if(e.featureReduction.type==="cluster")return!0;if(e.featureReduction.type==="binning"&&"renderer"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return"renderer"in e&&e.renderer?!!("displayFilterInfo"in e&&e.displayFilterInfo&&Dh(e.renderer))||this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const t=Array.from(e,i=>{var r;if(ahe(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if((r=i.featureSet)!=null&&r.features.length){const s=i.layerDefinition,n=s==null?void 0:s.drawingInfo,o=n&&eOe(n.renderer),l=qke.read(s.geometryType);return o?this._getRendererLegendElements(o,{title:i.name,geometryType:l}):(ae.getLogger(this).warn("drawingInfo not available!"),null)}return null});try{const i=[],r=await Promise.allSettled(t);for(const s of r)if(s.status==="fulfilled")for(const n of s.value??[])i.push(n);this.legendElements=i,this.notifyChange("ready")}catch(i){ae.getLogger(this).warn("error while building legend for layer!",i)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange("ready")}catch(t){ae.getLogger(this).warn("error while building legend for layer!",t)}}async buildLegendElementsForFeatureReduction(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getLegendElementsForFeatureReduction(e):[],this.notifyChange("ready")}catch(t){ae.getLogger(this).warn("error while building legend for layer!",t)}}async buildLegendElementsForTools(){var t,i;const e=this.layer;if(Jke(e))this._constructLegendElementsForVoxelLayer();else if(Qke(e))this._constructLegendElementsForWMTSlayer();else if(Xke(e))await this._constructLegendElementsForWMSSublayers();else if(Yke(e))await this._constructLegendElementsForBuildingSceneLayer();else if(aI(e)||iG(e)||oI(e))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let r="default";if(Hf(e)){const s=e;r=(((t=s==null?void 0:s.rasterFunction)==null?void 0:t.functionName)||"default")+"_"+((i=e.bandIds)!=null&&i.length?e.bandIds.join(""):"###")}if(MS(e)||e.type==="link-chart")return;await this._getLegendLayers(`${e.uid}-${r}`).then(async s=>{this.legendElements=[],this.notifyChange("ready");const n=s.map(async o=>{if(Hf(e)){const d=ve(()=>[e.rasterFunction,e.bandIds],()=>IT(async()=>{Wf.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()})());this.addHandles(d,"imageryLayers-watcher")}const l=this._generateSymbolTableElementForLegendLayer(o);l!=null&&l.infos.length&&(Hf(e)&&(l.title=e.title),this.legendElements.push(l)),this.notifyChange("ready")});await Promise.allSettled(n)}).catch(s=>{ae.getLogger(this).warn("Request to server for legend has failed!",s)})}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,i=t&&"createQuery"in t&&"queryFeatureCount"in t;if(!i&&!(t&&"createQuery"in e&&"queryFeatureCount"in e))return!0;await JT(()=>!t.updating);const r=i?"createQuery"in t&&t.createQuery():"createQuery"in e&&e.createQuery();return r?(r.geometry=this.view.extent,(i?"queryFeatureCount"in t&&await t.queryFeatureCount(r):"queryFeatureCount"in e&&await e.queryFeatureCount(r))!==0):!0}_getParentLayerOpacity(e){let t=1;const i=e.parent;return i&&"uid"in i&&(t=this._getParentLayerOpacity(i)),e.opacity*t}_isGroupActive(){return this.children.some(e=>e.ready)}_isRendererScaleDriven(e){if(e.type==="dot-density")return!0;const t="valueExpression"in e?e.valueExpression:null;if($S.test(t))return!0;const i="visualVariables"in e?e.visualVariables:null;return!!(i!=null&&i.some(r=>this._isScaleDrivenSizeVariable(r)))||this._hasScaleDrivenSymbols(e)}_hasScaleDrivenSymbols(e){var t;switch(e.type){case"simple":return this._isScaleDrivenSymbol(e.symbol);case"class-breaks":return this._isScaleDrivenSymbol(e.defaultSymbol)||e.classBreakInfos.some(i=>this._isScaleDrivenSymbol(i.symbol));case"unique-value":return this._isScaleDrivenSymbol(e.defaultSymbol)||!!((t=e.uniqueValueInfos)!=null&&t.some(i=>this._isScaleDrivenSymbol(i.symbol)))}return!1}_isScaleDrivenSymbol(e){if((e==null?void 0:e.type)==="cim"){const{primitiveOverrides:t,minScale:i,maxScale:r}=e.data,s=(t==null?void 0:t.some(n=>{var o;return/\$view\.scale/.test(((o=n.valueExpressionInfo)==null?void 0:o.expression)||"")}))??!1;return i!=null||r!=null||s}return!1}_isScaleDrivenSizeVariable(e){if(e&&e.type!=="size")return!1;const t=e,i=t.minSize,r=t.maxSize;return!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||$S.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some(i=>this._isLayerScaleDriven(i));const t=e.parent;if(e.loaded===!1&&t&&aI(t)&&"source"in e&&e.source&&e.source.type==="map-layer"){for(const i of t.sourceJSON.layers??[])if(i.id===e.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){var n;this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const e=this.layer;this.addHandles(ve(()=>e.currentVariableId,()=>this._constructLegendElementsForVoxelLayer()),"voxel-current-variable"),this.addHandles(ve(()=>e.getVariableStyles(),()=>this._constructLegendElementsForVoxelLayer()),"voxel-style-watcher");const t=e.getVariableStyle(null),i=[];if(t){if((n=t.uniqueValues)!=null&&n.length){const o=[];t.uniqueValues.forEach(l=>{l.enabled&&o.push({label:l.label||`${l.value}`,value:l.value,symbol:new qa({color:l.color,outline:null})})}),o.length&&i.push({type:"symbol-table",title:t.label,infos:o})}else if(t.transferFunction){const{colorStops:o,stretchRange:l}=t.transferFunction,d=o.toArray().reverse(),h=l.map((v,b)=>`${b===0?zte:jte} ${Vke(v)}`).reverse(),y=d.map(v=>({color:v.color,value:null,label:null}));y[0].label=h[0],y[y.length-1].label=h[1],i.push({type:"color-ramp",title:t.label,infos:y,preview:Ph(d.map(v=>v.color),{ariaLabel:await gl("previewColorRampAriaLabel")})})}}const r=e.opacity,s=i.reduce((o,l)=>[...o,...this._getAllInfos(l)],[]).filter(o=>!!(o!=null&&o.symbol)).map(o=>this._getSymbolPreview(o,r));await Promise.allSettled(s),this.legendElements=i,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){var i,r;this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const e=this.layer.activeLayer;this.addHandles(ve(()=>{const{layer:s}=this;return s&&"activeLayer"in s&&s.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");const t=e.styleId?(r=(i=e.styles)==null?void 0:i.find(({id:s})=>s===e.styleId))==null?void 0:r.legendUrl:void 0;t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}]),this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this.addHandles(ve(()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(e,t){var o,l;const i=this.layer,r=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const s=((l=(o=this.sublayerIds)==null?void 0:o.map(d=>i.findSublayerById(d)))==null?void 0:l.filter(Yr))??[],n=s.length?s:e.toArray();for(const d of n){const h=ve(()=>[d.title,d.visible,d.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(h,"wms-sublayers-watcher"),!this.respectLayerVisibility||d.visible&&d.legendEnabled){const y=await this._generateSymbolTableElementForWMSSublayer(d,t);y!=null&&y.infos.length&&r.unshift(y)}}return r}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter(r=>r);return{type:"symbol-table",title:e.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){var o;let i=e.legendUrl;if(!i)return;const r={type:"symbol-table",title:e.title||e.name||String(e.id??""),infos:[]};t&&(i=kS(i,t));let s=null;const n=(o=e.layer)==null?void 0:o.opacity;try{s=(await Rt(i,{responseType:"image"})).data,s&&(s.style.opacity=n)}catch{}return r.infos.push({src:i,preview:s,opacity:n}),r}_getLegendLayers(e,t){const i=Wf&&Wf[e];return i?Promise.resolve(i):this._legendRequest(t).then(r=>{const s=r.layers;return Wf[e]=s,s})}_legendRequest(e){var s;const t=this.layer;let i={f:"json",dynamicLayers:e};if(Hf(t)){const n=t.exportImageServiceParameters.rasterFunction;if(n&&(i.renderingRule=JSON.stringify(((s=n.functionDefinition)==null?void 0:s.toJSON())||n.toJSON())),t.bandIds&&(i.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:o,viewId:l,customParameters:d}=t;i={raster:o,viewId:l,...i,...d}}}let r=t.url.replace(/(\/)+$/,"");if("version"in t&&+t.version>=10.01){const n=r.indexOf("?");n>-1?r=r.slice(0,n)+"/legend"+r.slice(n):r+="/legend"}else{const n=r.toLowerCase().indexOf("/rest/"),o=n===-1?r:r.slice(0,n)+r.slice(n+5);r=zke+"?soapUrl="+encodeURI(o)+"&returnbytes=true"}return Rt(r,{query:i}).then(n=>n.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles("sublayers-watcher");const e=this.layer;this.addHandles(ve(()=>e.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){ae.getLogger(this).warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let i=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const r=e.toArray();for(const s of r){const n=ve(()=>["renderer"in s&&s.renderer,s.opacity,s.title,s.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(n,"sublayers-watcher"),!this.respectLayerVisibility||s.visible){const o=(s==null?void 0:s.opacity)!=null?s.opacity:null,l=o!=null?o*t:t;if(s.type==="building-group"){const d={type:"symbol-table",title:s.title,infos:[]},h=await this._generateLegendElementsForBuildingSublayers(s.sublayers,l);d.infos.push(...h),i=[d,...i]}else s.renderer&&(i=[...await this._getRendererLegendElements(s.renderer,{title:s.title,opacity:l,sublayer:s}),...i])}}return i.filter(s=>!!s&&(!("infos"in s)||!s.infos||s.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles("sublayers-watcher");const e=this.layer;if(aI(e)||iG(e)||oI(e)){this.addHandles(ve(()=>e.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){ae.getLogger(this).warn("Request to server for legend has failed!",t)}}}async _generateLegendElementsForSublayers(e,t,i){const r=this.layer;let s=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let n=e.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(n=oI(r)?this.sublayerIds.map(o=>r.findSublayerForSubtypeCode(o)).filter(Yr):this.sublayerIds.map(o=>r.findSublayerById(o)).filter(Yr));for(const o of n){const l=ve(()=>[o.renderer,o.opacity,o.title,o.visible,o.legendEnabled],()=>this._constructLegendElementsForSublayers());if(this.addHandles(l,"sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled&&this._isSublayerInScale(o)){const d=(o==null?void 0:o.opacity)!=null?o.opacity:null,h=d!=null?d*t:t,y=!rG(o)||o.originIdOf("renderer")>He.SERVICE&&!o.sublayers;if(o.renderer&&y)await o.load(),s=[...await this._getRendererLegendElements(o.renderer,{title:o.title,opacity:h,sublayer:o}),...s];else if(rG(o)){const v=await this._generateSymbolTableElementForSublayer(o,h,i);v&&s.unshift(v)}}}return s.filter(o=>!!o&&(!("infos"in o)||!o.infos||o.infos.length>0))}async _generateSymbolTableElementForSublayer(e,t,i){if(!i){i=new Map;const s=this.layer,n=e.source;let o=null;if(!(!n||n.type==="map-layer"&&n.mapLayerId===e.id&&(!n.gdbVersion||n.gdbVersion===("gdbVersion"in s&&s.gdbVersion)))||e.originIdOf("renderer")>He.SERVICE||e.originIdOf("labelingInfo")>He.SERVICE||e.originIdOf("labelsVisible")>He.SERVICE){const d=new jn({layer:this.layer});o=d.hasDynamicLayers?d.dynamicLayers:null,d.destroy()}const l=o||`${s.uid}-default`;(await this._getLegendLayers(l,o)).forEach(d=>i.set(d.layerId,d))}const r=i.get(e.id);if((!r||r!=null&&r.subLayerIds&&r.defaultVisibility)&&e.sublayers){const s=await this._generateLegendElementsForSublayers(e.sublayers,t,i);return{type:"symbol-table",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendLayer(r,e,t)}_generateSymbolTableElementForLegendLayer(e,t,i){if(!(e!=null&&e.legend)||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const r=t==null?void 0:t.renderer;let s=(t==null?void 0:t.title)||e.layerName;if(r&&(!t||(t==null?void 0:t.originIdOf("renderer"))>He.SERVICE)){const l=(t==null?void 0:t.title)||this._getRendererTitle(r,t);l&&(s&&typeof l!="string"&&"title"in l&&(l.title=s),s=l)}const n={type:"symbol-table",title:s,legendType:e.legendType||null,infos:[]},o=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return e.legendGroups&&e.legendGroups.length>0?e.legendGroups.forEach(l=>{var h;const d={type:"symbol-table",title:l.heading,legendType:e.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(o.filter(y=>y.groupId===l.id),e.layerId,i)};((h=d.infos)==null?void 0:h.length)>0&&n.infos.push(d)}):n.infos=this._generateSymbolTableElementInfosForLegendLayer(o,e.layerId,i),n.infos.length>0?n:null}_generateSymbolTableElementInfosForLegendLayer(e,t,i){return e.map(r=>{let s=r.url;if(r.imageData&&r.imageData.length>0)s=`data:image/png;base64,${r.imageData}`;else{if(s.indexOf("http")===0)return null;s=Iae(`${this.layer.url}/${t}/images/${s}`)}return{label:r.label,src:s,opacity:i??this.opacity,width:r.width,height:r.height}}).filter(Yr)}_isSublayerInScale(e){const t=e.minScale||0,i=e.maxScale||0;return!(t>0&&t<this.scale||i>this.scale)}_isLegendLayerInScale(e,t){const i=t||this.layer;let r=null,s=null,n=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(e.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),e.maxScale===0&&i.tileInfo&&(s=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,e.minScale)||i.minScale||e.minScale,s=Math.max(i.maxScale,e.maxScale)),(r>0&&r<this.scale||s>this.scale)&&(n=!1),n}_sanitizeLegendForSublayer(e,t){var o;if("version"in this.layer&&+this.layer.version<10.1||e.length===0)return e;const i=t.renderer,r=e.some(l=>l.values);let s=0,n=null;return r&&e.some((l,d)=>(l.values||(s=d,n=l,n.label||(n.label="others")),n!=null)),i?i.type==="unique-value"?n&&(e.splice(s,1),e.push(n)):i.type==="class-breaks"&&(n&&e.splice(s,1),(o=i.legendOptions)!=null&&o.order||e.reverse(),n&&e.push(n)):n&&(e.splice(s,1),e.push(n)),e}async _getRendererLegendElements(e,t={}){if(!Zke(e,this.view))return ae.getLogger(this).warn(`Renderer of type '${e.type}' not supported!`),[];if(Hke(e))return this._constructPointCloudRendererLegendElements(e,t);if(tie(e))return this._constructDotDensityRendererLegendElements(e);const i=await this._loadRenderer(e);return iie(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,t)}async _getLegendElementsForFeatureReduction(e){let t=null;return e.type==="binning"?t=e.renderer:e.type==="cluster"&&(t=this._getClusterRenderer(e)),t?this._getRendererLegendElements(t):[]}_getPointCloudRendererTitle(e){var t;return(((t=e.legendOptions)==null?void 0:t.title)||e.field)??""}async _constructPointCloudRendererLegendElements(e,t={}){var l;const i=t.title,r=[];let s=null,n=null;if(hN(e))s={type:"symbol-table",title:i||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach(d=>{s.infos.unshift({label:d.label||d.minValue+" - "+d.maxValue,value:[d.minValue,d.maxValue],symbol:this._getAppliedCloneSymbol(xS,d.color)})});else if(pN(e)){const d=e.stops;let h=null;if(d!=null&&d.length&&(d.length===1&&(h=d[0].color),!h)){const v=d[0].value,b=d[d.length-1].value;v!=null&&b!=null&&(h=Bte(v+(b-v)/2,d))}s={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(xS,h||xS.color)}]};const y=vke(e.stops??[])??[];n={type:"color-ramp",title:i||this._getPointCloudRendererTitle(e),infos:y,preview:Ph(y.map(v=>v.color),{ariaLabel:await gl("previewColorRampAriaLabel")})}}else fN(e)&&(s={type:"symbol-table",title:i||this._getPointCloudRendererTitle(e),infos:[]},(l=e.colorUniqueValueInfos)==null||l.forEach(d=>{s.infos.push({label:d.label||d.values.join(", "),value:d.values.join(", "),symbol:this._getAppliedCloneSymbol(xS,d.color)})}));s!=null&&s.infos.length&&r.push(s),n!=null&&n.infos.length&&r.push(n);const o=r.reduce((d,h)=>[...d,...h.infos??[]],[]).filter(d=>!!d.symbol).map(d=>this._getSymbolPreview(d,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}}));return await Promise.allSettled(o),r}async _getElementInfoForDotDensity(e,t){const{color:i,label:r,valueExpressionTitle:s}=t,{backgroundColor:n,outline:o,dotSize:l}=e,d=this.effectList,h=d==null?void 0:d.effects.map(A=>A.toJSON()),y=cT(h),v=await gl("previewTemplateAriaLabel",r||s),b=l+"-"+i+"-"+n+"-"+(o&&JSON.stringify(o.toJSON()))+"-"+y,w=this._dotDensityUrlCache,E=w.has(b)?w.get(b):XPe(e,i,{ariaLabel:v});w.set(b,E);const T={shape:{type:"image",x:0,y:0,width:E.width,height:E.height,src:E.src},fill:null,stroke:null,offset:[0,0]},$=K_([[T]],[E.width,E.height],{effectView:this.effectList,ariaLabel:v});return{opacity:1,src:E.src,preview:$,width:E.width,height:E.height}}async _constructDotDensityRendererLegendElements(e){var s;const t=e.calculateDotValue(this.view.scale),i=(s=e.legendOptions)==null?void 0:s.unit,r={type:"symbol-table",title:{value:t&&Math.round(t),unit:i||""},infos:[]};for(const n of e.attributes){const o=await this._getElementInfoForDotDensity(e,n);o.label=n.label||n.valueExpressionTitle||n.field,r.infos.push(o)}return[r]}async _constructPieChartRendererLegendElements(e){var d,h,y,v;const t=this.layer.opacity,i=[];let r=null;const s=e.outline;e.attributes.forEach(b=>{const w=new es({color:b.color,outline:s}),E=b.label||b.valueExpressionTitle||b.field;i.push({label:E,symbol:w})});const n=i.length?[...i]:[];if((d=e.othersCategory)!=null&&d.color&&((h=e.othersCategory)==null?void 0:h.threshold)!==0){const b=new es({color:e.othersCategory.color,outline:s});r=e.othersCategory.label||"Other",i.push({label:r,symbol:b})}if((y=e.defaultColor)!=null&&y.a){const b=new es({color:e.defaultColor,outline:s});i.push({label:e.defaultLabel,symbol:b})}const o=await this._getVisualVariableLegendElements(e,this.layer)||[];if(i.length){o.unshift({type:"symbol-table",title:null,infos:i});const b=n.filter(E=>E.label!==r).map(E=>E.symbol.color).filter(Boolean),w=QPe(b,{holePercentage:e.holePercentage,backgroundColor:(v=e.backgroundFillSymbol)==null?void 0:v.color,effectList:this.effectList,outline:s,ariaLabel:await gl("previewPieChartAriaLabel")});o.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(e,this.layer),infos:i,preview:w})}const l=o.reduce((b,w)=>[...b,...this._getAllInfos(w)],[]).filter(b=>!!(b!=null&&b.symbol)&&!(b!=null&&b.preview)).map(b=>this._getSymbolPreview(b,t,{effectList:this.effectList}));return await Promise.allSettled(l),o}async _getWhereClause(e,t,i){const r=await Lk(e,i),s=await N0e(t,i),n=new Set(s.map(l=>l.toLowerCase())),o=r==null?void 0:r.fieldNames.map(l=>l.toLowerCase());return o!=null&&o.some(l=>!n.has(l))?null:r}async _processDefinitionExpression(e,t){if(!("definitionExpression"in e))return;const i=e.definitionExpression;i&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==i&&(this._layerDefinitionExpressionClause=await this._getWhereClause(i,t,e.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=i}async _processDisplayFilter(e,t){if(!("displayFilterInfo"in e))return;const i=e.displayFilterInfo?VMe(e.displayFilterInfo,this.view):null;return i!=null&&i.where?this._layerDisplayFilterId!==(i==null?void 0:i.id)&&(this._layerDisplayFilterClause=await this._getWhereClause(i.where,t,e.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilterId=i==null?void 0:i.id,i}async _constructRendererLegendElements(e,t={}){var A,O,L,R,N,j;const{title:i,sublayer:r}=t,s=r||this.layer,n=QR(e);let o=null;Dh(e)&&(await this._processDefinitionExpression(s,e),o=await this._processDisplayFilter(s,e)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const l=await this._getVisualVariableLegendElements(e,s)||[],d={type:"symbol-table",title:i||this._getRendererTitle(e,s),infos:[]};let h=null,y=!1;const v=new Set;if(iP(e)&&!this._hasSizeRamp){const V=await Gte(e);d.infos.push({label:null,symbol:V})}else if(tDe(e)){let V=i;const Z=iDe(e)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",ie=l.findIndex(Ee=>Ee.type==="color-ramp"),oe=ie!==-1?l.splice(ie,1)[0]:null,ue=l.findIndex(Ee=>Ee.type==="size-ramp"),me=ue!==-1?l.splice(ue,1)[0]:null,Te=[];oe&&(V=oe.title,Te.push(oe)),me&&(V=me.title,Te.push(me)),Te.length>0&&l.push({type:Z,title:V,infos:Te})}else if(eie(e)){const V=wke(e);l.push({type:"heatmap-ramp",title:i||this._getRendererTitle(e,s),infos:V,preview:Ph(V.map(Z=>Z.color),{effectList:this.effectList,ariaLabel:await gl("previewColorRampAriaLabel")})})}else if(Dh(e)){const V=e.authoringInfo;if(V&&V.type==="relationship"){const{numClasses:Z,field1:ie,field2:oe}=V,ue=V.focus;if(Z&&ie&&oe){const me=[ie,oe];let Te=Nte(ue)||0;for(const Ye of me){const{field:te,normalizationField:fe,label:we}=Ye,Je=we||{field:this._getFieldAlias(te,s),normField:fe&&this._getFieldAlias(fe,s)},z=sDe.clone();z.angle=Te,d.infos.push({label:Je,symbol:z}),v.add(z),Te+=90}const Ee=JPe({focus:ue,numClasses:Z,infos:e.uniqueValueInfos??[]});l.unshift(Ee)}}else if(Hf(this.layer)||MS(this.layer))(A=e.uniqueValueInfos)==null||A.forEach(Z=>{Z.symbol&&this._checkClausesForUVR(e,Z.value)&&d.infos.push({label:Z.label||Z.value,value:Z.value,symbol:Z.symbol})});else{const{field:Z,field2:ie,field3:oe,fieldDelimiter:ue,valueExpression:me,defaultSymbol:Te}=e,Ee=!(!Z&&!me||!ie&&!oe),Ye=this._layerDisplayFilterClause?o==null?void 0:o.title:null,te=[];if((O=e.uniqueValueGroups)==null||O.forEach(fe=>{var Je;const we={type:"symbol-table",title:Ye||fe.heading,infos:[]};(Je=fe.classes)==null||Je.forEach(z=>{const{symbol:de,values:Ae}=z;if(de){const Se=[],ze=[];for(const _t of Ae??[]){const{value:Hs,value2:cu,value3:Ha}=_t,ro=[],Qo=[];(Z||me)&&(ro.push(Hs),Qo.push(this._getDomainName(Z,Hs,s))),ie&&(ro.push(cu),Qo.push(this._getDomainName(ie,cu,s))),oe&&(ro.push(Ha),Qo.push(this._getDomainName(oe,Ha,s))),Se.push(Ee?ro.join(ue||""):ro[0]),ze.push(Qo.join(" - "))}const dt=Se.join(", ");let We=z.label;if(!We){const _t=ze.filter(Boolean);We=_t.length?_t.join(", "):dt}const Xi=de.clone();Xi.type==="cim"&&n&&ste(Xi,{innerDotSize:.5*tG,outerRingSize:tG}),Se.some(_t=>this._checkClausesForUVR(e,_t))&&we.infos.push({label:We,value:dt,symbol:Xi})}}),we.infos.length&&te.push(we)}),te.length){const fe=te[0];te.length===1&&"title"in fe&&!fe.title?d.infos.push(...fe.infos??[]):(Te&&(te.push({type:"symbol-table",infos:[{label:e.defaultLabel||"others",symbol:Te}]}),y=!0),d.infos.push(...te)),i||(L=e.legendOptions)!=null&&L.title||e.valueExpressionTitle||(d.title=null)}}e.defaultSymbol&&!y&&(d.infos.push({label:e.defaultLabel||"others",symbol:e.defaultSymbol}),y=!0)}else if(kh(e)){if(!n){if(h=this._isUnclassedRenderer(e),!h||!this._hasSizeRamp){const V=e.classBreakInfos.filter(({symbol:ie})=>ie),Z=((R=e.legendOptions)==null?void 0:R.order)==="ascending-values";for(const{label:ie,minValue:oe,maxValue:ue,symbol:me}of V){const Te={label:ie||(h?null:`${oe} - ${ue}`),value:[oe,ue],symbol:me};Z?d.infos.push(Te):d.infos.unshift(Te)}h&&(d.title=null),this._updateInfosForClassedSizeRenderer(e,d.infos)}e.defaultSymbol&&!h&&(d.infos.push({label:e.defaultLabel||"others",symbol:e.defaultSymbol}),y=!0)}}else if(Qte(e))if(MS(this.layer)||Kke(this.layer)){const V=await this._constructTileImageryStretchRendererElements(e);eDe(V)?l.push(V):d.infos=V}else{const V=this.layer;let Z,ie;(N=e.customStatistics)!=null&&N.length&&({min:Z,max:ie}=e.customStatistics[0]);let oe=[],ue=V.serviceRasterInfo;if(V.rasterFunction)try{ue=await V.generateRasterInfo(V.rasterFunction)}catch{}const me=bT(ue.pixelType);if(ue.bandCount===1){const Te=((j=V.bandIds)==null?void 0:j[0])||0;Z=Z??(ue.statistics?ue.statistics[Te].min:me[0]),ie=ie??(ue.statistics?ue.statistics[Te].max:me[1]),Z||ie?l.push(await this._getStretchLegendElements(e,{min:Z,max:ie})):this._getServerSideLegend()}else if(V.bandIds&&V.bandIds.length===1)Z=Z??(ue.statistics?ue.statistics[V.bandIds[0]].min:me[0]),ie=ie??(ue.statistics?ue.statistics[V.bandIds[0]].max:me[1]),Z||ie?l.push(await this._getStretchLegendElements(e,{min:Z,max:ie})):this._getServerSideLegend();else if(ue.bandCount>=3){const{bandInfos:Te}=ue,{bandIds:Ee}=V;Te.length>=ue.bandCount?(Ee==null?void 0:Ee.length)===3?(oe=Ee.map(Ye=>Te[Ye].name),d.infos=this._createSymbolTableElementMultiBand(oe)):V.format==="lerc"?(oe=[0,1,2].map(Ye=>Te[Ye].name),d.infos=this._createSymbolTableElementMultiBand(oe)):this._getServerSideLegend():V.format==="lerc"?(oe=["band1","band2","band3"],d.infos=this._createSymbolTableElementMultiBand(oe)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(Xte(e))e.colormapInfos.forEach(V=>{d.infos.push({label:V.label,value:V.value,symbol:this._getAppliedCloneSymbol(Bke,V.color)})});else if(Fm(e)){let V=e.symbol;switch(t.geometryType){case"point":V="pointSymbol"in s?s.pointSymbol:null;break;case"polyline":V="lineSymbol"in s?s.lineSymbol:null;break;case"polygon":V="polygonSymbol"in s?s.polygonSymbol:null}const Z=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;e.symbol&&Z&&d.infos.push({label:e.label,symbol:V})}else if(Jte(e)){e.outputUnit&&(this.title="("+e.toJSON().outputUnit+")"),d.title=e.attributeField;const V=e.getClassBreakInfos();V!=null&&V.length?V.forEach(Z=>{d.infos.push({label:Z.minValue+" - "+Z.maxValue,symbol:Z.symbol})}):d.infos.push({label:e.attributeField,symbol:e.getDefaultSymbol()})}else Kte(e)&&l.push(await this._getStretchLegendElements(e,{min:0,max:255}));const b=e.defaultSymbol;!b||y||Fm(e)||h&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||l.push({type:"symbol-table",infos:[{label:e.defaultLabel||"others",symbol:b}]}),d.infos.length&&l.unshift(d);const w=t.opacity==null?this.opacity:t.opacity,E=this._isTallSymbol("visualVariables"in e?e.visualVariables:null),T=Hf(this.layer)||MS(this.layer),$=l.reduce((V,Z)=>[...V,...this._getAllInfos(Z)],[]).filter(V=>!!(V!=null&&V.symbol)).filter(V=>{if(V.symbol.type==="cim"){const{minScale:Z,maxScale:ie}=V.symbol.data;if(Z&&Z<this.scale||ie&&ie>this.scale)return!1}return!0}).map(V=>this._getSymbolPreview(V,w,{isDefault:V.symbol===b,applyScaleDrivenSize:!v.has(V.symbol),symbolConfig:{isTall:E,isSquareFill:T},effectList:v.has(V.symbol)?null:this.effectList}));return e=null,await Promise.allSettled($),l}_checkClausesForUVR(e,t){const i=rDe(e,t);return!i||(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(i))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(i))}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(e){const t=e==null?void 0:e.infos;return t?t.reduce((i,r)=>i.concat(this._getAllInfos(r)),[]):[e]}async _constructTileImageryStretchRendererElements(e){var l,d,h;const t=this.layer,i=t.symbolizer.rasterInfo??t.raster.rasterInfo;let r,s;const n=(l=e==null?void 0:e.customStatistics)!=null&&l.length?e.customStatistics:i==null?void 0:i.statistics;if(n)({min:r,max:s}=n[0]);else{const y=bT(i.pixelType);r=y[0],s=y[1]}if(t.hasStandardTime()&&(r=t.getStandardTimeValue(r),s=t.getStandardTimeValue(s)),i.bandCount===1||((d=t.bandIds)==null?void 0:d.length)===1)return this._getStretchLegendElements(e,{min:r,max:s});const o=((h=t==null?void 0:t.bandIds)!=null&&h.length?t.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map(y=>i.bandInfos[y].name);return o.length<3?o.push(o[1]):o.length>3&&o.splice(3),this._createSymbolTableElementMultiBand(o)}async _getStretchLegendElements(e,t){const i=e.colorRamp,r=_ke(i,t);return{type:"stretch-ramp",title:"",infos:r,preview:Ph(r.map(s=>s.color),{ariaLabel:await gl("previewColorRampAriaLabel")})}}_getClusterSymbol(){var r;const e=this.layer,t="featureReduction"in e&&e.featureReduction,i=t&&"symbol"in t&&t.renderer;return i&&((r=i==null?void 0:i.authoringInfo)==null?void 0:r.isAutoGenerated)!==!0?null:t&&"symbol"in t?t.symbol:null}async _getSizeLegendElement(e,t,i,r){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(t):e,infos:await Ike(i,t,await XR(i),this.scale,this.view,r,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(e){const t=[],i=["red","green","blue"];return e.forEach((r,s)=>{t.push({label:{colorName:i[s],bandName:r},src:hke[s],opacity:this.opacity??1})}),t}_updateInfosForClassedSizeRenderer(e,t){const i=e.authoringInfo&&e.authoringInfo.type==="class-breaks-size",r=e.classBreakInfos.some(s=>q$(s.symbol));if(i&&r){const s=KR,n=eP,o=e.classBreakInfos.length,l=(s-n)/(o>1?o-1:o);t.forEach((d,h)=>{d.size=s-l*h})}}_isTallSymbol(e){let t=!1,i=!1;if(e)for(let r=0;r<e.length&&(!t||!i);r++){const s=e[r];s.type==="size"&&(s.axis==="height"&&(t=!0),s.axis==="width-and-depth"&&(i=!0))}return t&&i}async _getSymbolPreview(e,t,i){var n,o,l;let r=!(i!=null&&i.isDefault)&&e.size==null&&this._hasSizeRamp?Bs(Yi.size):e.size;if(this._scaleDrivenSizeVariable&&(i!=null&&i.applyScaleDrivenSize)){const{getSize:d}=await D(()=>Promise.resolve().then(()=>Fp),void 0);r=d(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:e.symbol.type==="simple-marker"?e.symbol.style:null})}const s=!(i!=null&&i.isDefault)&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!(i!=null&&i.applyScaleDrivenSize));return Fte(e.symbol,{size:r,opacity:t,scale:!1,symbolConfig:i==null?void 0:i.symbolConfig,effectView:i==null?void 0:i.effectList,style:"legend",cimOptions:{allowScalingUp:s,viewParams:this.isScaleDriven?{viewingMode:((n=this.view)==null?void 0:n.type)==="2d"?"map":(o=this.view)==null?void 0:o.viewingMode,scale:(l=this.view)==null?void 0:l.scale}:null},ariaLabel:e.label&&typeof e.label!="string"?null:await gl("previewTemplateAriaLabel",e.label)}).then(d=>(e.preview=d,e)).catch(()=>(e.preview=null,e))}_getClusterRenderer(e){var s,n;this._hasClusterSizeVariable=!1;const t="renderer"in this.layer?this.layer.renderer:null,i=((s=e.renderer)==null?void 0:s.clone())||(t==null?void 0:t.clone()),r=tke(e,this.layerView,this.view);if(r&&i!=null&&"visualVariables"in i&&!((n=i.visualVariables)==null?void 0:n.some(l=>l.type==="size"&&l.target!=="outline"&&!$S.test(l.valueExpression)))){if("clusterMinSize"in e&&"clusterMaxSize"in e){const{clusterMinSize:d,clusterMaxSize:h}=e;r.legendOptions=new TK({showLegend:d!==h})}const l=i.visualVariables||[];i.visualVariables=l.concat([r]),this._hasClusterSizeVariable=!0}return i}async _loadRenderer(e){const t=[],i=e.clone(),r=await XR(i);if(kh(i)||Dh(i)){const s=(i.classBreakInfos||i.uniqueValueInfos).map(n=>this._fetchSymbol(n.symbol,r).then(o=>{n.symbol=o}).catch(()=>{n.symbol=null}));Array.prototype.push.apply(t,s)}return t.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then(s=>{this._applySymbolToRenderer(i,s,Fm(i))}).catch(()=>{this._applySymbolToRenderer(i,null,Fm(i))})),await Promise.allSettled(t),i}_applySymbolToRenderer(e,t,i){i?e.symbol=t:e.defaultSymbol=t}async _fetchSymbol(e,t){if(!e)throw new Error;if(e.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await(this.view.type==="2d"?e.fetchCIMSymbol({cache:i}):e.fetchSymbol({cache:i}));return this._getAppliedCloneSymbol(r,t)}catch{throw ae.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(e,t)}_getAppliedCloneSymbol(e,t){if(!e||!t)return e;const i=e.clone(),r=t&&t.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?ate(i,t):i.color&&(i.color=new ye(r||i.color)),i}_applyColorTo3dSymbol(e,t){t&&e.symbolLayers.forEach(i=>{i&&(i.material||(i.material={}),i.material.color=new ye(t))})}async _getVisualVariableLegendElements(e,t){var v,b;if(!("visualVariables"in e)||e.type==="vector-field")return null;const i=e.visualVariables??[],r=[],s=[],n=[],o=QR(e);if(((v=o==null?void 0:o.sizeStops)==null?void 0:v.length)===2&&(kh(e)||Dh(e))){const[w,E]=o.sizeStops;s.push(new lg({field:o.field??void 0,normalizationField:o.normalizationField,minSize:w.size,maxSize:E.size,minDataValue:w.value,maxDataValue:E.value}))}for(const w of i)w.type==="color"?r.push(w):w.type==="size"?s.push(w):w.type==="opacity"&&n.push(w);const l=[...r,...s,...n];let d,h;if(r.length===0&&kh(e)&&e.classBreakInfos&&e.classBreakInfos.length===1){const w=e.classBreakInfos[0];d=w&&w.symbol}if(r.length===0&&Fm(e)&&(d=e.symbol),d)if(d.type.includes("3d")){const w=d.symbolLayers.at(0);w.type==="water"?w.color!=null&&(h=w.color):((b=w.material)==null?void 0:b.color)!=null&&(h=w.material.color)}else d.url||(h=d.color);const y=this.effectList;return(await Promise.all(l.map(async w=>{if(!w.legendOptions||w.legendOptions.showLegend!==!1){const E=iP(e)?w.field:this._getRampTitle(w,t);let T=null;const $=mke(t,w,this.view.timeZone);if(w.type==="color"){const A=await eG(w,null,$)??[];T={type:"color-ramp",title:E,infos:A,preview:Ph(A.map(O=>O.color),{effectList:y,ariaLabel:await gl("previewColorRampAriaLabel")})},this._hasColorRamp||(this._hasColorRamp=A.length>0)}else if(w.type==="size"&&w.target!=="outline")$S.test(w.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=w):(T=await this._getSizeLegendElement(E,w,e,$),this._hasSizeRamp||(this._hasSizeRamp=!(T.infos==null||!T.infos.length)));else if(w.type==="opacity"){const A=await eG(w,h,$)??[];T={type:"opacity-ramp",title:E,infos:A,preview:Ph(A.map(O=>O.color),{effectList:y,ariaLabel:await gl("previewColorRampAriaLabel")})},this._hasOpacityRamp||(this._hasOpacityRamp=A.length>0)}return T!=null&&T.infos?T:null}}))).filter(Yr)}_getDomainName(e,t,i){var r;if(e&&typeof e!="function"){const s="getField"in i&&((r=i.getField)==null?void 0:r.call(i,e)),n=s&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(s.name,{excludeImpliedDomains:Y("esri-widget-legacy-field-domain-calculation")}):null;return(n==null?void 0:n.type)==="coded-value"?n.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,i=e.field;if("featureReduction"in t&&t.featureReduction&&t.featureReduction.type==="cluster"){const r=t.featureReduction,s="popupTemplate"in r&&r.popupTemplate,n=s&&s.fieldInfos;if(n){for(const o of n)if(o.fieldName===i)return i==="cluster_count"?o.label||{showCount:!0}:o.label}}return{showCount:!0}}_getRampTitle(e,t){var h,y;let i=e.field,r=e.normalizationField,s=!1,n=!1,o=!1,l=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const d=(h=e.legendOptions)==null?void 0:h.title;if(d!=null)l=d;else if(e.valueExpressionTitle)l=e.valueExpressionTitle;else{if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&((y=t.renderer.authoringInfo)!=null&&y.visualVariables)){const v=t.renderer.authoringInfo.visualVariables;for(let b=0;b<v.length;b++){const w=v[b];if(w.type==="color"){if(w.style==="ratio"){s=!0;break}if(w.style==="percent"){n=!0;break}if(w.style==="percent-of-total"){o=!0;break}}}}l={field:i&&this._getFieldAlias(i,t),normField:r&&this._getFieldAlias(r,t),ratio:s,ratioPercent:n,ratioPercentTotal:o}}return l}_getRendererTitle(e,t){var l;const i=e;if((l=i.legendOptions)!=null&&l.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,s=null,n=null;if(kh(i)&&(s=i.normalizationField,n=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,s=typeof s=="function"?null:s,Dh(i)){const{field2:d,field3:h,fieldDelimiter:y}=i;let v=r&&this._getFieldAlias(r,t);return d&&(v=`<${v}>${y}<${this._getFieldAlias(d,t)}>`,h&&(v=`${v}${y}<${this._getFieldAlias(h,t)}>`)),v}let o=null;return(r||s)&&(o={field:r&&this._getFieldAlias(r,t),normField:s&&this._getFieldAlias(s,t),normByPct:n}),o}_getFieldAlias(e,t){var y,v;const i="popupTemplate"in t?t.popupTemplate:null,r=i==null?void 0:i.fieldInfos;let s=r==null?void 0:r.find(b=>e===b.fieldName),n=null;"getField"in t&&t.getField?n=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(n=t.fieldsIndex.get(e));let o=null;const l="featureReduction"in t&&t.featureReduction;l&&(s??(s="popupTemplate"in l?(v=(y=l.popupTemplate)==null?void 0:y.fieldInfos)==null?void 0:v.find(b=>{var w;return(e==null?void 0:e.toLowerCase())===((w=b.fieldName)==null?void 0:w.toLowerCase())}):void 0),"fields"in l&&l.fields&&(o=l.fields.find(b=>{var w;return((w=b.name)==null?void 0:w.toLowerCase())===(e==null?void 0:e.toLowerCase())})));const d=s||n||o;let h=null;return d&&(h=(s==null?void 0:s.label)||(n==null?void 0:n.alias)||(o==null?void 0:o.alias)||"name"in d&&d.name||"fieldName"in d&&d.fieldName||null),h}_isUnclassedRenderer(e){const t=e.visualVariables;let i=!1;return kh(e)&&e.classBreakInfos&&e.classBreakInfos.length===1&&t&&(i=e.field?t.some(r=>!(!r||e.field!==r.field||(e.normalizationField||r.normalizationField)&&e.normalizationField!==r.normalizationField)):!!t.length),i}};c([p()],Ni.prototype,"children",void 0),c([p({readOnly:!0})],Ni.prototype,"effectList",null),c([p()],Ni.prototype,"layerView",void 0),c([p()],Ni.prototype,"layer",void 0),c([p()],Ni.prototype,"legendElements",void 0),c([p({readOnly:!0})],Ni.prototype,"opacity",null),c([p()],Ni.prototype,"parent",void 0),c([p({readOnly:!0,dependsOn:[]})],Ni.prototype,"ready",null),c([p()],Ni.prototype,"hideLayersNotInCurrentView",void 0),c([p()],Ni.prototype,"keepCacheOnDestroy",void 0),c([p()],Ni.prototype,"respectLayerDefinitionExpression",void 0),c([p()],Ni.prototype,"respectLayerVisibility",void 0),c([p({readOnly:!0})],Ni.prototype,"scale",null),c([p()],Ni.prototype,"sublayerIds",void 0),c([p({readOnly:!0})],Ni.prototype,"isScaleDriven",null),c([p()],Ni.prototype,"title",void 0),c([p({readOnly:!0,dependsOn:["ready"],value:0})],Ni.prototype,"version",null),c([p()],Ni.prototype,"view",void 0),Ni=c([I("esri.widgets.Legend.support.ActiveLayerInfo")],Ni);const rie=Ni,Wd={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},sie=_e.ofType(rie),nDe=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.ParquetLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),nie="view.basemapView.baseLayerViews",oie="view.groundView.layerViews",aie="view.basemapView.referenceLayerViews",oDe=[nie,oie,"view.layerViews",aie];let hn=class extends Me{constructor(t){super(t),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new _e,this.activeLayerInfos=new sie,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(ve(()=>this.view,()=>this._viewHandles(),yt),Wd.view),this.addHandles(HP(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(Wd.state),this.view&&this.addHandles(ve(()=>this.state,()=>this._stateHandles(),yt),Wd.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([Wd.allLayerViews,Wd.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(t){this.removeHandles(t);const i=this._activeLayerInfosByLayerViewId[t];delete this._activeLayerInfosByLayerViewId[t],i!=null&&i.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:t}=this;if(!t)return;const{allLayerViews:i}=t;i.length&&this._refresh(),this.addHandles(i.on("change",r=>this._allLayerViewsChangeHandle(r)),Wd.allLayerViews),this.addHandles(ve(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),Wd.legendProperties)}_allLayerViewsChangeHandle(t){t.moved.length?this._propertiesChangeHandle():(t.removed.forEach(i=>this._destroyViewActiveLayerInfo(i.uid)),this._refresh())}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(t){const i=this.view;if(t.length<2||!i)return;const r=[];t.forEach(n=>{if(!n.parent){const o=n.layer.parent,l=o&&"uid"in o&&this._layerViewByLayerId[o.uid],d=l&&this._activeLayerInfosByLayerViewId[l.uid];d&&t.includes(d)&&(r.push(n),n.parent=d,d.children.add(n),this._sortActiveLayerInfos(d.children))}}),t.removeMany(r);const s={};i.allLayerViews.forEach((n,o)=>s[n.layer.uid]=o),t.sort((n,o)=>{const l=s[n.layer.uid]||0;return(s[o.layer.uid]||0)-l})}_generateLayerViews(){const t=[];return oDe.filter(this._filterLayerViews,this).map(i=>ys(this,i)).filter(i=>i!=null).forEach(this._collectLayerViews("layerViews",t)),t}_filterLayerViews(t){const i=!this.basemapLegendVisible&&(t===nie||t===aie),r=!this.groundLegendVisible&&t===oie;return!i&&!r}_collectLayerViews(t,i){const r=s=>(s&&s.forEach(n=>{i.push(n),r(n[t])}),i);return r}_filterLayerViewsByLayerInfos(t){const i=this.layerInfos;return!i||!i.length||i.some(r=>this._hasLayerInfo(r,t))}_hasLayerInfo(t,i){const r=this._isLayerUIDMatching(t.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=t),r}_isLayerUIDMatching(t,i){return t&&(t.uid===i||this._hasLayerUID(t.layers,i))}_hasLayerUID(t,i){return t&&t.some(r=>this._isLayerUIDMatching(r,i))}_isLayerViewSupported(t){return!!nDe.has(t.layer.declaredClass)&&(this._layerViewByLayerId[t.layer.uid]=t,!0)}_generateActiveLayerInfo(t){this._isLayerActive(t)?this._buildActiveLayerInfo(t):(this.removeHandles(t.uid),this.addHandles(ve(()=>{var i;return[t.legendEnabled,(i=t.layer)==null?void 0:i.legendEnabled]},()=>this._layerActiveHandle(t)),t.uid))}_layerActiveHandle(t){this._isLayerActive(t)&&(this.removeHandles(t.uid),this._buildActiveLayerInfo(t))}_isLayerActive(t){var i;return!this.respectLayerVisibility||t.legendEnabled&&((i=t.layer)==null?void 0:i.legendEnabled)}_buildActiveLayerInfo(t){var l;const i=t.layer,r=t.uid,s=this._layerInfosByLayerViewId[r];let n=this._activeLayerInfosByLayerViewId[r];if(!n){const d=(s==null?void 0:s.title)!==void 0&&s.layer.uid===i.uid;n=new rie({layer:i,layerView:t,title:d?s.title:i.title,view:this.view??void 0,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:(s==null?void 0:s.sublayerIds)||[]}),this._activeLayerInfosByLayerViewId[r]=n}const o=i.parent&&"uid"in i.parent?this._layerViewByLayerId[(l=i.parent)==null?void 0:l.uid]:null;if(n.parent=this._activeLayerInfosByLayerViewId[o==null?void 0:o.uid],!this.hasHandles(r)){const d=[ve(()=>i.title,h=>this._titleHandle(h,n)),ve(()=>[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol],()=>this._constructLegendElements(n)),qs(()=>{var h;return((h=this.view)==null?void 0:h.stationary)===!0},()=>this._scaleHandle(n),yt),ve(()=>t.layer?L7(t.layer,t.view):null,()=>this._constructLegendElements(n)),ve(()=>t.updating,()=>{t.layer!=null&&L7(t.layer,t.view)!=null&&this._constructLegendElements(n)}),ve(()=>"effect"in i&&i.effect,()=>this._constructLegendElements(n)),qs(()=>{var h;return(h=this.view)==null?void 0:h.timeZone},()=>this._constructLegendElements(n),yt)];if(this.respectLayerVisibility){const h=ve(()=>t.legendEnabled,v=>this._legendEnabledHandle(v,n)),y=ve(()=>i.legendEnabled,v=>this._legendEnabledHandle(v,n));d.push(h,y)}if(this.respectLayerDefinitionExpression&&"definitionExpression"in i){const h=ve(()=>[i.definitionExpression,this.respectLayerDefinitionExpression],()=>{n.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,this._constructLegendElements(n)});d.push(h)}this.addHandles(d,r)}n.isScaleDriven||this._constructLegendElements(n),this._addActiveLayerInfo(n)}_titleHandle(t,i){i.title=t,this._constructLegendElements(i)}_legendEnabledHandle(t,i){t?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(t){(t.isScaleDriven||t.hideLayersNotInCurrentView)&&this._constructLegendElements(t)}_addActiveLayerInfo(t){var s;const{layerView:i,layer:r}=t;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(t)){const n=t.parent;if(n)n.children.includes(t)||n.children.push(t),this._sortActiveLayerInfos(n.children);else{const o=(s=this.layerInfos)==null?void 0:s.some(d=>d.layer.uid===r.uid),l=r.parent;l&&"uid"in l&&this._layerViewByLayerId[l.uid]&&!o?this._activeLayerInfosWithNoParent.add(t):(this.activeLayerInfos.add(t),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const o=[];this._activeLayerInfosWithNoParent.forEach(l=>{const d=l.layer.parent,h=d&&"uid"in d?this._layerViewByLayerId[d==null?void 0:d.uid]:null,y=this._activeLayerInfosByLayerViewId[h==null?void 0:h.uid];y&&(o.push(l),l.parent=y)}),o.length&&(this._activeLayerInfosWithNoParent.removeMany(o),o.forEach(l=>this._addActiveLayerInfo(l)))}}}_removeActiveLayerInfo(t){const i=t.parent;i?i.children.remove(t):this.activeLayerInfos.remove(t)}_constructLegendElements(t){const i=t.layer;"featureCollections"in i&&i.featureCollections?t.buildLegendElementsForFeatureCollections(i.featureCollections):"featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")&&(!this.view||i.featureReduction.maxScale<=this.view.scale)?t.buildLegendElementsForFeatureReduction(i.featureReduction):"renderer"in i&&i.renderer&&!("sublayers"in i)?t.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url&&i.type!=="catalog"&&i.type!=="knowledge-graph"?t.buildLegendElementsForTools():t.children.forEach(r=>this._constructLegendElements(r))}};c([p({type:sie})],hn.prototype,"activeLayerInfos",void 0),c([p()],hn.prototype,"basemapLegendVisible",void 0),c([p()],hn.prototype,"groundLegendVisible",void 0),c([p()],hn.prototype,"hideLayersNotInCurrentView",void 0),c([p()],hn.prototype,"keepCacheOnDestroy",void 0),c([p()],hn.prototype,"respectLayerDefinitionExpression",void 0),c([p()],hn.prototype,"respectLayerVisibility",void 0),c([p()],hn.prototype,"layerInfos",void 0),c([p({readOnly:!0})],hn.prototype,"state",null),c([p()],hn.prototype,"view",void 0),hn=c([I("esri.widgets.Legend.LegendViewModel")],hn);const aDe=hn,$t="esri-legend--card",j0="esri-legend",De={base:$t,stacked:`${j0}--stacked`,carouselTitle:`${$t}__carousel-title`,intervalSeparator:`${$t}__interval-separator`,imageryLayerStretchedImage:`${$t}__imagery-layer-image--stretched`,imageLabel:`${$t}__image-label`,layerCaption:`${$t}__layer-caption`,labelElement:`${$t}__label-element`,layerRow:`${$t}__layer-row`,labelCell:`${$t}__label-cell`,message:`${$t}__message`,rampLabel:`${$t}__ramp-label`,section:`${$t}__section`,serviceCaptionText:`${$t}__service-caption-text`,serviceContent:`${$t}__service-content`,service:`${$t}__service`,groupLayer:`${$t}__group-layer`,groupLayerChild:`${$t}__group-layer-child`,symbol:`${$t}__symbol`,sizeRampRow:`${$t}__size-ramp-row`,symbolRow:`${$t}__symbol-row`,symbolCell:`${$t}__symbol-cell`,carousel:`${$t}__carousel`,carouselItem:`${$t}__carousel-item`,intervalSeparatorsContainer:`${$t}__interval-separators-container`,relationshipLabelContainer:`${$t}__relationship-label-container`,labelContainer:`${$t}__label-container`,serviceCaptionContainer:`${$t}__service-caption-container`,symbolContainer:`${$t}__symbol-container`,colorRampContainer:`${$t}__color-ramp-container`,sizeRampContainer:`${$t}__size-ramp-container`,sizeRampPreview:`${$t}__size-ramp-preview`,pieChartRampPreview:`${$t}__pie-chart-ramp-preview`,sizeRampHorizontal:`${j0}__size-ramp--horizontal`,rampLabelsContainer:`${j0}__ramp-labels`,layerInfo:`${j0}__layer-cell ${j0}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};function lDe(e,t){return t}function Wi(e){const t=this;e.appendChild(t)}function zy(e,t,i){if(!t)return;if(typeof t=="number")return t;if(typeof t=="string")return Hse(t);if("value"in t||"unit"in t)return Ub(e.dotValue,t);if("colorName"in t&&"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:void 0;let r=null;return lDe(t,i)?r=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:lie(t,i)&&(r=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),r?Ub(r==="showField"?"{field}":e[r],{field:t.field,normField:t.normField}):void 0}function lie(e,t){return!t}function uie(e,t){return!!(t&&t==="Stretched"&&"version"in e&&typeof e.version=="number"&&e.version>=10.3&&e.declaredClass==="esri.layers.ImageryLayer")}function uDe(e,t){var i;return e.label?t[e.label]+": "+(typeof e.value=="string"?e.value:Tp(e.value??0,{style:"decimal",notation:(i=e.value)!=null&&i.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}function cie(e,t,i){switch(t){case"heatmap-ramp":return i[e.label]||e.label;case"stretch-ramp":return uDe(e,i);default:return e.label}}function die(e,t){if(!e.title||typeof e.title=="string")return e.title;const i=e.type==="color-ramp"||e.type==="opacity-ramp",r=e.title,s=zy(t,r,i);return lie(r,i)&&r.title?`${r.title} (${s})`:s}const cDe=25,dDe=25,hDe=100;let Nh=class extends Ji{constructor(t,i){super(t,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const t=this.legendElement.infos.slice().reverse();return k("div",{class:this.classes(De.layerRow,De.colorRampContainer)},this._renderRampLabel(t[0]),k("div",{class:De.symbolContainer},this._renderPreview(t),this._renderMiddleStopRampLabel(t)),this._renderRampLabel(t.at(-1)))}_renderPreview(t){const{opacity:i}=this,r=this.legendElement.type==="heatmap-ramp",s=t.length-1,n=dDe,o=s>2&&!r?cDe*s:hDe,l=o+20,d=10,h=[[{shape:{type:"path",path:`M0 ${n/2} L${d} 0 L${d} ${n} Z`},fill:t[0].color,stroke:{width:0}},{shape:{type:"rect",x:d,y:0,width:o,height:n},fill:{type:"linear",x1:d,y1:0,x2:o+d,y2:0,colors:t.map((b,w)=>({color:b.color,offset:r&&"ratio"in b?b.ratio:w/s}))},stroke:{width:0}},{shape:{type:"path",path:`M${o+d} 0 L${l} ${n/2} L${o+d} ${n} Z`},fill:t[t.length-1].color,stroke:{width:0}}]],y=Tte(h,l,n),v={filter:Q_(this.effectList)??void 0,opacity:i==null?void 0:`${i}`};return k("div",{styles:v},y)}_renderMiddleStopRampLabel(t){const i=t.length%2!=0?t[t.length/2|0]:null;return i?k("div",{class:De.intervalSeparatorsContainer},k("div",{class:De.intervalSeparator},"|"),this._renderRampLabel(i)):null}_renderRampLabel(t){return k("div",{class:De.rampLabel},cie(t,this.legendElement.type,this.messages))}};c([p()],Nh.prototype,"effectList",void 0),c([p()],Nh.prototype,"legendElement",void 0),c([p()],Nh.prototype,"messages",void 0),c([p()],Nh.prototype,"opacity",void 0),Nh=c([I("esri.widgets.Legend.styles.card.ColorRamp")],Nh);const pDe=Nh,fDe="#ddd",Zf=window.devicePixelRatio;function mDe(e){var i,r;if(!e)return;if(e.type.includes("3d")){if(!((i=e.symbolLayers)!=null&&i.length))return;const s=e.symbolLayers.at(-1),n=(r=s.resource)==null?void 0:r.primitive;return n==="circle"||n==="cross"||n==="kite"||n==="sphere"||n==="cube"||n==="diamond"}const t=e.style;return t==="circle"||t==="diamond"||t==="cross"}function yDe(e){var t,i;if(e){if(e.type.includes("3d")){if(!((t=e.symbolLayers)!=null&&t.length))return;const r=e.symbolLayers.at(-1),s=(i=r==null?void 0:r.resource)==null?void 0:i.primitive;return s==="triangle"||s==="cone"||s==="tetrahedron"}return e.style==="triangle"}}let Fh=class extends Ji{constructor(t,i){super(t,i),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){const{legendElement:t,hasIndicators:i,opacity:r}=this,s=t.infos,{label:n,...o}=s.at(0),{label:l,...d}=s.at(-1);let h=o.preview,y=d.preview;const v={"flex-direction":i?"column":"row-reverse"};h&&(h=h.cloneNode(!0),h.style.display="flex"),y&&(y=y.cloneNode(!0),y.style.display="flex");const b={opacity:r!=null?`${r}`:""};return k("div",{class:this.classes(De.layerRow,{[De.sizeRampRow]:i})},k("div",{class:De.rampLabel},i?n:l),k("div",{class:De.sizeRampContainer,styles:v},k("div",{afterCreate:Wi,bind:h,class:De.sizeRampPreview,styles:b}),this._renderSizeRampLines(t),k("div",{afterCreate:Wi,bind:y,class:De.sizeRampContainer,styles:b})),k("div",{class:De.rampLabel},i?l:n))}_renderSizeRampLines(t){const i=t.infos,r=i[0],s=i.at(-1),n=r.symbol,o=this.hasIndicators,l=mi(r.size+r.outlineSize)*Zf,d=mi(s.size+s.outlineSize)*Zf,h=o?l:l+50*Zf,y=o?l/2+50*Zf:l,v=yDe(n),b=mDe(n),w=document.createElement("canvas");w.width=h,w.height=y,w.style.width=w.width/Zf+"px",w.style.height=w.height/Zf+"px";const E=w.getContext("2d");if(o){E.beginPath();const T=0,$=0,A=h/2-d/2,O=y;E.moveTo(T,$),E.lineTo(A,O);const L=h,R=0,N=h/2+d/2,j=y;E.moveTo(L,R),E.lineTo(N,j)}else{E.beginPath();const T=0,$=y/2-d/2,A=h;E.moveTo(T,$),E.lineTo(A,0);const L=0,R=y/2+d/2,N=h,j=y;E.moveTo(L,R),E.lineTo(N,j)}return E.strokeStyle=fDe,E.stroke(),k("div",{afterCreate:Wi,bind:w,styles:o?{display:"flex",marginTop:`-${v?0:b?l/2:0}px`,marginBottom:`-${v?d:b?d/2:0}px`}:{display:"flex",marginRight:`-${v?0:b?l/2:0}px`,marginLeft:`-${v?0:b?d/2:0}px`}})}};c([p()],Fh.prototype,"hasIndicators",void 0),c([p()],Fh.prototype,"legendElement",void 0),c([p()],Fh.prototype,"messages",void 0),c([p()],Fh.prototype,"opacity",void 0),Fh=c([I("esri.widgets.Legend.styles.card.SizeRamp")],Fh);const gDe=Fh,vDe=zE(),hie=10,mN=20,H$=10,yN=20,gN={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function bDe(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return e==="vertical"?k("svg",{height:"4",width:"10"},k("line",{style:t,x1:"0",x2:"10",y1:"2",y2:"2"})):k("svg",{height:"10",width:"10"},k("line",{style:t,x1:"5",x2:"5",y1:"0",y2:"10"}))}function _De(e,t="vertical"){const i=document.createElement("div");return i.style.height=`${mN}px`,i.className=gN.univariateAboveAndBelowSymbol,e!=null&&(i.style.opacity=e.toString()),vDe.append(i,bDe.bind(null,t)),i}function pie(e,t,i="vertical",r){e.infos.forEach((s,n)=>{if(r&&n===2)s.preview=_De(t,i);else{const o=mi(s.size)+(i==="horizontal"?yN:H$),l=s.preview,d=(l==null?void 0:l.tagName.toLowerCase())==="div",h=d?l:document.createElement("div");h.className=gN.univariateAboveAndBelowSymbol,i==="horizontal"?h.style.width=`${o}px`:h.style.height=`${o}px`,!d&&l&&h.appendChild(l),s.preview=h}})}function W$(e,t="classic"){const i=e.infos;return t==="classic"?(mi(i[0].size)+H$)/2:(mi(i[0].size)-mi(i[i.length-1].size))/2}function jy(e,t){if(!e)return null;const i=e.infos.map(s=>s.color),r=Ph(t.type==="full"?i:t.type==="above"?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList,ariaLabel:t.ariaLabel});return r.className=gN.colorRamp,t.opacity!=null&&(r.style.opacity=t.opacity.toString()),r}function vN(e,t,i,r="vertical"){let s=0;const n=e.infos,o=Math.floor(n.length/2),l=t==="full"||t==="above"?0:o,d=t==="full"||t==="below"?n.length-1:o;for(let h=l;h<=d;h++)i&&h===o?s+=r==="horizontal"?hie:mN:s+=mi(n[h].size)+(r==="horizontal"?yN:H$);return Math.round(s)}function Uy(e,t,i,r="vertical"){const s=vN(e,t,i,r),n=e.infos,o=Math.floor(n.length/2),l=t==="full"||t==="above"?0:o,d=t==="full"||t==="below"?n.length-1:o,h=t==="full"?n[l].size+n[d].size:t==="above"?n[l].size:n[d].size,y=i?r==="vertical"?mN:hie:0,v=r==="vertical"?H$*(t==="full"?2:1):yN*(t==="full"?2:1);return Math.round(s-(mi(h)/2+y/2+v/2))}function fie(e,t,i="vertical"){const r=e.infos;let s=r.find(({type:o})=>o==="size-ramp"),n=r.find(({type:o})=>o==="color-ramp");return s&&(s={...s},s.infos=[...s.infos],pie(s,t,i,!0)),n&&(n={...n},n.infos=[...n.infos]),i==="horizontal"&&(s==null||s.infos.reverse(),n==null||n.infos.reverse()),{sizeRampElement:s,colorRampElement:n}}function mie(e,t="vertical"){const i=e.infos;let r=i.find(({type:n})=>n==="size-ramp"),s=i.find(({type:n})=>n==="color-ramp");return r&&(r={...r},r.infos=[...r.infos],pie(r,null,t,!1)),s&&(s={...s},s.infos=[...s.infos]),t==="horizontal"&&(r==null||r.infos.reverse(),s==null||s.infos.reverse()),{sizeRampElement:r,colorRampElement:s}}const rP={marginLeft:"3px"},Qm={display:"table-cell",verticalAlign:"middle"},yie={display:"flex",alignItems:"flex-start"};let Vh=class extends Ji{constructor(t,i){super(t,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var j;const{legendElement:t,opacity:i,effectList:r,key:s}=this,{sizeRampElement:n,colorRampElement:o}=fie(t,i,"horizontal");if(!n)return null;const l=vN(n,"full",!0,"horizontal"),d=Uy(n,"above",!0,"horizontal"),h=Uy(n,"below",!0,"horizontal"),y=12,v=(j=this.messages)==null?void 0:j.previewColorRampAriaLabel,b=jy(o,{width:d,height:y,rampAlignment:"horizontal",opacity:i,type:"above",effectList:r,ariaLabel:v}),w=jy(o,{width:h,height:y,rampAlignment:"horizontal",opacity:i,type:"below",effectList:r,ariaLabel:v}),E=W$(n,"card"),T=n.infos.map(V=>V.label),$=T.length-1,A=T.map((V,Z)=>Z===0||Z===$?k("div",{key:Z},V):null),O={display:"flex",flexDirection:"column"},L={display:"flex",flexDirection:"row"},R={marginTop:"3px",display:"flex"};n$(this.container)?R.marginRight=`${E}px`:R.marginLeft=`${E}px`;const N={width:`${l}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return k("div",{class:De.layerRow,key:`${s}-container`,styles:O},k("div",{class:this.classes(De.symbolContainer,De.sizeRampHorizontal),styles:L},n.infos.map((V,Z)=>k("div",{afterCreate:Wi,bind:V.preview,class:De.symbol,key:Z}))),b?k("div",{class:De.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:R},k("div",{afterCreate:Wi,bind:b}),k("div",{afterCreate:Wi,bind:w})):null,k("div",{class:De.layerInfo},k("div",{class:De.rampLabelsContainer,styles:N},A)))}};c([p()],Vh.prototype,"effectList",void 0),c([p()],Vh.prototype,"legendElement",void 0),c([p()],Vh.prototype,"messages",void 0),c([p()],Vh.prototype,"opacity",void 0),Vh=c([I("esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp")],Vh);const wDe=Vh;let zh=class extends Ji{constructor(t,i){super(t,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var A;const{legendElement:t,opacity:i,effectList:r,key:s}=this,{sizeRampElement:n,colorRampElement:o}=mie(t,"horizontal");if(!n)return null;const l=vN(n,"full",!1,"horizontal"),d=Uy(n,"full",!1,"horizontal"),h=jy(o,{width:d,height:12,rampAlignment:"horizontal",opacity:i,type:"full",effectList:r,ariaLabel:(A=this.messages)==null?void 0:A.previewColorRampAriaLabel}),y=W$(n,"card"),v=n.infos.length-1,b=n.infos.map((O,L)=>L===0||L===v?k("div",{key:L},O.label):null),w={display:"flex",flexDirection:"column"},E={display:"flex",flexDirection:"row"},T={marginTop:"3px",display:"flex"};n$(this.container)?T.marginRight=`${y}px`:T.marginLeft=`${y}px`;const $={width:`${l}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return k("div",{class:De.layerRow,key:`${s}-container`,styles:w},k("div",{class:this.classes(De.symbolContainer,De.sizeRampHorizontal),styles:E},n.infos.map((O,L)=>k("div",{afterCreate:Wi,bind:O.preview,class:De.symbol,key:L}))),k("div",{class:De.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:T},k("div",{afterCreate:Wi,bind:h})),k("div",{class:De.layerInfo},k("div",{class:De.rampLabelsContainer,styles:$},b)))}};c([p()],zh.prototype,"effectList",void 0),c([p()],zh.prototype,"legendElement",void 0),c([p()],zh.prototype,"messages",void 0),c([p()],zh.prototype,"opacity",void 0),zh=c([I("esri.widgets.Legend.styles.card.UnivariateColorSizeRamp")],zh);const SDe=zh;function X2({level:e,class:t,...i},r){const s=gie(e);return k(`h${s}`,{...i,"aria-level":String(s),class:Um(Tr.heading,t),role:"heading"},r)}function gie(e){return _n(Math.ceil(e),1,6)}function EDe(e,t=1){return gie(e+t)}var sP;let Po=sP=class extends Ji{constructor(e,t){super(e,t),this.effectList=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),t=die(this.legendElement,this.messages),i=this.hasIndicators&&!this.isChild?k("div",null,k(X2,{class:De.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),k(X2,{class:De.layerCaption,level:EDe(this.headingLevel)},t)):t?k(X2,{class:De.layerCaption,level:this.headingLevel},t):null;return k("section",{"aria-labelledby":this.key,class:De.section,id:`${this.key}-panel`,key:this.key,role:"tabpanel",tabIndex:0},i,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return k(gDe,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return k(pDe,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return Ate(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return k("div",{afterCreate:Wi,bind:this.legendElement.preview,class:De.pieChartRampPreview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return k(wDe,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return k(SDe,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){var n,o,l;const t=e.infos.map(d=>this._renderElementInfo(d,e.legendType)).filter(Boolean);if(!t.length)return null;const i=this.activeLayerInfo.legendElements.some(({type:d})=>d==="relationship-ramp"),r=(l=(o=(n=t[0])==null?void 0:n.properties)==null?void 0:o.classes)==null?void 0:l[De.symbolRow],s={[De.labelContainer]:!r&&!i,[De.relationshipLabelContainer]:i};return k("div",{class:this.classes(s)},t)}_renderElementInfo(e,t){var l;const{layer:i}=this,r="label"in e?e.label:null,s=`${this.key}-${r}`;if("type"in e&&e.type)return k(sP,{activeLayerInfo:this.activeLayerInfo,effectList:this.effectList,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:s,layer:i,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;const n=uie(i,t),o=zy(this.messages,r,!1)||"";if("src"in e&&e.src)return k("div",{class:De.layerRow,key:`${s}-row`},this._renderImage(e,i,n),k("div",{class:De.imageLabel},o));if("symbol"in e&&e.preview){if(!((l=e.symbol)!=null&&l.type.includes("simple-fill"))){if(!e.label)return k("div",{afterCreate:Wi,bind:e.preview,key:`${s}-row`});const d={[De.symbolCell]:this.hasIndicators};return k("div",{class:this.classes(De.layerRow,{[De.symbolRow]:this.hasIndicators}),key:`${s}-row`},k("div",{afterCreate:Wi,bind:e.preview,class:this.classes(d)}),k("div",{class:this.classes(De.imageLabel,{[De.labelCell]:this.hasIndicators})},o))}return k("div",{class:De.layerRow,key:`${s}-row`},k("div",{class:De.labelElement,styles:this._getBackgroundStyles(e)},o))}return null}_getBackgroundStyles(e){var v,b;const t=e.symbol,i=t.color,r=!!(i!=null&&i.a),s="outline"in t?t.outline:null,n=!!((v=s==null?void 0:s.color)!=null&&v.a),o=new ye(r&&i?[i.r,i.g,i.b,i.a*this.layer.opacity]:[255,255,255,0]),l=n&&s.color?new ye([s.color.r,s.color.g,s.color.b,s.color.a*this.layer.opacity]):new ye([255,255,255,0]),d=((b=e.symbol.color)==null?void 0:b.isBright)??!0,h=d?"black":"white",y=d?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:r?o.toCss(!0):"none",color:h,textShadow:`-1px -1px 0 ${y},
                  1px -1px 0 ${y},
                  -1px 1px 0 ${y},
                  1px 1px 0 ${y}`,border:n?`1px solid ${l.toCss(!0)}`:"none",filter:Q_(this.effectList)??void 0}}_renderImage(e,t,i){const{label:r,src:s,opacity:n}=e,o={[De.imageryLayerStretchedImage]:i,[De.symbol]:!i},l={opacity:`${n??t.opacity}`},d=zy(this.messages,r,!1);return k("img",{alt:d,"aria-label":d,border:0,class:this.classes(o),height:e.height,src:s,styles:l,width:e.width})}};c([p()],Po.prototype,"activeLayerInfo",void 0),c([p()],Po.prototype,"effectList",void 0),c([p()],Po.prototype,"hasIndicators",void 0),c([p()],Po.prototype,"headingLevel",void 0),c([p()],Po.prototype,"isChild",void 0),c([p()],Po.prototype,"layer",void 0),c([p()],Po.prototype,"legendElement",void 0),c([p()],Po.prototype,"messages",void 0),Po=sP=c([I("esri.widgets.Legend.styles.card.LegendElement")],Po);const sG=Po,TDe=768;let Ea=class extends Ji{constructor(e,t){super(e,t),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}loadDependencies(){return ng({carousel:()=>D(()=>import("./index-B78cHmlO.js"),__vite__mapDeps([442,261,262,259,263,264,392,322,266,305,269,271,323,314,297,260])),"carousel-item":()=>D(()=>import("./index-CaCkR99s.js").then(e=>e.i),__vite__mapDeps([324,259]))})}render(){this._hasIndicators=this.layout==="auto"&&this.view&&this.view.container.clientWidth<=TDe||this.layout==="stack";const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),t={[De.stacked]:this._hasIndicators};return k("div",{class:this.classes(De.base,t)},e||k("div",{class:De.message},this.messages.noLegend))}_renderCarousel(){const e=[],t=this.activeLayerInfos;if(t)for(const i of t)this._renderSections(i,e);return e!=null&&e.length?k("calcite-carousel",{class:De.carousel,label:this.messages.carousel},e.map((i,r)=>k("calcite-carousel-item",{class:De.carouselItem,key:r,label:Ub(this.messagesCommon.pagination.pageText,{index:r+1,total:e.length})},i))):null}_renderLayers(){var i;const e=this.activeLayerInfos,t=(i=e==null?void 0:e.toArray())==null?void 0:i.map(r=>this._renderLegendForLayer(r)).filter(Boolean);return t!=null&&t.length?t:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.toArray().map(this._renderLegendForLayer,this);return k("section",{class:this.classes(De.service,De.groupLayer),key:e.layer.uid},k("div",{class:De.serviceCaptionContainer},e.title),t)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){var s;const t=(s=e.legendElements)==null?void 0:s.filter(Boolean);if(!(t!=null&&t.length))return null;const i=t.map(n=>k(sG,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${n.type}`,layer:e.layer,legendElement:n,messages:this.messages})),r={[De.groupLayerChild]:!!e.parent};return k("section",{class:this.classes(De.service,r),key:e.layer.uid},k("div",{class:De.serviceCaptionContainer},k("div",{class:De.serviceCaptionText},e.title)),k("div",{class:De.serviceContent},i))}_renderSections(e,t){if(!e.ready)return;if(e.children.length)for(const r of e.children)this._renderSections(r,t);const i=e.legendElements;if(i!=null&&i.length)for(const r of i){const s=k(sG,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${r.type}`,layer:e.layer,legendElement:r,messages:this.messages});s&&t.push(s)}}};c([p()],Ea.prototype,"activeLayerInfos",void 0),c([p()],Ea.prototype,"headingLevel",void 0),c([p()],Ea.prototype,"layout",void 0),c([p(),ja("esri/widgets/Legend/t9n/Legend")],Ea.prototype,"messages",void 0),c([p(),ja("esri/t9n/common")],Ea.prototype,"messagesCommon",void 0),c([p({readOnly:!0})],Ea.prototype,"type",void 0),c([p()],Ea.prototype,"view",void 0),Ea=c([I("esri.widgets.Legend.styles.card.CardView")],Ea);const lI=Ea,Kt="esri-legend",je={service:`${Kt}__service`,label:`${Kt}__service-label`,layer:`${Kt}__layer`,groupLayer:`${Kt}__group-layer`,groupLayerChild:`${Kt}__group-layer-child`,layerTable:`${Kt}__layer-table`,layerTableSizeRamp:`${Kt}__layer-table--size-ramp`,layerChildTable:`${Kt}__layer-child-table`,layerCaption:`${Kt}__layer-caption`,layerBody:`${Kt}__layer-body`,layerRow:`${Kt}__layer-row`,layerInfo:`${Kt}__layer-cell ${Kt}__layer-cell--info`,imageryLayerStretchedImage:`${Kt}__imagery-layer-image--stretched`,imageryLayerInfoStretched:`${Kt}__imagery-layer-info--stretched`,symbolContainer:`${Kt}__layer-cell ${Kt}__layer-cell--symbols`,symbol:`${Kt}__symbol`,rampContainer:`${Kt}__ramps`,sizeRamp:`${Kt}__size-ramp`,colorRamp:`${Kt}__color-ramp`,opacityRamp:`${Kt}__opacity-ramp`,rampLabelsContainer:`${Kt}__ramp-labels`,rampLabel:`${Kt}__ramp-label`,message:`${Kt}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"},$De=24;let jh=class extends Ji{constructor(e,t){super(e,t),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const t=this.legendElement.type==="opacity-ramp"?je.opacityRamp:"";return e.className=`${je.colorRamp} ${t}`,this.opacity!=null&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:t}=this;if(!t)return null;const i={width:`${$De}px`},r={height:t.style.height};return k("div",{class:je.layerRow,key:`${this.key}-row`},k("div",{class:je.symbolContainer,styles:i},k("div",{afterCreate:Wi,bind:t,class:je.rampContainer})),k("div",{class:je.layerInfo},k("div",{class:je.rampLabelsContainer,styles:r},e.infos.map((s,n)=>this._renderRampLabel(s,n,e.type)))))}_renderRampLabel(e,t,i){return k("div",{class:e.label?je.rampLabel:void 0,key:`${this.key}-stop-${e.label??t}-label`},cie(e,i,this.messages))}};c([p()],jh.prototype,"_preview",null),c([p()],jh.prototype,"legendElement",void 0),c([p()],jh.prototype,"messages",void 0),c([p()],jh.prototype,"opacity",void 0),jh=c([I("esri.widgets.Legend.styles.classic.ColorRamp")],jh);const xDe=jh;let eb=class extends Ji{constructor(e,t){super(e,t),this.legendElement=null}render(){const e=this.legendElement.infos.map(t=>this._renderRow(t)).filter(Boolean);return e.length?k("div",{class:je.layerBody},e):null}_renderRow(e){return e.preview?k("div",{class:je.layerRow,key:`${this.key}-${e.label}-row`},k("div",{class:this.classes(je.symbolContainer,je.sizeRamp)},k("div",{afterCreate:Wi,bind:e.preview,class:je.symbol})),k("div",{class:je.layerInfo},zy(this.messages,e.label,!1)||"")):null}};c([p()],eb.prototype,"legendElement",void 0),c([p()],eb.prototype,"messages",void 0),eb=c([I("esri.widgets.Legend.styles.classic.SizeRamp")],eb);const MDe=eb;let Uh=class extends Ji{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,effectList:i,key:r}=this,{sizeRampElement:s,colorRampElement:n}=fie(e,t);if(!s)return null;const o=this.messages.previewColorRampAriaLabel,l=Uy(s,"above",!0),d=Uy(s,"below",!0),h=12,y=jy(n,{width:h,height:l,rampAlignment:"vertical",opacity:t,type:"above",effectList:i,ariaLabel:o}),v=jy(n,{width:h,height:d,rampAlignment:"vertical",opacity:t,type:"below",effectList:i,ariaLabel:o}),b=W$(s),w=s.infos.map(j=>j.label),E=w.map((j,V)=>V===0?k("div",{class:j?y?je.univariateAboveAndBelowLabel:je.rampLabel:void 0,key:`${r}-color-ramp-above-label-${j??V}`},j):V===2?k("div",null):null),T=w.length-1,$=Math.floor(w.length/2),A=w.map((j,V)=>V===$||V===T?k("div",{class:j?y?je.univariateAboveAndBelowLabel:je.rampLabel:void 0,key:`${r}-color-ramp-below-label-${j??V}`},j):null),O={display:"table-cell",verticalAlign:"middle"},L={marginTop:`${b}px`},R={height:`${l}px`},N={height:`${d}px`};return k("div",{key:`${r}-container`,styles:yie},k("div",{class:je.layerBody},s.infos.map((j,V)=>k("div",{class:this.classes(je.layerRow,je.sizeRamp),key:`${r}-row-${V}`},k("div",{afterCreate:Wi,bind:j.preview,class:je.symbol,styles:O}),y||V%2!=0?null:k("div",{class:je.layerInfo},w[V])))),y?k("div",{styles:L},k("div",{styles:rP},k("div",{styles:Qm},k("div",{afterCreate:Wi,bind:y,class:je.rampContainer})),k("div",{styles:Qm},k("div",{class:je.rampLabelsContainer,styles:R},E))),k("div",{styles:rP},k("div",{styles:Qm},k("div",{afterCreate:Wi,bind:v,class:je.rampContainer})),k("div",{styles:Qm},k("div",{class:je.rampLabelsContainer,styles:N},A)))):null)}};c([p()],Uh.prototype,"effectList",void 0),c([p()],Uh.prototype,"legendElement",void 0),c([p()],Uh.prototype,"messages",void 0),c([p()],Uh.prototype,"opacity",void 0),Uh=c([I("esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp")],Uh);const ADe=Uh;let Gh=class extends Ji{constructor(t,i){super(t,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var $;const{legendElement:t,opacity:i,effectList:r,key:s}=this,{sizeRampElement:n,colorRampElement:o}=mie(t);if(!n)return null;const l=W$(n),d=12,h=Uy(n,"full",!1),y=jy(o,{width:d,height:h,rampAlignment:"vertical",opacity:i,type:"full",effectList:r,ariaLabel:($=this.messages)==null?void 0:$.previewColorRampAriaLabel}),v=n.infos.length-1,b=n.infos.map((A,O)=>O===0||O===v?k("div",{class:A.label?o?je.univariateAboveAndBelowLabel:je.rampLabel:void 0,key:`${s}-color-ramp-label-${A.label??O}`},A.label):null),w={display:"table-cell",verticalAlign:"middle"},E={marginTop:`${l}px`},T={height:`${h}px`};return k("div",{key:`${s}-container`,styles:yie},k("div",{class:je.layerBody},n.infos.map((A,O)=>k("div",{class:this.classes(je.layerRow,je.sizeRamp),key:`${s}-row-${O}`},k("div",{afterCreate:Wi,bind:A.preview,class:je.symbol,styles:w})))),k("div",{styles:E},k("div",{styles:rP},k("div",{styles:Qm},k("div",{afterCreate:Wi,bind:y,class:je.rampContainer})),k("div",{styles:Qm},k("div",{class:je.rampLabelsContainer,styles:T},b)))))}};c([p()],Gh.prototype,"effectList",void 0),c([p()],Gh.prototype,"legendElement",void 0),c([p()],Gh.prototype,"messages",void 0),c([p()],Gh.prototype,"opacity",void 0),Gh=c([I("esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp")],Gh);const IDe=Gh;var nP;let wc=nP=class extends Ji{constructor(e,t){super(e,t),this.effectList=null,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),t=die(this.legendElement,this.messages),i=this.isChild?je.layerChildTable:je.layerTable,r=t?k("div",{class:je.layerCaption},t):null,s={[je.layerTableSizeRamp]:this.legendElement.type==="size-ramp"||!this.isChild};return k("section",{class:this.classes(i,s),key:`${this.key}-table`},r,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return k(MDe,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return k(xDe,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return Ate(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return k("div",{afterCreate:Wi,bind:this.legendElement.preview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return k(ADe,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return k(IDe,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const t=e.infos.map(i=>this._renderElementInfo(i,e.legendType)).filter(Boolean);return t.length?k("div",{class:je.layerBody},t):null}_renderElementInfo(e,t){const{layer:i}=this,r="label"in e?e.label:null,s=`${this.key}-${r}`;if("type"in e&&e.type)return k(nP,{effectList:this.effectList,isChild:!0,key:s,layer:i,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;const n=uie(i,t),o={[je.imageryLayerInfoStretched]:n},l={[je.imageryLayerInfoStretched]:n};return k("div",{class:je.layerRow,key:`${s}-row`},k("div",{class:this.classes(je.symbolContainer,l)},this._renderPreview(e,n)),k("div",{class:this.classes(je.layerInfo,o)},zy(this.messages,r,!1)||""))}_renderPreview(e,t){const{layer:i}=this;return"preview"in e&&e.preview?k("div",{afterCreate:Wi,bind:e.preview,class:je.symbol}):"src"in e&&e.src?this._renderImage(e,i,t):null}_renderImage(e,t,i){const{label:r,src:s,opacity:n}=e,o={[je.imageryLayerStretchedImage]:i,[je.symbol]:!i},l={opacity:`${n??t.opacity}`},d=zy(this.messages,r,!1);return k("img",{alt:d,"aria-label":d,border:0,class:this.classes(o),height:e.height,src:s,styles:l,width:e.width})}};c([p()],wc.prototype,"effectList",void 0),c([p()],wc.prototype,"isChild",void 0),c([p()],wc.prototype,"layer",void 0),c([p()],wc.prototype,"legendElement",void 0),c([p()],wc.prototype,"messages",void 0),wc=nP=c([I("esri.widgets.Legend.styles.classic.LegendElement")],wc);const CDe=wc,ODe=`${Kt}__`;let qh=class extends Ji{constructor(e,t){super(e,t),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,t=e==null?void 0:e.toArray().map(i=>this._renderLegendForLayer(i)).filter(Boolean);return t!=null&&t.length?k("section",null,t):k("div",{class:je.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(e,t){if(!e.ready)return null;const i=`${e.layer.uid}-version-${e.version}`,r=`${ODe}${t?`${t}-`:""}${i}`,s=e.title?X2({level:this.headingLevel,class:this.classes(Tr.heading,je.label)},e.title):null;if(e.children.length){const n=e.children.toArray().map(o=>this._renderLegendForLayer(o,i));return k("section",{class:this.classes(je.service,je.groupLayer),key:r},s,n)}return this._renderLegendElementsForLayer(e,s,r)}_renderLegendElementsForLayer(e,t,i){var o;const r=(o=e.legendElements)==null?void 0:o.filter(Boolean);if(!(r!=null&&r.length))return null;const s=r.map(l=>k(CDe,{effectList:e.effectList,isChild:!1,key:`${i}-${l.type}`,layer:e.layer,legendElement:l,messages:this.messages})),n={[je.groupLayerChild]:!!e.parent};return k("section",{class:this.classes(je.service,n),key:i},t,k("div",{class:je.layer},s))}};c([p()],qh.prototype,"activeLayerInfos",void 0),c([p()],qh.prototype,"headingLevel",void 0),c([p(),ja("esri/widgets/Legend/t9n/Legend")],qh.prototype,"messages",void 0),c([p({readOnly:!0})],qh.prototype,"type",void 0),qh=c([I("esri.widgets.Legend.styles.classic.ClassicView")],qh);const Yf=qh,LDe={base:"esri-legend"};let nr=class extends Ji{constructor(e,t){super(e,t),this.headingLevel=3,this.messages=null,this.style=new Yf,this.viewModel=new aDe}initialize(){this.addHandles([zs(()=>this.view,"resize",()=>this.scheduleRender()),zs(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),ve(()=>this.headingLevel,e=>{const{style:t}=this;t&&(t.headingLevel=e)}),ve(()=>this.style,(e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)},yt)])}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return"legend"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}castStyle(e){if(e instanceof lI||e instanceof Yf)return e;if(typeof e=="string")return e==="card"?new lI:new Yf;if(e&&typeof e.type=="string"){const t={...e};return delete t.type,e.type==="card"?new lI(t):new Yf(t)}return new Yf}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return k("div",{class:this.classes(LDe.base,Tr.widget,this.style instanceof Yf?Tr.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach(t=>{this.removeHandles(`version_${t.layer.uid}`),this._renderOnActiveLayerInfoChange(t)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const t=ve(()=>e.version,()=>this.scheduleRender());this.addHandles(t,`version_${e.layer.uid}`);const i=zs(()=>e.children,"change",()=>e.children.forEach(r=>this._renderOnActiveLayerInfoChange(r)),yt);this.addHandles(i,`version_${e.layer.uid}`),e.children.forEach(r=>this._renderOnActiveLayerInfoChange(r))}};c([p()],nr.prototype,"activeLayerInfos",null),c([p()],nr.prototype,"basemapLegendVisible",null),c([p()],nr.prototype,"groundLegendVisible",null),c([p()],nr.prototype,"headingLevel",void 0),c([p()],nr.prototype,"hideLayersNotInCurrentView",null),c([p()],nr.prototype,"keepCacheOnDestroy",null),c([p()],nr.prototype,"respectLayerDefinitionExpression",null),c([p()],nr.prototype,"respectLayerVisibility",null),c([p()],nr.prototype,"icon",null),c([p()],nr.prototype,"label",null),c([p()],nr.prototype,"layerInfos",null),c([p(),ja("esri/widgets/Legend/t9n/Legend")],nr.prototype,"messages",void 0),c([p()],nr.prototype,"style",void 0),c([mt("style")],nr.prototype,"castStyle",null),c([p()],nr.prototype,"view",null),c([p()],nr.prototype,"viewModel",void 0),nr=c([I("esri.widgets.Legend")],nr);const vie=nr,RDe=Object.freeze(Object.defineProperty({__proto__:null,default:vie},Symbol.toStringTag,{value:"Module"})),PDe=({id:e,label:t,activeId:i,view:r,panelStyle:s})=>{const n=Qr.useRef(null),o=Qr.useRef(null),l=Qr.useRef(null);return Qr.useEffect(()=>{if(!(!r||!n.current))return e==="layers"&&!o.current&&(o.current=new HLe({view:r,container:n.current})),e==="legend"&&!l.current&&(l.current=new vie({view:r,container:n.current})),()=>{var d,h;(d=o.current)==null||d.destroy(),o.current=null,(h=l.current)==null||h.destroy(),l.current=null}},[e,r]),li.jsxs("calcite-block",{open:!0,"data-block-id":e,hidden:i!==e,style:s,children:[li.jsx("h3",{style:{margin:"0 0 0.5rem"},children:t}),e==="layers"&&li.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[li.jsx("div",{ref:n}),li.jsx("p",{style:{margin:0},children:"Click to toggle visibility"})]}),e==="legend"&&li.jsx("div",{ref:n}),e==="query"&&li.jsx(Gee,{})]})},kDe=({view:e})=>{const[t,i]=Qr.useState("query"),r=Qr.useCallback(n=>i(o=>o===n?null:n),[]),s=[{id:"query",icon:"query",label:"Query"},{id:"layers",icon:"layers",label:"Layers"},{id:"legend",icon:"legend",label:"Legend"}];return li.jsxs("calcite-panel",{id:"app-heading",width:"l",children:[li.jsx(vLe,{actions:s,activeId:t,onSelect:r}),s.map(({id:n,label:o})=>li.jsx(PDe,{id:n,label:o,activeId:t,view:e,panelStyle:{padding:"0.5rem 1rem"}},n))]})};gLe();function DDe(){const{mapDivRef:e,view:t}=oLe();return console.log("App view",t),li.jsxs(li.Fragment,{children:[li.jsx("calcite-shell",{children:li.jsx("calcite-shell-panel",{id:"shell-panel-nav",slot:"panel-end","display-mode":"float",height:"l",children:li.jsx(kDe,{view:t})})}),li.jsx("div",{ref:e,style:{height:"100vh",width:"100%"}}),li.jsx(Gee,{})]})}const NDe=Lse.createRoot(document.getElementById("root"));NDe.render(li.jsx(Qr.StrictMode,{children:li.jsx(DDe,{})}));export{WW as $,Dee as A,yQ as B,ob as C,vje as D,lr as E,Wy as F,ts as G,Ia as H,Be as I,zse as J,dj as K,j$e as L,bje as M,kze as N,It as O,Rt as P,BW as Q,rT as R,Eje as S,Tje as T,eze as U,eEe as V,Jz as W,Yz as X,Zz as Y,Wz as Z,D as _,gje as a,yi as a$,lp as a0,_k as a1,HW as a2,ae as a3,BV as a4,FFe as a5,P4e as a6,m_ as a7,dy as a8,Ry as a9,vs as aA,se as aB,Jw as aC,Y4e as aD,TJ as aE,gs as aF,rp as aG,dfe as aH,Y as aI,e9 as aJ,KU as aK,Cp as aL,bt as aM,IR as aN,TNe as aO,Yr as aP,N9e as aQ,D9e as aR,EOe as aS,TOe as aT,ET as aU,nF as aV,B5e as aW,SOe as aX,ur as aY,rt as aZ,Ywe as a_,kE as aa,ui as ab,Jn as ac,fP as ad,bn as ae,Yt as af,w_ as ag,Ua as ah,Zy as ai,Ci as aj,a6e as ak,n6e as al,o6e as am,tt as an,Pa as ao,T_ as ap,qo as aq,Xo as ar,_n as as,Fze as at,$a as au,Xz as av,Hz as aw,CG as ax,Ny as ay,jJ as az,fje as b,ibe as b$,iIe as b0,V$ as b1,J3e as b2,X3e as b3,Q3e as b4,q as b5,sK as b6,U_e as b7,su as b8,nd as b9,bCe as bA,kwe as bB,rSe as bC,uL as bD,See as bE,mCe as bF,Eee as bG,wee as bH,xCe as bI,_Ce as bJ,oCe as bK,uCe as bL,QT as bM,wwe as bN,jH as bO,ZT as bP,gpe as bQ,qhe as bR,Bhe as bS,Hhe as bT,Wwe as bU,ut as bV,Bde as bW,ot as bX,Pe as bY,$p as bZ,R_ as b_,jhe as ba,Ky as bb,ck as bc,vpe as bd,iW as be,Lpe as bf,c as bg,p as bh,I as bi,cUe as bj,uUe as bk,_e as bl,K_e as bm,ed as bn,dhe as bo,uhe as bp,qze as bq,Ey as br,GUe as bs,X6e as bt,cr as bu,vp as bv,bs as bw,lCe as bx,$Ce as by,oX as bz,hje as c,eo as c$,tbe as c0,ru as c1,Zi as c2,pe as c3,Yme as c4,TF as c5,rs as c6,pme as c7,vG as c8,Sy as c9,S5e as cA,E5e as cB,T5e as cC,qI as cD,_b as cE,V2e as cF,wVe as cG,st as cH,EVe as cI,Dze as cJ,tJ as cK,td as cL,zs as cM,W6e as cN,a$ as cO,oi as cP,ve as cQ,yt as cR,eg as cS,eOe as cT,La as cU,qs as cV,Zt as cW,cd as cX,ud as cY,Qc as cZ,Fa as c_,XNe as ca,kae as cb,YNe as cc,Jt as cd,e$ as ce,x_ as cf,Fe as cg,qde as ch,w0 as ci,Go as cj,D0e as ck,dke as cl,Tp as cm,V5e as cn,P0e as co,f_ as cp,cke as cq,eY as cr,Va as cs,Yk as ct,ke as cu,Ww as cv,nfe as cw,b5e as cx,w5e as cy,_5e as cz,Qze as d,xk as d$,kI as d0,ai as d1,SE as d2,PI as d3,NI as d4,oZ as d5,$X as d6,Le as d7,t_ as d8,or as d9,LV as dA,Me as dB,oee as dC,YOe as dD,M8e as dE,G_e as dF,Vs as dG,tNe as dH,Ale as dI,L9e as dJ,hC as dK,O9e as dL,mi as dM,__ as dN,Kn as dO,NFe as dP,W4e as dQ,W5e as dR,EG as dS,Ole as dT,NT as dU,FT as dV,jP as dW,UP as dX,Cle as dY,P_ as dZ,Wb as d_,tT as da,fL as db,S_e as dc,ti as dd,ij as de,kS as df,N_ as dg,aO as dh,X4e as di,_Fe as dj,zFe as dk,tu as dl,Qq as dm,qb as dn,ks as dp,xr as dq,np as dr,uI as ds,GDe as dt,G2e as du,mG as dv,LMe as dw,kOe as dx,pk as dy,s3e as dz,yje as e,Bs as e$,H5e as e0,dB as e1,aee as e2,Jve as e3,f0e as e4,J6e as e5,Da as e6,A_ as e7,wk as e8,e0e as e9,IP as eA,t5e as eB,Ufe as eC,QJ as eD,ad as eE,jwe as eF,upe as eG,Swe as eH,rX as eI,Xwe as eJ,X5e as eK,PE as eL,TT as eM,$T as eN,OPe as eO,Yi as eP,qRe as eQ,d_ as eR,ye as eS,FRe as eT,Cb as eU,vte as eV,h7e as eW,K_ as eX,BRe as eY,qFe as eZ,_9e as e_,QZ as ea,M0e as eb,K6e as ec,fn as ed,Q6e as ee,KZ as ef,Pk as eg,K5e as eh,iB as ei,VP as ej,Ele as ek,Hn as el,VT as em,KJ as en,nX as eo,Ewe as ep,iX as eq,sX as er,uP as es,cP as et,PV as eu,Qn as ev,ene as ew,nNe as ex,gae as ey,wy as ez,gQ as f,$c as f$,MFe as f0,UFe as f1,M5e as f2,hUe as f3,x$ as f4,SNe as f5,mP as f6,ld as f7,POe as f8,yOe as f9,LP as fA,Lae as fB,Pee as fC,WNe as fD,Na as fE,He as fF,tE as fG,Wc as fH,S_ as fI,be as fJ,FOe as fK,jn as fL,s7e as fM,iUe as fN,lB as fO,tB as fP,ZOe as fQ,CE as fR,vt as fS,rg as fT,jee as fU,N4e as fV,Nme as fW,Efe as fX,Z4e as fY,$r as fZ,X8 as f_,xOe as fa,JQ as fb,h3e as fc,u3e as fd,ws as fe,Dr as ff,es as fg,G_ as fh,qa as fi,l3e as fj,oMe as fk,RMe as fl,nMe as fm,Awe as fn,Iwe as fo,Qwe as fp,c3e as fq,cq as fr,e5e as fs,xT as ft,$_ as fu,Fb as fv,Rc as fw,yn as fx,Oae as fy,PT as fz,vQ as g,$4e as g$,Nb as g0,yE as g1,mt as g2,UUe as g3,BNe as g4,Iae as g5,pU as g6,VDe as g7,Lb as g8,xy as g9,tD as gA,rUe as gB,Hwe as gC,ZG as gD,DZ as gE,One as gF,Fse as gG,E7e as gH,dL as gI,iT as gJ,Ff as gK,bG as gL,wG as gM,SG as gN,WDe as gO,aNe as gP,Tze as gQ,S9e as gR,$9e as gS,T9e as gT,v9e as gU,V6e as gV,TRe as gW,i9e as gX,r9e as gY,XD as gZ,X_e as g_,cp as ga,IT as gb,sne as gc,Uc as gd,dNe as ge,Rge as gf,D_ as gg,L6e as gh,ou as gi,R6e as gj,zm as gk,P6e as gl,ap as gm,zDe as gn,jDe as go,m5e as gp,y5e as gq,Kb as gr,_i as gs,yJ as gt,dd as gu,F9 as gv,P9 as gw,T4e as gx,Cy as gy,sZ as gz,uje as h,PP as h$,HVe as h0,OR as h1,Z5e as h2,sze as h3,DS as h4,SC as h5,Vm as h6,zT as h7,Q4e as h8,Lp as h9,e4e as hA,S1e as hB,WF as hC,uB as hD,cB as hE,wi as hF,Q5e as hG,ipe as hH,tW as hI,Rwe as hJ,rW as hK,xle as hL,yme as hM,W as hN,ape as hO,mme as hP,KT as hQ,iZ as hR,UDe as hS,LS as hT,XDe as hU,Gwe as hV,Lwe as hW,H_e as hX,Zme as hY,k_ as hZ,Dae as h_,kFe as ha,EFe as hb,F4e as hc,Ume as hd,QS as he,$5e as hf,QNe as hg,iu as hh,qAe as hi,tMe as hj,lUe as hk,ZMe as hl,aUe as hm,WMe as hn,YG as ho,HUe as hp,F3 as hq,y_ as hr,Rb as hs,QMe as ht,Gy as hu,b_ as hv,Er as hw,Uwe as hx,L5e as hy,D1e as hz,Yze as i,pL as i$,Fae as i0,Vae as i1,yp as i2,_Oe as i3,qMe as i4,fOe as i5,t3e as i6,zOe as i7,FV as i8,qZ as i9,Ra as iA,Bo as iB,l_ as iC,qD as iD,f3e as iE,p3e as iF,d3e as iG,qle as iH,Dle as iI,_B as iJ,TE as iK,yFe as iL,mFe as iM,ave as iN,AW as iO,UD as iP,TUe as iQ,d4e as iR,ZE as iS,o4e as iT,lhe as iU,r7e as iV,ahe as iW,r4e as iX,Bze as iY,_je as iZ,aEe as i_,JOe as ia,m3e as ib,jOe as ic,P$ as id,XA as ie,J_ as ig,XL as ih,R$ as ii,YCe as ij,X_ as ik,a3e as il,KD as im,sfe as io,ife as ip,Jpe as iq,j8 as ir,Ym as is,Us as it,JT as iu,Hse as iv,K8 as iw,zee as ix,ty as iy,Sae as iz,wje as j,Hme as j$,ej as j0,Sze as j1,Kz as j2,Wn as j3,TX as j4,jl as j5,Ro as j6,S2 as j7,A8e as j8,FJ as j9,zhe as jA,xwe as jB,iSe as jC,sSe as jD,P1e as jE,j$ as jF,SCe as jG,eZ as jH,Mle as jI,Ple as jJ,WE as jK,Mwe as jL,eX as jM,DE as jN,Vp as jO,Nwe as jP,br as jQ,kee as jR,loe as jS,eMe as jT,EIe as jU,XMe as jV,MAe as jW,HK as jX,NAe as jY,Aq as jZ,Pq as j_,oD as ja,tL as jb,A1e as jc,VJ as jd,yj as je,Bz as jf,Fd as jg,Sr as jh,lNe as ji,zne as jj,vn as jk,VNe as jl,by as jm,TP as jn,Aae as jo,k4e as jp,_r as jq,T1e as jr,x1e as js,NJ as jt,FDe as ju,Sb as jv,hL as jw,LJ as jx,hk as jy,Ghe as jz,Wze as k,FVe as k$,zQ as k0,k9e as k1,KK as k2,vP as k3,Ba as k4,am as k5,TAe as k6,B9e as k7,KAe as k8,gOe as k9,LAe as kA,RAe as kB,PAe as kC,kAe as kD,DAe as kE,Vee as kF,WUe as kG,tne as kH,ms as kI,nZ as kJ,Jj as kK,i5e as kL,Joe as kM,KDe as kN,eNe as kO,QDe as kP,mae as kQ,Op as kR,DT as kS,ga as kT,i4e as kU,A4e as kV,MW as kW,Tfe as kX,$fe as kY,qz as kZ,VVe as k_,eIe as ka,Fo as kb,n7e as kc,By as kd,nee as ke,jD as kf,uu as kg,S7e as kh,w7e as ki,ate as kj,rI as kk,WOe as kl,FAe as km,UAe as kn,RK as ko,DD as kp,hT as kq,o3e as kr,ci as ks,WAe as kt,$Ae as ku,xAe as kv,IAe as kw,CAe as kx,jAe as ky,OAe as kz,dje as l,Hne as l$,NVe as l0,DVe as l1,jVe as l2,zVe as l3,kVe as l4,PVe as l5,sIe as l6,tN as l7,vT as l8,Ji as l9,YK as lA,WK as lB,K1e as lC,ewe as lD,H7 as lE,tX as lF,E_e as lG,Qz as lH,Eze as lI,hue as lJ,bue as lK,I_ as lL,R5e as lM,JLe as lN,k7 as lO,xp as lP,I1e as lQ,EF as lR,RVe as lS,bT as lT,AS as lU,vle as lV,q4e as lW,gP as lX,ONe as lY,CNe as lZ,hTe as l_,_Le as la,Do as lb,ALe as lc,ILe as ld,ng as le,k as lf,Tr as lg,pb as lh,qLe as li,FLe as lj,ja as lk,VLe as ll,BP as lm,mue as ln,M as lo,sE as lp,The as lq,Nae as lr,c7e as ls,Uk as lt,SFe as lu,bFe as lv,Rne as lw,$Ne as lx,BUe as ly,qUe as lz,EQ as m,xUe as m$,Bne as m0,z4e as m1,DCe as m2,HDe as m3,ft as m4,f5e as m5,p_ as m6,Nze as m7,Ub as m8,Mje as m9,C7 as mA,ys as mB,OLe as mC,Hee as mD,uY as mE,lY as mF,d$ as mG,wLe as mH,A7 as mI,Gc as mJ,xEe as mK,AEe as mL,IEe as mM,I7 as mN,M_ as mO,Gz as mP,yfe as mQ,M1e as mR,Wo as mS,mk as mT,yk as mU,eT as mV,OW as mW,YVe as mX,WVe as mY,ZVe as mZ,K2e as m_,W9e as ma,sTe as mb,jse as mc,HNe as md,eae as me,RT as mf,KNe as mg,$0e as mh,x0e as mi,GW as mj,mfe as mk,O4e as ml,vY as mm,WJ as mn,r5e as mo,Qse as mp,O6e as mq,b$ as mr,w4e as ms,_4e as mt,mJ as mu,pJ as mv,Kbe as mw,t_e as mx,nEe as my,PUe as mz,mje as n,Y5e as n$,MUe as n0,$Ue as n1,H0e as n2,u_ as n3,zAe as n4,z6e as n5,YAe as n6,jUe as n7,zUe as n8,m7 as n9,CP as nA,qNe as nB,hB as nC,DF as nD,jq as nE,JEe as nF,Nc as nG,N6e as nH,Pp as nI,zo as nJ,Hge as nK,t4e as nL,eW as nM,Gme as nN,M4e as nO,x4e as nP,F_ as nQ,V_ as nR,z_ as nS,PCe as nT,VCe as nU,ope as nV,spe as nW,npe as nX,$1e as nY,H_ as nZ,o_e as n_,Bc as na,Gb as nb,NOe as nc,cpe as nd,tpe as ne,rpe as nf,X0 as ng,Yl as nh,AY as ni,Wk as nj,ig as nk,Cve as nl,owe as nm,nze as nn,DNe as no,wJ as np,JE as nq,Dy as nr,Ca as ns,Qk as nt,KO as nu,cJ as nv,B_ as nw,F6e as nx,_G as ny,Dq as nz,nu as o,CK as o$,ZNe as o0,WG as o1,vFe as o2,gFe as o3,MP as o4,bpe as o5,ype as o6,Pwe as o7,mpe as o8,dve as o9,p7e as oA,zp as oB,DRe as oC,A0 as oD,fs as oE,wpe as oF,Rpe as oG,hy as oH,u_e as oI,_ee as oJ,a4e as oK,$pe as oL,kCe as oM,FCe as oN,fUe as oO,ble as oP,hY as oQ,mUe as oR,ug as oS,LD as oT,T3e as oU,E3e as oV,lg as oW,EK as oX,EPe as oY,U3e as oZ,TPe as o_,dge as oa,f7e as ob,T_e as oc,VD as od,A3e as oe,a7e as of,P5e as og,p5e as oh,Lk as oi,tee as oj,Jc as ok,CMe as ol,BMe as om,HMe as on,OMe as oo,e3e as op,iOe as oq,bOe as or,Gf as os,tj as ot,YEe as ou,wze as ov,oEe as ow,oj as ox,nj as oy,C1e as oz,cje as p,IVe as p$,yT as p0,_K as p1,Mb as p2,e_ as p3,Z1e as p4,fAe as p5,pAe as p6,A7e as p7,I7e as p8,ip as p9,fk as pA,a_e as pB,$_e as pC,IA as pD,f4e as pE,YE as pF,Jwe as pG,G$ as pH,U_ as pI,Dp as pJ,q5e as pK,uNe as pL,j4e as pM,jFe as pN,od as pO,k6e as pP,AIe as pQ,ka as pR,Ep as pS,fze as pT,SX as pU,E4e as pV,gT as pW,w9e as pX,yze as pY,mze as pZ,AVe as p_,y$ as pa,M7e as pb,sk as pc,ENe as pd,x7e as pe,$7e as pf,WY as pg,YDe as ph,OJ as pi,KFe as pj,e8e as pk,t8e as pl,BVe as pm,hj as pn,CVe as po,yxe as pp,Xn as pq,E$ as pr,CJ as ps,RJ as pt,s1e as pu,I8e as pv,p1e as pw,C8e as px,Jhe as py,p4e as pz,F$e as q,Z6e as q$,t9 as q0,_$ as q1,W_ as q2,SB as q3,A5e as q4,__e as q5,c_e as q6,d_e as q7,C4e as q8,M_e as q9,v5e as qA,g5e as qB,Ule as qC,Um as qD,iJ as qE,Une as qF,jne as qG,n$ as qH,nTe as qI,n4e as qJ,EE as qK,Pze as qL,ar as qM,L$ as qN,L7 as qO,C9e as qP,MVe as qQ,r9 as qR,KMe as qS,VMe as qT,DUe as qU,Y6e as qV,U6e as qW,B6e as qX,G6e as qY,H6e as qZ,q6e as q_,Wh as qa,gj as qb,CX as qc,cze as qd,dze as qe,hze as qf,pze as qg,XVe as qh,KVe as qi,QVe as qj,MEe as qk,Gle as ql,Xl as qm,F_e as qn,Kk as qo,pfe as qp,I4e as qq,x5e as qr,Qb as qs,iq as qt,_z as qu,Jbe as qv,Xbe as qw,zI as qx,z5e as qy,I5e as qz,aje as r,l9e as r$,_s as r0,Ige as r1,C6e as r2,Rze as r3,NUe as r4,lF as r5,j6e as r6,S9 as r7,g9 as r8,lfe as r9,g9e as rA,o7 as rB,a7 as rC,l7 as rD,p9e as rE,h9e as rF,e7 as rG,f9 as rH,i7 as rI,K9 as rJ,x9 as rK,a9 as rL,o9 as rM,n9 as rN,p9 as rO,h$ as rP,oze as rQ,c9e as rR,d9e as rS,x9e as rT,CR as rU,a9e as rV,t9e as rW,uee as rX,z$ as rY,u9e as rZ,QIe as r_,v9 as ra,k9 as rb,b9 as rc,J4e as rd,$9 as re,G9 as rf,q9 as rg,B9 as rh,Mfe as ri,L4e as rj,cfe as rk,HI as rl,H9 as rm,R4e as rn,w1e as ro,n9e as rp,E9e as rq,o9e as rr,b9e as rs,D4e as rt,M9e as ru,U4e as rv,JVe as rw,m9e as rx,f9e as ry,y9e as rz,pje as s,pB as s$,rze as s0,XIe as s1,w$ as s2,eCe as s3,ize as s4,s9e as s5,fEe as s6,tze as s7,fj as s8,OVe as s9,j0e as sA,qX as sB,Zb as sC,Jb as sD,ky as sE,z0e as sF,iNe as sG,Qd as sH,X9e as sI,vxe as sJ,T7e as sK,J9e as sL,bLe as sM,H4e as sN,y8e as sO,fJ as sP,JH as sQ,KG as sR,Tpe as sS,bme as sT,m_e as sU,u7e as sV,l7e as sW,tRe as sX,G8 as sY,e6e as sZ,Z2e as s_,LVe as sa,aze as sb,lze as sc,gze as sd,vze as se,UVe as sf,bze as sg,_ze as sh,Q2e as si,iEe as sj,UX as sk,_y as sl,uze as sm,JNe as sn,O1e as so,Xle as sp,Jle as sq,C5e as sr,hoe as ss,eG as st,wke as su,F0e as sv,p6e as sw,f6e as sx,X2 as sy,Dk as sz,Yh as t,wFe as t$,B4e as t0,nUe as t1,Kfe as t2,CUe as t3,IUe as t4,Uz as t5,Oze as t6,Cze as t7,Ize as t8,TEe as t9,ZFe as tA,JDe as tB,fle as tC,TFe as tD,V4e as tE,DFe as tF,Vy as tG,_ge as tH,nwe as tI,HJ as tJ,kNe as tK,fS as tL,vV as tM,p$ as tN,AUe as tO,Kc as tP,ite as tQ,d7e as tR,AR as tS,BDe as tT,Nse as tU,qDe as tV,$Fe as tW,$ze as tX,Cwe as tY,IFe as tZ,Qhe as t_,IX as ta,qVe as tb,GVe as tc,wEe as td,Lze as te,xVe as tf,Lge as tg,YH as th,k1e as ti,Uae as tj,RFe as tk,PFe as tl,kpe as tm,Ppe as tn,tSe as to,dUe as tp,zbe as tq,E8e as tr,j3e as ts,Sve as tt,VFe as tu,xFe as tv,CFe as tw,AFe as tx,rNe as ty,YFe as tz,Hze as u,dPe as u0,e9e as u1,nte as u2,Gm as u3,gve as u4,uve as u5,FK as u6,Pte as u7,kte as u8,bAe as u9,q$ as uA,tz as uB,_7e as uC,_pe as uD,l6e as uE,c6e as uF,Vze as uG,Fp as uH,kUe as uI,Y9e as uJ,v_e as ua,J5e as ub,r_e as uc,lve as ud,xNe as ue,HP as uf,y7e as ug,WR as uh,YP as ui,c4e as uj,g7e as uk,v7e as ul,OFe as um,u4e as un,rz as uo,l4e as up,G4e as uq,iz as ur,Tk as us,PG as ut,cNe as uu,LFe as uv,hpe as uw,lpe as ux,b7e as uy,m7e as uz,lje as v,Sje as w,Xze as x,B as y,G5e as z};
